<!doctypehtml><html lang=en><meta charset=utf-8><link href=/favicon.ico rel=icon><meta content="width=device-width,initial-scale=1"name=viewport><meta content=#000000 name=theme-color><meta content="Web site created using create-react-app"name=description><link href=/logo192.png rel=apple-touch-icon><link href=/manifest.json rel=manifest><title>React App</title><style>@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap);.tl-container{--space-1:2px;--space-2:4px;--space-3:8px;--space-4:12px;--space-5:16px;--space-6:20px;--space-7:28px;--space-8:32px;--space-9:64px;--space-10:72px;--radius-0:2px;--radius-1:4px;--radius-2:7px;--radius-3:9px;--radius-4:12px;--radius-5:16px;--layer-grid:150;--layer-canvas:200;--tl-zoom:1;--tl-cursor-default:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path d="M12 24.422V8.407l11.591 11.619H16.81l-.411.124z" fill="%23fff"/><path d="m21.084 25.096-3.605 1.535-4.682-11.089 3.686-1.553z" fill="%23fff"/><path d="m19.751 24.416-1.844.774-3.1-7.374 1.841-.775z" fill="%23000"/><path d="M13 10.814v11.188l2.969-2.866.428-.139h4.768z" fill="%23000"/></g></svg>') 12 8,pointer;--tl-cursor-pointer:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path d="M13.332 21.38c-.285-.36-.63-1.093-1.244-1.984-.347-.504-1.21-1.453-1.467-1.935-.224-.426-.2-.617-.147-.97.094-.628.738-1.117 1.425-1.051.52.049.96.392 1.356.716.238.195.532.574.71.788.163.196.203.277.377.509.23.307.302.459.214.12-.071-.495-.187-1.342-.355-2.091-.128-.568-.16-.657-.281-1.093-.13-.464-.195-.79-.316-1.281-.084-.348-.235-1.06-.276-1.46-.057-.546-.087-1.438.264-1.848.274-.321.905-.418 1.296-.22.513.259.804 1.003.937 1.3.239.534.387 1.15.516 1.96.163 1.032.465 2.463.475 2.764.024-.37-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.37 1.899.384 1.83.086-.375.071-1.228.284-1.583.14-.234.497-.445.687-.48.294-.051.655-.067.964-.007.25.049.586.345.677.487.218.344.342 1.317.38 1.658.014.14.073-.392.292-.736.406-.64 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.03.4-.117 1.304-.242 1.742-.086.3-.37.978-.652 1.384 0 0-1.074 1.25-1.19 1.813-.119.562-.08.566-.103.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.39-.063-.875-.841-1-1.08-.172-.327-.539-.264-.682-.022-.225.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06z" fill="%23fff"/><g stroke="%23000" stroke-linecap="round" stroke-width=".75"><path d="M13.332 21.38c-.285-.36-.63-1.093-1.244-1.984-.347-.504-1.21-1.453-1.467-1.935-.224-.426-.2-.617-.147-.97.094-.628.738-1.117 1.425-1.051.52.049.96.392 1.356.716.238.195.532.574.71.788.163.196.203.277.377.509.23.307.302.459.214.12-.071-.495-.187-1.342-.355-2.091-.128-.568-.16-.657-.281-1.093-.13-.464-.195-.79-.316-1.281-.084-.348-.235-1.06-.276-1.46-.057-.546-.087-1.438.264-1.848.274-.321.905-.418 1.296-.22.513.259.804 1.003.937 1.3.239.534.387 1.15.516 1.96.163 1.032.465 2.463.475 2.764.024-.37-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.37 1.899.384 1.83.086-.375.071-1.228.284-1.583.14-.234.497-.445.687-.48.294-.051.655-.067.964-.007.25.049.586.345.677.487.218.344.342 1.317.38 1.658.014.14.073-.392.292-.736.406-.64 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.03.4-.117 1.304-.242 1.742-.086.3-.37.978-.652 1.384 0 0-1.074 1.25-1.19 1.813-.119.562-.08.566-.103.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.39-.063-.875-.841-1-1.08-.172-.327-.539-.264-.682-.022-.225.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06z" stroke-linejoin="round"/><path d="M21.566 21.734v-3.459M19.55 21.746l-.015-3.473M17.555 18.305l.02 3.426"/></g></g></svg>') 14 10,pointer;--tl-cursor-cross:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path d="M25 16h-6.01v-6h-2.98v6H10v3h6.01v6h2.98v-6H25z" fill="%23fff"/><path d="M23.99 17.01h-6V11h-.98v6.01h-6v.98h6V24h.98v-6.01h6z" fill="%23231f1f"/></g></svg>') 16 16,pointer;--tl-cursor-move:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path d="M19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221L17 24.985 24.984 17z" fill="%23fff"/><g fill="%23000"><path d="m23.566 16.997-2.557-2.809v1.83H13v-1.83l-2.572 2.81L13 19.804v-1.808h8.01l-.002 1.808z"/><path d="M17.987 17H18v-4.001l1.807.001L17 10.429l-2.809 2.57h1.81V17h.007v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z"/></g></g></svg>') 16 16,pointer;--tl-cursor-grab:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path d="M13.556 17.574c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.72-.496-1.18a12.1 12.1 0 0 1-.457-1.44 1.427 1.427 0 0 1 .244-1.207c.253-.339.962-.49 1.357-.35.37.13.744.511.916.787.288.46.357.632.717 1.542.393.992.564 1.918.61 2.231l.086.452-.044-1.162a49.535 49.535 0 0 1-.038-2.939c.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979a1.71 1.71 0 0 1 1.4-.017c.424.173.627.55.688 1.022.014.11.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.47.06-.657.094-3.19.344-3.943.144-.433.405-.746.794-.929.43-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.02.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182a16.413 16.413 0 0 1 .625-1.604c.114-.234.21-.369.415-.688.2-.313.415-.448.668-.56.54-.236 1.109.111 1.3.59.087.215.01.713-.027 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.36 1.82-.085.301-.37.978-.651 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.4.12.923.12.923s-.801.104-1.233.034c-.391-.062-.875-.84-1-1.078-.172-.328-.54-.265-.682-.023-.225.383-.71 1.07-1.051 1.113-.668.084-2.054.03-3.14.02 0 0 .186-1.01-.226-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.92c-.284-.36-.63-1.094-1.243-1.986-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.51.23.306.302.458.214.12" fill="%23fff"/><g stroke="%23000" stroke-linecap="round" stroke-width=".75"><path d="M13.556 17.574c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.72-.496-1.18a12.1 12.1 0 0 1-.457-1.44 1.427 1.427 0 0 1 .244-1.207c.253-.339.962-.49 1.357-.35.37.13.744.511.916.787.288.46.357.632.717 1.542.393.992.564 1.918.61 2.231l.086.452-.044-1.162a49.535 49.535 0 0 1-.038-2.939c.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979a1.71 1.71 0 0 1 1.4-.017c.424.173.627.55.688 1.022.014.11.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.47.06-.657.094-3.19.344-3.943.144-.433.405-.746.794-.929.43-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.02.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182a16.413 16.413 0 0 1 .625-1.604c.114-.234.21-.369.415-.688.2-.313.415-.448.668-.56.54-.236 1.109.111 1.3.59.087.215.01.713-.027 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.36 1.82-.085.301-.37.978-.651 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.4.12.923.12.923s-.801.104-1.233.034c-.391-.062-.875-.84-1-1.078-.172-.328-.54-.265-.682-.023-.225.383-.71 1.07-1.051 1.113-.668.084-2.054.03-3.14.02 0 0 .186-1.01-.226-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.92c-.284-.36-.63-1.094-1.243-1.986-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.51.23.306.302.458.214.12" stroke-linejoin="round"/><path d="M20.566 21.734v-3.459M18.55 21.746l-.015-3.473M16.555 18.305l.02 3.426"/></g></g></svg>') 16 16,pointer;--tl-cursor-grabbing:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path d="M13.573 12.036c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.69.285-.087.62-.117.916-.056.313.064.642.287.765.5.362.622.368 1.898.385 1.83.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.25.05.586.344.677.487.22.344.342 1.316.38 1.658.015.141.073-.393.292-.736.406-.639 1.844-.763 1.898.64.026.653.02.623.02 1.063 0 .516-.012.828-.04 1.202-.03.4-.116 1.304-.24 1.742-.087.301-.372.978-.654 1.384 0 0-1.074 1.25-1.19 1.812-.118.563-.079.567-.103.965-.023.4.121.923.121.923s-.8.104-1.234.034c-.39-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.01-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.92c-.283-.36-1.002-.93-1.243-1.986-.213-.936-.192-1.395.037-1.77.232-.38.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.16.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.36-.4-.943-.38-1.526.008-.22.103-.77.832-1.042" fill="%23fff"/><g stroke="%23000" stroke-width=".75"><path d="M13.573 12.036c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.69.285-.087.62-.117.916-.056.313.064.642.287.765.5.362.622.368 1.898.385 1.83.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.25.05.586.344.677.487.22.344.342 1.316.38 1.658.015.141.073-.393.292-.736.406-.639 1.844-.763 1.898.64.026.653.02.623.02 1.063 0 .516-.012.828-.04 1.202-.03.4-.116 1.304-.24 1.742-.087.301-.372.978-.654 1.384 0 0-1.074 1.25-1.19 1.812-.118.563-.079.567-.103.965-.023.4.121.923.121.923s-.8.104-1.234.034c-.39-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.01-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.92c-.283-.36-1.002-.93-1.243-1.986-.213-.936-.192-1.395.037-1.77.232-.38.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.16.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.36-.4-.943-.38-1.526.008-.22.103-.77.832-1.042z" stroke-linejoin="round"/><path d="M20.566 19.734v-3.459M18.55 19.746l-.015-3.473M16.555 16.305l.02 3.426" stroke-linecap="round"/></g></g></svg>') 16 16,pointer;--tl-cursor-text:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path fill="%23fff" d="M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z"/><path fill="%23000" d="M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z"/></g></svg>') 4 10,pointer;--tl-cursor-zoom-in:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path d="M20.5 15a5.5 5.5 0 1 1-11 0 5.5 5.5 0 1 1 11 0" fill="%23fff"/><path d="M20.5 15a5.5 5.5 0 1 1-11 0 5.5 5.5 0 1 1 11 0z" stroke="%23000"/><g fill="%23000"><path d="M18 14h-2v-2h-2v2h-2v1.98h2V18h2v-2.02h2zM23.586 25 25 23.586l-5.45-5.449-1.413 1.414z"/></g></g></svg>') 16 16,pointer;--tl-cursor-zoom-out:url('data:image/svg+xml;charset=utf-8,<svg height="32" width="32" xmlns="http://www.w3.org/2000/svg" style="color:%23000"><g fill="none" filter="url(%23shadow)"><path d="M20.5 15a5.5 5.5 0 1 1-11 0 5.5 5.5 0 1 1 11 0" fill="%23fff"/><path d="M20.5 15a5.5 5.5 0 1 1-11 0 5.5 5.5 0 1 1 11 0z" stroke="%23000"/><g fill="%23000"><path d="M18 16h-5.98v-1.98H18zM23.586 25 25 23.586l-5.45-5.449-1.413 1.414z"/></g></g></svg>') 16 16,pointer;--tl-cursor:var(--tl-default-svg);--tl-cursor-none:none;--tl-cursor-default:default;--tl-cursor-pointer:pointer;--tl-cursor-cross:crosshair;--tl-cursor-move:move;--tl-cursor-grab:grab;--tl-cursor-grabbing:grabbing;--tl-cursor-text:text;--tl-cursor-resize-edge:ew-resize;--tl-cursor-resize-corner:nesw-resize;--tl-cursor-ew-resize:ew-resize;--tl-cursor-ns-resize:ns-resize;--tl-cursor-nesw-resize:nesw-resize;--tl-cursor-nwse-resize:nwse-resize;--tl-cursor-rotate:pointer;--tl-cursor-nwse-rotate:pointer;--tl-cursor-nesw-rotate:pointer;--tl-cursor-senw-rotate:pointer;--tl-cursor-swne-rotate:pointer;--tl-cursor-zoom-in:zoom-in;--tl-cursor-zoom-out:zoom-out;--tl-scale:calc(1 / var(--tl-zoom));--tl-font-draw:"tldraw_draw",sans-serif;--tl-font-sans:"tldraw_sans",sans-serif;--tl-font-serif:"tldraw_serif",serif;--tl-font-mono:"tldraw_mono",monospace;--a:calc(min(0.5, 1 / var(--tl-zoom)) * 2px);--b:calc(min(0.5, 1 / var(--tl-zoom)) * -2px);--tl-text-outline:0 var(--b) 0 var(--color-background),0 var(--a) 0 var(--color-background),var(--b) var(--b) 0 var(--color-background),var(--a) var(--b) 0 var(--color-background),var(--a) var(--a) 0 var(--color-background),var(--b) var(--a) 0 var(--color-background);font-size:12px;height:100%;left:0;overflow:hidden;position:relative;top:0;width:100%}.tl-theme__light{--color-accent:#e64a4a;--color-background:#f9fafb;--color-brush-fill:hsla(0, 0%, 56%, 0.102);--color-brush-stroke:hsla(0, 0%, 56%, 0.251);--color-grid:hsla(0, 0%, 56%, 0.902);--color-low:#edf0f2;--color-culled:#ebeef0;--color-muted-0:rgba(0, 0, 0, 0.02);--color-muted-1:rgba(0, 0, 0, 0.1);--color-muted-2:rgba(0, 0, 0, 0.035);--color-hint:rgba(0, 0, 0, 0.055);--color-overlay:rgba(0, 0, 0, 0.2);--color-divider:#e8e8e8;--color-panel-contrast:#fff;--color-panel-overlay:hsla(0, 0%, 100%, 0.82);--color-panel:#fdfdfd;--color-focus:#004094;--color-selected:#2f80ed;--color-selected-contrast:#fff;--color-selection-fill:#1e90ff06;--color-selection-stroke:#2f80ed;--color-text-0:#1d1d1d;--color-text-1:#2d2d2d;--color-text-2:#5f6369;--color-text-3:#b6b7ba;--color-primary:#2f80ed;--color-warn:#d10b0b;--color-text:#000;--color-laser:red;--palette-black:#1d1d1d;--palette-blue:#4263eb;--palette-green:#099268;--palette-grey:#adb5bd;--palette-light-blue:#4dabf7;--palette-light-green:#40c057;--palette-light-red:#ff8787;--palette-light-violet:#e599f7;--palette-orange:#f76707;--palette-red:#e03131;--palette-violet:#ae3ec9;--palette-white:#fff;--palette-yellow:#ffc078;--palette-solid:#fcfffe;--palette-black-semi:#e8e8e8;--palette-blue-semi:#dce1f8;--palette-green-semi:#d3e9e3;--palette-grey-semi:#eceef0;--palette-light-blue-semi:#ddedfa;--palette-light-green-semi:#dbf0e0;--palette-light-red-semi:#f4dadb;--palette-light-violet-semi:#f5eafa;--palette-orange-semi:#f8e2d4;--palette-red-semi:#f4dadb;--palette-violet-semi:#ecdcf2;--palette-white-semi:#fff;--palette-yellow-semi:#f9f0e6;--palette-black-pattern:#494949;--palette-blue-pattern:#6681ee;--palette-green-pattern:#39a785;--palette-grey-pattern:#bcc3c9;--palette-light-blue-pattern:#6fbbf8;--palette-light-green-pattern:#65cb78;--palette-light-red-pattern:#fe9e9e;--palette-light-violet-pattern:#e9acf8;--palette-orange-pattern:#f78438;--palette-red-pattern:#e55959;--palette-violet-pattern:#bd63d3;--palette-white-pattern:#fff;--palette-yellow-pattern:#fecb92;--palette-black-highlight:#fddd00;--palette-grey-highlight:#cbe7f1;--palette-green-highlight:#00ffc8;--palette-light-green-highlight:#65f641;--palette-blue-highlight:#10acff;--palette-light-blue-highlight:#00f4ff;--palette-violet-highlight:#c77cff;--palette-light-violet-highlight:#f8f;--palette-red-highlight:#ff636e;--palette-light-red-highlight:#ff7fa3;--palette-orange-highlight:orange;--palette-yellow-highlight:#fddd00;--shadow-1:0px 1px 2px rgba(0, 0, 0, 0.22),0px 1px 3px rgba(0, 0, 0, 0.09);--shadow-2:0px 0px 2px rgba(0, 0, 0, 0.12),0px 2px 3px rgba(0, 0, 0, 0.24),0px 2px 6px rgba(0, 0, 0, 0.1),inset 0px 0px 0px 1px var(--color-panel-contrast);--shadow-3:0px 1px 2px rgba(0, 0, 0, 0.25),0px 2px 6px rgba(0, 0, 0, 0.14),inset 0px 0px 0px 1px var(--color-panel-contrast);--shadow-4:0px 0px 3px rgba(0, 0, 0, 0.16),0px 5px 4px rgba(0, 0, 0, 0.16),0px 2px 16px rgba(0, 0, 0, 0.06),inset 0px 0px 0px 1px var(--color-panel-contrast)}.tl-theme__dark{--color-accent:#e64a4a;--color-background:#212529;--color-brush-fill:hsla(0, 0%, 71%, 0.05);--color-brush-stroke:hsla(0, 0%, 71%, 0.25);--color-grid:#909090e6;--color-low:#2c3136;--color-culled:#2f3439;--color-muted-0:hsla(0, 0%, 100%, 0.02);--color-muted-1:hsla(0, 0%, 100%, 0.1);--color-muted-2:hsla(0, 0%, 100%, 0.05);--color-hint:hsla(0, 0%, 100%, 0.1);--color-overlay:rgba(0, 0, 0, 0.35);--color-divider:#49555f;--color-panel-contrast:#49555f;--color-panel:#363d44;--color-panel-overlay:rgba(54, 61, 68, 0.82);--color-focus:#a5c3f3;--color-selected:#4285f4;--color-selected-contrast:#fff;--color-selection-fill:rgba(38, 150, 255, 0.05);--color-selection-stroke:#2f80ed;--color-text-0:#f0eded;--color-text-1:#d9d9d9;--color-text-2:#8e9094;--color-text-3:#515a62;--color-primary:#2f80ed;--color-warn:#d10b0b;--color-text:#f8f9fa;--color-laser:red;--palette-black:#e1e1e1;--palette-blue:#4156be;--palette-green:#3b7b5e;--palette-grey:#93989f;--palette-light-blue:#588fc9;--palette-light-green:#599f57;--palette-light-red:#c67877;--palette-light-violet:#b583c9;--palette-orange:#bf612e;--palette-red:#aa3c37;--palette-violet:#873fa3;--palette-white:#1d1d1d;--palette-yellow:#cba371;--palette-solid:#28292e;--palette-black-semi:#2c3036;--palette-blue-semi:#262d40;--palette-green-semi:#253231;--palette-grey-semi:#33373c;--palette-light-blue-semi:#2a3642;--palette-light-green-semi:#2a3830;--palette-light-red-semi:#3b3235;--palette-light-violet-semi:#383442;--palette-orange-semi:#3a2e2a;--palette-red-semi:#36292b;--palette-violet-semi:#31293c;--palette-white-semi:#fff;--palette-yellow-semi:#3c3934;--palette-black-pattern:#989898;--palette-blue-pattern:#3a4b9e;--palette-green-pattern:#366a53;--palette-grey-pattern:#7c8187;--palette-light-blue-pattern:#4d7aa9;--palette-light-green-pattern:#4e874e;--palette-light-red-pattern:#a56767;--palette-light-violet-pattern:#9770a9;--palette-orange-pattern:#9f552d;--palette-red-pattern:#8f3734;--palette-violet-pattern:#763a8b;--palette-white-pattern:#fff;--palette-yellow-pattern:#fecb92;--palette-black-highlight:#d2b700;--palette-grey-highlight:#9cb4cb;--palette-green-highlight:#009774;--palette-light-green-highlight:#00a000;--palette-blue-highlight:#0079d2;--palette-light-blue-highlight:#00bdc8;--palette-violet-highlight:#9e00ee;--palette-light-violet-highlight:#c400c7;--palette-red-highlight:#de002c;--palette-light-red-highlight:#db005b;--palette-orange-highlight:#d07a00;--palette-yellow-highlight:#d2b700;--shadow-1:0px 1px 2px #00000029,0px 1px 3px #00000038,inset 0px 0px 0px 1px var(--color-panel-contrast);--shadow-2:0px 1px 3px #00000077,0px 2px 6px #00000055,inset 0px 0px 0px 1px var(--color-panel-contrast);--shadow-3:0px 1px 3px #00000077,0px 2px 12px rgba(0, 0, 0, 0.22),inset 0px 0px 0px 1px var(--color-panel-contrast)}@media (color-gamut:p3){.tl-theme__light:not(.tl-theme__force-sRGB){--palette-black-highlight:color(display-p3 0.972 0.8705 0.05);--palette-grey-highlight:color(display-p3 0.8163 0.9023 0.9416);--palette-green-highlight:color(display-p3 0.2536 0.984 0.7981);--palette-light-green-highlight:color(display-p3 0.563 0.9495 0.3857);--palette-blue-highlight:color(display-p3 0.308 0.6632 0.9996);--palette-light-blue-highlight:color(display-p3 0.1512 0.9414 0.9996);--palette-violet-highlight:color(display-p3 0.7469 0.5089 0.9995);--palette-light-violet-highlight:color(display-p3 0.9676 0.5652 0.9999);--palette-red-highlight:color(display-p3 0.9992 0.4376 0.45);--palette-light-red-highlight:color(display-p3 0.9988 0.5301 0.6397);--palette-orange-highlight:color(display-p3 0.9988 0.6905 0.266);--palette-yellow-highlight:color(display-p3 0.972 0.8705 0.05)}.tl-theme__dark:not(.tl-theme__force-sRGB){--palette-black-highlight:color(display-p3 0.8078 0.7225 0.0312);--palette-grey-highlight:color(display-p3 0.6299 0.7012 0.7856);--palette-green-highlight:color(display-p3 0.0085 0.582 0.4604);--palette-light-green-highlight:color(display-p3 0.2711 0.6172 0.0195);--palette-blue-highlight:color(display-p3 0.0032 0.4655 0.7991);--palette-light-blue-highlight:color(display-p3 0.0023 0.7259 0.7735);--palette-violet-highlight:color(display-p3 0.5651 0.0079 0.8986);--palette-light-violet-highlight:color(display-p3 0.7024 0.0403 0.753);--palette-red-highlight:color(display-p3 0.7978 0.0509 0.2035);--palette-light-red-highlight:color(display-p3 0.7849 0.0585 0.3589);--palette-orange-highlight:color(display-p3 0.7699 0.4937 0.0085);--palette-yellow-highlight:color(display-p3 0.8078 0.7225 0.0312)}}.tl-counter-scaled{height:calc(100% * var(--tl-zoom));-webkit-transform:scale(var(--tl-scale));transform:scale(var(--tl-scale));-webkit-transform-origin:top left;transform-origin:top left;width:calc(100% * var(--tl-zoom))}.tl-container,.tl-container *{-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;scrollbar-highlight-color:transparent;outline:0;-webkit-user-select:none;user-select:none}.tl-container a{-webkit-touch-callout:initial}[contenteditable],[contenteditable] *,input{-webkit-user-select:text}.tl-canvas{background-color:var(--color-background);color:var(--color-text);contain:strict;content-visibility:auto;cursor:var(--tl-cursor);height:100%;left:0;overflow:clip;position:absolute;top:0;touch-action:none;width:100%;z-index:var(--layer-canvas)}.tl-shapes{position:relative;z-index:1}.tl-overlays{position:relative;z-index:2}.tl-overlays__item{overflow:visible;-webkit-transform-origin:top left;transform-origin:top left}.tl-overlays__item,.tl-svg-context{left:0;pointer-events:none;position:absolute;top:0}.tl-svg-context{height:1px;width:1px}.tlui-following{border-style:solid;border-width:2px;display:block;inset:0;pointer-events:none;position:absolute;z-index:9999999}.tl-background{background-color:var(--color-background);inset:0;position:absolute}.tl-grid{height:100%;left:0;pointer-events:none;position:absolute;top:0;touch-action:none;width:100%;z-index:2}.tl-grid-dot{fill:var(--color-grid)}.tl-html-layer{contain:layout style size;height:1px;left:0;position:absolute;top:0;width:1px;z-index:3}.tl-brush{stroke-width:calc(var(--tl-scale) * 1px)}.tl-brush__default{stroke:var(--color-brush-stroke);fill:var(--color-brush-fill)}.tl-scribble{stroke-linejoin:round;stroke-linecap:round;pointer-events:none}.tl-shape{overflow:visible;pointer-events:none;position:absolute;-webkit-transform-origin:top left;transform-origin:top left}.tl-shape__culled{background-color:var(--color-culled);position:relative}.tl-hitarea-stroke{fill:none;stroke:transparent;stroke-width:min(100px,calc(24px * var(--tl-scale)));pointer-events:stroke}.tl-hitarea-fill{fill:var(--color-background)}.tl-hitarea-fill,.tl-hitarea-fill-solid{stroke:transparent;stroke-width:min(100px,calc(24px * var(--tl-scale)));pointer-events:all}.tl-svg-container{overflow:visible}.tl-html-container,.tl-svg-container{stroke-linecap:round;stroke-linejoin:round;height:100%;left:0;pointer-events:none;position:absolute;top:0;-webkit-transform-origin:top left;transform-origin:top left;width:100%}.tl-html-container{color:inherit}.tl-collaborator__scribble{z-index:10}.tl-collaborator__brush{z-index:20}.tl-collaborator__shape-indicator{z-index:30}.tl-user-scribble{z-index:40}.tl-user-brush{z-index:50}.tl-user-indicator__selected{z-index:60}.tl-user-indicator__hovered{z-index:70}.tl-user-handles{z-index:80}.tl-user-snapline{z-index:90}.tl-selection__fg{pointer-events:none;z-index:100}.tl-user-indicator__hint{stroke-width:calc(2.5px * var(--tl-scale));z-index:110}.tl-collaborator__cursor-hint{z-index:120}.tl-collaborator__cursor{z-index:130}.tl-cursor{overflow:visible}.tl-shape-indicator{fill:none;stroke-width:calc(1.5px * var(--tl-scale))}.tl-selection__bg,.tl-shape-indicator{-webkit-transform-origin:top left;transform-origin:top left}.tl-selection__bg{background-color:initial;left:0;pointer-events:all;position:absolute;top:0}.tl-selection__fg__outline{fill:none}.tl-corner-handle,.tl-selection__fg__outline{stroke:var(--color-selection-stroke);stroke-width:calc(1.5px * var(--tl-scale));pointer-events:none}.tl-corner-handle{fill:var(--color-background)}.tl-text-handle{fill:var(--color-selection-stroke);pointer-events:none}.tl-corner-crop-edge-handle,.tl-corner-crop-handle{fill:none;stroke:var(--color-selection-stroke);pointer-events:none}.tl-rotate-handle{stroke:var(--color-selection-stroke);fill:var(--color-background);stroke-width:calc(1.5px * var(--tl-scale));pointer-events:all}.tl-mobile-rotate__bg{cursor:var(--tl-cursor-grab);pointer-events:all}.tl-mobile-rotate__fg{stroke:var(--color-selection-stroke);fill:var(--color-background);stroke-width:calc(1.5px * var(--tl-scale));pointer-events:none}.tl-transparent{fill:transparent;stroke:transparent}.tl-handle,.tl-handle__bg{pointer-events:all}.tl-handle__bg{fill:transparent;stroke:transparent;cursor:var(--tl-cursor-grabbing)}.tl-handle__fg{fill:var(--color-background);stroke:var(--color-selection-stroke);stroke-width:calc(1.5px * var(--tl-scale));pointer-events:none}.tl-handle__bg:active{fill:none}.tl-handle__bg:hover{fill:var(--color-selection-fill);cursor:var(--tl-cursor-grab)}.tl-handle__hint{opacity:0}.tl-handle__hint:hover{opacity:1}@media (pointer:coarse){.tl-handle__bg:active{fill:var(--color-selection-fill)}.tl-handle__hint{opacity:1}}.tl-image,.tl-video{background-size:cover;height:100%;object-fit:cover;width:100%}.tl-embed-container,.tl-image-container,.tl-video-container{align-items:center;display:flex;height:100%;justify-content:center;pointer-events:all;width:100%}.tl-image__tg{--scale:calc(min(2, var(--tl-scale)));background-color:var(--color-background);border-radius:4px;font-size:10px;padding:2px 4px;right:calc(var(--scale) * 8px);scale:var(--scale);top:calc(var(--scale) * 8px);-webkit-transform-origin:top right;transform-origin:top right}.tl-collaborator-cursor,.tl-image__tg{position:absolute}.tl-nametag{border-radius:var(--radius-2);padding:3px 6px;top:16px}.tl-nametag,.tl-nametag-title{color:var(--color-selected-contrast);font-family:var(--font-family);font-size:12px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;left:13px;max-width:120px;overflow:hidden;position:absolute;text-overflow:ellipsis;white-space:nowrap;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.tl-nametag-title{padding:0 6px;text-shadow:var(--tl-text-outline);top:-2px}.tl-nametag-chat{border-radius:var(--radius-2);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;left:13px;top:16px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.tl-cursor-chat,.tl-nametag-chat{color:var(--color-selected-contrast);font-family:var(--font-family);font-size:12px;opacity:1;padding:3px 6px;position:absolute;white-space:nowrap}.tl-cursor-chat{border:none;border-radius:var(--radius-2);margin-left:13px;margin-top:16px;pointer-events:none;-webkit-user-select:text;user-select:text;z-index:var(--layer-cursor)}.tl-cursor-chat::selection{background:var(--color-selected);color:var(--color-selected-contrast);text-shadow:none}.tl-cursor-chat-fade{opacity:.0001;transition:opacity 5s ease-in-out}.tl-cursor-chat::-webkit-input-placeholder{color:var(--color-selected-contrast);opacity:.7}.tl-cursor-chat::placeholder{color:var(--color-selected-contrast);opacity:.7}@-webkit-keyframes spinner{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spinner{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.tl-spinner:after{-webkit-animation:spinner .6s linear infinite;animation:spinner .6s linear infinite;border:2px solid #ccc;border-radius:50%;border-top-color:#000;box-sizing:border-box;content:"";height:20px;left:50%;margin-left:-10px;margin-top:-10px;pointer-events:none;position:absolute;top:50%;width:20px}.tl-iconshape__icon{height:100%;pointer-events:all;width:100%}.tl-icon-preview{height:14px;width:14px}.tl-text-shape__wrapper{-webkit-font-feature-settings:normal;font-feature-settings:normal;border:none;font-style:normal;font-variant:normal;font-weight:400;height:100%;margin:0;min-width:1px;overflow-wrap:break-word;padding:0;pointer-events:all;position:relative;text-shadow:var(--tl-text-outline);white-space:pre-wrap}.tl-text-shape__wrapper[data-align=start]{text-align:left}.tl-text-shape__wrapper[data-align=middle]{text-align:center}.tl-text-shape__wrapper[data-align=end]{text-align:right}.tl-text-shape__wrapper[data-font=draw]{font-family:var(--tl-font-draw)}.tl-text-shape__wrapper[data-font=sans]{font-family:var(--tl-font-sans)}.tl-text-shape__wrapper[data-font=serif]{font-family:var(--tl-font-serif)}.tl-text-shape__wrapper[data-font=mono]{font-family:var(--tl-font-mono)}.tl-text-shape__wrapper[data-isediting=true] .tl-text-content{opacity:0}.tl-text{-webkit-font-feature-settings:inherit;font-feature-settings:inherit;-webkit-appearance:auto;appearance:auto;background:0 0;border:0;border-image:none;caret-color:var(--color-text);color:inherit;-webkit-column-count:auto!important;-webkit-column-count:initial!important;column-count:auto!important;display:inline-block;font-family:inherit;font-size:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;outline:0;padding:0;pointer-events:all;text-align:inherit;text-indent:0;text-rendering:auto;text-shadow:inherit;text-transform:none;word-spacing:0;-webkit-writing-mode:horizontal-tb!important;writing-mode:horizontal-tb!important}.tl-text,.tl-text-measure{word-wrap:break-word;overflow-wrap:break-word;white-space:pre-wrap}.tl-text-measure{border:none;box-sizing:border-box;line-break:normal;opacity:0;pointer-events:none;position:absolute;resize:none;right:-9999px;top:-9999px;user-select:none;-webkit-user-select:none;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:999999}.tl-text-edit-container{height:100%;position:relative;width:100%}.tl-text-content,.tl-text-input{height:100%;left:0;min-height:1px;min-width:1px;overflow:visible;position:absolute;top:0;width:100%}.tl-text-content{pointer-events:none}.tl-text-input{cursor:var(--tl-cursor-text);overflow:hidden;resize:none;user-select:all;-webkit-user-select:text}.tl-text-input::selection{background:var(--color-selected);color:var(--color-selected-contrast);text-shadow:none}.tl-snap-line,.tl-snap-point{stroke:var(--color-accent);stroke-width:calc(1px * var(--tl-scale));fill:none}.tl-group{stroke:var(--color-text);stroke-width:calc(1px * var(--tl-scale));opacity:.5}.tl-bookmark__container{background-color:var(--color-panel);border:1px solid var(--color-panel-contrast);border-radius:var(--radius-2);display:flex;flex-direction:column;height:100%;overflow:hidden;position:relative;width:100%}.tl-bookmark__image_container{align-items:flex-start;border-top-left-radius:var(--radius-1);border-top-right-radius:var(--radius-1);display:flex;flex:1 1;height:100%;justify-content:flex-end;overflow:hidden;width:100%}.tl-bookmark__image_container>.tl-hyperlink-button:after{background-color:var(--color-panel)}.tl-bookmark__placeholder{background-color:var(--color-muted-2);border-bottom:1px solid var(--color-muted-2);height:100%;width:100%}.tl-bookmark__image{height:100%;object-fit:cover;object-position:center;width:100%}.tl-bookmark__copy_container{background-color:var(--color-muted);padding:var(--space-4);pointer-events:all}.tl-bookmark__description,.tl-bookmark__heading,.tl-bookmark__link{font-family:inherit;margin:0;width:100%}.tl-bookmark__heading{font-size:16px;font-weight:700;margin:4px 0;padding-bottom:var(--space-2)}.tl-bookmark__description{font-size:12px;padding-bottom:var(--space-4)}.tl-bookmark__link{color:var(--color-text);color:var(--color-text-2);cursor:var(--tl-cursor-pointer);display:block;font-size:14px;overflow:hidden;pointer-events:all;text-decoration:none;text-overflow:ellipsis;z-index:999}.tl-bookmark__link:hover{color:var(--color-selected)}.tl-hyperlink-button{align-items:center;background:0 0;border:none;color:var(--color-text-1);cursor:var(--tl-cursor-pointer);display:flex;font-size:12px;font-weight:400;height:44px;justify-content:center;margin:0;outline:0;padding:13px;pointer-events:all;position:absolute;right:0;top:0;width:44px;z-index:200}.tl-hyperlink-button:after{background-color:var(--color-background);border-radius:var(--radius-1);bottom:6px;content:"";display:block;height:calc(100% - 12px);pointer-events:none;position:absolute;right:6px;width:calc(100% - 12px);z-index:-1}.tl-hyperlink-button:hover{color:var(--color-selected)}.tl-hyperlink-button:focus-visible{color:var(--color-selected)}.tl-hyperlink-button__icon{background-color:currentColor;height:18px;pointer-events:none;width:18px}.tl-hyperlink-button__hidden{display:none}.tl-text-label{align-items:center;color:var(--color-text);display:flex;height:100%;justify-content:center;line-height:inherit;overflow:hidden;text-shadow:var(--tl-text-outline);width:100%}.tl-text-label[data-isediting=true] .tl-text-content{opacity:0}.tl-text-label[data-hastext=false][data-isediting=false]>.tl-text-label__inner{height:40px;width:40px}.tl-text-label__inner{align-items:center;display:flex;justify-content:center;min-height:auto;pointer-events:all}.tl-text-label__inner,.tl-text-label__inner>.tl-text{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.tl-text-label__inner>.tl-text{border-radius:var(--radius-1);left:0;max-width:100%;padding:16px;top:0;z-index:3}.tl-text-label__inner>.tl-text-input{height:100%;left:0;padding:16px;position:absolute;top:0;width:100%;z-index:4}.tl-text-label[data-textwrap=true]>.tl-text-label__inner{max-width:100%}.tl-text-label[data-isediting=true]{background-color:none;min-height:auto}.tl-text-label[data-isediting=true] p{opacity:0}.tl-text-label[data-align=start-legacy],.tl-text-label[data-align=start]{text-align:left}.tl-text-label[data-align=middle-legacy],.tl-text-label[data-align=middle]{text-align:center}.tl-text-label[data-align=end-legacy],.tl-text-label[data-align=end]{text-align:right}.tl-arrow-hint{stroke:var(--color-text-1);fill:none;stroke-linecap:round;overflow:visible}.tl-arrow-label[data-font=draw],.tl-text-label[data-font=draw]{font-family:var(--tl-font-draw)}.tl-arrow-label[data-font=sans],.tl-text-label[data-font=sans]{font-family:var(--tl-font-sans)}.tl-arrow-label[data-font=serif],.tl-text-label[data-font=serif]{font-family:var(--tl-font-serif)}.tl-arrow-label[data-font=mono],.tl-text-label[data-font=mono]{font-family:var(--tl-font-mono)}.tl-arrow-label{align-items:center;color:var(--color-text);display:flex;height:2px;justify-content:center;left:-1px;padding:0;position:absolute;text-shadow:var(--tl-text-outline);top:-1px;width:2px}.tl-arrow-label[data-isediting=true] p{opacity:0}.tl-arrow-label[data-isediting=true]>.tl-arrow-label__inner{background-color:var(--color-background);border:calc(var(--tl-scale) * 1.5px) solid var(--color-selected)}.tl-arrow-label__inner{align-items:center;border-radius:var(--radius-1);box-sizing:initial;display:flex;height:-webkit-max-content;height:max-content;justify-content:center;pointer-events:all;position:relative;width:-webkit-max-content;width:max-content}.tl-arrow-label p,.tl-arrow-label textarea{-webkit-font-feature-settings:inherit;font-feature-settings:inherit;word-wrap:break-word;-webkit-appearance:auto;appearance:auto;background:0 0;border:0;border-image:none;caret-color:var(--color-text);color:inherit;-webkit-column-count:auto!important;-webkit-column-count:initial!important;column-count:auto!important;display:inline-block;font-family:inherit;font-size:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;outline:0;overflow-wrap:break-word;padding:0;pointer-events:all;text-align:inherit;text-indent:0;text-rendering:auto;text-shadow:inherit;text-transform:none;white-space:pre-wrap;word-spacing:0;-webkit-writing-mode:horizontal-tb!important;writing-mode:horizontal-tb!important}.tl-arrow-label p{height:-webkit-max-content;height:max-content;overflow:visible;padding:4px;position:relative;z-index:2}.tl-arrow-label textarea{border:0;border-image:none;caret-color:var(--color-text);height:100%;margin:0;min-width:4px;padding:4px;position:absolute;resize:none;user-select:all;-webkit-user-select:text;width:100%;z-index:3}.tl-note__container{border:1px solid;border-radius:var(--radius-2);box-shadow:var(--shadow-1);height:100%;overflow:hidden;position:relative;width:100%}.tl-note__container .tl-text-label{text-shadow:none}.tl-note__scrim{left:0;opacity:.28;position:absolute;top:0;z-index:1}.tl-loading,.tl-note__scrim{background-color:var(--color-background);height:100%;width:100%}.tl-loading{align-items:center;-webkit-animation:fade-in .2s ease-in-out forwards;animation:fade-in .2s ease-in-out forwards;-webkit-animation-delay:.2s;animation-delay:.2s;color:var(--color-text-1);display:flex;flex-direction:column;font-size:14px;font-weight:500;gap:var(--space-2);justify-content:center;opacity:0}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.tl-frame__body{fill:var(--palette-solid);stroke:var(--color-text);stroke-width:calc(1px * var(--tl-scale))}.tl-frame__background{background-color:var(--palette-solid);border-color:currentColor;border-radius:calc(var(--radius-1) * var(--tl-scale));border-style:solid;border-width:calc(1px * var(--tl-scale));height:100%;pointer-events:none;position:absolute;width:100%;z-index:2}.tl-frame__hitarea{background:0 0;border-color:transparent;border-style:solid;border-width:calc(8px * var(--tl-scale));box-sizing:border-box;height:calc(100% + 16px * var(--tl-scale));left:calc(-8px * var(--tl-scale));pointer-events:stroke;position:absolute;top:calc(-8px * var(--tl-scale));width:calc(100% + 16px * var(--tl-scale));z-index:1}.tl-frame-heading{font-size:12px;height:auto;max-width:100%;min-width:32px;overflow:hidden;padding-bottom:4px;position:absolute}.tl-frame-heading,.tl-frame-heading-hit-area{align-items:center;display:flex;pointer-events:all;-webkit-transform-origin:0 100%;transform-origin:0 100%}.tl-frame-heading-hit-area{background-color:var(--color-background);border-radius:var(--radius-1);height:100%;width:100%}.tl-frame-label{font-size:inherit;overflow:hidden;padding:var(--space-3) var(--space-3);pointer-events:all;position:relative;text-overflow:ellipsis;white-space:pre}.tl-frame-label__editing{background-color:var(--color-panel);border-radius:var(--radius-1);color:transparent;outline:1.5px solid var(--color-selection-stroke);overflow:visible;white-space:pre;width:auto}.tl-frame-name-input{background:0 0;border:none;border-radius:var(--radius-1);color:var(--color-text-1);cursor:var(--tl-cursor-text);font-family:inherit;font-size:inherit;font-weight:inherit;left:0;outline:0;padding:var(--space-3) var(--space-3);position:absolute;top:0;inset:0;user-select:all;-webkit-user-select:text;white-space:pre;width:100%}@media (max-width:600px){.tl-frame-heading{font-size:16px}}.tl-embed{border:none}.tl-embed,.tl-image__button{border-radius:var(--radius-2)}.tl-image__button{background-color:var(--color-panel);box-shadow:var(--shadow-1);color:var(--color-text);cursor:var(--tl-cursor-pointer);display:flex;outline:0;padding:4px 8px;pointer-events:all}.tl-image__button:disabled{opacity:.5;pointer-events:none}.tl-image__toolbox{align-items:flex-end;display:flex;justify-content:flex-end;left:0;padding:10px;position:absolute;top:0}.tl-image__toolbox__hidden{display:none}.tl-shape-error-boundary{align-items:center;background-color:var(--color-muted-1);border-color:var(--color-muted-1);border-radius:calc(var(--radius-1) * var(--tl-scale));border-style:solid;border-width:calc(1px * var(--tl-scale));display:flex;height:100%;justify-content:center;overflow:hidden;padding:var(--space-2);pointer-events:all;position:relative;width:100%}.tl-shape-error-boundary:after{color:var(--color-text-0);content:"Error";font-family:inherit;font-size:12px;-webkit-transform:scale(var(--tl-scale));transform:scale(var(--tl-scale))}.tl-error-boundary{align-items:center;background-color:var(--color-background);color:var(--color-text-1);display:flex;height:100%;justify-content:center;padding:var(--space-4);position:absolute;width:100%;z-index:600}.tl-error-boundary__overlay{background-color:var(--color-overlay);inset:0;position:absolute;z-index:500}.tl-error-boundary__content *{pointer-events:all;user-select:all;-webkit-user-select:text}.tl-error-boundary__canvas{inset:0;pointer-events:none;position:absolute;z-index:-1}.tl-error-boundary__canvas:after{content:" ";display:block;inset:0;pointer-events:auto;position:absolute;z-index:600}.tl-error-boundary__content{background-color:var(--color-panel);border-radius:var(--radius-4);box-shadow:var(--shadow-2);display:flex;flex-direction:column;font-size:14px;font-weight:400;gap:var(--space-5);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;max-height:100%;max-width:100%;overflow:auto;padding:var(--space-6);width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;width:400px;z-index:600}.tl-error-boundary__content__expanded{width:600px}.tl-error-boundary__content h2{font-size:16px;font-weight:500;margin:0}.tl-error-boundary__content p{line-height:1.5;margin:0}.tl-error-boundary__content pre{background-color:var(--color-muted-2);border-radius:var(--radius-2);font-size:12px;margin:0;max-height:320px;overflow:auto;padding:var(--space-5)}.tl-error-boundary__content button{background:0 0;background-color:initial;border:none;border-radius:var(--radius-3);color:inherit;cursor:var(--tl-cursor-pointer);font-family:inherit;font-size:14px;font-weight:500;padding:var(--space-4)}.tl-error-boundary__content button:hover{background-color:var(--color-low)}.tl-error-boundary__content a{color:var(--color-text-1);font-weight:500;text-decoration:none}.tl-error-boundary__content a:hover{color:var(--color-text-2)}.tl-error-boundary__content__error{position:relative}.tl-error-boundary__content__error button{background-color:var(--color-panel);border-radius:var(--radius-1);font-size:12px;padding:var(--space-2) var(--space-3);position:absolute;right:var(--space-2);top:var(--space-2)}.tl-error-boundary__content__actions{display:flex;gap:var(--space-4);justify-content:space-between;margin:calc(var(--space-4) * -1);margin-top:0}.tl-error-boundary__content__actions__group{display:flex;gap:var(--space-4)}.tl-error-boundary__content .tl-error-boundary__reset{color:var(--color-warn)}.tl-error-boundary__content .tl-error-boundary__refresh{background-color:var(--color-primary);color:var(--color-selected-contrast)}.tl-error-boundary__content .tl-error-boundary__refresh:hover{background-color:var(--color-primary);opacity:.9}@media screen and (pointer:coarse){.tl-canvas__mobile .tl-handle__hint{opacity:1}}.tl-hidden{opacity:0;pointer-events:none}.debug__ui-logger{color:#555;font-family:monospace;font-size:12px;left:16px;position:absolute;top:62px}.tl-container{--layer-panels:300;--layer-menus:400;--layer-overlays:500;--layer-toasts:650;--layer-cursor:700}.tlui-layout{--sab:env(safe-area-inset-bottom);display:grid;grid-auto-rows:auto;grid-template-columns:1fr;grid-template-rows:minmax(0,1fr) auto;height:100%;max-height:100%;overflow:clip;padding:var(--space-2);pointer-events:none;position:relative;-webkit-transform:translateZ(0);-webkit-user-select:none;user-select:none;z-index:var(--layer-panels)}.tlui-layout__top{display:flex;grid-column:1;grid-row:1;min-width:0}.tlui-layout__top__left{align-items:flex-start;flex-shrink:1}.tlui-layout__top__center,.tlui-layout__top__left{display:flex;flex-direction:column;height:100%;justify-content:flex-start;width:100%}.tlui-layout__top__center{align-items:center;flex-grow:1;margin-left:var(--space-2);min-width:0}.tlui-layout__top__right{align-items:flex-end;display:flex;flex-direction:column;flex-shrink:1;height:100%;justify-content:flex-start;min-width:0;width:100%}.scrollable,.scrollable *{overscroll-behavior:none;pointer-events:all;touch-action:auto}.tlui-helper-buttons{align-items:flex-start;display:flex;flex-direction:column;gap:var(--space-3);justify-content:flex-start;margin:var(--space-3) var(--space-2);pointer-events:none;position:relative;white-space:nowrap;width:-webkit-min-content;width:min-content;z-index:var(--layer-panels)}.tlui-helper-buttons>.tlui-button{background-color:var(--color-low);border-radius:var(--radius-3);pointer-events:all}.tlui-icon{background-color:currentColor;flex-shrink:0;height:18px;width:18px}.tlui-icon__small{height:15px;width:15px}.tlui-slider{align-items:center;display:flex;position:relative;touch-action:none;-webkit-user-select:none;user-select:none}.tlui-slider__container{padding:0 var(--space-4);width:164px}.tlui-slider__track{cursor:pointer;flex-grow:1;height:44px;position:relative}.tlui-slider__track:after{background-color:var(--color-muted-1);content:"";display:block;width:100%}.tlui-slider__range,.tlui-slider__track:after{border-radius:var(--radius-4);height:3px;position:absolute;top:calc(50% - 2px)}.tlui-slider__range{background-color:var(--color-selected);left:0}.tlui-slider__thumb{all:unset;background-color:var(--color-panel);border-radius:999px;box-shadow:inset 0 0 0 2px var(--color-text-2);cursor:grab;display:block;height:18px;position:relative;top:-1px;width:18px}.tlui-slider__thumb:active{box-shadow:inset 0 0 0 2px var(--color-text-2),var(--shadow-1);cursor:grabbing}.tlui-slider__thumb:focus-visible{box-shadow:inset 0 0 0 2px var(--color-focus)}.tlui-kbd{grid-gap:1px;align-self:bottom;color:var(--color-text-2);display:grid;font-family:inherit;font-size:11px;gap:1px;grid-auto-columns:minmax(1em,auto);grid-auto-flow:column;grid-template-columns:auto;justify-items:center;line-height:11px;margin-left:var(--space-4)}.tlui-kbd>span{border-radius:2px;display:inline;margin:0;padding:2px;text-align:center;width:100%}.tlui-kbd:not(:last-child){margin-right:var(--space-2)}.tlui-button{align-items:center;background:0 0;border:none;color:var(--color-text-1);cursor:pointer;display:flex;font-family:inherit;font-size:12px;font-weight:inherit;height:44px;justify-content:center;margin:0;outline:0;overflow:hidden;padding:0 13px;position:relative;text-shadow:1px 1px 0 var(--color-panel);-webkit-user-select:none;user-select:none;white-space:nowrap;z-index:1}.tlui-button:after{background-color:initial;border-radius:var(--radius-3);bottom:4px;content:"";display:block;height:calc(100% - 8px);pointer-events:none;position:absolute;right:4px;width:calc(100% - 8px);z-index:1}.tlui-button>span{align-items:center;display:flex;overflow:hidden;text-overflow:ellipsis}.tlui-button>span:not(:only-child){flex-grow:2}.tlui-button>span>svg{margin-left:var(--space-2)}.tlui-button:disabled{cursor:default}.tlui-button:not([data-state=selected],:disabled):active:after{background:var(--color-muted-2)}@media (hover:hover){.tlui-button:not([data-state=selected],:disabled):hover:after{background:var(--color-muted-2)}}.tlui-icon-left{margin-right:var(--space-4)}.tlui-button>*{color:inherit;position:relative;z-index:100}.tlui-button>svg{height:18px;pointer-events:none;width:18px}.tlui-button:not(:disabled,:focus-visible,[data-state=open]):active{color:var(--color-text-0);z-index:2}.tlui-button:not(:hover,:disabled,[data-state=open]):focus-visible:after{box-shadow:inset 0 0 0 2px var(--color-focus)}.tlui-button[data-state=selected]:not(:hover,:disabled):focus-visible:after{box-shadow:inset 0 0 0 2px var(--color-focus)}@media (hover:hover){.tlui-button:not(:disabled,:focus-visible):hover{color:var(--color-text-0);z-index:2}.tlui-button__primary:not(:disabled,:focus-visible):hover{color:var(--color-primary)}.tlui-button__warning:not(:disabled,:focus-visible):hover{color:var(--color-warn)}}.tlui-button:disabled{color:var(--color-text-3)}.tlui-button[data-state=selected]{color:var(--color-selected-contrast)}.tlui-button[data-state=selected]:not(:disabled,:focus-visible):active{color:var(--color-selected-contrast)}@media (hover:hover){.tlui-button[data-state=selected]:not(:disabled,:focus-visible):hover{color:var(--color-selected-contrast)}}.tlui-button[data-state=selected]:not(:disabled):after{background:var(--color-selected)}.tlui-button[data-state=hinted]:after{background:var(--color-hint)}.tlui-button[data-state=hinted]:not(:disabled,:focus-visible):active:after{background:var(--color-hint)}@media (hover:hover){.tlui-button[data-state=hinted]:not(:disabled,:focus-visible):hover:after{background:var(--color-hint)}}.tlui-focus-button{pointer-events:all;z-index:var(--layer-panels)}.tlui-button.squished{height:36px;width:44px}.tlui-button__primary{color:var(--color-primary)}.tlui-button__danger,.tlui-button__warning{color:var(--color-warn)}.tlui-popover{align-content:stretch;display:flex;position:relative}.tlui-popover__content{-ms-overflow-style:none;background-color:var(--color-panel);border:none;border-radius:var(--radius-4);box-shadow:var(--shadow-3);margin:0;max-height:75vh;overflow:hidden;overflow-y:auto;overscroll-behavior:none;position:relative;scrollbar-width:none;touch-action:auto;z-index:var(--layer-menus)}.tlui-debug-panel{align-items:center;background-color:var(--color-low);border-radius:var(--radius-1);color:var(--color-text-1);display:grid;font-size:12px;grid-template-columns:1fr auto auto;justify-content:space-between;margin-top:var(--space-2);padding-left:var(--space-4);pointer-events:all;width:100%;z-index:var(--layer-panels)}.tlui-debug-panel__current-state{white-space:nowrap}.tlui-menu-zone{position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:var(--layer-panels)}.tlui-menu-zone:before{background-color:var(--color-low);border:4px solid var(--color-background);border-radius:var(--radius-1) var(--radius-1) var(--radius-5) var(--radius-1);content:"";display:block;left:0;position:absolute;top:0;inset:-4px}.tlui-menu-zone [data-state=open]:after{background:linear-gradient(180deg,hsla(0,0%,56%,0) 0,var(--color-muted-2) 100%)}.tlui-menu-zone__controls{align-items:center;border-radius:var(--radius-1) var(--radius-1) var(--radius-4) var(--radius-1);display:flex;flex-direction:row;grid-column:1;grid-row:1;pointer-events:all;position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:var(--layer-panels)}.tlui-menu-zone__divider{background-color:var(--color-muted-1);height:18px;width:1px}.tlui-menu-zone__controls>*{margin:0 -2px}.tlui-menu-zone__controls>:first-child{margin-left:0}.tlui-menu-zone__controls>:last-child{margin-right:0}.tlui-menu-zone__controls>.tlui-menu-zone__divider{margin:0}.tlui-menu-zone__controls .tlui-icon{height:15px;width:15px}.tlui-style-panel__wrapper{background-color:var(--color-panel);border-radius:var(--radius-4);box-shadow:var(--shadow-2);color:var(--color-text);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:var(--space-3) var(--space-2);max-height:100%;overflow:hidden;overflow-y:auto;overscroll-behavior:none;pointer-events:all;touch-action:auto}.tlui-style-panel{pointer-events:all;position:relative;z-index:var(--layer-panels)}.tlui-style-panel::-webkit-scrollbar{display:none}.tlui-style-panel .tlui-button.select{width:100%}.tlui-style-panel__section{display:flex;flex-direction:column;position:relative}.tlui-style-panel__section:nth-of-type(n+2):not(:last-child){border-bottom:1px solid var(--color-divider)}.tlui-style-panel__section:empty{display:none}.tlui-style-panel__section__common:not(:only-child){border-bottom:1px solid var(--color-divider);margin-bottom:7px}.tlui-style-panel__row{display:flex}.tlui-style-panel__row>:nth-child(2){margin-left:-4px}.tlui-style-panel__double-select-picker{align-items:center;display:grid;font-size:12px;grid-template-columns:1fr auto auto;padding-left:var(--space-4);width:164px}.tlui-style-panel__double-select-picker>.tlui-button{margin-left:-4px;min-width:44px}.tlui-style-panel__double-select-picker-label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tlui-style-panel__section [data-state=open]:after{background:var(--color-muted-0)}.tlui-input{background:0 0;border:none;color:var(--color-text-1);font-family:inherit;font-size:12px;font-weight:inherit;justify-content:center;margin:0;max-height:44px;outline:0;padding:13px 13px 13px 0;position:relative;text-overflow:ellipsis;user-select:all;-webkit-user-select:auto!important;z-index:1}.tlui-input,.tlui-input__wrapper{align-items:center;display:flex;height:44px;width:100%}.tlui-input__wrapper{color:var(--color-text);gap:var(--space-4)}.tlui-input__wrapper>.tlui-icon{flex-shrink:0}@media (max-width:600px){@supports (-webkit-touch-callout:none){.tlui-input{font-size:16px}}}.tlui-prompt__overlay{background:var(--color-overlay);bottom:0;display:grid;left:0;overflow-y:auto;place-items:center;position:fixed;right:0;top:0;z-index:var(--layer-overlays)}.tlui-prompt__content{background-color:var(--color-panel);border-radius:var(--radius-4);box-shadow:var(--shadow-3);cursor:default;font-size:12px;max-height:80vh;max-width:80vw;min-width:300px;overflow-y:auto;padding:var(--space-5)}.tlui-prompt__actions{border:none;display:flex;justify-content:flex-end;margin:0;margin-bottom:calc(var(--space-3) * -1);margin-right:calc(var(--space-3) * -1);padding:0}.tlui-prompt__title{font-size:12px;margin:0}.tlui-prompt__error{align-items:center;color:#d10b0b;display:flex;gap:var(--space-2)}.tlui-dialog__overlay{-webkit-animation:fadeIn .12s ease-out;animation:fadeIn .12s ease-out;background-color:var(--color-overlay);display:grid;height:100%;left:0;overflow-y:auto;place-items:center;pointer-events:all;position:absolute;top:0;width:100%;z-index:var(--layer-overlays)}.tlui-dialog__content{background-color:var(--color-panel);border-radius:var(--radius-4);box-shadow:var(--shadow-3);cursor:default;display:flex;flex-direction:column;font-size:12px;max-height:80vh;max-width:80vw;min-width:300px;overflow:hidden;position:relative}.tlui-dialog__header{align-items:center;color:var(--color-text);display:flex;flex:0 1;height:44px;padding-left:var(--space-4);position:relative;z-index:999}.tlui-dialog__header__title{color:var(--color-text-1);flex:1 1;font-size:12px;font-weight:inherit;font-weight:500;margin:0}.tlui-dialog__header__close{justify-self:flex-end}.tlui-dialog__body{color:var(--color-text-1);flex:0 1;overflow-x:hidden;overflow-y:auto;padding:var(--space-4) var(--space-6);user-select:all;-webkit-user-select:text}.tlui-dialog__footer{position:relative;z-index:999}.tlui-dialog__footer__actions{align-items:center;display:flex;justify-content:flex-end}.tlui-dialog__footer__actions>.tlui-button:nth-last-child(n+2){margin-right:-4px}.tlui-dialog__scrim{background:linear-gradient(transparent,var(--color-panel));border-bottom-left-radius:var(--radius-4);border-bottom-right-radius:var(--radius-4);bottom:0;content:"";display:block;height:40px;pointer-events:none;position:absolute;width:100%}.tlui-shortcuts-dialog__header{border-bottom:1px solid var(--color-divider)}.tlui-shortcuts-dialog__body{-webkit-columns:1;column-count:1;-webkit-column-gap:var(--space-9);column-gap:var(--space-9);pointer-events:all;position:relative;touch-action:auto}@media (min-width:475px){.tlui-shortcuts-dialog__body{-webkit-columns:2;column-count:2;-webkit-column-gap:var(--space-9);column-gap:var(--space-9)}}@media (min-width:960px){.tlui-shortcuts-dialog__body{-webkit-columns:3;column-count:3;-webkit-column-gap:var(--space-9);column-gap:var(--space-9)}}.tlui-shortcuts-dialog__group{-webkit-column-break-inside:avoid;break-inside:avoid-column;padding-bottom:var(--space-6)}.tlui-shortcuts-dialog__group__title{align-items:center;color:var(--color-text-2);display:flex;font-size:inherit;font-size:9px;font-weight:500;height:32px;letter-spacing:.5px;margin:0;text-transform:uppercase}.tlui-shortcuts-dialog__group__content{color:var(--color-text-1);display:flex;flex-direction:column}.tlui-shortcuts-dialog__key-pair{align-items:center;display:flex;gap:var(--space-4);height:32px;justify-content:space-between}.tlui-shortcuts-dialog__key-pair__key{flex:1 1;font-size:12px}.tlui-toolbar{align-items:center;display:flex;flex-grow:2;grid-column:1/span 3;grid-row:1;justify-content:center;padding-bottom:calc(var(--space-2) + var(--sab))}.tlui-toolbar__inner{align-items:flex-end;display:flex;gap:var(--space-3);position:relative}.tlui-toolbar__inner,.tlui-toolbar__left{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.tlui-toolbar__extras{height:44px;pointer-events:none;position:relative;width:100%}.tlui-toolbar__extras__hidden{display:none}.tlui-toolbar__extras__controls{background-color:var(--color-low);border-top-left-radius:var(--radius-3);border-top-right-radius:var(--radius-3);bottom:-4px;display:flex;flex-direction:row;margin-left:8px;margin-right:0;pointer-events:all;position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.tlui-toolbar__extras__controls:before{background-color:var(--color-background);border:4px solid var(--color-background);border-radius:var(--radius-4);border-bottom-left-radius:0;border-bottom-right-radius:0;content:"";display:block;left:0;position:absolute;top:0;inset:-4px;z-index:-1}.tlui-toolbar__extras__controls>.tlui-button,.tlui-toolbar__extras__controls>.tlui-popover>.tlui-button{height:40px;width:40px}.tlui-toolbar__extras__controls .tlui-button:after{border-radius:var(--radius-2)}.tlui-toolbar__lock-button{height:40px;pointer-events:all;position:absolute;right:0;right:-4px;top:0;width:48px}.tlui-toolbar__lock-button:after{border-radius:100%;height:32px;left:8px;top:4px;width:32px}.tlui-toolbar__lock-button__mobile{right:-8px}.tlui-toolbar__tools{align-items:center;background-color:var(--color-low);background:var(--color-panel);border-radius:var(--radius-4);box-shadow:var(--shadow-2);display:flex;flex-direction:row;pointer-events:all;position:relative;z-index:var(--layer-panels)}.tlui-toolbar__tools__button:nth-of-type(n+2){margin-left:-2px}.tlui-toolbar__tools__button:nth-last-of-type(n+2){margin-right:-2px}.tlui-toolbar__tools__button{height:48px;width:48px}.tlui-layout__mobile .tlui-toolbar__tools__button{height:48px;width:44px}.tlui-layout__mobile .tlui-toolbar__tools__button>.tlui-icon{height:16px;width:16px}.tlui-toolbar__overflow{width:40px}.tlui-layout__mobile .tlui-toolbar__overflow{padding:0;width:32px}.tlui-toolbar [data-state=open]:after{background:linear-gradient(0deg,hsla(0,0%,56%,0) 0,var(--color-muted-2) 100%)}.tlui-toolbar__styles__button{height:44px;width:44px}.tlui-layout__mobile .tlui-toolbar__styles__button{height:48px}.tlui-toolbar__divider{background:var(--color-divider);display:block;height:18px;width:1px}.tlui-help-menu{bottom:var(--space-2);pointer-events:all;position:absolute;right:var(--space-2)}.tlui-help-menu__button{align-items:center;background-color:var(--color-low);border-radius:var(--radius-4);border-radius:100%;display:flex;height:40px;justify-content:center;overflow:visible;pointer-events:all;position:relative;width:40px;z-index:var(--layer-panels)}.tlui-help-menu__button:before{border:4px solid var(--color-background);border-radius:100%;content:"";display:block;height:40px;left:-4px;position:absolute;top:-4px;width:40px;z-index:-1}.tlui-help-menu__button:after{border-radius:100%}.tlui-context-menu__move-to-page__name{max-width:calc(min(300px,35vw));overflow:hidden;text-overflow:ellipsis}.tlui-context-menu__move-to-page__name[data-disabled]{color:var(--color-text-3);pointer-events:none}.tlui-menu{background-color:var(--color-panel);border-radius:var(--radius-4);box-shadow:var(--shadow-3);height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;max-height:80vh;overflow-y:auto;overscroll-behavior:none;pointer-events:all;touch-action:auto;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;z-index:var(--layer-menus)}.tlui-menu::-webkit-scrollbar{display:none}.tlui-menu__arrow{fill:var(--color-panel);stroke:var(--color-panel-contrast);stroke-width:1px;position:relative;top:-1px}.tlui-menu__group[data-size=large]{min-width:0;min-width:auto}.tlui-menu__group[data-size=medium]{min-width:144px}.tlui-menu__group[data-size=small]{min-width:96px}.tlui-menu__group[data-size=tiny]{min-width:0}.tlui-menu__group+.tlui-menu__group{border-top:1px solid var(--color-divider)}.tlui-menu__submenu__trigger[data-state=open]:not(:hover):after{background:linear-gradient(90deg,hsla(0,0%,56%,0) 0,var(--color-muted-2) 100%);border-radius:var(--radius-1)}.tlui-menu__submenu__trigger[data-direction=left][data-state=open]:not(:hover):after{background:linear-gradient(270deg,hsla(0,0%,56%,0) 0,var(--color-muted-2) 100%);border-radius:var(--radius-1)}.tlui-menu__button{justify-content:space-between;width:100%}.tlui-menu__button__wide{max-width:none}.tlui-menu__button:nth-child(n+2){margin-top:-8px}.tlui-menu__button:nth-last-child(n+2){margin-bottom:-8px}.tlui-menu__button>span:only-child{flex-grow:2;text-align:left}.tlui-menu__checkbox-item{padding-left:28px}.tlui-menu__checkbox-item__check{align-items:center;display:inline-flex;justify-content:center;left:0;padding-left:10px;position:absolute;width:24px}.tlui-button-grid__button{height:44px;width:44px}.tlui-button-grid__four{display:grid;grid-template-columns:40px 40px 40px 44px}.tlui-button-grid__four>.tlui-button-grid__button:nth-child(n+5){margin-top:-2px}.tlui-button-grid__four>.tlui-button-grid__button:nth-last-child(n+5){margin-bottom:-2px}.tlui-button-grid__three{display:grid;grid-template-columns:40px 40px 44px}.tlui-button-grid__three>.tlui-button-grid__button:nth-child(n+4){margin-top:-2px}.tlui-button-grid__three>.tlui-button-grid__button:nth-last-child(n+4){margin-bottom:-2px}.tlui-button-grid__two{display:grid;grid-template-columns:40px 44px}.tlui-button-grid__two>.tlui-button-grid__button:nth-child(n+3){margin-top:-2px}.tlui-button-grid__two>.tlui-button-grid__button:nth-last-child(n+3){margin-bottom:-2px}.tlui-actions-menu{max-height:calc(100vh - 150px)}.tlui-toast__viewport{align-items:flex-end;display:flex;flex-direction:column;gap:var(--space-3);inset:0;justify-content:flex-end;margin:0;padding:0 var(--space-3) 64px 0;pointer-events:none;position:absolute;z-index:var(--layer-toasts)}.tlui-toast__viewport>*{pointer-events:all}.tlui-toast__icon{padding-left:var(--space-4);padding-top:var(--space-4)}.tlui-toast__container{background-color:var(--color-panel);border-radius:var(--radius-4);box-shadow:var(--shadow-2);display:flex;flex-direction:row;font-size:12px;gap:var(--space-3);max-width:280px;min-width:200px}.tlui-toast__main{flex-grow:2}.tlui-toast__main:first-child>.tlui-toast__content{padding-left:var(--space-4)}.tlui-toast__content{display:flex;flex-direction:column;gap:var(--space-3);padding-bottom:var(--space-5);padding-left:0;padding-top:var(--space-4)}.tlui-toast__content:not(:only-child){padding-bottom:var(--space-2)}.tlui-toast__title{color:var(--color-text);font-weight:600}.tlui-toast__description{color:var(--color-text-1);margin:0;padding:0}.tlui-toast__actions{display:flex;flex-direction:row;justify-content:flex-start}.tlui-toast__close{align-self:flex-end}@media (prefers-reduced-motion:no-preference){.tlui-toast__container[data-state=open]{-webkit-animation:slide-in .2s cubic-bezier(.785,.135,.15,.86);animation:slide-in .2s cubic-bezier(.785,.135,.15,.86)}.tlui-toast__container[data-state=closed]{-webkit-animation:hide .1s ease-in;animation:hide .1s ease-in}.tlui-toast__container[data-swipe=move]{-webkit-transform:translateX(var(--radix-toast-swipe-move-x));transform:translateX(var(--radix-toast-swipe-move-x))}.tlui-toast__container[data-swipe=cancel]{-webkit-transform:translateX(0);transform:translateX(0);transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out}.tlui-toast__container[data-swipe=end]{-webkit-animation:swipe-out .1s ease-out;animation:swipe-out .1s ease-out}}@media (max-width:640px){.tlui-menu__group .tlui-button{height:40px}.tlui-menu__group .tlui-button>.tlui-icon-left,.tlui-menu__group .tlui-button>.tlui-kbd{display:none}}.tlui-layout__bottom{grid-row:2}.tlui-layout__bottom__main{align-items:flex-end;display:flex;justify-content:center;position:relative;width:100%}.tlui-share-zone{align-items:center;display:flex;flex-direction:row;gap:var(--space-3);height:44px;justify-content:flex-end;width:auto;z-index:var(--layer-panels)}.tlui-share-zone__connection-status{align-items:center;display:flex;height:100%;position:relative;width:8px}.tlui-share-zone__connection-status:after{background-color:currentColor;border-radius:100%;content:"";height:8px;width:8px}.tlui-share-zone__button{background:var(--color-selected);color:var(--color-selected-contrast);font-size:14px;pointer-events:all}.tlui-layout__mobile .tlui-share-zone__button,.tlui-share-zone__button{border-radius:var(--radius-1);border-bottom-left-radius:var(--radius-4)}.tlui-share-zone__button:active{color:var(--color-selected-contrast)}@media (hover:hover){.tlui-share-zone__button:hover{color:var(--color-selected-contrast)}.tlui-share-zone__button:not(:disabled,:focus-visible):hover{color:var(--color-selected-contrast)}}.tlui-share-zone__popover{font-size:12px;font-weight:inherit;max-height:100%;max-width:100%;position:relative;width:200px}.tlui-share-zone__qr-code{background:0 0;background-color:var(--color-muted-2);background-size:cover;border:none;cursor:pointer;height:200px;width:200px}.tlui-share-zone__spinner{align-items:center;display:flex;height:100%;justify-content:center;width:100%}.tlui-share-zone__details{color:var(--color-text-1);font-size:11px;font-weight:400;line-height:1.5;margin:0;padding:var(--space-4)}.tlui-share-zone__button{text-shadow:none}.tlui-share-zone__status{align-items:center;display:flex;height:100%;justify-content:center;left:-4px;padding:4px;position:relative}.tlui-share-zone__status>div{border-radius:100%;height:8px;width:8px}.tlui-people-menu__button{background-color:var(--color-low);border-radius:100%;display:flex;height:40px;overflow:visible;pointer-events:all;width:40px}.tlui-people-menu__button:before{border:4px solid var(--color-background);border-radius:100%;content:"";display:block;height:40px;pointer-events:none;position:absolute;width:40px;z-index:-1}.tlui-people-menu__button:not([data-state=selected],:disabled):active:after{border-radius:100%}@media (hover:hover){.tlui-people-menu__button:not([data-state=selected],:disabled):hover:after{border-radius:100%}}.tlui-people-menu__wrapper{display:flex;flex-direction:column;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;max-height:50vh;position:relative;width:220px}.tlui-people-menu__section{flex-direction:column;max-height:100%;min-height:44px;overflow-x:hidden;overflow-y:auto;position:relative;touch-action:auto}.tlui-people-menu__section:not(:last-child){border-bottom:1px solid var(--color-divider)}.tlui-people-menu__user{align-items:center;display:flex;justify-content:flex-start}.tlui-people-menu__user__color-picker{z-index:var(--layer-overlays)}.tlui-people-menu__user__color{flex-shrink:0}.tlui-people-menu__user__name{color:var(--color-text-1);flex-grow:1;flex-shrink:100;max-width:100%}.tlui-people-menu__user__label,.tlui-people-menu__user__name{font-size:12px;overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap}.tlui-people-menu__user__label{color:var(--color-text-3);flex-grow:100;flex-shrink:0;margin-left:4px}.tlui-people-menu__user__input{flex-grow:2;height:100%;margin:0;padding:0}.tlui-people-menu__user__edit{min-width:44px}.tlui-people-menu__user>.tlui-input__wrapper{align-items:auto;display:flex;flex-grow:2;gap:8px;padding:0;width:auto}.tlui-people-menu__item{display:flex;gap:13px;justify-content:flex-start;margin:-4px 0;width:100%}.tlui-people-menu__item>.tlui-menu__button__wide{align-items:auto;display:flex;flex-grow:2;gap:13px;justify-content:flex-start;margin-right:-13px;width:auto}.tlui-people-menu__item:first-of-type{margin-top:0}.tlui-people-menu__item:last-of-type{margin-bottom:0}.tlui-people-menu__item__follow{min-width:44px}.tlui-people-menu__item__follow[data-active=true] .tlui-icon{opacity:1}.tlui-people-menu__item__follow:focus-visible .tlui-icon{opacity:1}@media (hover:hover){.tlui-people-menu__item__follow .tlui-icon{opacity:0}.tlui-people-menu__item__follow:hover .tlui-icon{opacity:1}}.tlui-project-menu__wrapper{align-items:center;display:flex;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.tlui-project-menu__button{display:flex;gap:var(--space-4);pointer-events:all}.tlui-project-menu__button__name{min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tlui-project-menu__input{margin-left:40px;min-width:0;pointer-events:all;text-align:center}.tlui-rename-project-dialog__input{background-color:var(--color-muted-2);border-radius:var(--radius-2);flex-grow:2;padding:0 var(--space-4)}.tlui-navigation-zone{bottom:0;display:flex;flex-direction:column;left:0;pointer-events:all;width:-webkit-min-content;width:min-content;z-index:var(--layer-panels)}.tlui-navigation-zone,.tlui-navigation-zone:before{background-color:var(--color-low);position:absolute}.tlui-navigation-zone:before{border:4px solid var(--color-background);border-radius:var(--radius-1);border-top-right-radius:var(--radius-5);content:"";display:block;inset:-4px;z-index:-1}.tlui-navigation-zone__controls{background-color:none;display:flex;flex-direction:row;overflow:hidden;width:-webkit-min-content;width:min-content}.tlui-navigation-zone__controls>.tlui-button{margin-left:-2px;margin-right:-2px}.tlui-navigation-zone__controls>.tlui-button:first-of-type{margin-left:0}.tlui-navigation-zone__controls>.tlui-button:last-of-type{margin-right:0}.tlui-navigation-zone__toggle .tlui-icon{opacity:.24;transition:opacity .2s ease-in-out}.tlui-navigation-zone__toggle:active .tlui-icon{opacity:1;transition:opacity .12s ease-in-out}@media (hover:hover){.tlui-navigation-zone__toggle:hover .tlui-icon{opacity:1;transition:opacity .12s ease-in-out}}.tlui-minimap{height:96px;min-height:96px;overflow:hidden;padding:var(--space-3);padding-top:0;width:100%}.tlui-minimap__canvas{height:100%;position:relative;width:100%}.tlui-zoom-menu__button__pct{text-align:center;width:60px}@-webkit-keyframes hide{0%{opacity:1}to{opacity:0}}@keyframes hide{0%{opacity:1}to{opacity:0}}@-webkit-keyframes slide-in{0%{-webkit-transform:translateX(calc(100% + var(--space-3)));transform:translateX(calc(100% + var(--space-3)))}to{-webkit-transform:translateX(0);transform:translateX(0)}}@keyframes slide-in{0%{-webkit-transform:translateX(calc(100% + var(--space-3)));transform:translateX(calc(100% + var(--space-3)))}to{-webkit-transform:translateX(0);transform:translateX(0)}}@-webkit-keyframes swipe-out{0%{-webkit-transform:translateX(var(--radix-toast-swipe-end-x));transform:translateX(var(--radix-toast-swipe-end-x))}to{-webkit-transform:translateX(calc(100% + var(--space-3)));transform:translateX(calc(100% + var(--space-3)))}}@keyframes swipe-out{0%{-webkit-transform:translateX(var(--radix-toast-swipe-end-x));transform:translateX(var(--radix-toast-swipe-end-x))}to{-webkit-transform:translateX(calc(100% + var(--space-3)));transform:translateX(calc(100% + var(--space-3)))}}.tlui-page-menu__wrapper{display:flex;flex-direction:column;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;max-height:50vh;position:relative;width:220px}.tlui-page-menu__trigger{width:128px}.tlui-page-menu__trigger>span{flex-grow:2;margin-right:var(--space-4)}.tlui-page-menu__header{align-items:center;border-bottom:1px solid var(--color-divider);display:flex;flex-direction:row;min-height:44px;padding-left:var(--space-4);width:100%}.tlui-page-menu__header>.tlui-button:first-of-type{margin-right:-4px}.tlui-page-menu__header__title{color:var(--color-text);flex-grow:2;font-size:12px;font-weight:500}.tlui-page-menu__name{flex-grow:2;overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap}.tlui-page-menu__list{flex-direction:column;max-height:100%;overflow-x:hidden;overflow-y:auto;position:relative;touch-action:auto}.tlui-page-menu__item{align-items:center;display:flex;flex-direction:row;justify-content:space-between}.tlui-page-menu__item:nth-of-type(n+2){margin-top:-4px}.tlui-page-menu__item__button{flex-grow:2}.tlui-page-menu__item__button>span{display:block;flex-grow:2;overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap}.tlui-page-menu__item__button__checkbox{padding-left:36px}.tlui-page-menu__item__button__check{align-items:center;color:var(--color-text);display:inline-flex;justify-content:center;left:0;padding-left:10px;position:absolute;width:24px}.tlui-page_menu__item__sortable{align-items:center;display:flex;flex-direction:row;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;left:0;overflow:hidden;position:absolute;top:0;width:100%;z-index:1}.tlui-page_menu__item__sortable__title{flex:1 1}.tlui-page_menu__item__sortable__title>.tlui-input__wrapper{height:100%}.tlui-page_menu__item__sortable__button{flex:0 1}.tlui-page_menu__item__sortable:focus-within{z-index:10}.tlui-page_menu__item__sortable__handle{color:var(--color-text-3);cursor:grab;flex-shrink:0;height:40px;margin-right:-9px;touch-action:none;width:32px}.tlui-page_menu__item__sortable__handle:active{cursor:grabbing}.tlui-page-menu__item__input{height:100%;margin-left:13px}.tlui-page_menu__item__submenu{cursor:pointer;display:none;flex:0 1;margin:0;pointer-events:all}.tlui-page_menu__item__submenu[data-isediting=true]{display:block}@media (hover:hover){.tlui-page_menu__item__submenu{display:block;opacity:0}.tlui-page-menu__item:focus-within>.tlui-page_menu__item__submenu,.tlui-page_menu__item__sortable:focus-within>.tlui-page_menu__item__submenu,.tlui-page_menu__item__submenu:hover{opacity:1}}.tlui-edit-link-dialog{color:var(--color-text);display:flex;flex-direction:column;gap:var(--space-4)}.tlui-edit-link-dialog__input{background-color:var(--color-muted-2);border-radius:var(--radius-2);flex-grow:2;padding:0 var(--space-4)}.tlui-embed__spacer{flex-grow:2;margin-left:calc(var(--space-4) * -1);margin-top:calc(var(--space-4) * -1);min-height:0;pointer-events:none}.tlui-embed-dialog__list{display:flex;flex-direction:column;padding-bottom:var(--space-5)}.tlui-embed-dialog__item{align-items:center;background:0 0;border:none;color:var(--color-text);cursor:pointer;display:flex;font-family:inherit;font-size:var(--font-size-1);gap:var(--space-3);height:44px;padding:0;position:relative;text-align:left}@media (hover:hover){.tlui-embed-dialog__item:hover:after{background-color:var(--color-muted-2);border-radius:var(--radius-4);content:"";display:block;inset:0;position:absolute}}.tlui-embed-dialog__item__image{padding:var(--space-3)}.tlui-embed-dialog__item__image__img{align-items:center;background-position:50%;background-repeat:no-repeat;background-size:contain;display:flex;height:24px;justify-content:center;width:24px}.tlui-embed-dialog__enter{color:var(--color-text-1);display:flex;flex-direction:column;gap:var(--space-4)}.tlui-embed-dialog__input{background-color:var(--color-muted-2);border-radius:var(--radius-2);flex-grow:2;padding:0 var(--space-4)}.tlui-embed-dialog__warning{color:var(--color-warn)}.tlui-embed-dialog__instruction__link{display:flex;gap:var(--space-1);margin-top:var(--space-4)}.tlui-embed-dialog__enter a{color:var(--color-text-1)}body,html{font-family:Inter,sans-serif;margin:0;min-height:100vh;min-height:-webkit-fill-available;overscroll-behavior:none;padding:0;touch-action:none}.tldraw__editor,body,html{height:100%;overflow:hidden}.tldraw__editor{bottom:0;left:0;position:fixed;right:0;top:0;width:100%}</style><body><noscript>You need to enable JavaScript to run this app.</noscript><div id=root></div><script defer>!function(){var d,f,o,a,r={2470:function(e,t){"use strict";t.byteLength=function(e){var t=d(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=d(e),i=r[0],o=r[1],a=new c(3*(i+o)/4-o),s=0,l=0<o?i-4:i;for(n=0;n<l;n+=4)t=u[e.charCodeAt(n)]<<18|u[e.charCodeAt(n+1)]<<12|u[e.charCodeAt(n+2)]<<6|u[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===o&&(t=u[e.charCodeAt(n)]<<2|u[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===o&&(t=u[e.charCodeAt(n)]<<10|u[e.charCodeAt(n+1)]<<4|u[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a},t.fromByteArray=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(f(e,a,s<a+o?s:a+o));return 1==r?(t=e[n-1],i.push(l[t>>2]+l[t<<4&63]+"==")):2==r&&(t=(e[n-2]<<8)+e[n-1],i.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),i.join("")};for(var l=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0;r<64;++r)l[r]=n[r],u[n.charCodeAt(r)]=r;function d(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function f(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(l[(i=r)>>18&63]+l[i>>12&63]+l[i>>6&63]+l[63&i]);return o.join("")}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},918:function(e,n,t){"use strict";var a=t(6690).default,s=t(9728).default,l=t(6115).default,u=t(1655).default,c=t(6389).default,d=t(2470),o=t(545),r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n.lW=p,n.h2=50;var i=2147483647;function f(e){if(i<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,p.prototype),t}function p(e,t,n){if("number"!=typeof e)return h(e,t,n);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return g(e)}function h(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!p.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|w(e,t),r=f(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){var t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return p.from(r,t,n);var i=function(e){if(p.isBuffer(e)){var t=0|b(e.length),n=f(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||$(e.length)?f(0):m(e):"Buffer"===e.type&&Array.isArray(e.data)?m(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return p.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function v(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function g(e){return v(e),f(e<0?0:0|b(e))}function m(e){for(var t=e.length<0?0:0|b(e.length),n=f(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,p.prototype),r}function b(e){if(i<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function w(e,t){if(p.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(i)return r?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function x(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),$(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=p.from(t,r)),p.isBuffer(t))return 0===t.length?-1:S(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=a=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(s<n+l&&(n=s-l),o=n;0<=o;o--){for(var d=!0,f=0;f<l;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(a/2<r&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if($(s))return o;e[n+o]=s}return o}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=239<o?4:223<o?3:191<o?2:1;if(i+s<=n){var l=void 0,u=void 0,c=void 0,d=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128==(192&(l=e[i+1]))&&127<(d=(31&o)<<6|63&l)&&(a=d);break;case 3:l=e[i+1],u=e[i+2],128==(192&l)&&128==(192&u)&&2047<(d=(15&o)<<12|(63&l)<<6|63&u)&&(d<55296||57343<d)&&(a=d);break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&65535<(d=(15&o)<<18|(63&l)<<12|(63&u)<<6|63&c)&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):65535<a&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=P));return n}(r)}(p.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}}),p.poolSize=8192,p.from=function(e,t,n){return h(e,t,n)},Object.setPrototypeOf(p.prototype,Uint8Array.prototype),Object.setPrototypeOf(p,Uint8Array),p.alloc=function(e,t,n){return i=t,o=n,v(r=e),r<=0?f(r):void 0!==i?"string"==typeof o?f(r).fill(i,o):f(r).fill(i):f(r);var r,i,o},p.allocUnsafe=function(e){return g(e)},p.allocUnsafeSlow=function(e){return g(e)},p.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==p.prototype},p.compare=function(e,t){if(q(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=p.from(t,t.offset,t.byteLength)),!p.isBuffer(e)||!p.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return p.alloc(0);var n;if(void 0===t)for(n=t=0;n<e.length;++n)t+=e[n].length;var r=p.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(q(o,Uint8Array))i+o.length>r.length?(p.isBuffer(o)||(o=p.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},p.byteLength=w,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)x(this,t,t+1);return this},p.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},p.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},p.prototype.toLocaleString=p.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):function(e,t,n){var r,i,o,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return r=this,o=n,0===(i=t)&&o===r.length?d.fromByteArray(r):d.fromByteArray(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(a)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}.apply(this,arguments)},p.prototype.equals=function(e){if(!p.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===p.compare(this,e)},p.prototype.inspect=function(){var e="",t=n.h2;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},r&&(p.prototype[r]=p.prototype.inspect),p.prototype.compare=function(e,t,n,r,i){if(q(e,Uint8Array)&&(e=p.from(e,e.offset,e.byteLength)),!p.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},p.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},p.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},p.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},p.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i,o,a,s,l,u,c,d,f,p,h,v,g=this.length-t;if((void 0===n||g<n)&&(n=g),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var m=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return h=t,v=n,X(H(e,(p=this).length-h),p,h,v);case"ascii":case"latin1":case"binary":return c=this,d=t,f=n,X(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),c,d,f);case"base64":return s=this,l=t,u=n,X(Y(e),s,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=t,a=n,X(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,(i=this).length-o),i,o,a);default:if(m)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),m=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=G[e[o]];return i}function M(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function A(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,i,o){if(!p.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r,i){U(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function L(e,t,n,r,i){U(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function z(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return t=+t,n>>>=0,i||z(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,i){return t=+t,n>>>=0,i||z(e,0,n,8),o.write(e,t,n,r,52,8),n+8}p.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,p.prototype),r},p.prototype.readUintLE=p.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},p.prototype.readUintBE=p.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},p.prototype.readUint8=p.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},p.prototype.readBigUInt64LE=Q(function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))}),p.prototype.readBigUInt64BE=Q(function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),p.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},p.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},p.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},p.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},p.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},p.prototype.readBigInt64LE=Q(function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))}),p.prototype.readBigInt64BE=Q(function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||V(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)}),p.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),o.read(this,e,!0,23,4)},p.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),o.read(this,e,!1,23,4)},p.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),o.read(this,e,!0,52,8)},p.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),o.read(this,e,!1,52,8)},p.prototype.writeUintLE=p.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},p.prototype.writeUint8=p.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,255,0),this[t]=255&e,t+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeBigUInt64LE=Q(function(e){return O(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=Q(function(e){return L(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},p.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},p.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},p.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},p.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},p.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},p.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},p.prototype.writeBigInt64LE=Q(function(e){return O(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=Q(function(e){return L(this,e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},p.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},p.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},p.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},p.prototype.copy=function(e,t,n,r){if(!p.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},p.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=p.isBuffer(e)?e:p.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var D={};function B(r,i,o){D[r]=function(e){u(n,o);var t=c(n);function n(){var e;return a(this,n),e=t.call(this),Object.defineProperty(l(e),"message",{value:i.apply(l(e),arguments),writable:!0,configurable:!0}),e.name="".concat(e.name," [").concat(r,"]"),e.stack,delete e.name,e}return s(n,[{key:"code",get:function(){return r},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(r,"]: ").concat(this.message)}}]),n}()}function F(e){for(var t="",n=e.length,r="-"===e[0]?1:0;4+r<=n;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function U(e,t,n,r,i,o){if(n<e||e<t){var a,s="bigint"==typeof t?"n":"";throw a=3<o?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new D.ERR_OUT_OF_RANGE("value",a,e)}var l,u,c;l=r,c=o,K(u=i,"offset"),void 0!==l[u]&&void 0!==l[u+c]||V(u,l.length-(c+1))}function K(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,n){if(Math.floor(e)!==e)throw K(e,n),new D.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}B("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),B("ERR_INVALID_ARG_TYPE",function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)},TypeError),B("ERR_OUT_OF_RANGE",function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=F(String(n)):"bigint"==typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=F(i)),i+="n"),r+" It must be ".concat(t,". Received ").concat(i)},RangeError);var W=/[^+/0-9A-Za-z-_]/g;function H(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(e){return d.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function X(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!=e}var G=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function Q(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},6123:function(e,t){var n;!function(){"use strict";var a={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"==r||"number"==r)e.push(n);else if(Array.isArray(n)){if(n.length){var i=s.apply(null,n);i&&e.push(i)}}else if("object"==r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var o in n)a.call(n,o)&&n[o]&&e.push(o)}}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},8973:function(e,t,n){var r=n(171),i=n(5065),o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not a function")}},9363:function(e,t,n){var r=n(5508),i=n(3302),o=n(1684).f,a=r("unscopables"),s=Array.prototype;null==s[a]&&o(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},6183:function(e,t,n){"use strict";var r=n(9838).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},9799:function(e,t,n){var r=n(4965),i=String,o=TypeError;e.exports=function(e){if(r(e))return e;throw o(i(e)+" is not an object")}},9821:function(e,t,n){var l=n(6494),u=n(3864),c=n(6425),r=function(s){return function(e,t,n){var r,i=l(e),o=c(i),a=u(n,o);if(s&&t!=t){for(;a<o;)if((r=i[a++])!=r)return!0}else for(;a<o;a++)if((s||a in i)&&i[a]===t)return s||a||0;return!s&&-1}};e.exports={includes:r(!0),indexOf:r(!1)}},1520:function(e,t,n){var r=n(8162),i=n(3011),o=n(4965),a=n(5508)("species"),s=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(i(t)&&(t===s||r(t.prototype))||o(t)&&null===(t=t[a]))&&(t=void 0)),void 0===t?s:t}},1180:function(e,t,n){var r=n(1520);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},3135:function(e,t,n){var r=n(4534),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},5249:function(e,t,n){var r=n(2105),i=n(171),o=n(3135),a=n(5508)("toStringTag"),s=Object,l="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=s(e),a))?n:l?o(t):"Object"==(r=o(t))&&i(t.callee)?"Arguments":r}},1147:function(e,t,n){var l=n(8320),u=n(412),c=n(2530),d=n(1684);e.exports=function(e,t,n){for(var r=u(t),i=d.f,o=c.f,a=0;a<r.length;a++){var s=r[a];l(e,s)||n&&l(n,s)||i(e,s,o(t,s))}}},7454:function(e,t,n){var r=n(7420),i=n(1684),o=n(431);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},431:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},3609:function(e,t,n){var a=n(171),s=n(1684),l=n(8138),u=n(2164);e.exports=function(e,t,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:t;if(a(n)&&l(n,o,r),r.global)i?e[t]=n:u(t,n);else{try{r.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=n:s.f(e,t,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return e}},2164:function(e,t,n){var r=n(9782),i=Object.defineProperty;e.exports=function(t,n){try{i(r,t,{value:n,configurable:!0,writable:!0})}catch(e){r[t]=n}return n}},7420:function(e,t,n){var r=n(6111);e.exports=!r(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},4620:function(e){var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},916:function(e,t,n){var r=n(9782),i=n(4965),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},895:function(e){var t=TypeError;e.exports=function(e){if(9007199254740991<e)throw t("Maximum allowed index exceeded");return e}},4771:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},2504:function(e,t,n){var r,i,o=n(9782),a=n(4771),s=o.process,l=o.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(i=0<(r=c.split("."))[0]&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||74<=r[1])&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},8605:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3587:function(e,t,n){var c=n(9782),d=n(2530).f,f=n(7454),p=n(3609),h=n(2164),v=n(1147),g=n(9492);e.exports=function(e,t){var n,r,i,o,a,s=e.target,l=e.global,u=e.stat;if(n=l?c:u?c[s]||h(s,{}):(c[s]||{}).prototype)for(r in t){if(o=t[r],i=e.dontCallGetSet?(a=d(n,r))&&a.value:n[r],!g(l?r:s+(u?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;v(o,i)}(e.sham||i&&i.sham)&&f(o,"sham",!0),p(n,r,o,e)}}},6111:function(e){e.exports=function(e){try{return!!e()}catch(e){return!0}}},8635:function(e,t,n){"use strict";n(4541);var u=n(9050),c=n(3609),d=n(5493),f=n(6111),p=n(5508),h=n(7454),v=p("species"),g=RegExp.prototype;e.exports=function(n,e,t,r){var i=p(n),s=!f(function(){var e={};return e[i]=function(){return 7},7!=""[n](e)}),o=s&&!f(function(){var e=!1,t=/a/;return"split"===n&&((t={}).constructor={},t.constructor[v]=function(){return t},t.flags="",t[i]=/./[i]),t.exec=function(){return e=!0,null},t[i](""),!e});if(!s||!o||t){var l=u(/./[i]),a=e(i,""[n],function(e,t,n,r,i){var o=u(e),a=t.exec;return a===d||a===g.exec?s&&!i?{done:!0,value:l(t,n,r)}:{done:!0,value:o(n,t,r)}:{done:!1}});c(String.prototype,n,a[0]),c(g,i,a[1])}r&&h(g[i],"sham",!0)}},8504:function(e,t,n){"use strict";var p=n(8162),h=n(6425),v=n(895),g=n(5852);e.exports=function e(t,n,r,i,o,a,s,l){for(var u,c=o,d=0,f=!!s&&g(s,l);d<i;)d in r&&(u=f?f(r[d],d,n):r[d],0<a&&p(u)?c=e(t,n,u,h(u),c,a-1)-1:(v(c+1),t[c]=u),c++),d++;return c}},2256:function(e,t,n){var r=n(5830),i=Function.prototype,o=i.apply,a=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?a.bind(o):function(){return a.apply(o,arguments)})},5852:function(e,t,n){var r=n(9050),i=n(8973),o=n(5830),a=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},5830:function(e,t,n){var r=n(6111);e.exports=!r(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},7892:function(e,t,n){var r=n(5830),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},1774:function(e,t,n){var r=n(7420),i=n(8320),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),l=s&&"something"===function(){}.name,u=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},9050:function(e,t,n){var r=n(3135),i=n(4534);e.exports=function(e){if("Function"===r(e))return i(e)}},4534:function(e,t,n){var r=n(5830),i=Function.prototype,o=i.call,a=r&&i.bind.bind(o,o);e.exports=r?a:function(e){return function(){return o.apply(e,arguments)}}},6780:function(e,t,n){var r=n(9782),i=n(171);e.exports=function(e,t){return arguments.length<2?(n=r[e],i(n)?n:void 0):r[e]&&r[e][t];var n}},2135:function(e,t,n){var r=n(8973),i=n(486);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},4527:function(e,t,n){var r=n(4534),i=n(1446),f=Math.floor,p=r("".charAt),h=r("".replace),v=r("".slice),g=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,m=/\$([$&'`]|\d{1,2})/g;e.exports=function(o,a,s,l,u,e){var c=s+o.length,d=l.length,t=m;return void 0!==u&&(u=i(u),t=g),h(e,t,function(e,t){var n;switch(p(t,0)){case"$":return"$";case"&":return o;case"`":return v(a,0,s);case"'":return v(a,c);case"<":n=u[v(t,1,-1)];break;default:var r=+t;if(0==r)return e;if(d<r){var i=f(r/10);return 0===i?e:i<=d?void 0===l[i-1]?p(t,1):l[i-1]+p(t,1):e}n=l[r-1]}return void 0===n?"":n})}},9782:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},8320:function(e,t,n){var r=n(4534),i=n(1446),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},2819:function(e){e.exports={}},4836:function(e,t,n){var r=n(6780);e.exports=r("document","documentElement")},3373:function(e,t,n){var r=n(7420),i=n(6111),o=n(916);e.exports=!r&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},769:function(e,t,n){var r=n(4534),i=n(6111),o=n(3135),a=Object,s=r("".split);e.exports=i(function(){return!a("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?s(e,""):a(e)}:a},112:function(e,t,n){var r=n(4534),i=n(171),o=n(8749),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},5313:function(e,t,n){var r,i,o,a=n(6626),s=n(9782),l=n(4965),u=n(7454),c=n(8320),d=n(8749),f=n(9325),p=n(2819),h="Object already initialized",v=s.TypeError,g=s.WeakMap;if(a||d.state){var m=d.state||(d.state=new g);m.get=m.get,m.has=m.has,m.set=m.set,r=function(e,t){if(m.has(e))throw v(h);return t.facade=e,m.set(e,t),t},i=function(e){return m.get(e)||{}},o=function(e){return m.has(e)}}else{var y=f("state");p[y]=!0,r=function(e,t){if(c(e,y))throw v(h);return t.facade=e,u(e,y,t),t},i=function(e){return c(e,y)?e[y]:{}},o=function(e){return c(e,y)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(n){return function(e){var t;if(!l(e)||(t=i(e)).type!==n)throw v("Incompatible receiver, "+n+" required");return t}}}},8162:function(e,t,n){var r=n(3135);e.exports=Array.isArray||function(e){return"Array"==r(e)}},171:function(e,t,n){var r=n(4620),i=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},3011:function(e,t,n){var r=n(4534),i=n(6111),o=n(171),a=n(5249),s=n(6780),l=n(112),u=function(){},c=[],d=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,p=r(f.exec),h=!f.exec(u),v=function(e){if(!o(e))return!1;try{return d(u,c,e),!0}catch(e){return!1}},g=function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return h||!!p(f,l(e))}catch(e){return!0}};g.sham=!0,e.exports=!d||i(function(){var e;return v(v.call)||!v(Object)||!v(function(){e=!0})||e})?g:v},9492:function(e,t,n){var r=n(6111),i=n(171),o=/#|\.prototype\./,a=function(e,t){var n=l[s(e)];return n==c||n!=u&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},486:function(e){e.exports=function(e){return null==e}},4965:function(e,t,n){var r=n(171),i=n(4620),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===o}:function(e){return"object"==typeof e?null!==e:r(e)}},2192:function(e){e.exports=!1},4196:function(e,t,n){var r=n(6780),i=n(171),o=n(1778),a=n(5398),s=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&o(t.prototype,s(e))}},6425:function(e,t,n){var r=n(1234);e.exports=function(e){return r(e.length)}},8138:function(e,t,n){var r=n(4534),i=n(6111),o=n(171),a=n(8320),s=n(7420),l=n(1774).CONFIGURABLE,u=n(112),c=n(5313),d=c.enforce,f=c.get,p=String,h=Object.defineProperty,v=r("".slice),g=r("".replace),m=r([].join),y=s&&!i(function(){return 8!==h(function(){},"length",{value:8}).length}),b=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===v(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||l&&e.name!==t)&&(s?h(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&a(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?s&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=d(e);return a(r,"source")||(r.source=m(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w(function(){return o(this)&&f(this).source||u(this)},"toString")},596:function(e){var n=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var t=+e;return(0<t?r:n)(t)}},3302:function(e,t,n){var r,i=n(9799),o=n(3415),a=n(8605),s=n(2819),l=n(4836),u=n(916),c=n(9325),d="prototype",f="script",p=c("IE_PROTO"),h=function(){},v=function(e){return"<script>"+e+"</"+f+">"},g=function(e){e.write(v("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&r?g(r):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(v("document.F=Object")),e.close(),e.F):g(r);for(var n=a.length;n--;)delete m[d][a[n]];return m()};s[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h[d]=i(e),n=new h,h[d]=null,n[p]=e):n=m(),void 0===t?n:o.f(n,t)}},3415:function(e,t,n){var r=n(7420),i=n(3526),s=n(1684),l=n(9799),u=n(6494),c=n(1467);t.f=r&&!i?Object.defineProperties:function(e,t){l(e);for(var n,r=u(t),i=c(t),o=i.length,a=0;a<o;)s.f(e,n=i[a++],r[n]);return e}},1684:function(e,t,n){var r=n(7420),i=n(3373),o=n(3526),a=n(9799),s=n(4560),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",p="writable";t.f=r?o?function(e,t,n){if(a(e),t=s(t),a(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=c(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:f in n?n[f]:r[f],enumerable:d in n?n[d]:r[d],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(a(e),t=s(t),a(n),i)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},2530:function(e,t,n){var r=n(7420),i=n(7892),o=n(3509),a=n(431),s=n(6494),l=n(4560),u=n(8320),c=n(3373),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=l(t),c)try{return d(e,t)}catch(e){}if(u(e,t))return a(!i(o.f,e,t),e[t])}},9814:function(e,t,n){var r=n(6945),i=n(8605).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},1186:function(e,t){t.f=Object.getOwnPropertySymbols},1778:function(e,t,n){var r=n(4534);e.exports=r({}.isPrototypeOf)},6945:function(e,t,n){var r=n(4534),a=n(8320),s=n(6494),l=n(9821).indexOf,u=n(2819),c=r([].push);e.exports=function(e,t){var n,r=s(e),i=0,o=[];for(n in r)!a(u,n)&&a(r,n)&&c(o,n);for(;t.length>i;)a(r,n=t[i++])&&(~l(o,n)||c(o,n));return o}},1467:function(e,t,n){var r=n(6945),i=n(8605);e.exports=Object.keys||function(e){return r(e,i)}},3509:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},3131:function(e,t,n){var i=n(7892),o=n(171),a=n(4965),s=TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!a(r=i(n,e)))return r;if(o(n=e.valueOf)&&!a(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!a(r=i(n,e)))return r;throw s("Can't convert object to primitive value")}},412:function(e,t,n){var r=n(6780),i=n(4534),o=n(9814),a=n(1186),s=n(9799),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?l(t,n(e)):t}},2279:function(e,t,n){var i=n(7892),o=n(9799),a=n(171),s=n(3135),l=n(5493),u=TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var r=i(n,e,t);return null!==r&&o(r),r}if("RegExp"===s(e))return i(l,e,t);throw u("RegExp#exec called on incompatible receiver")}},5493:function(e,t,n){"use strict";var r,i,y=n(7892),o=n(4534),b=n(5217),w=n(1537),a=n(4274),s=n(7193),x=n(3302),k=n(5313).get,l=n(8988),u=n(1748),S=s("native-string-replace",String.prototype.replace),_=RegExp.prototype.exec,E=_,P=o("".charAt),C=o("".indexOf),I=o("".replace),T=o("".slice),M=(i=/b*/g,y(_,r=/a/,"a"),y(_,i,"a"),0!==r.lastIndex||0!==i.lastIndex),A=a.BROKEN_CARET,j=void 0!==/()??/.exec("")[1];(M||j||A||l||u)&&(E=function(e){var t,n,r,i,o,a,s,l=this,u=k(l),c=b(e),d=u.raw;if(d)return d.lastIndex=l.lastIndex,t=y(E,d,c),l.lastIndex=d.lastIndex,t;var f=u.groups,p=A&&l.sticky,h=y(w,l),v=l.source,g=0,m=c;if(p&&(h=I(h,"y",""),-1===C(h,"g")&&(h+="g"),m=T(c,l.lastIndex),0<l.lastIndex&&(!l.multiline||l.multiline&&"\n"!==P(c,l.lastIndex-1))&&(v="(?: "+v+")",m=" "+m,g++),n=new RegExp("^(?:"+v+")",h)),j&&(n=new RegExp("^"+v+"$(?!\\s)",h)),M&&(r=l.lastIndex),i=y(_,p?n:l,m),p?i?(i.input=T(i.input,g),i[0]=T(i[0],g),i.index=l.lastIndex,l.lastIndex+=i[0].length):l.lastIndex=0:M&&i&&(l.lastIndex=l.global?i.index+i[0].length:r),j&&i&&1<i.length&&y(S,i[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)}),i&&f)for(i.groups=a=x(null),o=0;o<f.length;o++)a[(s=f[o])[0]]=i[s[1]];return i}),e.exports=E},1537:function(e,t,n){"use strict";var r=n(9799);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4274:function(e,t,n){var r=n(6111),i=n(9782).RegExp,o=r(function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")}),a=o||r(function(){return!i("a","y").sticky}),s=o||r(function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")});e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},8988:function(e,t,n){var r=n(6111),i=n(9782).RegExp;e.exports=r(function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})},1748:function(e,t,n){var r=n(6111),i=n(9782).RegExp;e.exports=r(function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})},9629:function(e,t,n){var r=n(486),i=TypeError;e.exports=function(e){if(r(e))throw i("Can't call method on "+e);return e}},9325:function(e,t,n){var r=n(7193),i=n(9020),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},8749:function(e,t,n){var r=n(9782),i=n(2164),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},7193:function(e,t,n){var r=n(2192),i=n(8749);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.0",mode:r?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"})},9838:function(e,t,n){var r=n(4534),l=n(6501),u=n(5217),c=n(9629),d=r("".charAt),f=r("".charCodeAt),p=r("".slice),i=function(s){return function(e,t){var n,r,i=u(c(e)),o=l(t),a=i.length;return o<0||a<=o?s?"":void 0:(n=f(i,o))<55296||56319<n||o+1===a||(r=f(i,o+1))<56320||57343<r?s?d(i,o):n:s?p(i,o,o+2):r-56320+(n-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},3969:function(e,t,n){var r=n(2504),i=n(6111),o=n(9782).String;e.exports=!!Object.getOwnPropertySymbols&&!i(function(){var e=Symbol();return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41})},3864:function(e,t,n){var r=n(6501),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},6494:function(e,t,n){var r=n(769),i=n(9629);e.exports=function(e){return r(i(e))}},6501:function(e,t,n){var r=n(596);e.exports=function(e){var t=+e;return t!=t||0==t?0:r(t)}},1234:function(e,t,n){var r=n(6501),i=Math.min;e.exports=function(e){return 0<e?i(r(e),9007199254740991):0}},1446:function(e,t,n){var r=n(9629),i=Object;e.exports=function(e){return i(r(e))}},3086:function(e,t,n){var i=n(7892),o=n(4965),a=n(4196),s=n(2135),l=n(3131),r=n(5508),u=TypeError,c=r("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,r=s(e,c);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||a(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},4560:function(e,t,n){var r=n(3086),i=n(4196);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},2105:function(e,t,n){var r={};r[n(5508)("toStringTag")]="z",e.exports="[object z]"===String(r)},5217:function(e,t,n){var r=n(5249),i=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},5065:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9020:function(e,t,n){var r=n(4534),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},5398:function(e,t,n){var r=n(3969);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3526:function(e,t,n){var r=n(7420),i=n(6111);e.exports=r&&i(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},6626:function(e,t,n){var r=n(9782),i=n(171),o=r.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},5508:function(e,t,n){var r=n(9782),i=n(7193),o=n(8320),a=n(9020),s=n(3969),l=n(5398),u=r.Symbol,c=i("wks"),d=l?u.for||u:u&&u.withoutSetter||a;e.exports=function(e){return o(c,e)||(c[e]=s&&o(u,e)?u[e]:d("Symbol."+e)),c[e]}},9149:function(e,t,n){"use strict";var r=n(3587),i=n(8504),o=n(8973),a=n(1446),s=n(6425),l=n(1180);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=a(this),r=s(n);return o(e),(t=l(n,0)).length=i(t,n,n,r,0,1,e,1<arguments.length?arguments[1]:void 0),t}})},8442:function(e,t,n){"use strict";var r=n(3587),i=n(8504),o=n(1446),a=n(6425),s=n(6501),l=n(1180);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t),r=l(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},5671:function(e,t,n){n(9363)("flatMap")},9575:function(e,t,n){n(9363)("flat")},4541:function(e,t,n){"use strict";var r=n(3587),i=n(5493);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},4113:function(e,t,n){"use strict";var _=n(2256),i=n(7892),r=n(4534),o=n(8635),a=n(6111),E=n(9799),P=n(171),s=n(486),C=n(6501),I=n(1234),T=n(5217),l=n(9629),M=n(6183),u=n(2135),A=n(4527),j=n(2279),c=n(5508)("replace"),O=Math.max,L=Math.min,z=r([].concat),R=r([].push),N=r("".indexOf),D=r("".slice),d="$0"==="a".replace(/./,"$0"),f=!!/./[c]&&""===/./[c]("a","$0");o("replace",function(e,x,k){var S=f?"$":"$0";return[function(e,t){var n=l(this),r=s(e)?void 0:u(e,c);return r?i(r,e,n,t):i(x,T(n),e,t)},function(e,t){var n=E(this),r=T(e);if("string"==typeof t&&-1===N(t,S)&&-1===N(t,"$<")){var i=k(x,n,r,t);if(i.done)return i.value}var o=P(t);o||(t=T(t));var a=n.global;if(a){var s=n.unicode;n.lastIndex=0}for(var l=[];;){var u=j(n,r);if(null===u)break;if(R(l,u),!a)break;""===T(u[0])&&(n.lastIndex=M(r,I(n.lastIndex),s))}for(var c,d="",f=0,p=0;p<l.length;p++){for(var h=T((u=l[p])[0]),v=O(L(C(u.index),r.length),0),g=[],m=1;m<u.length;m++)R(g,void 0===(c=u[m])?c:String(c));var y=u.groups;if(o){var b=z([h],g,v,r);void 0!==y&&R(b,y);var w=T(_(t,void 0,b))}else w=A(h,r,v,g,y,t);f<=v&&(d+=D(r,f,v)+w,f=v+h.length)}return d+D(r,f)}]},!!a(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!d||f)},548:function(e){"use strict";var r=Object.prototype.hasOwnProperty,p="~";function n(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new s(n,r||e,i),a=p?p+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function t(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(p=!1)),t.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(p?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},t.prototype.listeners=function(e){var t=p?p+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,o=new Array(i);r<i;r++)o[r]=n[r].fn;return o},t.prototype.listenerCount=function(e){var t=p?p+e:e,n=this._events[t];return n?n.fn?1:n.length:0},t.prototype.emit=function(e,t,n,r,i,o){var a=p?p+e:e;if(!this._events[a])return!1;var s,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,r),!0;case 5:return u.fn.call(u.context,t,n,r,i),!0;case 6:return u.fn.call(u.context,t,n,r,i,o),!0}for(l=1,s=new Array(c-1);l<c;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,r);break;default:if(!s)for(d=1,s=new Array(c-1);d<c;d++)s[d-1]=arguments[d];u[l].fn.apply(u[l].context,s)}}return!0},t.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},t.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},t.prototype.removeListener=function(e,t,n,r){var i=p?p+e:e;if(!this._events[i])return this;if(!t)return u(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||r&&!o.once||n&&o.context!==n||u(this,i);else{for(var a=0,s=[],l=o.length;a<l;a++)(o[a].fn!==t||r&&!o[a].once||n&&o[a].context!==n)&&s.push(o[a]);s.length?this._events[i]=1===s.length?s[0]:s:u(this,i)}return this},t.prototype.removeAllListeners=function(e){var t;return e?(t=p?p+e:e,this._events[t]&&u(this,t)):(this._events=new n,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=p,t.EventEmitter=t,e.exports=t},545:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;0<c;o=256*o+e[t+d],d+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+e[t+d],d+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(t+=1<=a+d?f/l:f*Math.pow(2,1-d))*l&&(a++,l/=2),c<=a+d?(s=0,a=c):1<=a+d?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));8<=i;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*v}},3108:function(e,t,n){e=n.nmd(e);var r="__lodash_hash_undefined__",b=1,m=2,f=9007199254740991,y="[object Arguments]",w="[object Array]",i="[object AsyncFunction]",x="[object Boolean]",k="[object Date]",S="[object Error]",o="[object Function]",a="[object GeneratorFunction]",_="[object Map]",E="[object Number]",s="[object Null]",P="[object Object]",l="[object Promise]",u="[object Proxy]",C="[object RegExp]",I="[object Set]",T="[object String]",M="[object Symbol]",c="[object Undefined]",d="[object WeakMap]",A="[object ArrayBuffer]",j="[object DataView]",p=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,v={};v["[object Float32Array]"]=v["[object Float64Array]"]=v["[object Int8Array]"]=v["[object Int16Array]"]=v["[object Int32Array]"]=v["[object Uint8Array]"]=v["[object Uint8ClampedArray]"]=v["[object Uint16Array]"]=v["[object Uint32Array]"]=!0,v[y]=v[w]=v[A]=v[x]=v[j]=v[k]=v[S]=v[o]=v[_]=v[E]=v[P]=v[C]=v[I]=v[T]=v[d]=!1;var g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,O="object"==typeof self&&self&&self.Object===Object&&self,L=g||O||Function("return this")(),z=t&&!t.nodeType&&t,R=z&&e&&!e.nodeType&&e,N=R&&R.exports===z,D=N&&g.process,B=function(){try{return D&&D.binding&&D.binding("util")}catch(e){}}(),F=B&&B.isTypedArray;function U(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function K(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var W,H,Y,X=Array.prototype,q=Function.prototype,$=Object.prototype,G=L["__core-js_shared__"],Q=q.toString,Z=$.hasOwnProperty,J=(Y=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"",ee=$.toString,te=RegExp("^"+Q.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=N?L.Buffer:void 0,re=L.Symbol,ie=L.Uint8Array,oe=$.propertyIsEnumerable,ae=X.splice,se=re?re.toStringTag:void 0,le=Object.getOwnPropertySymbols,ue=ne?ne.isBuffer:void 0,ce=(W=Object.keys,H=Object,function(e){return W(H(e))}),de=Re(L,"DataView"),fe=Re(L,"Map"),pe=Re(L,"Promise"),he=Re(L,"Set"),ve=Re(L,"WeakMap"),ge=Re(Object,"create"),me=Be(de),ye=Be(fe),be=Be(pe),we=Be(he),xe=Be(ve),ke=re?re.prototype:void 0,Se=ke?ke.valueOf:void 0;function _e(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ce(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Pe;++t<n;)this.add(e[t])}function Ie(e){var t=this.__data__=new Ee(e);this.size=t.size}function Te(e,t){for(var n=e.length;n--;)if(Fe(e[n][0],t))return n;return-1}function Me(e){return null==e?void 0===e?c:s:se&&se in Object(e)?function(e){var t=Z.call(e,se),n=e[se];try{var r=!(e[se]=void 0)}catch(e){}var i=ee.call(e);return r&&(t?e[se]=n:delete e[se]),i}(e):(t=e,ee.call(t));var t}function Ae(e){return Xe(e)&&Me(e)==y}function je(e,t,n,r,i){return e===t||(null==e||null==t||!Xe(e)&&!Xe(t)?e!=e&&t!=t:function(e,t,n,r,i,o){var a=Ke(e),s=Ke(t),d=a?w:De(e),l=s?w:De(t),u=(d=d==y?P:d)==P,c=(l=l==y?P:l)==P,f=d==l;if(f&&Ve(e)){if(!Ve(t))return!1;u=!(a=!0)}if(f&&!u)return o||(o=new Ie),a||$e(e)?Oe(e,t,n,r,i,o):function(e,t,n,r,i,o,a){switch(d){case j:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case A:return!(e.byteLength!=t.byteLength||!o(new ie(e),new ie(t)));case x:case k:case E:return Fe(+e,+t);case S:return e.name==t.name&&e.message==t.message;case C:case T:return e==t+"";case _:var s=K;case I:var l=r&b;if(s||(s=V),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=m,a.set(e,t);var c=Oe(s(e),s(t),r,i,o,a);return a.delete(e),c;case M:if(Se)return Se.call(e)==Se.call(t)}return!1}(e,t,0,n,r,i,o);if(!(n&b)){var p=u&&Z.call(e,"__wrapped__"),h=c&&Z.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,g=h?t.value():t;return o||(o=new Ie),i(v,g,n,r,o)}}return f&&(o||(o=new Ie),function(e,t,n,r,i,o){var a=n&b,s=Le(e),l=s.length;if(l!=Le(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Z.call(t,c)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<l;){var h=e[c=s[u]],v=t[c];if(r)var g=a?r(v,h,c,t,e,o):r(h,v,c,e,t,o);if(!(void 0===g?h===v||i(h,v,n,r,o):g)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var m=e.constructor,y=t.constructor;m==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(e),o.delete(t),f}(e,t,n,r,i,o))}(e,t,n,r,je,i))}function Oe(e,t,r,i,o,a){var n=r&b,s=e.length,l=t.length;if(s!=l&&!(n&&s<l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var c=-1,d=!0,f=r&m?new Ce:void 0;for(a.set(e,t),a.set(t,e);++c<s;){var p=e[c],h=t[c];if(i)var v=n?i(h,p,c,t,e,a):i(p,h,c,e,t,a);if(void 0!==v){if(v)continue;d=!1;break}if(f){if(!U(t,function(e,t){if(n=t,!f.has(n)&&(p===e||o(p,e,r,i,a)))return f.push(t);var n})){d=!1;break}}else if(p!==h&&!o(p,h,r,i,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function Le(e){return n=Ne,r=Ge(t=e),Ke(t)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(t));var t,n,r}function ze(e,t){var n,r=e.__data__;return("string"==(n=typeof t)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function Re(e,t){var n=null==e?void 0:e[t];return function(e){return!(!Ye(e)||J&&J in e)&&(We(e)?te:p).test(Be(e))}(n)?n:void 0}_e.prototype.clear=function(){this.__data__=ge?ge(null):{},this.size=0},_e.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},_e.prototype.get=function(e){var t=this.__data__;if(ge){var n=t[e];return n===r?void 0:n}return Z.call(t,e)?t[e]:void 0},_e.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:Z.call(t,e)},_e.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ge&&void 0===t?r:t,this},Ee.prototype.clear=function(){this.__data__=[],this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,n=Te(t,e);return!(n<0||(n==t.length-1?t.pop():ae.call(t,n,1),--this.size,0))},Ee.prototype.get=function(e){var t=this.__data__,n=Te(t,e);return n<0?void 0:t[n][1]},Ee.prototype.has=function(e){return-1<Te(this.__data__,e)},Ee.prototype.set=function(e,t){var n=this.__data__,r=Te(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Pe.prototype.clear=function(){this.size=0,this.__data__={hash:new _e,map:new(fe||Ee),string:new _e}},Pe.prototype.delete=function(e){var t=ze(this,e).delete(e);return this.size-=t?1:0,t},Pe.prototype.get=function(e){return ze(this,e).get(e)},Pe.prototype.has=function(e){return ze(this,e).has(e)},Pe.prototype.set=function(e,t){var n=ze(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Ce.prototype.add=Ce.prototype.push=function(e){return this.__data__.set(e,r),this},Ce.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.clear=function(){this.__data__=new Ee,this.size=0},Ie.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Ie.prototype.get=function(e){return this.__data__.get(e)},Ie.prototype.has=function(e){return this.__data__.has(e)},Ie.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ee){var r=n.__data__;if(!fe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Pe(r)}return n.set(e,t),this.size=n.size,this};var Ne=le?function(l){return null==l?[]:(l=Object(l),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];s=a,oe.call(l,s)&&(o[i++]=a)}var s;return o}(le(l)))}:function(){return[]},De=Me;function Be(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fe(e,t){return e===t||e!=e&&t!=t}(de&&De(new de(new ArrayBuffer(1)))!=j||fe&&De(new fe)!=_||pe&&De(pe.resolve())!=l||he&&De(new he)!=I||ve&&De(new ve)!=d)&&(De=function(e){var t=Me(e),n=t==P?e.constructor:void 0,r=n?Be(n):"";if(r)switch(r){case me:return j;case ye:return _;case be:return l;case we:return I;case xe:return d}return t});var Ue=Ae(function(){return arguments}())?Ae:function(e){return Xe(e)&&Z.call(e,"callee")&&!oe.call(e,"callee")},Ke=Array.isArray,Ve=ue||function(){return!1};function We(e){if(!Ye(e))return!1;var t=Me(e);return t==o||t==a||t==i||t==u}function He(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=f}function Ye(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Xe(e){return null!=e&&"object"==typeof e}var qe,$e=F?(qe=F,function(e){return qe(e)}):function(e){return Xe(e)&&He(e.length)&&!!v[Me(e)]};function Ge(e){return null!=(t=e)&&He(t.length)&&!We(t)?function(e,t){var n,r,i=Ke(e),o=!i&&Ue(e),a=!i&&!o&&Ve(e),s=!i&&!o&&!a&&$e(e),l=i||o||a||s,u=l?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],c=u.length;for(var d in e)!t&&!Z.call(e,d)||l&&("length"==d||a&&("offset"==d||"parent"==d)||s&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||(n=d,(r=null==(r=c)?f:r)&&("number"==typeof n||h.test(n))&&-1<n&&n%1==0&&n<r))||u.push(d);return u}(e):function(e){if(n=(t=e)&&t.constructor,t!==("function"==typeof n&&n.prototype||$))return ce(e);var t,n,r=[];for(var i in Object(e))Z.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e);var t}e.exports=function(e,t){return je(e,t)}},2061:function(e,t,n){var y="Expected a function",i=NaN,o="[object Symbol]",a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt,r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,f=r||d||Function("return this")(),p=Object.prototype.toString,b=Math.max,w=Math.min,x=function(){return f.Date.now()};function k(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function S(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&p.call(t)==o)return i;var t;if(k(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=k(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var r=l.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):s.test(e)?i:+e}e.exports=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError(y);return k(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(r,i,e){var o,a,n,s,l,u,c=0,d=!1,f=!1,t=!0;if("function"!=typeof r)throw new TypeError(y);function p(e){var t=o,n=a;return o=a=void 0,c=e,s=r.apply(n,t)}function h(e){var t=e-u;return void 0===u||i<=t||t<0||f&&n<=e-c}function v(){var e,t=x();if(h(t))return g(t);l=setTimeout(v,(e=i-(t-u),f?w(e,n-(t-c)):e))}function g(e){return l=void 0,t&&o?p(e):(o=a=void 0,s)}function m(){var e,t=x(),n=h(t);if(o=arguments,a=this,u=t,n){if(void 0===l)return c=e=u,l=setTimeout(v,i),d?p(e):s;if(f)return l=setTimeout(v,i),p(u)}return void 0===l&&(l=setTimeout(v,i)),s}return i=S(i)||0,k(e)&&(d=!!e.leading,n=(f="maxWait"in e)?b(S(e.maxWait)||0,i):n,t="trailing"in e?!!e.trailing:t),m.cancel=function(){void 0!==l&&clearTimeout(l),o=u=a=l=void(c=0)},m.flush=function(){return void 0===l?s:g(x())},m}(e,t,{leading:r,maxWait:t,trailing:i})}},8422:function(e,t,n){var r="__lodash_hash_undefined__",i="[object Function]",o="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,u=s||l||Function("return this")();function p(e,t){return!(!e||!e.length)&&-1<function(e,t,n){if(t!=t)return function(e,t,n,r){for(var i=e.length,o=-1;++o<i;)if(t(e[o],o,e))return o;return-1}(e,c);for(var r=-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t)}function c(e){return e!=e}function h(e,t){return e.has(t)}function v(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var d,f=Array.prototype,g=Function.prototype,m=Object.prototype,y=u["__core-js_shared__"],b=(d=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",w=g.toString,x=m.hasOwnProperty,k=m.toString,S=RegExp("^"+w.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=f.splice,E=z(u,"Map"),P=z(u,"Set"),C=z(Object,"create");function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function A(e){var t=-1,n=e?e.length:0;for(this.__data__=new M;++t<n;)this.add(e[t])}function j(e,t){for(var n,r,i=e.length;i--;)if((n=e[i][0])===(r=t)||n!=n&&r!=r)return i;return-1}I.prototype.clear=function(){this.__data__=C?C(null):{}},I.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},I.prototype.get=function(e){var t=this.__data__;if(C){var n=t[e];return n===r?void 0:n}return x.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return C?void 0!==t[e]:x.call(t,e)},I.prototype.set=function(e,t){return this.__data__[e]=C&&void 0===t?r:t,this},T.prototype.clear=function(){this.__data__=[]},T.prototype.delete=function(e){var t=this.__data__,n=j(t,e);return!(n<0||(n==t.length-1?t.pop():_.call(t,n,1),0))},T.prototype.get=function(e){var t=this.__data__,n=j(t,e);return n<0?void 0:t[n][1]},T.prototype.has=function(e){return-1<j(this.__data__,e)},T.prototype.set=function(e,t){var n=this.__data__,r=j(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},M.prototype.clear=function(){this.__data__={hash:new I,map:new(E||T),string:new I}},M.prototype.delete=function(e){return L(this,e).delete(e)},M.prototype.get=function(e){return L(this,e).get(e)},M.prototype.has=function(e){return L(this,e).has(e)},M.prototype.set=function(e,t){return L(this,e).set(e,t),this},A.prototype.add=A.prototype.push=function(e){return this.__data__.set(e,r),this},A.prototype.has=function(e){return this.__data__.has(e)};var O=P&&1/v(new P([,-0]))[1]==1/0?function(e){return new P(e)}:function(){};function L(e,t){var n,r=e.__data__;return("string"==(n=typeof t)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?r["string"==typeof t?"string":"hash"]:r.map}function z(e,t){var n=null==e?void 0:e[t];return function(e){return!(!R(e)||b&&b in e)&&((n=R(t=e)?k.call(t):"")==i||n==o||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?S:a).test(function(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t,n}(n)?n:void 0}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,n){var r=-1,i=p,o=e.length,a=!0,s=[],l=s;if(200<=o){var u=O(e);if(u)return v(u);a=!1,i=h,l=new A}else l=s;e:for(;++r<o;){var c=e[r],d=c;if(c=0!==c?c:0,a&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue e;s.push(c)}else i(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}(e):[]}},4162:function(e,t,n){var r,i=function(){var m=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function o(e,t){if(!i[e]){i[e]={};for(var n=0;n<e.length;n++)i[e][e.charAt(n)]=n}return i[e][t]}var a={compressToBase64:function(e){if(null==e)return"";var t=a._compress(e,6,function(e){return n.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:a._decompress(t.length,32,function(e){return o(n,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":a._compress(e,15,function(e){return m(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:a._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=a.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var o=t.charCodeAt(r);n[2*r]=o>>>8,n[2*r+1]=o%256}return n},decompressFromUint8Array:function(e){if(null==e)return a.decompress(e);for(var t=new Array(e.length/2),n=0,r=t.length;n<r;n++)t[n]=256*e[2*n]+e[2*n+1];var i=[];return t.forEach(function(e){i.push(m(e))}),a.decompress(i.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":a._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),a._decompress(t.length,32,function(e){return o(r,t.charAt(e))}))},compress:function(e){return a._compress(e,16,function(e){return m(e)})},_compress:function(e,t,n){if(null==e)return"";var r,i,o,a={},s={},l="",u="",c="",d=2,f=3,p=2,h=[],v=0,g=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(a,l)||(a[l]=f++,s[l]=!0),u=c+l,Object.prototype.hasOwnProperty.call(a,u))c=u;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<p;r++)v<<=1,g==t-1?(g=0,h.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<p;r++)v=v<<1|i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1}0==--d&&(d=Math.pow(2,p),p++),delete s[c]}else for(i=a[c],r=0;r<p;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1;0==--d&&(d=Math.pow(2,p),p++),a[u]=f++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(r=0;r<p;r++)v<<=1,g==t-1?(g=0,h.push(n(v)),v=0):g++;for(i=c.charCodeAt(0),r=0;r<8;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1}else{for(i=1,r=0;r<p;r++)v=v<<1|i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i=0;for(i=c.charCodeAt(0),r=0;r<16;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1}0==--d&&(d=Math.pow(2,p),p++),delete s[c]}else for(i=a[c],r=0;r<p;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(i=2,r=0;r<p;r++)v=v<<1|1&i,g==t-1?(g=0,h.push(n(v)),v=0):g++,i>>=1;for(;;){if(v<<=1,g==t-1){h.push(n(v));break}g++}return h.join("")},decompress:function(t){return null==t?"":""==t?null:a._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,n){var r,i,o,a,s,l,u,c=[],d=4,f=4,p=3,h="",v=[],g={val:n(0),position:t,index:1};for(r=0;r<3;r+=1)c[r]=r;for(o=0,s=Math.pow(2,2),l=1;l!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<a?1:0)*l,l<<=1;switch(o){case 0:for(o=0,s=Math.pow(2,8),l=1;l!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<a?1:0)*l,l<<=1;u=m(o);break;case 1:for(o=0,s=Math.pow(2,16),l=1;l!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<a?1:0)*l,l<<=1;u=m(o);break;case 2:return""}for(i=c[3]=u,v.push(u);;){if(g.index>e)return"";for(o=0,s=Math.pow(2,p),l=1;l!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<a?1:0)*l,l<<=1;switch(u=o){case 0:for(o=0,s=Math.pow(2,8),l=1;l!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<a?1:0)*l,l<<=1;c[f++]=m(o),u=f-1,d--;break;case 1:for(o=0,s=Math.pow(2,16),l=1;l!=s;)a=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=n(g.index++)),o|=(0<a?1:0)*l,l<<=1;c[f++]=m(o),u=f-1,d--;break;case 2:return v.join("")}if(0==d&&(d=Math.pow(2,p),p++),c[u])h=c[u];else{if(u!==f)return null;h=i+i.charAt(0)}v.push(h),c[f++]=i+h.charAt(0),i=h,0==--d&&(d=Math.pow(2,p),p++)}}};return a}();void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)},534:function(e,t,n){"use strict";var r=n(7313),i=n(2224);function x(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,c={};function a(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(c[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),u=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function h(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}function y(e,i,t,n){var r,o=v.hasOwnProperty(i)?v[i]:null;(null!==o?0!==o.type:n||!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(i,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}(0,t,o,n)&&(t=null),n||null===o?(r=i,(u.call(p,r)||!u.call(f,r)&&(d.test(r)?p[r]=!0:!(f[r]=!0)))&&(null===t?e.removeAttribute(i):e.setAttribute(i,""+t))):o.mustUseProperty?e[o.propertyName]=null===t?3!==o.type&&"":t:(i=o.attributeName,n=o.attributeNamespace,null===t?e.removeAttribute(i):(t=3===(o=o.type)||4===o&&!0===t?"":""+t,n?e.setAttributeNS(n,i,t):e.setAttribute(i,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,m);v[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,m);v[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,m);v[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function z(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=L&&e[L]||e["@@iterator"])?e:null}var R,N=Object.assign;function D(e){if(void 0===R)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var B=!1;function F(t,e){if(!t||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(e){var r=e}Reflect.construct(t,[],e)}else{try{e.call()}catch(e){r=e}t.call(e.prototype)}else{try{throw Error()}catch(e){r=e}t()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,--s<0||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=a&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?D(t):""}function U(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return F(e.type,!1);case 11:return F(e.type.render,!1);case 1:return F(e.type,!0);default:return""}}function K(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case M:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case C:return(t.displayName||"Context")+".Consumer";case P:return(t._context.displayName||"Context")+".Provider";case I:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case A:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case j:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function q(e,t){var n=t.checked;return N({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function G(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Q(e,t){G(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?J(e,t.type,n):t.hasOwnProperty("defaultValue")&&J(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function J(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ee=Array.isArray;function te(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(x(91));return N({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(x(92));if(ee(n)){if(1<n.length)throw Error(x(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function ie(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,ce=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=he(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(t){pe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fe[e]=fe[t]})});var ge=N({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function me(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(x(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(x(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(x(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(x(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Se=null;function _e(e){if(e=fi(e)){if("function"!=typeof xe)throw Error(x(280));var t=e.stateNode;t&&(t=hi(t),xe(e.stateNode,e.type,t))}}function Ee(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Pe(){if(ke){var e=ke,t=Se;if(Se=ke=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Te=!1;function Me(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ce(e,t,n)}finally{Te=!1,(null!==ke||null!==Se)&&(Ie(),Pe())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=hi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(x(231,t,typeof n));return n}var je=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){je=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){je=!1}var Le=!1,ze=null,Re=!1,Ne=null,De={onError:function(e){Le=!0,ze=e}};function Be(e,t,n,r,i,o,a,s,l){Le=!1,ze=null,function(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}.apply(De,arguments)}function Fe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else for(e=t;0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;);return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ke(e){if(Fe(e)!==e)throw Error(x(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Fe(e)))throw Error(x(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null!==o){if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(x(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(x(189))}}if(n.alternate!==r)throw Error(x(190))}else{if(null===(r=i.return))break;n=r}}if(3!==n.tag)throw Error(x(188));return n.stateNode.current===n?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var We=i.unstable_scheduleCallback,He=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,qe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ge=i.unstable_ImmediatePriority,Qe=i.unstable_UserBlockingPriority,Ze=i.unstable_NormalPriority,Je=i.unstable_LowPriority,et=i.unstable_IdlePriority,tt=null,nt=null,rt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(it(e)/ot|0)|0},it=Math.log,ot=Math.LN2,at=64,st=4194304;function lt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!=s?r=lt(s):0!=(o&=a)&&(r=lt(o))}else 0!=(a=n&~i)?r=lt(a):0!==o&&(r=lt(o));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!=(4194240&o)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-rt(t)),r|=e[n],t&=~i;return r}function ct(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=at;return 0==(4194240&(at<<=1))&&(at=64),e}function pt(e){for(var t=[],n=0;n<31;n++)t.push(e);return t}function ht(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function mt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var yt,bt,wt,xt,kt,St=!1,_t=[],Et=null,Pt=null,Ct=null,It=new Map,Tt=new Map,Mt=[],At="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Ot(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&null!==(t=fi(t))&&bt(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i)),e}function Lt(e){var t=di(e.target);if(null!==t){var n=Fe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void kt(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=fi(n))&&bt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Rt(e,t,n){zt(e)&&n.delete(t)}function Nt(){St=!1,null!==Et&&zt(Et)&&(Et=null),null!==Pt&&zt(Pt)&&(Pt=null),null!==Ct&&zt(Ct)&&(Ct=null),It.forEach(Rt),Tt.forEach(Rt)}function Dt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Nt)))}function Bt(t){function e(e){return Dt(e,t)}if(0<_t.length){Dt(_t[0],t);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Et&&Dt(Et,t),null!==Pt&&Dt(Pt,t),null!==Ct&&Dt(Ct,t),It.forEach(e),Tt.forEach(e),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Mt.shift()}var Ft=b.ReactCurrentBatchConfig,Ut=!0;function Kt(e,t,n,r){var i=gt,o=Ft.transition;Ft.transition=null;try{gt=1,Wt(e,t,n,r)}finally{gt=i,Ft.transition=o}}function Vt(e,t,n,r){var i=gt,o=Ft.transition;Ft.transition=null;try{gt=4,Wt(e,t,n,r)}finally{gt=i,Ft.transition=o}}function Wt(e,t,n,r){if(Ut){var i=Yt(e,t,n,r);if(null===i)Nr(e,t,r,Ht,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Et=Ot(Et,e,t,n,r,i),!0;case"dragenter":return Pt=Ot(Pt,e,t,n,r,i),!0;case"mouseover":return Ct=Ot(Ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Ot(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Tt.set(o,Ot(Tt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<At.indexOf(e)){for(;null!==i;){var o=fi(i);if(null!==o&&yt(o),null===(o=Yt(e,t,n,r))&&Nr(e,t,r,Ht,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Nr(e,t,r,null,n)}}var Ht=null;function Yt(e,t,n,r){if((Ht=null)!==(e=di(e=we(r))))if(null===(t=Fe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ge:return 1;case Qe:return 4;case Ze:case Je:return 16;case et:return 536870912;default:return 16}default:return 16}}var qt=null,$t=null,Gt=null;function Qt(){if(Gt)return Gt;var e,t,n=$t,r=n.length,i="value"in qt?qt.value:qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Gt=i.slice(e,1<t?1-t:void 0)}function Zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function en(){return!1}function tn(a){function e(e,t,n,r,i){for(var o in this._reactName=e,this._targetInst=n,this.type=t,this.nativeEvent=r,this.target=i,this.currentTarget=null,a)a.hasOwnProperty(o)&&(e=a[o],this[o]=e?e(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?Jt:en,this.isPropagationStopped=en,this}return N(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),e}var nn,rn,on,an={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=tn(an),ln=N({},an,{view:0,detail:0}),un=tn(ln),cn=N({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(rn=on&&"mousemove"===e.type?(nn=e.screenX-on.screenX,e.screenY-on.screenY):nn=0,on=e),nn)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),dn=tn(cn),fn=tn(N({},cn,{dataTransfer:0})),pn=tn(N({},ln,{relatedTarget:0})),hn=tn(N({},an,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=tn(N({},an,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),gn=tn(N({},an,{data:0})),mn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function xn(){return wn}var kn=tn(N({},ln,{key:function(e){if(e.key){var t=mn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?Zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Sn=tn(N({},cn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=tn(N({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),En=tn(N({},an,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=tn(N({},cn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Cn=[9,13,27,32],In=l&&"CompositionEvent"in window,Tn=null;l&&"documentMode"in document&&(Tn=document.documentMode);var Mn=l&&"TextEvent"in window&&!Tn,An=l&&(!In||Tn&&8<Tn&&Tn<=11),jn=String.fromCharCode(32),On=!1;function Ln(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1,Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nn[e.type]:"textarea"===t}function Bn(e,t,n,r){Ee(r),0<(t=Br(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fn=null,Un=null;function Kn(e){Ar(e,0)}function Vn(e){if(Y(pi(e)))return e}function Wn(e,t){if("change"===e)return t}var Hn=!1;if(l){var Yn;if(l){var Xn="oninput"in document;if(!Xn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),Xn="function"==typeof qn.oninput}Yn=Xn}else Yn=!1;Hn=Yn&&(!document.documentMode||9<document.documentMode)}function $n(){Fn&&(Fn.detachEvent("onpropertychange",Gn),Un=Fn=null)}function Gn(e){if("value"===e.propertyName&&Vn(Un)){var t=[];Bn(t,Un,e,we(e)),Me(Kn,t)}}function Qn(e,t,n){"focusin"===e?($n(),Un=n,(Fn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&$n()}function Zn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Un)}function Jn(e,t){if("click"===e)return Vn(t)}function er(e,t){if("input"===e||"change"===e)return Vn(t)}var tr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nr(e,t){if(tr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!tr(e[i],t[i]))return!1}return!0}function rr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ir(e,t){var n,r=rr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rr(r)}}function or(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function ar(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function sr(e){var t=or(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&ar(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&r<o&&(i=r,r=o,o=i),i=ir(n,o);var a=ir(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),r<o?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var lr=l&&"documentMode"in document&&document.documentMode<=11,ur=null,cr=null,dr=null,fr=!1;function pr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;fr||null==ur||ur!==X(r)||(r="selectionStart"in(r=ur)&&ar(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},dr&&nr(dr,r)||(dr=r,0<(r=Br(cr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ur)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionend:hr("Transition","TransitionEnd")},gr={},mr={};function yr(e){if(gr[e])return gr[e];if(!vr[e])return e;var t,n=vr[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return gr[e]=n[t];return e}l&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);var br=yr("animationend"),wr=yr("animationiteration"),xr=yr("animationstart"),kr=yr("transitionend"),Sr=new Map,_r="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Sr.set(e,t),a(t,[e])}for(var Pr=0;Pr<_r.length;Pr++){var Cr=_r[Pr];Er(Cr.toLowerCase(),"on"+(Cr[0].toUpperCase()+Cr.slice(1)))}Er(br,"onAnimationEnd"),Er(wr,"onAnimationIteration"),Er(xr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(kr,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,l){if(Be.apply(this,arguments),Le){if(!Le)throw Error(x(198));var u=ze;Le=!1,ze=null,Re||(Re=!0,Ne=u)}}(r,t,void 0,e),e.currentTarget=null}function Ar(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Mr(i,s,u),o=l}}}if(Re)throw e=Ne,Re=!1,Ne=null,e}function jr(e,t){var n=t[li];void 0===n&&(n=t[li]=new Set);var r=e+"__bubble";n.has(r)||(Rr(t,e,2,!1),n.add(r))}function Or(e,t,n){var r=0;t&&(r|=4),Rr(n,e,r,t)}var Lr="_reactListening"+Math.random().toString(36).slice(2);function zr(t){if(!t[Lr]){t[Lr]=!0,o.forEach(function(e){"selectionchange"!==e&&(Tr.has(e)||Or(e,!1,t),Or(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Lr]||Or("selectionchange",!(e[Lr]=!0),e)}}function Rr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Vt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Nr(g,m,y,e,t){var b=e;if(0==(1&m)&&0==(2&m)&&null!==e)e:for(;;){if(null===e)return;var n=e.tag;if(3===n||4===n){var r=e.stateNode.containerInfo;if(r===t||8===r.nodeType&&r.parentNode===t)break;if(4===n)for(n=e.return;null!==n;){var i=n.tag;if((3===i||4===i)&&((i=n.stateNode.containerInfo)===t||8===i.nodeType&&i.parentNode===t))return;n=n.return}for(;null!==r;){if(null===(n=di(r)))return;if(5===(i=n.tag)||6===i){e=b=n;continue e}r=r.parentNode}}e=e.return}Me(function(){var e=b,t=we(y),n=[];e:{var r=Sr.get(g);if(void 0!==r){var i=sn,o=g;switch(g){case"keypress":if(0===Zt(y))break e;case"keydown":case"keyup":i=kn;break;case"focusin":o="focus",i=pn;break;case"focusout":o="blur",i=pn;break;case"beforeblur":case"afterblur":i=pn;break;case"click":if(2===y.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=_n;break;case br:case wr:case xr:i=hn;break;case kr:i=En;break;case"scroll":i=un;break;case"wheel":i=Pn;break;case"copy":case"cut":case"paste":i=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=Sn}var a=0!=(4&m),s=!a&&"scroll"===g,l=a?null!==r?r+"Capture":null:r;a=[];for(var u,c=e;null!==c;){var d=(u=c).stateNode;if(5===u.tag&&null!==d&&(u=d,null!==l&&null!=(d=Ae(c,l))&&a.push(Dr(c,d,u))),s)break;c=c.return}0<a.length&&(r=new i(r,o,null,y,t),n.push({event:r,listeners:a}))}}if(0==(7&m)){if(i="mouseout"===g||"pointerout"===g,(!(r="mouseover"===g||"pointerover"===g)||y===be||!(o=y.relatedTarget||y.fromElement)||!di(o)&&!o[si])&&(i||r)&&(r=t.window===t?t:(r=t.ownerDocument)?r.defaultView||r.parentWindow:window,i?(i=e,null!==(o=(o=y.relatedTarget||y.toElement)?di(o):null)&&(o!==(s=Fe(o))||5!==o.tag&&6!==o.tag)&&(o=null)):(i=null,o=e),i!==o)){if(a=dn,d="onMouseLeave",l="onMouseEnter",c="mouse","pointerout"!==g&&"pointerover"!==g||(a=Sn,d="onPointerLeave",l="onPointerEnter",c="pointer"),s=null==i?r:pi(i),u=null==o?r:pi(o),(r=new a(d,c+"leave",i,y,t)).target=s,r.relatedTarget=u,d=null,di(t)===e&&((a=new a(l,c+"enter",o,y,t)).target=u,a.relatedTarget=s,d=a),s=d,i&&o)e:{for(l=o,c=0,u=a=i;u;u=Fr(u))c++;for(u=0,d=l;d;d=Fr(d))u++;for(;0<c-u;)a=Fr(a),c--;for(;0<u-c;)l=Fr(l),u--;for(;c--;){if(a===l||null!==l&&a===l.alternate)break e;a=Fr(a),l=Fr(l)}a=null}else a=null;null!==i&&Ur(n,r,i,a,!1),null!==o&&null!==s&&Ur(n,s,o,a,!0)}if("select"===(i=(r=e?pi(e):window).nodeName&&r.nodeName.toLowerCase())||"input"===i&&"file"===r.type)var f=Wn;else if(Dn(r))if(Hn)f=er;else{f=Zn;var p=Qn}else(i=r.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(f=Jn);switch(f&&(f=f(g,e))?Bn(n,f,y,t):(p&&p(g,r,e),"focusout"===g&&(p=r._wrapperState)&&p.controlled&&"number"===r.type&&J(r,"number",r.value)),p=e?pi(e):window,g){case"focusin":(Dn(p)||"true"===p.contentEditable)&&(ur=p,cr=e,dr=null);break;case"focusout":dr=cr=ur=null;break;case"mousedown":fr=!0;break;case"contextmenu":case"mouseup":case"dragend":fr=!1,pr(n,y,t);break;case"selectionchange":if(lr)break;case"keydown":case"keyup":pr(n,y,t)}var h;if(In)e:{switch(g){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Rn?Ln(g,y)&&(v="onCompositionEnd"):"keydown"===g&&229===y.keyCode&&(v="onCompositionStart");v&&(An&&"ko"!==y.locale&&(Rn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Rn&&(h=Qt()):($t="value"in(qt=t)?qt.value:qt.textContent,Rn=!0)),0<(p=Br(e,v)).length&&(v=new gn(v,g,null,y,t),n.push({event:v,listeners:p}),h?v.data=h:null!==(h=zn(y))&&(v.data=h))),(h=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(On=!0,jn);case"textInput":return(e=t.data)===jn&&On?null:e;default:return null}}(g,y):function(e,t){if(Rn)return"compositionend"===e||!In&&Ln(e,t)?(e=Qt(),Gt=$t=qt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(g,y))&&0<(e=Br(e,"onBeforeInput")).length&&(t=new gn("onBeforeInput","beforeinput",null,y,t),n.push({event:t,listeners:e}),t.data=h)}Ar(n,m)})}function Dr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Br(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ae(e,n))&&r.unshift(Dr(e,o,i)),null!=(o=Ae(e,t))&&r.push(Dr(e,o,i))),e=e.return}return r}function Fr(e){if(null===e)return null;for(;(e=e.return)&&5!==e.tag;);return e||null}function Ur(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Ae(n,o))&&a.unshift(Dr(n,l,s)):i||null!=(l=Ae(n,o))&&a.push(Dr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Kr=/\r\n?/g,Vr=/\u0000|\uFFFD/g;function Wr(e){return("string"==typeof e?e:""+e).replace(Kr,"\n").replace(Vr,"")}function Hr(e,t,n){if(t=Wr(t),Wr(e)!==t&&n)throw Error(x(425))}function Yr(){}var Xr=null,qr=null;function $r(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"==typeof setTimeout?setTimeout:void 0,Qr="function"==typeof clearTimeout?clearTimeout:void 0,Zr="function"==typeof Promise?Promise:void 0,Jr="function"==typeof queueMicrotask?queueMicrotask:void 0!==Zr?function(e){return Zr.resolve(null).then(e).catch(ei)}:Gr;function ei(e){setTimeout(function(){throw e})}function ti(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ni(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ri(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ii=Math.random().toString(36).slice(2),oi="__reactFiber$"+ii,ai="__reactProps$"+ii,si="__reactContainer$"+ii,li="__reactEvents$"+ii,ui="__reactListeners$"+ii,ci="__reactHandles$"+ii;function di(e){var t=e[oi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[si]||n[oi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ri(e);null!==e;){if(n=e[oi])return n;e=ri(e)}return t}n=(e=n).parentNode}return null}function fi(e){return!(e=e[oi]||e[si])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function pi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(x(33))}function hi(e){return e[ai]||null}var vi=[],gi=-1;function mi(e){return{current:e}}function yi(e){gi<0||(e.current=vi[gi],vi[gi]=null,gi--)}function bi(e,t){vi[++gi]=e.current,e.current=t}var wi={},xi=mi(wi),ki=mi(!1),Si=wi;function _i(e,t){var n=e.type.contextTypes;if(!n)return wi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ei(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){yi(ki),yi(xi)}function Ci(e,t,n){if(xi.current!==wi)throw Error(x(168));bi(xi,t),bi(ki,n)}function Ii(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(x(108,K(e)||"Unknown",i));return N({},n,r)}function Ti(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wi,Si=xi.current,bi(xi,e),bi(ki,ki.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(x(169));n?(e=Ii(e,t,Si),r.__reactInternalMemoizedMergedChildContext=e,yi(ki),yi(xi),bi(xi,e)):yi(ki),bi(ki,n)}var Ai=null,ji=!1,Oi=!1;function Li(e){null===Ai?Ai=[e]:Ai.push(e)}function zi(){if(!Oi&&null!==Ai){Oi=!0;var t=0,e=gt;try{var n=Ai;for(gt=1;t<n.length;t++)for(var r=n[t];null!==(r=r(!0)););Ai=null,ji=!1}catch(e){throw null!==Ai&&(Ai=Ai.slice(t+1)),We(Ge,zi),e}finally{gt=e,Oi=!1}}return null}var Ri=[],Ni=0,Di=null,Bi=0,Fi=[],Ui=0,Ki=null,Vi=1,Wi="";function Hi(e,t){Ri[Ni++]=Bi,Ri[Ni++]=Di,Di=e,Bi=t}function Yi(e,t,n){Fi[Ui++]=Vi,Fi[Ui++]=Wi,Fi[Ui++]=Ki,Ki=e;var r=Vi;e=Wi;var i=32-rt(r)-1;r&=~(1<<i),n+=1;var o=32-rt(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Vi=1<<32-rt(t)+i|n<<i|r,Wi=o+e}else Vi=1<<o|n<<i|r,Wi=e}function Xi(e){null!==e.return&&(Hi(e,1),Yi(e,1,0))}function qi(e){for(;e===Di;)Di=Ri[--Ni],Ri[Ni]=null,Bi=Ri[--Ni],Ri[Ni]=null;for(;e===Ki;)Ki=Fi[--Ui],Fi[Ui]=null,Wi=Fi[--Ui],Fi[Ui]=null,Vi=Fi[--Ui],Fi[Ui]=null}var $i=null,Gi=null,Qi=!1,Zi=null;function Ji(e,t){var n=vu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,null===(t=(n.return=e).deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function eo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,$i=e,Gi=ni(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,$i=e,!(Gi=null));case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Vi,overflow:Wi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=vu(18,null,null,0)).stateNode=t,(n.return=e).child=n,$i=e,!(Gi=null));default:return!1}}function to(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function no(e){if(Qi){var t=Gi;if(t){var n=t;if(!eo(e,t)){if(to(e))throw Error(x(418));t=ni(n.nextSibling);var r=$i;t&&eo(e,t)?Ji(r,n):(e.flags=-4097&e.flags|2,Qi=!1,$i=e)}}else{if(to(e))throw Error(x(418));e.flags=-4097&e.flags|2,Qi=!1,$i=e}}}function ro(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;$i=e}function io(e){if(e!==$i)return!1;if(!Qi)return ro(e),!(Qi=!0);var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!$r(e.type,e.memoizedProps)),t&&(t=Gi)){if(to(e))throw oo(),Error(x(418));for(;t;)Ji(e,t),t=ni(t.nextSibling)}if(ro(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(x(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Gi=ni(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Gi=null}}else Gi=$i?ni(e.stateNode.nextSibling):null;return!0}function oo(){for(var e=Gi;e;)e=ni(e.nextSibling)}function ao(){Gi=$i=null,Qi=!1}function so(e){null===Zi?Zi=[e]:Zi.push(e)}var lo=b.ReactCurrentBatchConfig;function uo(e,t){if(e&&e.defaultProps){for(var n in t=N({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var co=mi(null),fo=null,po=null,ho=null;function vo(){ho=po=fo=null}function go(e){var t=co.current;yi(co),e._currentValue=t}function mo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yo(e,t){ho=po=null,null!==(e=(fo=e).dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(cs=!0),e.firstContext=null)}function bo(e){var t=e._currentValue;if(ho!==e)if(e={context:e,memoizedValue:t,next:null},null===po){if(null===fo)throw Error(x(308));po=e,fo.dependencies={lanes:0,firstContext:e}}else po=po.next=e;return t}var wo=null;function xo(e){null===wo?wo=[e]:wo.push(e)}function ko(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xo(t)):(n.next=i.next,i.next=n),t.interleaved=n,So(e,r)}function So(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),e=(n=e).return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),e=(n=e).return;return 3===n.tag?n.stateNode:null}var _o=!1;function Eo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Po(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Io(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0==(2&gl))return null===(i=r.interleaved)?(t.next=t,xo(r)):(t.next=i.next,i.next=t),r.interleaved=t,So(e,n);var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,So(e,n)}function To(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,vt(e,t.lanes=n)}}function Mo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ao(e,t,n,r){var i=e.updateQueue;_o=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;(l.next=null)===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==o){var d=i.baseState;for(a=0,c=u=l=null,s=o;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,v=s;switch(f=t,p=n,v.tag){case 1:if("function"==typeof(h=v.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"==typeof(h=v.payload)?h.call(p,d,f):h)||void 0===f)break e;d=N({},d,f);break e;case 2:_o=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved))for(i=t;a|=i.lane,(i=i.next)!==t;);else null===o&&(i.shared.lanes=0);_l|=a,e.lanes=a,e.memoizedState=d}}function jo(e,t,n){if(e=t.effects,(t.effects=null)!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(x(191,i));i.call(r)}}}var Oo=(new r.Component).refs;function Lo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:N({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zo={isMounted:function(e){return!!(e=e._reactInternals)&&Fe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Kl(),i=Vl(e),o=Co(r,i);o.payload=t,null!=n&&(o.callback=n),null!==(t=Io(e,o,i))&&(Wl(t,e,i,r),To(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Kl(),i=Vl(e),o=Co(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=Io(e,o,i))&&(Wl(t,e,i,r),To(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Kl(),r=Vl(e),i=Co(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Io(e,i,r))&&(Wl(t,e,r,n),To(t,e,r))}};function Ro(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&nr(n,r)&&nr(i,o))}function No(e,t,n){var r=!1,i=wi,o=t.contextType;return t=new t(n,o="object"==typeof o&&null!==o?bo(o):(i=Ei(t)?Si:xi.current,(r=null!==(r=t.contextTypes)&&void 0!==r)?_i(e,i):wi)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zo,(e.stateNode=t)._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Do(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zo.enqueueReplaceState(t,t.state,null)}function Bo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Oo,Eo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=bo(o):(o=Ei(t)?Si:xi.current,i.context=_i(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Lo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zo.enqueueReplaceState(i,i.state,null),Ao(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Fo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(x(309));var r=n.stateNode}if(!r)throw Error(x(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:((t=function(e){var t=i.refs;t===Oo&&(t=i.refs={}),null===e?delete t[o]:t[o]=e})._stringRef=o,t)}if("string"!=typeof e)throw Error(x(284));if(!n._owner)throw Error(x(290,e))}return e}function Uo(e,t){throw e=Object.prototype.toString.call(t),Error(x(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ko(e){return(0,e._init)(e._payload)}function Vo(d){function f(e,t){if(d){var n=e.deletions;null===n?(e.deletions=[t],e.flags|=16):n.push(t)}}function p(e,t){if(!d)return null;for(;null!==t;)f(e,t),t=t.sibling;return null}function h(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=mu(e,t)).index=0,e.sibling=null,e}function v(e,t,n){return e.index=n,d?null!==(n=e.alternate)?(n=n.index)<t?(e.flags|=2,t):n:(e.flags|=2,t):(e.flags|=1048576,t)}function l(e){return d&&null===e.alternate&&(e.flags|=2),e}function o(e,t,n,r){return null===t||6!==t.tag?(t=xu(n,e.mode,r)).return=e:(t=s(t,n)).return=e,t}function a(e,t,n,r){var i=n.type;return i===S?c(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===j&&Ko(i)===t.type)?(r=s(t,n.props)).ref=Fo(e,t,n):(r=yu(n.type,n.key,n.props,null,e.mode,r)).ref=Fo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=ku(n,e.mode,r)).return=e:(t=s(t,n.children||[])).return=e,t}function c(e,t,n,r,i){return null===t||7!==t.tag?(t=bu(n,e.mode,r,i)).return=e:(t=s(t,n)).return=e,t}function g(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=xu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=yu(t.type,t.key,t.props,null,e.mode,n)).ref=Fo(e,null,t),n.return=e,n;case k:return(t=ku(t,e.mode,n)).return=e,t;case j:return g(e,(0,t._init)(t._payload),n)}if(ee(t)||z(t))return(t=bu(t,e.mode,n,null)).return=e,t;Uo(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?a(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case j:return m(e,t,(i=n._init)(n._payload),r)}if(ee(n)||z(n))return null!==i?null:c(e,t,n,r,null);Uo(e,n)}return null}function y(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return a(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return y(e,t,n,(0,r._init)(r._payload),i)}if(ee(r)||z(r))return c(t,e=e.get(n)||null,r,i,null);Uo(t,r)}return null}return function e(t,n,r,i){if("object"==typeof r&&null!==r&&r.type===S&&null===r.key&&(r=r.props.children),"object"==typeof r&&null!==r){switch(r.$$typeof){case w:e:{for(var o=r.key,a=n;null!==a;){if(a.key===o){if((o=r.type)===S){if(7===a.tag){p(t,a.sibling),(n=s(a,r.props.children)).return=t,t=n;break e}}else if(a.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===j&&Ko(o)===a.type){p(t,a.sibling),(n=s(a,r.props)).ref=Fo(t,a,r),n.return=t,t=n;break e}p(t,a);break}f(t,a),a=a.sibling}t=r.type===S?((n=bu(r.props.children,t.mode,i,r.key)).return=t,n):((i=yu(r.type,r.key,r.props,null,t.mode,i)).ref=Fo(t,n,r),i.return=t,i)}return l(t);case k:e:{for(a=r.key;null!==n;){if(n.key===a){if(4===n.tag&&n.stateNode.containerInfo===r.containerInfo&&n.stateNode.implementation===r.implementation){p(t,n.sibling),(n=s(n,r.children||[])).return=t,t=n;break e}p(t,n);break}f(t,n),n=n.sibling}(n=ku(r,t.mode,i)).return=t,t=n}return l(t);case j:return e(t,n,(a=r._init)(r._payload),i)}if(ee(r))return function(t,e,n,r){for(var i=null,o=null,a=e,s=e=0,l=null;null!==a&&s<n.length;s++){a.index>s?(l=a,a=null):l=a.sibling;var u=m(t,a,n[s],r);if(null===u){null===a&&(a=l);break}d&&a&&null===u.alternate&&f(t,a),e=v(u,e,s),null===o?i=u:o.sibling=u,o=u,a=l}if(s===n.length)return p(t,a),Qi&&Hi(t,s),i;if(null===a){for(;s<n.length;s++)null!==(a=g(t,n[s],r))&&(e=v(a,e,s),null===o?i=a:o.sibling=a,o=a);return Qi&&Hi(t,s),i}for(a=h(t,a);s<n.length;s++)null!==(l=y(a,t,s,n[s],r))&&(d&&null!==l.alternate&&a.delete(null===l.key?s:l.key),e=v(l,e,s),null===o?i=l:o.sibling=l,o=l);return d&&a.forEach(function(e){return f(t,e)}),Qi&&Hi(t,s),i}(t,n,r,i);if(z(r))return function(t,e,n,r){var i=z(n);if("function"!=typeof i)throw Error(x(150));if(null==(n=i.call(n)))throw Error(x(151));for(var o=i=null,a=e,s=e=0,l=null,u=n.next();null!==a&&!u.done;s++,u=n.next()){a.index>s?(l=a,a=null):l=a.sibling;var c=m(t,a,u.value,r);if(null===c){null===a&&(a=l);break}d&&a&&null===c.alternate&&f(t,a),e=v(c,e,s),null===o?i=c:o.sibling=c,o=c,a=l}if(u.done)return p(t,a),Qi&&Hi(t,s),i;if(null===a){for(;!u.done;s++,u=n.next())null!==(u=g(t,u.value,r))&&(e=v(u,e,s),null===o?i=u:o.sibling=u,o=u);return Qi&&Hi(t,s),i}for(a=h(t,a);!u.done;s++,u=n.next())null!==(u=y(a,t,s,u.value,r))&&(d&&null!==u.alternate&&a.delete(null===u.key?s:u.key),e=v(u,e,s),null===o?i=u:o.sibling=u,o=u);return d&&a.forEach(function(e){return f(t,e)}),Qi&&Hi(t,s),i}(t,n,r,i);Uo(t,r)}return"string"==typeof r&&""!==r||"number"==typeof r?(r=""+r,l(t=(null!==n&&6===n.tag?(p(t,n.sibling),(n=s(n,r)).return=t):(p(t,n),(n=xu(r,t.mode,i)).return=t),n))):p(t,n)}}var Wo=Vo(!0),Ho=Vo(!1),Yo={},Xo=mi(Yo),qo=mi(Yo),$o=mi(Yo);function Go(e){if(e===Yo)throw Error(x(174));return e}function Qo(e,t){switch(bi($o,t),bi(qo,e),bi(Xo,Yo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}yi(Xo),bi(Xo,t)}function Zo(){yi(Xo),yi(qo),yi($o)}function Jo(e){Go($o.current);var t=Go(Xo.current),n=se(t,e.type);t!==n&&(bi(qo,e),bi(Xo,n))}function ea(e){qo.current===e&&(yi(Xo),yi(qo))}var ta=mi(0);function na(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function ia(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var oa=b.ReactCurrentDispatcher,aa=b.ReactCurrentBatchConfig,sa=0,la=null,ua=null,ca=null,da=!1,fa=!1,pa=0,ha=0;function va(){throw Error(x(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,o){if(sa=o,(la=t).memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Qa:Za,e=n(r,i),fa){o=0;do{if(fa=!1,pa=0,25<=o)throw Error(x(301));o+=1,ca=ua=null,t.updateQueue=null,oa.current=Ja,e=n(r,i)}while(fa)}if(oa.current=Ga,t=null!==ua&&null!==ua.next,sa=0,ca=ua=la=null,da=!1,t)throw Error(x(300));return e}function ya(){var e=0!==pa;return pa=0,e}function ba(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?la.memoizedState=ca=e:ca=ca.next=e,ca}function wa(){if(null===ua){var e=la.alternate;e=null!==e?e.memoizedState:null}else e=ua.next;var t=null===ca?la.memoizedState:ca.next;if(null!==t)ca=t,ua=e;else{if(null===e)throw Error(x(310));e={memoizedState:(ua=e).memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},null===ca?la.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"==typeof t?t(e):t}function ka(e){var t=wa(),n=t.queue;if(null===n)throw Error(x(311));n.lastRenderedReducer=e;var r=ua,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=a=null,l=null,u=o;do{var c=u.lane;if((sa&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(s=l=d,a=r):l=l.next=d,la.lanes|=c,_l|=c}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=s,tr(r,t.memoizedState)||(cs=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved))for(i=e;o=i.lane,la.lanes|=o,_l|=o,(i=i.next)!==e;);else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=wa(),n=t.queue;if(null===n)throw Error(x(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;for(var a=i=i.next;o=e(o,a.action),(a=a.next)!==i;);tr(o,t.memoizedState)||(cs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function _a(){}function Ea(e,t){var n=la,r=wa(),i=t(),o=!tr(r.memoizedState,i);if(o&&(r.memoizedState=i,cs=!0),r=r.queue,Na(Ia.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,ja(9,Ca.bind(null,n,r,i,t),void 0,null),null===ml)throw Error(x(349));0!=(30&sa)||Pa(n,t,i)}return i}function Pa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},(la.updateQueue=t).stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ma(e)}function Ia(e,t,n){return n(function(){Ta(t)&&Ma(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tr(e,n)}catch(e){return!0}}function Ma(e){var t=So(e,1);null!==t&&Wl(t,e,1,-1)}function Aa(e){var t=ba();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},e=(t.queue=e).dispatch=function(e,t,n){var r=Vl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))qa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,tr(s,a)){var l=t.interleaved;return null===l?(i.next=i,xo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=ko(e,t,i,r))&&(Wl(n,e,r,i=Kl()),$a(n,t,r))}}.bind(null,la,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=la.updateQueue)?(t={lastEffect:null,stores:null},(la.updateQueue=t).lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,(n.next=e).next=r,t.lastEffect=e),e}function Oa(){return wa().memoizedState}function La(e,t,n,r){var i=ba();la.flags|=e,i.memoizedState=ja(1|t,n,void 0,void 0===r?null:r)}function za(e,t,n,r){var i=wa();r=void 0===r?null:r;var o=void 0;if(null!==ua){var a=ua.memoizedState;if(o=a.destroy,null!==r&&ga(r,a.deps))return void(i.memoizedState=ja(t,n,o,r))}la.flags|=e,i.memoizedState=ja(1|t,n,o,r)}function Ra(e,t){return La(8390656,8,e,t)}function Na(e,t){return za(2048,8,e,t)}function Da(e,t){return za(4,2,e,t)}function Ba(e,t){return za(4,4,e,t)}function Fa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!=n?n.concat([e]):null,za(4,4,Fa.bind(null,t,e),n)}function Ka(){}function Va(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0==(21&sa)?(e.baseState&&(e.baseState=!1,cs=!0),e.memoizedState=n):(tr(n,t)||(n=ft(),la.lanes|=n,_l|=n,e.baseState=!0),t)}function Ya(){return wa().memoizedState}function Xa(e){var t=e.alternate;return e===la||null!==t&&t===la}function qa(e,t){fa=da=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $a(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,vt(e,t.lanes=n)}}var Ga={readContext:bo,useCallback:va,useContext:va,useEffect:va,useImperativeHandle:va,useInsertionEffect:va,useLayoutEffect:va,useMemo:va,useReducer:va,useRef:va,useState:va,useDebugValue:va,useDeferredValue:va,useTransition:va,useMutableSource:va,useSyncExternalStore:va,useId:va,unstable_isNewReconciler:!1},Qa={readContext:bo,useCallback:function(e,t){return ba().memoizedState=[e,void 0===t?null:t],e},useContext:bo,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,La(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return La(4194308,4,e,t)},useInsertionEffect:function(e,t){return La(4,2,e,t)},useMemo:function(e,t){var n=ba();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ba();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=(r.queue=e).dispatch=function(e,t,n){var r=Vl(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xa(e)?qa(t,n):null!==(n=ko(e,t,n,r))&&(Wl(n,e,r,Kl()),$a(n,t,r))}.bind(null,la,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ba().memoizedState=e},useState:Aa,useDebugValue:Ka,useDeferredValue:function(e){return ba().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=function(e,t){var n=gt;gt=0!==n&&n<4?n:4,e(!0);var r=aa.transition;aa.transition={};try{e(!1),t()}finally{gt=n,aa.transition=r}}.bind(null,e[1]),[t,ba().memoizedState=e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=la,i=ba();if(Qi){if(void 0===n)throw Error(x(407));n=n()}else{if(n=t(),null===ml)throw Error(x(349));0!=(30&sa)||Pa(r,t,n)}var o={value:i.memoizedState=n,getSnapshot:t};return i.queue=o,Ra(Ia.bind(null,r,o,e),[e]),r.flags|=2048,ja(9,Ca.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ba(),t=ml.identifierPrefix;if(Qi){var n=Wi;t=":"+t+"R"+(n=(Vi&~(1<<32-rt(Vi)-1)).toString(32)+n),0<(n=pa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:bo,useCallback:Va,useContext:bo,useEffect:Na,useImperativeHandle:Ua,useInsertionEffect:Da,useLayoutEffect:Ba,useMemo:Wa,useReducer:ka,useRef:Oa,useState:function(){return ka(xa)},useDebugValue:Ka,useDeferredValue:function(e){return Ha(wa(),ua.memoizedState,e)},useTransition:function(){return[ka(xa)[0],wa().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Ya,unstable_isNewReconciler:!1},Ja={readContext:bo,useCallback:Va,useContext:bo,useEffect:Na,useImperativeHandle:Ua,useInsertionEffect:Da,useLayoutEffect:Ba,useMemo:Wa,useReducer:Sa,useRef:Oa,useState:function(){return Sa(xa)},useDebugValue:Ka,useDeferredValue:function(e){var t=wa();return null===ua?t.memoizedState=e:Ha(t,ua.memoizedState,e)},useTransition:function(){return[Sa(xa)[0],wa().memoizedState]},useMutableSource:_a,useSyncExternalStore:Ea,useId:Ya,unstable_isNewReconciler:!1};function es(e,t){try{for(var n="",r=t;n+=U(r),r=r.return;);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function ts(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ns(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var rs="function"==typeof WeakMap?WeakMap:Map;function is(e,t,n){(n=Co(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jl||(jl=!0,Ol=r),ns(0,t)},n}function os(e,t,n){(n=Co(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ns(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){ns(0,t),"function"!=typeof r&&(null===Ll?Ll=new Set([this]):Ll.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function as(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new rs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=function(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Kl(),e.pingedLanes|=e.suspendedLanes&n,ml===e&&(bl&n)===n&&(4===kl||3===kl&&(130023424&bl)===bl&&qe()-Tl<500?Jl(e,0):Pl|=n),Hl(e,t)}.bind(null,e,t,n),t.then(e,e))}function ss(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ls(e,t,n,r,i){return 0==(1&e.mode)?e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Co(-1,1)).tag=2,Io(n,t,1))),n.lanes|=1):(e.flags|=65536,e.lanes=i),e}var us=b.ReactCurrentOwner,cs=!1;function ds(e,t,n,r){t.child=null===e?Ho(t,null,n,r):Wo(t,e.child,n,r)}function fs(e,t,n,r,i){n=n.render;var o=t.ref;return yo(t,i),r=ma(e,t,n,r,o,i),n=ya(),null===e||cs?(Qi&&n&&Xi(t),t.flags|=1,ds(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function ps(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||gu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=yu(n.type,null,r,t,t.mode,i)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=o,hs(e,t,o,r,i))}if(o=e.child,0==(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:nr)(a,r)&&e.ref===t.ref)return zs(e,t,i)}return t.flags|=1,(e=mu(o,r)).ref=t.ref,(e.return=t).child=e}function hs(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(nr(o,r)&&e.ref===t.ref){if(cs=!1,t.pendingProps=r=o,0==(e.lanes&i))return t.lanes=e.lanes,zs(e,t,i);0!=(131072&e.flags)&&(cs=!0)}}return ms(e,t,n,r,i)}function vs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(xl,wl),wl|=n;else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,bi(xl,wl),wl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,bi(xl,wl),wl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,bi(xl,wl),wl|=r;return ds(e,t,i,n),t.child}function gs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ms(e,t,n,r,i){var o=Ei(n)?Si:xi.current;return o=_i(t,o),yo(t,i),n=ma(e,t,n,r,o,i),r=ya(),null===e||cs?(Qi&&r&&Xi(t),t.flags|=1,ds(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zs(e,t,i))}function ys(e,t,n,r,i){if(Ei(n)){var o=!0;Ti(t)}else o=!1;if(yo(t,i),null===t.stateNode)Ls(e,t),No(t,n,r),Bo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?bo(u):_i(t,u=Ei(n)?Si:xi.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Do(t,a,r,u),_o=!1;var f=t.memoizedState;a.state=f,Ao(t,r,a,i),l=t.memoizedState,r=s!==r||f!==l||ki.current||_o?("function"==typeof c&&(Lo(t,n,c,r),l=t.memoizedState),(s=_o||Ro(t,n,s,r,f,l,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),!1)}else{a=t.stateNode,Po(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:uo(t.type,s),a.props=u,d=t.pendingProps,f=a.context,l="object"==typeof(l=n.contextType)&&null!==l?bo(l):_i(t,l=Ei(n)?Si:xi.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||f!==l)&&Do(t,a,r,l),_o=!1,f=t.memoizedState,a.state=f,Ao(t,r,a,i);var h=t.memoizedState;r=s!==d||f!==h||ki.current||_o?("function"==typeof p&&(Lo(t,n,p,r),h=t.memoizedState),(u=_o||Ro(t,n,u,r,f,h,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=l,u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),!1)}return bs(e,t,n,r,o,i)}function bs(e,t,n,r,i,o){gs(e,t);var a=0!=(128&t.flags);if(!r&&!a)return i&&Mi(t,n,!1),zs(e,t,o);r=t.stateNode,us.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Wo(t,e.child,null,o),t.child=Wo(t,null,s,o)):ds(e,t,s,o),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function ws(e){var t=e.stateNode;t.pendingContext?Ci(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ci(0,t.context,!1),Qo(e,t.containerInfo)}function xs(e,t,n,r,i){return ao(),so(i),t.flags|=256,ds(e,t,n,r),t.child}var ks,Ss,_s,Es,Ps={dehydrated:null,treeContext:null,retryLane:0};function Cs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Is(e,t,n){var r,i=t.pendingProps,o=ta.current,a=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),bi(ta,1&o),null===e)return no(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=wu(l,i,0,null),e=bu(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Cs(n),t.memoizedState=Ps,e):Ts(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(l)return 256&t.flags?(t.flags&=-257,Ms(e,t,a,r=ts(Error(x(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=wu({mode:"visible",children:r.children},i,0,null),(o=bu(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Wo(t,e.child,null,a),t.child.memoizedState=Cs(a),t.memoizedState=Ps,o);if(0==(1&t.mode))return Ms(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Ms(e,t,a,r=ts(o=Error(x(419)),r,void 0))}if(s=0!=(a&e.childLanes),cs||s){if(null!==(r=ml)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(So(e,o.retryLane=i),Wl(r,e,i,-1))}return nu(),Ms(e,t,a,r=ts(Error(x(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=function(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Gi=ni(i.nextSibling),$i=t,Qi=!0,(Zi=null)!==e&&(Fi[Ui++]=Vi,Fi[Ui++]=Wi,Fi[Ui++]=Ki,Vi=e.id,Wi=e.overflow,Ki=t),(t=Ts(t,r.children)).flags|=4096,t)}(e,t,0,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var s={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=s,t.deletions=null):(i=mu(o,s)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=mu(r,a):(a=bu(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Cs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ps,i}return e=(a=e.child).sibling,i=mu(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,(i.sibling=null)!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ts(e,t){return((t=wu({mode:"visible",children:t},e.mode,0,null)).return=e).child=t}function Ms(e,t,n,r){return null!==r&&so(r),Wo(t,e.child,null,n),(e=Ts(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function As(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),mo(e.return,t,n)}function js(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Os(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ds(e,t,r.children,n),0!=(2&(r=ta.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&As(e,n,t);else if(19===e.tag)As(e,n,t);else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(bi(ta,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===na(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===na(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,o);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ls(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),_l|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(x(153));if(null!==t.child){for(n=mu(e=t.child,e.pendingProps),(t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=mu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Rs(e,t){if(!Qi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ns(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ds(e,t,n){var r=t.pendingProps;switch(qi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(t),null;case 1:case 17:return Ei(t.type)&&Pi(),Ns(t),null;case 3:return r=t.stateNode,Zo(),yi(ki),yi(xi),ia(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(io(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==Zi&&(Xl(Zi),Zi=null))),Ss(e,t),Ns(t),null;case 5:ea(t);var i=Go($o.current);if(n=t.type,null!==e&&null!=t.stateNode)_s(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(x(166));return Ns(t),null}if(e=Go(Xo.current),io(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[oi]=t,r[ai]=o,e=0!=(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Ir.length;i++)jr(Ir[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":re(r,o),jr("invalid",r)}for(var a in me(n,o),i=null,o)if(o.hasOwnProperty(a)){var s=o[a];"children"===a?"string"==typeof s?r.textContent!==s&&(!0!==o.suppressHydrationWarning&&Hr(r.textContent,s,e),i=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(!0!==o.suppressHydrationWarning&&Hr(r.textContent,s,e),i=["children",""+s]):c.hasOwnProperty(a)&&null!=s&&"onScroll"===a&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Yr)}r=i,null!==(t.updateQueue=r)&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[oi]=t,e[ai]=r,ks(e,t,!1,!1),t.stateNode=e;e:{switch(a=ye(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ir.length;i++)jr(Ir[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=N({},r,{value:void 0}),jr("invalid",e);break;case"textarea":re(e,r),i=ne(e,r),jr("invalid",e)}for(o in me(n,i),s=i)if(s.hasOwnProperty(o)){var l=s[o];"style"===o?ve(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&ce(e,l):"children"===o?"string"==typeof l?("textarea"!==n||""!==l)&&de(e,l):"number"==typeof l&&de(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(c.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&y(e,o,l,a))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?te(e,!!r.multiple,o,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Yr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ns(t),null;case 6:if(e&&null!=t.stateNode)Es(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(x(166));if(n=Go($o.current),Go(Xo.current),io(t)){if(r=t.stateNode,n=t.memoizedProps,r[oi]=t,(o=r.nodeValue!==n)&&null!==(e=$i))switch(e.tag){case 3:Hr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Hr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[oi]=t).stateNode=r}return Ns(t),null;case 13:if(yi(ta),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Qi&&null!==Gi&&0!=(1&t.mode)&&0==(128&t.flags))oo(),ao(),t.flags|=98560,o=!1;else if(o=io(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(x(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(x(317));o[oi]=t}else ao(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ns(t),o=!1}else null!==Zi&&(Xl(Zi),Zi=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ta.current)?0===kl&&(kl=3):nu())),null!==t.updateQueue&&(t.flags|=4),Ns(t),null);case 4:return Zo(),Ss(e,t),null===e&&zr(t.stateNode.containerInfo),Ns(t),null;case 10:return go(t.type._context),Ns(t),null;case 19:if(yi(ta),null===(o=t.memoizedState))return Ns(t),null;if(r=0!=(128&t.flags),null===(a=o.rendering))if(r)Rs(o,!1);else{if(0!==kl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=na(e))){for(t.flags|=128,Rs(o,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return bi(ta,1&ta.current|2),t.child}e=e.sibling}null!==o.tail&&qe()>Ml&&(t.flags|=128,Rs(o,!(r=!0)),t.lanes=4194304)}else{if(!r)if(null!==(e=na(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Rs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!Qi)return Ns(t),null}else 2*qe()-o.renderingStartTime>Ml&&1073741824!==n&&(t.flags|=128,Rs(o,!(r=!0)),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=o.last)?n.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=qe(),t.sibling=null,n=ta.current,bi(ta,r?1&n|2:1&n),t):(Ns(t),null);case 22:case 23:return Zl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&wl)&&(Ns(t),6&t.subtreeFlags&&(t.flags|=8192)):Ns(t),null;case 24:case 25:return null}throw Error(x(156,t.tag))}function Bs(e,t){switch(qi(t),t.tag){case 1:return Ei(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zo(),yi(ki),yi(xi),ia(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ea(t),null;case 13:if(yi(ta),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(x(340));ao()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return yi(ta),null;case 4:return Zo(),null;case 10:return go(t.type._context),null;case 22:case 23:return Zl(),null;default:return null}}Ss=function(){};var Fs=!(Es=function(e,t,n,r){n!==r&&(t.flags|=4)}),Us=!(_s=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Go(Xo.current);var o,a=null;switch(n){case"input":i=q(e,i),r=q(e,r),a=[];break;case"select":i=N({},i,{value:void 0}),r=N({},r,{value:void 0}),a=[];break;case"textarea":i=ne(e,i),r=ne(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Yr)}for(u in me(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(c.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(null!=l||null!=s))if("style"===u)if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(c.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&jr("scroll",e),a||s===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}}),Ks="function"==typeof WeakSet?WeakSet:Set,Vs=null;function Ws(t,n){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){du(t,n,e)}else e.current=null}function Hs(t,n,e){try{e()}catch(e){du(t,n,e)}}var Ys=!(ks=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}});function Xs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;(i.destroy=void 0)!==o&&Hs(t,n,o)}i=i.next}while(i!==r)}}function qs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $s(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function Gs(e){var t=e.alternate;null!==t&&(e.alternate=null,Gs(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[oi],delete t[ai],delete t[li],delete t[ui],delete t[ci]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Qs(e){return 5===e.tag||3===e.tag||4===e.tag}function Zs(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Qs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e=(e.child.return=e).child}if(!(2&e.flags))return e.stateNode}}var Js=null,el=!1;function tl(e,t,n){for(n=n.child;null!==n;)nl(e,t,n),n=n.sibling}function nl(e,t,n){if(nt&&"function"==typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(tt,n)}catch(e){}switch(n.tag){case 5:Us||Ws(n,t);case 6:var r=Js,i=el;Js=null,tl(e,t,n),el=i,null!==(Js=r)&&(el?(e=Js,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Js.removeChild(n.stateNode));break;case 18:null!==Js&&(el?(e=Js,n=n.stateNode,8===e.nodeType?ti(e.parentNode,n):1===e.nodeType&&ti(e,n),Bt(e)):ti(Js,n.stateNode));break;case 4:r=Js,i=el,Js=n.stateNode.containerInfo,el=!0,tl(e,t,n),Js=r,el=i;break;case 0:case 11:case 14:case 15:if(!Us&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!=(2&o)||0!=(4&o))&&Hs(n,t,a),i=i.next}while(i!==r)}tl(e,t,n);break;case 1:if(!Us&&(Ws(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){du(n,t,e)}tl(e,t,n);break;case 21:tl(e,t,n);break;case 22:1&n.mode?(Us=(r=Us)||null!==n.memoizedState,tl(e,t,n),Us=r):tl(e,t,n);break;default:tl(e,t,n)}}function rl(n){var e=n.updateQueue;if(null!==e){n.updateQueue=null;var r=n.stateNode;null===r&&(r=n.stateNode=new Ks),e.forEach(function(e){var t=function(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(x(314))}null!==r&&r.delete(t),fu(e,n)}.bind(null,n,e);r.has(e)||(r.add(e),e.then(t,t))})}}function il(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;null!==s;){switch(s.tag){case 5:Js=s.stateNode,el=!1;break e;case 3:case 4:Js=s.stateNode.containerInfo,el=!0;break e}s=s.return}if(null===Js)throw Error(x(160));nl(o,a,i),Js=null,el=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(e){du(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ol(t,e),t=t.sibling}function ol(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(il(e,t),al(t),4&r){try{Xs(3,t,t.return),qs(3,t)}catch(e){du(t,t.return,e)}try{Xs(5,t,t.return)}catch(e){du(t,t.return,e)}}break;case 1:il(e,t),al(t),512&r&&null!==n&&Ws(n,n.return);break;case 5:if(il(e,t),al(t),512&r&&null!==n&&Ws(n,n.return),32&t.flags){var i=t.stateNode;try{de(i,"")}catch(e){du(t,t.return,e)}}if(4&r&&null!=(i=t.stateNode)){var o=t.memoizedProps,a=null!==n?n.memoizedProps:o,s=t.type,l=t.updateQueue;if((t.updateQueue=null)!==l)try{"input"===s&&"radio"===o.type&&null!=o.name&&G(i,o),ye(s,a);var u=ye(s,o);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];"style"===c?ve(i,d):"dangerouslySetInnerHTML"===c?ce(i,d):"children"===c?de(i,d):y(i,c,d,u)}switch(s){case"input":Q(i,o);break;case"textarea":ie(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?te(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?te(i,!!o.multiple,o.defaultValue,!0):te(i,!!o.multiple,o.multiple?[]:"",!1))}i[ai]=o}catch(e){du(t,t.return,e)}}break;case 6:if(il(e,t),al(t),4&r){if(null===t.stateNode)throw Error(x(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(e){du(t,t.return,e)}}break;case 3:if(il(e,t),al(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(e.containerInfo)}catch(e){du(t,t.return,e)}break;case 4:default:il(e,t),al(t);break;case 13:il(e,t),al(t),8192&(i=t.child).flags&&(o=null!==i.memoizedState,!(i.stateNode.isHidden=o)||null!==i.alternate&&null!==i.alternate.memoizedState||(Tl=qe())),4&r&&rl(t);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&t.mode?(Us=(u=Us)||c,il(e,t),Us=u):il(e,t),al(t),8192&r){if(u=null!==t.memoizedState,(t.stateNode.isHidden=u)&&!c&&0!=(1&t.mode))for(c=(Vs=t).child;null!==c;){for(d=Vs=c;null!==Vs;){switch(p=(f=Vs).child,f.tag){case 0:case 11:case 14:case 15:Xs(4,f,f.return);break;case 1:Ws(f,f.return);var h=f.stateNode;if("function"==typeof h.componentWillUnmount){n=(r=f).return;try{e=r,h.props=e.memoizedProps,h.state=e.memoizedState,h.componentWillUnmount()}catch(e){du(r,n,e)}}break;case 5:Ws(f,f.return);break;case 22:if(null!==f.memoizedState){ul(d);continue}}null!==p?(p.return=f,Vs=p):ul(d)}c=c.sibling}e:for(c=null,d=t;;){if(5===d.tag){if(null===c){c=d;try{i=d.stateNode,u?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,s.style.display=he("display",a))}catch(e){du(t,t.return,e)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(e){du(t,t.return,e)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d=(d.child.return=d).child;continue}if(d===t)break e;for(;null===d.sibling;){if(null===d.return||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:il(e,t),al(t),4&r&&rl(t);case 21:}}function al(t){var e=t.flags;if(2&e){try{e:{for(var n=t.return;null!==n;){if(Qs(n)){var r=n;break e}n=n.return}throw Error(x(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(t,Zs(t),i);break;case 3:case 4:var o=r.stateNode.containerInfo;!function e(t,n,r){var i=t.tag;if(5===i||6===i)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Yr));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(t,Zs(t),o);break;default:throw Error(x(161))}}catch(e){du(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function sl(e,t,n){(function e(t,n,r){for(var i=0!=(1&t.mode);null!==Vs;){var o=Vs,a=o.child;if(22===o.tag&&i){var s=null!==o.memoizedState||Fs;if(!s){var l=o.alternate,u=null!==l&&null!==l.memoizedState||Us;l=Fs;var c=Us;if(Fs=s,(Us=u)&&!c)for(Vs=o;null!==Vs;)u=(s=Vs).child,22===s.tag&&null!==s.memoizedState?cl(o):null!==u?(u.return=s,Vs=u):cl(o);for(;null!==a;)e(Vs=a,n,r),a=a.sibling;Vs=o,Fs=l,Us=c}ll(t)}else 0!=(8772&o.subtreeFlags)&&null!==a?(a.return=o,Vs=a):ll(t)}})(Vs=e,t,n)}function ll(e){for(;null!==Vs;){var t=Vs;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Us||qs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Us)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:uo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&jo(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if((n=null)!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}jo(t,a,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(x(163))}Us||512&t.flags&&$s(t)}catch(e){du(t,t.return,e)}}if(t===e){Vs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Vs=n;break}Vs=t.return}}function ul(e){for(;null!==Vs;){var t=Vs;if(t===e){Vs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Vs=n;break}Vs=t.return}}function cl(e){for(;null!==Vs;){var t=Vs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{qs(4,t)}catch(e){du(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){du(t,i,e)}}var o=t.return;try{$s(t)}catch(e){du(t,o,e)}break;case 5:var a=t.return;try{$s(t)}catch(e){du(t,a,e)}}}catch(e){du(t,t.return,e)}if(t===e){Vs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Vs=s;break}Vs=t.return}}var dl,fl=Math.ceil,pl=b.ReactCurrentDispatcher,hl=b.ReactCurrentOwner,vl=b.ReactCurrentBatchConfig,gl=0,ml=null,yl=null,bl=0,wl=0,xl=mi(0),kl=0,Sl=null,_l=0,El=0,Pl=0,Cl=null,Il=null,Tl=0,Ml=1/0,Al=null,jl=!1,Ol=null,Ll=null,zl=!1,Rl=null,Nl=0,Dl=0,Bl=null,Fl=-1,Ul=0;function Kl(){return 0!=(6&gl)?qe():-1!==Fl?Fl:Fl=qe()}function Vl(e){return 0==(1&e.mode)?1:0!=(2&gl)&&0!==bl?bl&-bl:null!==lo.transition?(0===Ul&&(Ul=ft()),Ul):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function Wl(e,t,n,r){if(50<Dl)throw Dl=0,Bl=null,Error(x(185));ht(e,n,r),0!=(2&gl)&&e===ml||(e===ml&&(0==(2&gl)&&(El|=n),4===kl&&ql(e,bl)),Hl(e,r),1===n&&0===gl&&0==(1&t.mode)&&(Ml=qe()+500,ji&&zi()))}function Hl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-rt(o),s=1<<a,l=i[a];-1===l?0!=(s&n)&&0==(s&r)||(i[a]=ct(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r,i=ut(e,e===ml?bl:0);if(0===i)null!==n&&He(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&He(n),1===t)0===e.tag?(r=$l.bind(null,e),ji=!0,Li(r)):Li($l.bind(null,e)),Jr(function(){0==(6&gl)&&zi()}),n=null;else{switch(mt(i)){case 1:n=Ge;break;case 4:n=Qe;break;case 16:default:n=Ze;break;case 536870912:n=et}n=pu(n,function e(t,n){if(Fl=-1,Ul=0,0!=(6&gl))throw Error(x(327));var r=t.callbackNode;if(uu()&&t.callbackNode!==r)return null;var i=ut(t,t===ml?bl:0);if(0===i)return null;if(0!=(30&i)||0!=(i&t.expiredLanes)||n)n=ru(t,i);else{n=i;var o=gl;gl|=2;var a=tu();for(ml===t&&bl===n||(Al=null,Ml=qe()+500,Jl(t,n));;)try{ou();break}catch(e){eu(t,e)}vo(),pl.current=a,gl=o,n=null!==yl?0:(ml=null,bl=0,kl)}if(0!==n){if(2===n&&0!==(o=dt(t))&&(n=Yl(t,i=o)),1===n)throw r=Sl,Jl(t,0),ql(t,i),Hl(t,qe()),r;if(6===n)ql(t,i);else{if(o=t.current.alternate,0==(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!tr(o(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(n=ru(t,i))&&0!==(a=dt(t))&&(n=Yl(t,i=a)),1===n))throw r=Sl,Jl(t,0),ql(t,i),Hl(t,qe()),r;switch(t.finishedWork=o,t.finishedLanes=i,n){case 0:case 1:throw Error(x(345));case 2:case 5:lu(t,Il,Al);break;case 3:if(ql(t,i),(130023424&i)===i&&10<(n=Tl+500-qe())){if(0!==ut(t,0))break;if(((o=t.suspendedLanes)&i)!==i){Kl(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Gr(lu.bind(null,t,Il,Al),n);break}lu(t,Il,Al);break;case 4:if(ql(t,i),(4194240&i)===i)break;for(n=t.eventTimes,o=-1;0<i;){var s=31-rt(i);a=1<<s,(s=n[s])>o&&(o=s),i&=~a}if(i=o,10<(i=((i=qe()-i)<120?120:i<480?480:i<1080?1080:i<1920?1920:i<3e3?3e3:i<4320?4320:1960*fl(i/1960))-i)){t.timeoutHandle=Gr(lu.bind(null,t,Il,Al),i);break}lu(t,Il,Al);break;default:throw Error(x(329))}}}return Hl(t,qe()),t.callbackNode===r?e.bind(null,t):null}.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Yl(e,t){var n=Cl;return e.current.memoizedState.isDehydrated&&(Jl(e,t).flags|=256),2!==(e=ru(e,t))&&(t=Il,Il=n,null!==t&&Xl(t)),e}function Xl(e){null===Il?Il=e:Il.push.apply(Il,e)}function ql(e,t){for(t&=~Pl,t&=~El,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rt(t),r=1<<n;e[n]=-1,t&=~r}}function $l(e){if(0!=(6&gl))throw Error(x(327));uu();var t=ut(e,0);if(0==(1&t))return Hl(e,qe()),null;var n=ru(e,t);if(0!==e.tag&&2===n){var r=dt(e);0!==r&&(n=Yl(e,t=r))}if(1===n)throw n=Sl,Jl(e,0),ql(e,t),Hl(e,qe()),n;if(6===n)throw Error(x(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lu(e,Il,Al),Hl(e,qe()),null}function Gl(e,t){var n=gl;gl|=1;try{return e(t)}finally{0===(gl=n)&&(Ml=qe()+500,ji&&zi())}}function Ql(e){null!==Rl&&0===Rl.tag&&0==(6&gl)&&uu();var t=gl;gl|=1;var n=vl.transition,r=gt;try{if(vl.transition=null,gt=1,e)return e()}finally{gt=r,vl.transition=n,0==(6&(gl=t))&&zi()}}function Zl(){wl=xl.current,yi(xl)}function Jl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Qr(n)),null!==yl)for(n=yl.return;null!==n;){var r=n;switch(qi(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Zo(),yi(ki),yi(xi),ia();break;case 5:ea(r);break;case 4:Zo();break;case 13:case 19:yi(ta);break;case 10:go(r.type._context);break;case 22:case 23:Zl()}n=n.return}if(yl=e=mu((ml=e).current,null),bl=wl=t,Pl=El=_l=kl=0,Il=Cl=Sl=null,null!==wo){for(t=0;t<wo.length;t++)if(null!==(r=(n=wo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}wo=null}return e}function eu(e,t){for(;;){var n=yl;try{if(vo(),oa.current=Ga,da){for(var r=la.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}da=!1}if(ca=ua=la=null,fa=!1,pa=sa=0,(hl.current=null)===n||null===n.return){kl=1,Sl=t,yl=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=bl,s.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=s,d=c.tag;if(0==(1&c.mode)&&(0===d||11===d||15===d)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=ss(a);if(null!==p){p.flags&=-257,ls(p,a,s,0,t),1&p.mode&&as(o,u,t),l=u;var h=(t=p).updateQueue;if(null===h){var v=new Set;v.add(l),t.updateQueue=v}else h.add(l);break e}if(0==(1&t)){as(o,u,t),nu();break e}l=Error(x(426))}else if(Qi&&1&s.mode){var g=ss(a);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),ls(g,a,s,0,t),so(es(l,s));break e}}o=l=es(l,s),4!==kl&&(kl=2),null===Cl?Cl=[o]:Cl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Mo(o,is(0,l,t));break e;case 1:s=l;var m=o.type,y=o.stateNode;if(0==(128&o.flags)&&("function"==typeof m.getDerivedStateFromError||null!==y&&"function"==typeof y.componentDidCatch&&(null===Ll||!Ll.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,Mo(o,os(o,s,t));break e}}o=o.return}while(null!==o)}su(n)}catch(e){t=e,yl===n&&null!==n&&(yl=n=n.return);continue}break}}function tu(){var e=pl.current;return pl.current=Ga,null===e?Ga:e}function nu(){0!==kl&&3!==kl&&2!==kl||(kl=4),null===ml||0==(268435455&_l)&&0==(268435455&El)||ql(ml,bl)}function ru(t,e){var n=gl;gl|=2;var r=tu();for(ml===t&&bl===e||(Al=null,Jl(t,e));;)try{iu();break}catch(e){eu(t,e)}if(vo(),gl=n,pl.current=r,null!==yl)throw Error(x(261));return ml=null,bl=0,kl}function iu(){for(;null!==yl;)au(yl)}function ou(){for(;null!==yl&&!Ye();)au(yl)}function au(e){var t=dl(e.alternate,e,wl);e.memoizedProps=e.pendingProps,null===t?su(e):yl=t,hl.current=null}function su(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Ds(n,t,wl)))return void(yl=n)}else{if(null!==(n=Bs(n,t)))return n.flags&=32767,void(yl=n);if(null===e)return kl=6,void(yl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(yl=t);yl=t=e}while(null!==t);0===kl&&(kl=5)}function lu(e,t,n){var r=gt,i=vl.transition;try{vl.transition=null,gt=1,function(e,t,n,r){for(;uu(),null!==Rl;);if(0!=(6&gl))throw Error(x(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(x(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rt(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===ml&&(yl=ml=null,bl=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||zl||(zl=!0,pu(Ze,function(){return uu(),null})),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=vl.transition,vl.transition=null;var a=gt;gt=1;var s=gl;gl|=4,hl.current=null,function(e,t){if(Xr=Ut,ar(e=or())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(s=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(s=a),f===o&&++c===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ut=!(qr={focusedElem:e,selectionRange:n}),Vs=t;null!==Vs;)if(e=(t=Vs).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Vs=e;else for(;null!==Vs;){t=Vs;try{var h=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var v=h.memoizedProps,g=h.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:uo(t.type,v),g);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(x(163))}}catch(e){du(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Vs=e;break}Vs=t.return}h=Ys,Ys=!1}(e,n),ol(n,e),sr(qr),Ut=!!Xr,qr=Xr=null,sl(e.current=n,e,i),Xe(),gl=s,gt=a,vl.transition=o}else e.current=n;if(zl&&(zl=!1,Rl=e,Nl=i),0===(o=e.pendingLanes)&&(Ll=null),function(e){if(nt&&"function"==typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(tt,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),Hl(e,qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,e=Ol,Ol=null,e;0!=(1&Nl)&&0!==e.tag&&uu(),0!=(1&(o=e.pendingLanes))?e===Bl?Dl++:(Dl=0,Bl=e):Dl=0,zi()}(e,t,n,r)}finally{vl.transition=i,gt=r}return null}function uu(){if(null!==Rl){var e=mt(Nl),t=vl.transition,n=gt;try{if(vl.transition=null,gt=e<16?16:e,null===Rl)var r=!1;else{if(e=Rl,Rl=null,(Nl=0)!=(6&gl))throw Error(x(331));var i=gl;for(gl|=4,Vs=e.current;null!==Vs;){var o=Vs,a=o.child;if(0!=(16&Vs.flags)){var s=o.deletions;if(null!==s){for(var l=0;l<s.length;l++){var u=s[l];for(Vs=u;null!==Vs;){var c=Vs;switch(c.tag){case 0:case 11:case 15:Xs(8,c,o)}var d=c.child;if(null!==d)d.return=c,Vs=d;else for(;null!==Vs;){var f=(c=Vs).sibling,p=c.return;if(Gs(c),c===u){Vs=null;break}if(null!==f){f.return=p,Vs=f;break}Vs=p}}}var h=o.alternate;if(null!==h){var v=h.child;if(null!==v){h.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Vs=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,Vs=a;else e:for(;null!==Vs;){if(0!=(2048&(o=Vs).flags))switch(o.tag){case 0:case 11:case 15:Xs(9,o,o.return)}var m=o.sibling;if(null!==m){m.return=o.return,Vs=m;break e}Vs=o.return}}var y=e.current;for(Vs=y;null!==Vs;){var b=(a=Vs).child;if(0!=(2064&a.subtreeFlags)&&null!==b)b.return=a,Vs=b;else e:for(a=y;null!==Vs;){if(0!=(2048&(s=Vs).flags))try{switch(s.tag){case 0:case 11:case 15:qs(9,s)}}catch(e){du(s,s.return,e)}if(s===a){Vs=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Vs=w;break e}Vs=s.return}}if(gl=i,zi(),nt&&"function"==typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(tt,e)}catch(e){}r=!0}return r}finally{gt=n,vl.transition=t}}return!1}function cu(e,t,n){e=Io(e,t=is(0,t=es(n,t),1),1),t=Kl(),null!==e&&(ht(e,1,t),Hl(e,t))}function du(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ll||!Ll.has(r))){t=Io(t,e=os(t,e=es(n,e),1),1),e=Kl(),null!==t&&(ht(t,1,e),Hl(t,e));break}}t=t.return}}function fu(e,t){0===t&&(0==(1&e.mode)?t=1:(t=st,0==(130023424&(st<<=1))&&(st=4194304)));var n=Kl();null!==(e=So(e,t))&&(ht(e,t,n),Hl(e,n))}function pu(e,t){return We(e,t)}function hu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vu(e,t,n,r){return new hu(e,t,n,r)}function gu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function mu(e,t){var n=e.alternate;return null===n?((n=vu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,(n.alternate=e).alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function yu(e,t,n,r,i,o){var a=2;if("function"==typeof(r=e))gu(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case S:return bu(n.children,i,o,t);case _:i|=a=8;break;case E:return(e=vu(12,n,t,2|i)).elementType=E,e.lanes=o,e;case T:return(e=vu(13,n,t,i)).elementType=T,e.lanes=o,e;case M:return(e=vu(19,n,t,i)).elementType=M,e.lanes=o,e;case O:return wu(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case P:a=10;break e;case C:a=9;break e;case I:a=11;break e;case A:a=14;break e;case j:a=16,r=null;break e}throw Error(x(130,null==e?e:typeof e,""))}return(t=vu(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function bu(e,t,n,r){return(e=vu(7,e,r,t)).lanes=n,e}function wu(e,t,n,r){return(e=vu(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function xu(e,t,n){return(e=vu(6,e,null,t)).lanes=n,e}function ku(e,t,n){return(t=vu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Su(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _u(e,t,n,r,i,o,a,s,l){return e=new Su(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=vu(3,null,null,t),(e.current=o).stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eo(o),e}function Eu(e){if(!e)return wi;e:{if(Fe(e=e._reactInternals)!==e||1!==e.tag)throw Error(x(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ei(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(x(171))}if(1===e.tag){var n=e.type;if(Ei(n))return Ii(e,n,t)}return t}function Pu(e,t,n,r,i,o,a,s,l){return(e=_u(n,r,!0,e,0,o,0,s,l)).context=Eu(null),n=e.current,(o=Co(r=Kl(),i=Vl(n))).callback=null!=t?t:null,Io(n,o,i),e.current.lanes=i,ht(e,i,r),Hl(e,r),e}function Cu(e,t,n,r){var i=t.current,o=Kl(),a=Vl(i);return n=Eu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Co(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Io(i,t,a))&&(Wl(e,i,a,o),To(e,i,a)),a}function Iu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Tu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mu(e,t){Tu(e,t),(e=e.alternate)&&Tu(e,t)}dl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ki.current)cs=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return cs=!1,function(e,t,n){switch(t.tag){case 3:ws(t),ao();break;case 5:Jo(t);break;case 1:Ei(t.type)&&Ti(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;bi(co,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(bi(ta,1&ta.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Is(e,t,n):(bi(ta,1&ta.current),null!==(e=zs(e,t,n))?e.sibling:null);bi(ta,1&ta.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Os(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),bi(ta,ta.current),r)break;return null;case 22:case 23:return t.lanes=0,vs(e,t,n)}return zs(e,t,n)}(e,t,n);cs=0!=(131072&e.flags)}else cs=!1,Qi&&0!=(1048576&t.flags)&&Yi(t,Bi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ls(e,t),e=t.pendingProps;var i=_i(t,xi.current);yo(t,n),i=ma(null,t,r,e,i,n);var o=ya();return t.flags|=1,t="object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ei(r)?(o=!0,Ti(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Eo(t),i.updater=zo,Bo((t.stateNode=i)._reactInternals=t,r,e,n),bs(null,t,r,!0,o,n)):(t.tag=0,Qi&&o&&Xi(t),ds(null,t,i,n),t.child);case 16:r=t.elementType;e:{switch(Ls(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return gu(e)?1:0;if(null!=e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(r),e=uo(r,e),i){case 0:t=ms(null,t,r,e,n);break e;case 1:t=ys(null,t,r,e,n);break e;case 11:t=fs(null,t,r,e,n);break e;case 14:t=ps(null,t,r,uo(r.type,e),n);break e}throw Error(x(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ms(e,t,r,i=t.elementType===r?i:uo(r,i),n);case 1:return r=t.type,i=t.pendingProps,ys(e,t,r,i=t.elementType===r?i:uo(r,i),n);case 3:e:{if(ws(t),null===e)throw Error(x(387));r=t.pendingProps,i=(o=t.memoizedState).element,Po(e,t),Ao(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=xs(e,t,r,n,i=es(Error(x(423)),t));break e}if(r!==i){t=xs(e,t,r,n,i=es(Error(x(424)),t));break e}for(Gi=ni(t.stateNode.containerInfo.firstChild),Qi=!0,n=Ho($i=t,Zi=null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ao(),r===i){t=zs(e,t,n);break e}ds(e,t,r,n)}t=t.child}return t;case 5:return Jo(t),null===e&&no(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,$r(r,i)?a=null:null!==o&&$r(r,o)&&(t.flags|=32),gs(e,t),ds(e,t,a,n),t.child;case 6:return null===e&&no(t),null;case 13:return Is(e,t,n);case 4:return Qo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Wo(t,null,r,n):ds(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,fs(e,t,r,i=t.elementType===r?i:uo(r,i),n);case 7:return ds(e,t,t.pendingProps,n),t.child;case 8:case 12:return ds(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,bi(co,r._currentValue),r._currentValue=a,null!==o)if(tr(o.value,a)){if(o.children===i.children&&!ki.current){t=zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){a=o.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Co(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),mo(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(x(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),mo(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ds(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,yo(t,n),r=r(i=bo(i)),t.flags|=1,ds(e,t,r,n),t.child;case 14:return i=uo(r=t.type,t.pendingProps),ps(e,t,r,i=uo(r.type,i),n);case 15:return hs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:uo(r,i),Ls(e,t),t.tag=1,Ei(r)?(e=!0,Ti(t)):e=!1,yo(t,n),No(t,r,i),Bo(t,r,i,n),bs(null,t,r,!0,e,n);case 19:return Os(e,t,n);case 22:return vs(e,t,n)}throw Error(x(156,t.tag))};var Au="function"==typeof reportError?reportError:function(e){console.error(e)};function ju(e){this._internalRoot=e}function Ou(e){this._internalRoot=e}function Lu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ru(){}function Nu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var e=Iu(a);s.call(e)}}Cu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var e=Iu(a);o.call(e)}}var a=Pu(t,r,e,0,null,!1,0,"",Ru);return e._reactRootContainer=a,e[si]=a.current,zr(8===e.nodeType?e.parentNode:e),Ql(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=Iu(l);s.call(e)}}var l=_u(e,0,!1,null,0,!1,0,"",Ru);return e._reactRootContainer=l,e[si]=l.current,zr(8===e.nodeType?e.parentNode:e),Ql(function(){Cu(t,l,n,r)}),l}(n,t,e,i,r);return Iu(a)}Ou.prototype.render=ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(x(409));Cu(e,t,null,null)},Ou.prototype.unmount=ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Ql(function(){Cu(null,e,null,null)}),t[si]=null}},Ou.prototype.unstable_scheduleHydration=function(e){if(e){var t=xt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Lt(e)}},yt=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=lt(e.pendingLanes);0!==t&&(vt(e,1|t),Hl(e,qe()),0==(6&gl)&&(Ml=qe()+500,zi()))}break;case 13:Ql(function(){var e=So(n,1);if(null!==e){var t=Kl();Wl(e,n,1,t)}}),Mu(n,1)}},bt=function(e){if(13===e.tag){var t=So(e,134217728);null!==t&&Wl(t,e,134217728,Kl()),Mu(e,134217728)}},wt=function(e){if(13===e.tag){var t=Vl(e),n=So(e,t);null!==n&&Wl(n,e,t,Kl()),Mu(e,t)}},xt=function(){return gt},kt=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},Ie=Ql;var Du={usingClientEntryPoint:!(xe=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=hi(r);if(!i)throw Error(x(90));Y(r),Q(r,i)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&te(e,!!n.multiple,t,!1)}}),Events:[fi,pi,hi,Ee,Pe,Ce=Gl]},Bu={findFiberByHostInstance:di,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Fu={bundleType:Bu.bundleType,version:Bu.version,rendererPackageName:Bu.rendererPackageName,rendererConfig:Bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:Bu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uu.isDisabled&&Uu.supportsFiber)try{tt=Uu.inject(Fu),nt=Uu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Du,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Lu(t))throw Error(x(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:null}}(e,t,null,n)},t.createRoot=function(e,t){if(!Lu(e))throw Error(x(299));var n=!1,r="",i=Au;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=_u(e,1,!1,null,0,n,0,r,i),e[si]=t.current,zr(8===e.nodeType?e.parentNode:e),new ju(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0!==t)return null===(e=Ve(t))?null:e.stateNode;if("function"==typeof e.render)throw Error(x(188));throw e=Object.keys(e).join(","),Error(x(268,e))},t.flushSync=function(e){return Ql(e)},t.hydrate=function(e,t,n){if(!zu(t))throw Error(x(200));return Nu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Lu(e))throw Error(x(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Au;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Pu(t,null,e,1,null!=n?n:null,i,0,o,a),e[si]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ou(t)},t.render=function(e,t,n){if(!zu(t))throw Error(x(200));return Nu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!zu(e))throw Error(x(40));return!!e._reactRootContainer&&(Ql(function(){Nu(null,null,e,!1,function(){e._reactRootContainer=null,e[si]=null})}),!0)},t.unstable_batchedUpdates=Gl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!zu(n))throw Error(x(200));if(null==e||void 0===e._reactInternals)throw Error(x(38));return Nu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(534)},5918:function(e,t,n){"use strict";var r=n(7313),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,n){var r,i={},o=null,a=null;for(r in void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)l.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:o,ref:a,props:i,_owner:u.current}}t.Fragment=i,t.jsx=o,t.jsxs=o},306:function(e,t){"use strict";var p=Symbol.for("react.element"),h=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),v=Symbol.iterator,d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function m(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||d}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||d}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var w=b.prototype=new y;w.constructor=b,f(w,m.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!_.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:p,type:e,key:o,ref:a,props:i,_owner:S.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===p}var C=/\/+/g;function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function T(e,t,n){if(null==e)return e;var r=[],i=0;return function e(t,n,r,i,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var s,l,u,c=!1;if(null===t)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case p:case h:c=!0}}if(c)return o=o(c=t),t=""===i?"."+I(c,0):i,x(o)?(r="",null!=t&&(r=t.replace(C,"$&/")+"/"),e(o,n,r,"",function(e){return e})):null!=o&&(P(o)&&(l=r+(!(s=o).key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+t,o={$$typeof:p,type:s.type,key:l,ref:s.ref,props:s.props,_owner:s._owner}),n.push(o)),1;if(c=0,i=""===i?".":i+":",x(t))for(var d=0;d<t.length;d++){var f=i+I(a=t[d],d);c+=e(a,n,r,f,o)}else if("function"==typeof(f=null===(u=t)||"object"!=typeof u?null:"function"==typeof(u=v&&u[v]||u["@@iterator"])?u:null))for(t=f.call(t),d=0;!(a=t.next()).done;)c+=e(a=a.value,n,r,f=i+I(a,d++),o);else if("object"===a)throw n=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return c}(e,r,"","",function(e){return t.call(n,e,i++)}),r}function M(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var A={current:null},j={transition:null},O={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:j,ReactCurrentOwner:S};t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!P(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=n,t.Profiler=i,t.PureComponent=b,t.StrictMode=r,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=f({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)k.call(t,l)&&!_.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:p,type:e.type,key:i,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=P,t.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},3095:function(e,s){"use strict";function o(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<c(i,t)))break e;e[r]=t,e[n]=i,n=r}}function l(e){return 0===e.length?null:e[0]}function u(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,s=e[a],l=1+a,u=e[l];if(c(s,n)<0)r=l<i&&c(u,s)<0?(e[r]=u,e[l]=n,l):(e[r]=s,e[a]=n,a);else{if(!(l<i&&c(u,n)<0))break e;e[r]=u,e[l]=n,r=l}}}return t}function c(e,t){var n=e.sortIndex-t.sortIndex;return 0!=n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var t=performance;s.unstable_now=function(){return t.now()}}else{var n=Date,r=n.now();s.unstable_now=function(){return n.now()-r}}var d=[],f=[],a=1,p=null,h=3,v=!1,g=!1,m=!1,i="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=l(f);null!==t;){if(null===t.callback)u(f);else{if(!(t.startTime<=e))break;u(f),t.sortIndex=t.expirationTime,o(d,t)}t=l(f)}}function x(e){if(m=!1,w(e),!g)if(null!==l(d))g=!0,O(k);else{var t=l(f);null!==t&&L(x,t.startTime-e)}}function k(e,t){g=!1,m&&(m=!1,y(P),P=-1),v=!0;var n=h;try{for(w(t),p=l(d);null!==p&&(!(p.expirationTime>t)||e&&!T());){var r=p.callback;if("function"==typeof r){p.callback=null,h=p.priorityLevel;var i=r(p.expirationTime<=t);t=s.unstable_now(),"function"==typeof i?p.callback=i:p===l(d)&&u(d),w(t)}else u(d);p=l(d)}if(null!==p)var o=!0;else{var a=l(f);null!==a&&L(x,a.startTime-t),o=!1}return o}finally{p=null,h=n,v=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,E=null,P=-1,C=5,I=-1;function T(){return!(s.unstable_now()-I<C)}function M(){if(null!==E){var e=s.unstable_now();I=e;var t=!0;try{t=E(!0,e)}finally{t?S():(_=!1,E=null)}}else _=!1}if("function"==typeof b)S=function(){b(M)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,j=A.port2;A.port1.onmessage=M,S=function(){j.postMessage(null)}}else S=function(){i(M,0)};function O(e){E=e,_||(_=!0,S())}function L(e,t){P=i(function(){e(s.unstable_now())},t)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(e){e.callback=null},s.unstable_continueExecution=function(){g||v||(g=!0,O(k))},s.unstable_forceFrameRate=function(e){e<0||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},s.unstable_getCurrentPriorityLevel=function(){return h},s.unstable_getFirstCallbackNode=function(){return l(d)},s.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},s.unstable_scheduleCallback=function(e,t,n){var r=s.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?r+n:r,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:a++,callback:t,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},r<n?(e.sortIndex=n,o(f,e),null===l(d)&&e===l(f)&&(m?(y(P),P=-1):m=!0,L(x,n-r))):(e.sortIndex=i,o(d,e),g||v||(g=!0,O(k))),e},s.unstable_shouldYield=T,s.unstable_wrapCallback=function(t){var n=h;return function(){var e=h;h=n;try{return t.apply(this,arguments)}finally{h=e}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var i=n(4062);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var o=n(3808),a=n(9617),s=n(4993);e.exports=function(r){var i=a();return function(){var e,t=o(r);if(i){var n=o(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return s(this,e)}},e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(t){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(n){function r(e,t){return n.exports=r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n.exports.__esModule=!0,n.exports.default=n.exports,r(e,t)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports},5036:function(e,t,n){var i=n(8698).default;e.exports=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(t){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}},i={};function Rj(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,Rj),n.loaded=!0,n.exports}Rj.m=r,a=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},Rj.t=function(t,e){if(1&e&&(t=this(t)),8&e)return t;if("object"==typeof t&&t){if(4&e&&t.__esModule)return t;if(16&e&&"function"==typeof t.then)return t}var n=Object.create(null);Rj.r(n);var r={};o=o||[null,a({}),a([]),a(a)];for(var i=2&e&&t;"object"==typeof i&&!~o.indexOf(i);i=a(i))Object.getOwnPropertyNames(i).forEach(function(e){r[e]=function(){return t[e]}});return r.default=function(){return t},Rj.d(n,r),n},Rj.d=function(e,t){for(var n in t)Rj.o(t,n)&&!Rj.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},Rj.f={},Rj.e=function(n){return Promise.all(Object.keys(Rj.f).reduce(function(e,t){return Rj.f[t](n,e),e},[]))},Rj.u=function(e){return"static/js/"+e+".f64a5f0e.chunk.js"},Rj.miniCssF=function(e){},Rj.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),Rj.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d={},f="tldraw-cra-example:",Rj.l=function(r,e,t,n){if(d[r])d[r].push(e);else{var i,o;if(void 0!==t)for(var a=document.getElementsByTagName("script"),s=0;s<a.length;s++){var l=a[s];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==f+t){i=l;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,Rj.nc&&i.setAttribute("nonce",Rj.nc),i.setAttribute("data-webpack",f+t),i.src=r),d[r]=[e];var u=function(e,t){i.onerror=i.onload=null,clearTimeout(c);var n=d[r];if(delete d[r],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach(function(e){return e(t)}),e)return e(t)},c=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),o&&document.head.appendChild(i)}},Rj.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},Rj.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},Rj.p="/",function(){var l={179:0};Rj.f.j=function(r,e){var i=Rj.o(l,r)?l[r]:void 0;if(0!==i)if(i)e.push(i[2]);else{var t=new Promise(function(e,t){i=l[r]=[e,t]});e.push(i[2]=t);var n=Rj.p+Rj.u(r),o=new Error;Rj.l(n,function(e){if(Rj.o(l,r)&&(0!==(i=l[r])&&(l[r]=void 0),i)){var t=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;o.message="Loading chunk "+r+" failed.\n("+t+": "+n+")",o.name="ChunkLoadError",o.type=t,o.request=n,i[1](o)}},"chunk-"+r,r)}};var e=function(e,t){var n,r,i=t[0],o=t[1],a=t[2],s=0;if(i.some(function(e){return 0!==l[e]})){for(n in o)Rj.o(o,n)&&(Rj.m[n]=o[n]);a&&a(Rj)}for(e&&e(t);s<i.length;s++)r=i[s],Rj.o(l,r)&&l[r]&&l[r][0](),l[r]=0},t=self.webpackChunktldraw_cra_example=self.webpackChunktldraw_cra_example||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))}(),Rj.nc=void 0,function(){"use strict";var a={};Rj.r(a),Rj.d(a,{ArrayOfValidator:function(){return Ie},DictValidator:function(){return Ae},ObjectValidator:function(){return Te},UnionValidator:function(){return Me},ValidationError:function(){return we},Validator:function(){return Se},any:function(){return Le},array:function(){return He},arrayOf:function(){return Ye},bigint:function(){return Ve},boolean:function(){return Ke},dict:function(){return $e},integer:function(){return Be},literal:function(){return We},literalEnum:function(){return tt},model:function(){return Qe},nonZeroInteger:function(){return Ue},nonZeroNumber:function(){return De},nullable:function(){return et},number:function(){return Re},object:function(){return qe},optional:function(){return Je},positiveInteger:function(){return Fe},positiveNumber:function(){return Ne},setEnum:function(){return Ze},string:function(){return ze},union:function(){return Ge},unknown:function(){return Oe},unknownObject:function(){return Xe}});var _e=Rj(7313),e=Rj.t(_e,2),t=Rj(1739);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function de(e){return function(e){if(Array.isArray(e))return r(e)}(e)||n(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){if(Array.isArray(e))return e}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e){return i(e)||n(e)||l(e)||o()}Rj(8442),Rj(9575),Rj(9149),Rj(5671),Rj(4541),Rj(4113);var h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",v="a0",g="A00000000000000000000000000";function s(e){if("a"<=e&&e<="z")return e.charCodeAt(0)-"a".charCodeAt(0)+2;if("A"<=e&&e<="Z")return"Z".charCodeAt(0)-e.charCodeAt(0)+2;throw new Error("Invalid index key head: "+e)}function m(e){if(e.length!==s(e.charAt(0)))throw new Error("invalid integer part of index key: "+e)}function y(e){if(void 0===e)throw Error("n is undefined")}function b(e){m(e);for(var t=p(e.split("")),n=t[0],r=t.slice(1),i=!0,o=r.length-1;i&&0<=o;o--){var a=h.indexOf(r[o])+1;a===h.length?r[o]="0":(r[o]=h.charAt(a),i=!1)}if(i){if("Z"===n)return"a0";if("z"===n)return;var s=String.fromCharCode(n.charCodeAt(0)+1);return"a"<s?r.push("0"):r.pop(),s+r.join("")}return n+r.join("")}function w(e,t){if(void 0!==t&&t<=e)throw new Error(e+" >= "+t);if("0"===e.slice(-1)||t&&"0"===t.slice(-1))throw new Error("trailing zero");if(t){for(var n=0;(e.charAt(n)||"0")===t.charAt(n);)n++;if(0<n)return t.slice(0,n)+w(e.slice(n),t.slice(n))}var r=e?h.indexOf(e.charAt(0)):0,i=void 0!==t?h.indexOf(t.charAt(0)):h.length;if(1<i-r){var o=Math.round(.5*(r+i));return h.charAt(o)}return t&&1<t.length?t.slice(0,1):h.charAt(r)+w(e.slice(1),void 0)}function x(e){var t=s(e.charAt(0));if(t>e.length)throw new Error("invalid index: "+e);return e.slice(0,t)}function k(e){if(e===g)throw new Error("invalid index: "+e);var t=x(e);if("0"===e.slice(t.length).slice(-1))throw new Error("invalid index: "+e)}function d(e,t){if(void 0!==e&&k(e),void 0!==t&&k(t),void 0!==e&&void 0!==t&&t<=e)throw new Error(e+" >= "+t);if(void 0===e&&void 0===t)return v;if(void 0===e){if(void 0===t)throw Error("b is undefined");var n=x(t),r=t.slice(n.length);if(n===g)return n+w("",r);if(n<t)return n;var i=function(e){m(e);for(var t=p(e.split("")),n=t[0],r=t.slice(1),i=!0,o=r.length-1;i&&0<=o;o--){var a=h.indexOf(r[o])-1;-1==a?r[o]=h.slice(-1):(r[o]=h.charAt(a),i=!1)}if(i){if("a"===n)return"Z"+h.slice(-1);if("A"===n)return;var s=String.fromCharCode(n.charCodeAt(0)-1);return s<"Z"?r.push(h.slice(-1)):r.pop(),s+r.join("")}return n+r.join("")}(n);return y(i),i}if(void 0===t){var o=x(e),a=e.slice(o.length),s=b(o);return void 0===s?o+w(a,void 0):s}var l=x(e),u=e.slice(l.length),c=x(t),d=t.slice(c.length);if(l===c)return l+w(u,d);var f=b(l);return y(f),f<t?f:l+w(u,void 0)}function f(e,t,n){if(0===n)return[];if(1===n)return[d(e,t)];if(void 0===t){for(var r=d(e,t),i=[r],o=0;o<n-1;o++)r=d(r,t),i.push(r);return i}if(void 0===e){for(var a=d(e,t),s=[a],l=0;l<n-1;l++)a=d(e,a),s.push(a);return s.reverse(),s}var u=Math.floor(n/2),c=d(e,t);return[].concat(de(f(e,c,u)),[c],de(f(c,t,n-u-1)))}function S(e,t,n){return f(e,t,n)}function _(e,t){return f(e,void 0,t)}function L(e,t){return f(e,t,1)[0]}function ee(e){return f(e,void 0,1)[0]}function te(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"a1";return[t].concat(de(f(t,void 0,e)))}function I(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return String(e);var r=n.call(e,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"===C(t)?t:String(t)}function Ee(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach(function(e){Ee(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ce(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||l(e,t)||o()}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function P(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function N(r){var i=j();return function(){var e,t=A(r);if(i){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}(this,e)}}function O(e,t,n){return(O=j()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&T(i,n.prototype),i}).apply(null,arguments)}function D(e){var r="function"==typeof Map?new Map:void 0;return(D=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return O(e,arguments,A(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),T(n,e)})(e)}function ce(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function B(e,t){var n,r=[],i=ce(e);try{e:for(i.s();!(n=i.n()).done;){var o,a=n.value,s=ce(r);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(t?t(a,l):a===l)continue e}}catch(e){s.e(e)}finally{s.f()}r.push(a)}}catch(e){i.e(e)}finally{i.f()}return r}function U(e){return e.filter(function(e){return null!=e})}function ae(e){return e[e.length-1]}function F(e,t){var n,r,i=1/0,o=ce(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=t(a);s<i&&(n=a,i=s)}}catch(e){o.e(e)}finally{o.f()}return n}function K(e){return function t(){try{return e.apply(void 0,arguments)}catch(e){throw e instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(e,t),e}}}function V(e,t){var n=t&&e&&"object"==typeof e&&t in e?e[t]:e;throw new Error("Unknown switch case ".concat(n))}var W=K(function(e,t){if(!e)throw new Error(t||"Assertion Error")}),H=K(function(e,t){if(null==e)throw new Error(null!=t?t:"value must be defined");return e});function Y(r,i){var o=void 0,e=function(){o||((o={}).promise=new Promise(function(e,t){o.resolve=e,o.reject=t})),clearTimeout(o.timeout);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.latestArgs=t,o.timeout=setTimeout(function(){var t=o;o=void 0;try{t.resolve(r.apply(void 0,de(t.latestArgs)))}catch(e){t.reject(e)}},i),o.promise};return e.cancel=function(){o&&clearTimeout(o.timeout)},e}var X=new WeakMap;function q(e,t){if("object"==typeof e&&null!==e){var n=X.get(e);n||(n={tags:{},extras:{}},X.set(e,n)),t.tags&&(n.tags=Pe(Pe({},n.tags),t.tags)),t.extras&&(n.extras=Pe(Pe({},n.extras),t.extras))}}function $(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t+""}function G(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,i=0;function o(){var e=t^t<<11;return t=n,n=r,(i^=((r=i)>>>19^e^e>>>8)>>>0)/4294967296*2}for(var a=0;a<e.length+64;a++)t^=0|e.charCodeAt(a),o();return o}function Q(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=Ce(t,2),o=i[0],a=i[1],s=Ce(n,2),l=s[0],u=s[1],c=l+(e-o)/(a-o)*(u-l);return r?l<u?Math.max(Math.min(c,u),l):Math.max(Math.min(c,l),u):c}function Z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function J(e,t){if(Z(e,t))return e[t]}function ne(e){if(!e)return e;if(Array.isArray(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(ne(e[r]));return t}if("object"!=typeof e)return e;for(var i=Object.keys(e),o=i.length,a={},s=0;s<o;s++){var l=i[s];a[l]=ne(e[l])}return a}function re(e){return Object.keys(e)}function ie(e){return Object.values(e)}function oe(e){return Object.entries(e)}function se(e){return Object.fromEntries(e)}function le(e,t){var n,r={},i=!1,o=ce(oe(e));try{for(o.s();!(n=o.n()).done;){var a=Ce(n.value,2),s=a[0],l=a[1];t(s,l)?r[s]=l:i=!0}}catch(e){o.e(e)}finally{o.f()}return i?r:e}function ue(e,t){var n,r={},i=ce(oe(e));try{for(i.s();!(n=i.n()).done;){var o=Ce(n.value,2),a=o[0],s=t(a,o[1]);r[a]=s}}catch(e){i.e(e)}finally{i.f()}return r}var fe,pe=function(){return"undefined"!=typeof process&&!1},he=[],ve=function(){var e,t=ce(he.splice(0,he.length));try{for(t.s();!(e=t.n()).done;)(0,e.value)()}catch(e){t.e(e)}finally{t.f()}};function ge(){fe||(fe=requestAnimationFrame(function(){fe=void 0,ve()}))}function me(e,t){return e.id>t.id?1:-1}function ye(e){return null!==e}var be="undefined"!=typeof window&&window.structuredClone?window.structuredClone:function(e){return e?JSON.parse(JSON.stringify(e)):e},we=function(e){M(a,D(Error));var o=N(a);function a(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];z(this,a);var r=function(e){if(!e.length)return null;var t,n="",r=ce(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;"number"==typeof i?n+=".".concat(i):i.startsWith("(")?n.endsWith(")")?n="".concat(n.slice(0,-1),", ").concat(i.slice(1)):n+=i:n+=".".concat(i)}}catch(e){r.e(e)}finally{r.f()}return n.startsWith(".")?n.slice(1):n}(n),i=e.split("\n").map(function(e,t){return 0===t?e:"  ".concat(e)}).join("\n");return Ee(R(t=o.call(this,n?"At ".concat(r,": ").concat(i):i)),"name","ValidationError"),t.rawMessage=e,t.path=n,t}return P(a)}();function xe(t,e){try{return e()}catch(e){if(e instanceof we)throw new we(e.rawMessage,[t].concat(de(e.path)));throw new we(e.toString(),[t])}}function ke(e){if(null===e)return"null";if(Array.isArray(e))return"an array";var t=typeof e;switch(t){case"bigint":case"boolean":case"function":case"number":case"string":case"symbol":return"a ".concat(t);case"object":return"an ".concat(t);case"undefined":return"undefined";default:V(t)}}var Se=function(){function r(e){z(this,r),this.validationFn=e}return P(r,[{key:"validate",value:function(e){return this.validationFn(e)}},{key:"nullable",value:function(){return et(this)}},{key:"optional",value:function(){return Je(this)}},{key:"refine",value:function(t){var n=this;return new r(function(e){return t(n.validate(e))})}},{key:"check",value:function(t,n){return"string"==typeof t?this.refine(function(e){return xe("(check ".concat(t,")"),function(){return n(e)}),e}):this.refine(function(e){return t(e),e})}}]),r}(),Ie=function(e){M(n,Se);var t=N(n);function n(i){var e;return z(this,n),(e=t.call(this,function(e){for(var t=He.validate(e),n=function(e){xe(e,function(){return i.validate(t[e])})},r=0;r<t.length;r++)n(r);return t})).itemValidator=i,e}return P(n,[{key:"nonEmpty",value:function(){return this.check(function(e){if(0===e.length)throw new we("Expected a non-empty array")})}},{key:"lengthGreaterThan1",value:function(){return this.check(function(e){if(e.length<=1)throw new we("Expected an array with length greater than 1")})}}]),n}(),Te=function(e){M(n,Se);var t=N(n);function n(s){var e,l=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return z(this,n),(e=t.call(this,function(r){if("object"!=typeof r||null===r)throw new we("Expected object, got ".concat(ke(r)));for(var e=function(){var e=Ce(o[i],2),t=e[0],n=e[1];xe(t,function(){n.validate(J(r,t))})},i=0,o=Object.entries(s);i<o.length;i++)e();if(!l)for(var t=0,n=Object.keys(r);t<n.length;t++){var a=n[t];if(!Z(s,a))throw new we("Unexpected property",[a])}return r})).config=s,e.shouldAllowUnknownProperties=l,e}return P(n,[{key:"allowUnknownProperties",value:function(){return new n(this.config,!0)}},{key:"extend",value:function(e){return new n(Pe(Pe({},this.config),e))}}]),n}(),Me=function(e){M(n,Se);var t=N(n);function n(r,i,e){var o;return z(this,n),(o=t.call(this,function(e){if("object"!=typeof e||null===e)throw new we("Expected an object, got ".concat(ke(e)),[]);var t=J(e,r);if("string"!=typeof t)throw new we('Expected a string for key "'.concat(r,'", got ').concat(ke(t)));var n=Z(i,t)?i[t]:void 0;return void 0===n?o.unknownValueValidation(e,t):xe("(".concat(r," = ").concat(t,")"),function(){return n.validate(e)})})).key=r,o.config=i,o.unknownValueValidation=e,o}return P(n,[{key:"validateUnknownVariants",value:function(e){return new n(this.key,this.config,e)}}]),n}(),Ae=function(e){M(n,Se);var t=N(n);function n(o,a){var e;return z(this,n),(e=t.call(this,function(e){if("object"!=typeof e||null===e)throw new we("Expected object, got ".concat(ke(e)));for(var t=function(){var e=Ce(i[r],2),t=e[0],n=e[1];xe(t,function(){o.validate(t),a.validate(n)})},r=0,i=Object.entries(e);r<i.length;r++)t();return e})).keyValidator=o,e.valueValidator=a,e}return P(n)}();function je(t){return new Se(function(e){if(typeof e!==t)throw new we("Expected ".concat(t,", got ").concat(ke(e)));return e})}var Oe=new Se(function(e){return e}),Le=new Se(function(e){return e}),ze=je("string"),Re=je("number").check(function(e){if(Number.isNaN(e))throw new we("Expected a number, got NaN");if(!Number.isFinite(e))throw new we("Expected a finite number, got ".concat(e))}),Ne=Re.check(function(e){if(e<0)throw new we("Expected a positive number, got ".concat(e))}),De=Re.check(function(e){if(e<=0)throw new we("Expected a non-zero positive number, got ".concat(e))}),Be=Re.check(function(e){if(!Number.isInteger(e))throw new we("Expected an integer, got ".concat(e))}),Fe=Be.check(function(e){if(e<0)throw new we("Expected a positive integer, got ".concat(e))}),Ue=Be.check(function(e){if(e<=0)throw new we("Expected a non-zero positive integer, got ".concat(e))}),Ke=je("boolean"),Ve=je("bigint");function We(t){return new Se(function(e){if(e!==t)throw new we("Expected ".concat(t,", got ").concat(JSON.stringify(e)));return t})}var He=new Se(function(e){if(!Array.isArray(e))throw new we("Expected an array, got ".concat(ke(e)));return e});function Ye(e){return new Ie(e)}var Xe=new Se(function(e){if("object"!=typeof e||null===e)throw new we("Expected object, got ".concat(ke(e)));return e});function qe(e){return new Te(e)}function $e(e,t){return new Ae(e,t)}function Ge(n,r){return new Me(n,r,function(e,t){throw new we("Expected one of ".concat(Object.keys(r).map(function(e){return JSON.stringify(e)}).join(" or "),", got ").concat(JSON.stringify(t)),[n])})}function Qe(t,n){return new Se(function(e){return xe(e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id?"".concat(t,"(id = ").concat(e.id,")"):t,function(){return n.validate(e)})})}function Ze(n){return new Se(function(e){if(n.has(e))return e;var t=Array.from(n,function(e){return JSON.stringify(e)}).join(" or ");throw new we("Expected ".concat(t,", got ").concat(e))})}function Je(t){return new Se(function(e){if(void 0!==e)return t.validate(e)})}function et(t){return new Se(function(e){return null===e?null:t.validate(e)})}function tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ze(new Set(t))}function nt(t){return ze.refine(function(e){if(!e.startsWith("".concat(t,":")))throw new Error("".concat(t,' ID must start with "').concat(t,':"'));return e})}var rt=nt("asset");function it(e,t){return qe({id:rt,typeName:We("asset"),type:We(e),props:t})}var ot=function(){function e(){z(this,e),Ee(this,"arraySize",0),Ee(this,"array",Array(8)),Ee(this,"set",null)}return P(e,[{key:"isEmpty",get:function(){if(this.array)return 0===this.arraySize;if(this.set)return 0===this.set.size;throw new Error("no set or array")}},{key:"add",value:function(e){if(this.array)return-1===this.array.indexOf(e)&&(this.arraySize<8?(this.array[this.arraySize]=e,this.arraySize++):(this.set=new Set(this.array),this.array=null,this.set.add(e)),!0);if(this.set)return!this.set.has(e)&&(this.set.add(e),!0);throw new Error("no set or array")}},{key:"remove",value:function(e){if(this.array){var t=this.array.indexOf(e);return-1!==t&&(this.array[t]=void 0,this.arraySize--,t!==this.arraySize&&(this.array[t]=this.array[this.arraySize],this.array[this.arraySize]=void 0),!0)}if(this.set)return!!this.set.has(e)&&(this.set.delete(e),!0);throw new Error("no set or array")}},{key:"visit",value:function(e){if(this.array)for(var t=0;t<this.arraySize;t++){var n=this.array[t];void 0!==n&&e(n)}else{if(!this.set)throw new Error("no set or array");this.set.forEach(e)}}}]),e}();function at(e){return e&&"object"==typeof e&&"parents"in e}function st(e){for(var t=0,n=e.parents.length;t<n;t++)if(e.parents[t].__unsafe__getWithoutCapture(),e.parents[t].lastChangedEpoch!==e.parentEpochs[t])return!0;return!1}var lt=function e(t,n){if(t.children.remove(n)&&t.children.isEmpty&&at(t))for(var r=0,i=t.parents.length;r<i;r++)e(t.parents[r],t)},ut=function e(t,n){if(t.children.add(n)&&at(t))for(var r=0,i=t.parents.length;r<i;r++)e(t.parents[r],t)};function ct(e,t){return e===t||Object.is(e,t)||Boolean(e&&t&&"function"==typeof e.equals&&e.equals(t))}var dt=Object.freeze([]),ft=Symbol.for("__signia__"),pt=globalThis;pt[ft]?console.error('Multiple versions of signia detected. This will cause unexpected behavior. Please add "resolutions" (yarn/pnpm) or "overrides" (npm) in your package.json to ensure only one version of signia is loaded.'):pt[ft]=!0;var ht=P(function e(t,n){z(this,e),Ee(this,"offset",0),Ee(this,"numNewParents",0),Ee(this,"maybeRemoved",void 0),this.below=t,this.child=n}),vt=null;function gt(e){vt=new ht(vt,e)}function mt(){var e,t=vt;if(vt=t.below,0<t.numNewParents||t.offset!==t.child.parents.length){for(var n=t.offset;n<t.child.parents.length;n++){var r=t.child.parents[n];t.child.parents.indexOf(r)>=t.offset&&lt(r,t.child)}if(t.child.parents.length=t.offset,t.child.parentEpochs.length=t.offset,null!==(e=vt)&&void 0!==e&&e.maybeRemoved)for(var i=0;i<vt.maybeRemoved.length;i++){var o=vt.maybeRemoved[i];-1===t.child.parents.indexOf(o)&&lt(o,t.child)}}}function yt(e){if(vt){var t=vt.child.parents.indexOf(e);if(t<0&&(vt.numNewParents++,vt.child.isActivelyListening&&ut(e,vt.child)),t<0||t>=vt.offset){if(t!==vt.offset&&0<t){var n=vt.child.parents[vt.offset];vt.maybeRemoved?-1===vt.maybeRemoved.indexOf(n)&&vt.maybeRemoved.push(n):vt.maybeRemoved=[n]}vt.child.parents[vt.offset]=e,vt.child.parentEpochs[vt.offset]=e.lastChangedEpoch,vt.offset++}}}var bt=Symbol("RESET_VALUE"),wt=function(){function t(e){z(this,t),Ee(this,"index",0),Ee(this,"buffer",void 0),this.capacity=e,this.buffer=new Array(e)}return P(t,[{key:"pushEntry",value:function(e,t,n){void 0!==n&&(n!==bt?(this.buffer[this.index]=[e,t,n],this.index=(this.index+1)%this.capacity):this.clear())}},{key:"clear",value:function(){this.index=0,this.buffer.fill(void 0)}},{key:"getChangesSince",value:function(e){for(var t=this.index,n=this.capacity,r=this.buffer,i=0;i<n;i++){var o=(t-1+n-i)%n,a=r[o];if(!a)return bt;var s=Ce(a,2),l=s[0],u=s[1];if(0===i&&u<=e)return[];if(l<=e&&e<u){for(var c=i+1,d=new Array(c),f=0;f<c;f++)d[f]=r[(o+f)%n][2];return d}}return bt}}]),t}(),xt=0,kt=!1,St=function(){function t(e){z(this,t),Ee(this,"initialAtomValues",new Map),this.parent=e}return P(t,[{key:"isRoot",get:function(){return null===this.parent}},{key:"commit",value:function(){var n=this;if(this.isRoot){var e=this.initialAtomValues;this.initialAtomValues=new Map,_t(e.keys())}else this.initialAtomValues.forEach(function(e,t){n.parent.initialAtomValues.has(t)||n.parent.initialAtomValues.set(t,e)})}},{key:"abort",value:function(){xt++,this.initialAtomValues.forEach(function(e,t){var n;t.set(e),null===(n=t.historyBuffer)||void 0===n||n.clear()}),this.commit()}}]),t}();function _t(e){if(kt)throw new Error("cannot change atoms during reaction cycle");try{kt=!0;var t,n=new Set,r=function e(t){t.lastTraversedEpoch!==xt&&(t.lastTraversedEpoch=xt,"maybeScheduleEffect"in t?n.add(t):t.children.visit(e))},i=ce(e);try{for(i.s();!(t=i.n()).done;)t.value.children.visit(r)}catch(e){i.e(e)}finally{i.f()}var o,a=ce(n);try{for(a.s();!(o=a.n()).done;)o.value.maybeScheduleEffect()}catch(e){a.e(e)}finally{a.f()}}finally{kt=!1}}var Et=null;function Pt(e){return Et?e():function(e){var t=new St(Et);Et=t;try{var n=!1,r=e(function(){return n=!0});return n?t.abort():t.commit(),r}catch(e){throw t.abort(),e}finally{Et=Et.parent}}(e)}var Ct=function(){function i(e,t,n){var r;z(this,i),Ee(this,"isEqual",void 0),Ee(this,"computeDiff",void 0),Ee(this,"lastChangedEpoch",xt),Ee(this,"children",new ot),Ee(this,"historyBuffer",void 0),this.name=e,this.current=t,this.isEqual=null!==(r=null==n?void 0:n.isEqual)&&void 0!==r?r:null,n&&(n.historyLength&&(this.historyBuffer=new wt(n.historyLength)),this.computeDiff=n.computeDiff)}return P(i,[{key:"__unsafe__getWithoutCapture",value:function(){return this.current}},{key:"value",get:function(){return yt(this),this.current}},{key:"set",value:function(e,t){var n,r,i,o;if(null!==(n=null===(r=this.isEqual)||void 0===r?void 0:r.call(this,this.current,e))&&void 0!==n?n:ct(this.current,e))return this.current;xt++,this.historyBuffer&&this.historyBuffer.pushEntry(this.lastChangedEpoch,xt,null!==(i=null!=t?t:null===(o=this.computeDiff)||void 0===o?void 0:o.call(this,this.current,e,this.lastChangedEpoch,xt))&&void 0!==i?i:bt),this.lastChangedEpoch=xt;var a,s,l=this.current;return this.current=e,a=this,s=l,Et?Et.initialAtomValues.has(a)||Et.initialAtomValues.set(a,s):_t([a]),e}},{key:"update",value:function(e){return this.set(e(this.current))}},{key:"getDiffSince",value:function(e){var t,n;return yt(this),e>=this.lastChangedEpoch?dt:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:bt}}]),i}();function It(e,t,n){return new Ct(e,t,n)}var Tt=Symbol("UNINITIALIZED"),Mt=function(e){return e===Tt},At=P(function e(t,n){z(this,e),this.value=t,this.diff=n});function jt(e,t){return new At(e,t)}var Ot=function(){function i(e,t,n){var r;z(this,i),Ee(this,"lastChangedEpoch",-1),Ee(this,"lastTraversedEpoch",-1),Ee(this,"lastCheckedEpoch",-1),Ee(this,"parents",[]),Ee(this,"parentEpochs",[]),Ee(this,"children",new ot),Ee(this,"historyBuffer",void 0),Ee(this,"state",Tt),Ee(this,"computeDiff",void 0),Ee(this,"isEqual",void 0),this.name=e,this.derive=t,null!=n&&n.historyLength&&(this.historyBuffer=new wt(n.historyLength)),this.computeDiff=null==n?void 0:n.computeDiff,this.isEqual=null!==(r=null==n?void 0:n.isEqual)&&void 0!==r?r:ct}return P(i,[{key:"isActivelyListening",get:function(){return!this.children.isEmpty}},{key:"__unsafe__getWithoutCapture",value:function(){var e=-1===this.lastChangedEpoch;if(!(e||this.lastCheckedEpoch!==xt&&st(this)))return this.lastCheckedEpoch=xt,this.state;try{gt(this);var t=this.derive(this.state,this.lastCheckedEpoch),n=t instanceof At?t.value:t;if(this.state===Tt||!this.isEqual(n,this.state)){if(this.historyBuffer&&!e){var r,i,o=t instanceof At?t.diff:void 0;this.historyBuffer.pushEntry(this.lastChangedEpoch,xt,null!==(r=null!=o?o:null===(i=this.computeDiff)||void 0===i?void 0:i.call(this,this.state,n,this.lastCheckedEpoch,xt))&&void 0!==r?r:bt)}this.lastChangedEpoch=xt,this.state=n}return this.lastCheckedEpoch=xt,this.state}finally{mt()}}},{key:"value",get:function(){var e=this.__unsafe__getWithoutCapture();return yt(this),e}},{key:"getDiffSince",value:function(e){var t,n;return this.value,e>=this.lastChangedEpoch?dt:null!==(t=null===(n=this.historyBuffer)||void 0===n?void 0:n.getChangesSince(e))&&void 0!==t?t:bt}}]),i}();function Lt(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=2<arguments.length?arguments[2]:void 0,e=3<arguments.length?arguments[3]:void 0,r=e.get,i=Symbol.for("__signia__computed__"+n);return e.get=function(){var e=this[i];return e||(e=new Ot(n,r.bind(this),t),Object.defineProperty(this,i,{enumerable:!1,configurable:!1,writable:!1,value:e})),e.value},e}function zt(){if(1!==arguments.length)return"string"==typeof arguments[0]?new Ot(arguments[0],arguments[1],arguments[2]):Lt(void 0,arguments[0],arguments[1],arguments[2]);var r=arguments[0];return function(e,t,n){return Lt(r,e,t,n)}}var Rt=function(){function i(e,t,n){var r=this;z(this,i),Ee(this,"_isActivelyListening",!1),Ee(this,"lastTraversedEpoch",-1),Ee(this,"lastReactedEpoch",-1),Ee(this,"_scheduleCount",0),Ee(this,"parentEpochs",[]),Ee(this,"parents",[]),Ee(this,"_scheduleEffect",void 0),Ee(this,"maybeExecute",function(){r._isActivelyListening&&r.execute()}),this.name=e,this.runEffect=t,this._scheduleEffect=null==n?void 0:n.scheduleEffect}return P(i,[{key:"isActivelyListening",get:function(){return this._isActivelyListening}},{key:"scheduleCount",get:function(){return this._scheduleCount}},{key:"maybeScheduleEffect",value:function(){this._isActivelyListening&&this.lastReactedEpoch!==xt&&(!this.parents.length||st(this)?this.scheduleEffect():this.lastReactedEpoch=xt)}},{key:"scheduleEffect",value:function(){this._scheduleCount++,this._scheduleEffect?this._scheduleEffect(this.maybeExecute):this.execute()}},{key:"attach",value:function(){this._isActivelyListening=!0;for(var e=0,t=this.parents.length;e<t;e++)ut(this.parents[e],this)}},{key:"detach",value:function(){this._isActivelyListening=!1;for(var e=0,t=this.parents.length;e<t;e++)lt(this.parents[e],this)}},{key:"execute",value:function(){try{gt(this);var e=this.runEffect(this.lastReactedEpoch);return this.lastReactedEpoch=xt,e}finally{mt()}}}]),i}();function Nt(e,t,n){var r=new Rt(e,t,n);return r.attach(),r.scheduleEffect(),function(){r.detach()}}var Dt=function(){function t(e){z(this,t),Ee(this,"nextValue",void 0),Ee(this,"diff",void 0),this.previousValue=e}return P(t,[{key:"get",value:function(){var e,t,n,r,i,o,a=null!==(e=null===(t=this.diff)||void 0===t||null===(n=t.removed)||void 0===n?void 0:n.size)&&void 0!==e?e:0,s=null!==(r=null===(i=this.diff)||void 0===i||null===(o=i.added)||void 0===o?void 0:o.size)&&void 0!==r?r:0;if(0!==a||0!==s)return{value:this.nextValue,diff:this.diff}}},{key:"_add",value:function(e,t){var n,r,i,o,a;null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.add(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t?null===(i=this.diff.removed)||void 0===i||i.delete(e):(null!==(a=(o=this.diff).added)&&void 0!==a||(o.added=new Set),this.diff.added.add(e))}},{key:"add",value:function(e){var t,n=this.previousValue.has(e);if(n){var r,i;if(!(null===(r=this.diff)||void 0===r||null===(i=r.removed)||void 0===i?void 0:i.has(e)))return;return this._add(e,n)}(null===(t=this.nextValue)||void 0===t?void 0:t.has(e))||this._add(e,n)}},{key:"_remove",value:function(e,t){var n,r,i,o,a;null!==(n=this.nextValue)&&void 0!==n||(this.nextValue=new Set(this.previousValue)),this.nextValue.delete(e),null!==(r=this.diff)&&void 0!==r||(this.diff={}),t?(null!==(o=(i=this.diff).removed)&&void 0!==o||(i.removed=new Set),this.diff.removed.add(e)):null===(a=this.diff.added)||void 0===a||a.delete(e)}},{key:"remove",value:function(e){var t,n,r=this.previousValue.has(e);if(!r){var i,o;if(!(null===(i=this.diff)||void 0===i||null===(o=i.added)||void 0===o?void 0:o.has(e)))return;return this._remove(e,r)}(null===(t=this.diff)||void 0===t||null===(n=t.removed)||void 0===n?void 0:n.has(e))||this._remove(e,r)}}]),t}(),Bt=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce(function(e,t){return e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():62<t?"-":"_")},"")},Ft=function(){function o(e,t){var n,r,i=this;z(this,o),Ee(this,"createDefaultProperties",void 0),Ee(this,"migrations",void 0),Ee(this,"validator",void 0),Ee(this,"scope",void 0),Ee(this,"isInstance",function(e){return(null==e?void 0:e.typeName)===i.typeName}),this.typeName=e,this.createDefaultProperties=t.createDefaultProperties,this.migrations=t.migrations,this.validator=null!==(n=t.validator)&&void 0!==n?n:{validate:function(e){return e}},this.scope=null!==(r=t.scope)&&void 0!==r?r:"document"}return P(o,[{key:"create",value:function(e){for(var t=Pe(Pe({},this.createDefaultProperties()),{},{id:this.createId()}),n=0,r=Object.entries(e);n<r.length;n++){var i=Ce(r[n],2),o=i[0],a=i[1];void 0!==a&&(t[o]=a)}return t.typeName=this.typeName,t}},{key:"clone",value:function(e){return Pe(Pe({},be(e)),{},{id:this.createId()})}},{key:"createId",value:function(e){return this.typeName+":"+(null!=e?e:Bt())}},{key:"createCustomId",value:function(e){return this.typeName+":"+e}},{key:"parseId",value:function(e){if(!this.isId(e))throw new Error('ID "'.concat(e,'" is not a valid ID for type "').concat(this.typeName,'"'));return e.slice(this.typeName.length+1)}},{key:"isId",value:function(e){if(!e)return!1;for(var t=0;t<this.typeName.length;t++)if(e[t]!==this.typeName[t])return!1;return":"===e[this.typeName.length]}},{key:"withDefaultProperties",value:function(e){return new o(this.typeName,{createDefaultProperties:e,migrations:this.migrations,validator:this.validator,scope:this.scope})}},{key:"validate",value:function(e){return this.validator.validate(e)}}]),o}();function Ut(e,t){var n;return new Ft(e,{createDefaultProperties:function(){return{}},migrations:null!==(n=t.migrations)&&void 0!==n?n:{currentVersion:0,firstVersion:0,migrators:{}},validator:t.validator,scope:t.scope})}var Kt=function(){function e(){z(this,e),Ee(this,"items",new WeakMap)}return P(e,[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}}]),e}(),Vt=Rj(3108);function Wt(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var i=Ce(r[n],2),o=i[0],a=i[1],s=t[o];if("eq"in a&&s!==a.eq)return!1;if("neq"in a&&s===a.neq)return!1;if("gt"in a&&("number"!=typeof s||s<=a.gt))return!1}return!0}function Ht(e,t,n){for(var r=Object.fromEntries(Object.keys(n).map(function(e){return[e,new Set]})),i=0,o=Object.entries(n);i<o.length;i++){var a=Ce(o[i],2),s=a[0],l=a[1];if("eq"in l){var u=e.index(t,s).value.get(l.eq);if(u){var c,d=ce(u);try{for(d.s();!(c=d.n()).done;){var f=c.value;r[s].add(f)}}catch(e){d.e(e)}finally{d.f()}}}else if("neq"in l){var p,h=ce(e.index(t,s).value);try{for(h.s();!(p=h.n()).done;){var v=Ce(p.value,2),g=v[0],m=v[1];if(g!==l.neq){var y,b=ce(m);try{for(b.s();!(y=b.n()).done;){var w=y.value;r[s].add(w)}}catch(e){b.e(e)}finally{b.f()}}}}catch(e){h.e(e)}finally{h.f()}}else if("gt"in l){var x,k=ce(e.index(t,s).value);try{for(k.s();!(x=k.n()).done;){var S=Ce(x.value,2),_=S[0],E=S[1];if(_>l.gt){var P,C=ce(E);try{for(C.s();!(P=C.n()).done;){var I=P.value;r[s].add(I)}}catch(e){C.e(e)}finally{C.f()}}}}catch(e){k.e(e)}finally{k.f()}}}return function(e){if(0===e.length)return new Set;var n,t=e[0],r=e.slice(1),i=new Set,o=ce(t);try{var a=function(){var t=n.value;r.every(function(e){return e.has(t)})&&i.add(t)};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return i}(Object.values(r))}var Yt=function(){function n(e,t){z(this,n),Ee(this,"indexCache",new Map),Ee(this,"historyCache",new Map),this.atoms=e,this.history=t}return P(n,[{key:"filterHistory",value:function(k){var S=this;if(this.historyCache.has(k))return this.historyCache.get(k);var e=zt("filterHistory:"+k,function(e,t){if(Mt(e))return S.history.value;var n=S.history.getDiffSince(t);if(n===bt)return S.history.value;var r,i={added:{},removed:{},updated:{}},o=0,a=0,s=0,l=ce(n);try{for(l.s();!(r=l.n()).done;){var u,c=r.value,d=ce(ie(c.added));try{for(d.s();!(u=d.n()).done;){var f=u.value;if(f.typeName===k)if(i.removed[f.id]){var p=i.removed[f.id];delete i.removed[f.id],a--,p!==f&&(i.updated[f.id]=[p,f],s++)}else i.added[f.id]=f,o++}}catch(e){d.e(e)}finally{d.f()}var h,v=ce(ie(c.updated));try{for(v.s();!(h=v.n()).done;){var g=Ce(h.value,2),m=g[0],y=g[1];y.typeName===k&&(i.added[y.id]?i.added[y.id]=y:i.updated[y.id]?i.updated[y.id]=[i.updated[y.id][0],y]:(i.updated[y.id]=[m,y],s++))}}catch(e){v.e(e)}finally{v.f()}var b,w=ce(ie(c.removed));try{for(w.s();!(b=w.n()).done;){var x=b.value;x.typeName===k&&(i.added[x.id]?(delete i.added[x.id],o--):(i.updated[x.id]?(i.removed[x.id]=i.updated[x.id][0],delete i.updated[x.id],s--):i.removed[x.id]=x,a++))}}catch(e){w.e(e)}finally{w.f()}}}catch(e){l.e(e)}finally{l.f()}return o||a||s?jt(S.history.value,i):e},{historyLength:100});return this.historyCache.set(k,e),e}},{key:"index",value:function(e,t){var n=e+":"+t;if(this.indexCache.has(n))return this.indexCache.get(n);var r=this.__uncached_createIndex(e,t);return this.indexCache.set(n,r),r}},{key:"__uncached_createIndex",value:function(T,M){var o=this,A=this.filterHistory(T),j=function(){A.value;var e,t=new Map,n=ce(ie(o.atoms.value));try{for(n.s();!(e=n.n()).done;){var r=e.value.value;if(r.typeName===T){var i=r[M];t.has(i)||t.set(i,new Set),t.get(i).add(r.id)}}}catch(e){n.e(e)}finally{n.f()}return t};return zt("index:"+T+":"+M,function(i,e){if(Mt(i))return j();var t=A.getDiffSince(e);if(t===bt)return j();var n,o=new Map,r=function(e,t){var n,r=o.get(e);r||(r=new Dt(null!==(n=i.get(e))&&void 0!==n?n:new Set)),r.add(t),o.set(e,r)},a=function(e,t){var n,r=o.get(e);r||(r=new Dt(null!==(n=i.get(e))&&void 0!==n?n:new Set)),r.remove(t),o.set(e,r)},s=ce(t);try{for(s.s();!(n=s.n()).done;){var l,u=n.value,c=ce(ie(u.added));try{for(c.s();!(l=c.n()).done;){var d=l.value;d.typeName===T&&r(d[M],d.id)}}catch(e){c.e(e)}finally{c.f()}var f,p=ce(ie(u.updated));try{for(p.s();!(f=p.n()).done;){var h=Ce(f.value,2),v=h[0],g=h[1];if(g.typeName===T){var m=v[M],y=g[M];m!==y&&(a(m,g.id),r(y,g.id))}}}catch(e){p.e(e)}finally{p.f()}var b,w=ce(ie(u.removed));try{for(w.s();!(b=w.n()).done;){var x=b.value;x.typeName===T&&a(x[M],x.id)}}catch(e){w.e(e)}finally{w.f()}}}catch(e){s.e(e)}finally{s.f()}var k,S=void 0,_=void 0,E=ce(o);try{for(E.s();!(k=E.n()).done;){var P=Ce(k.value,2),C=P[0],I=P[1].get();I&&(S||(S=new Map(i)),_||(_=new Map),0===I.value.size?S.delete(C):S.set(C,I.value),_.set(C,I.diff))}}catch(e){E.e(e)}finally{E.f()}return S&&_?jt(S,_):i},{historyLength:100})}},{key:"record",value:function(e){var i=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return{}},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"record:"+e+(t?":"+t.toString():""),o=this.ids(e,t,n);return zt(n,function(){var e,t=ce(o.value);try{for(t.s();!(e=t.n()).done;){var n,r=e.value;return null===(n=i.atoms.value[r])||void 0===n?void 0:n.value}}catch(e){t.e(e)}finally{t.f()}})}},{key:"records",value:function(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return{}},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"records:"+e+(t?":"+t.toString():""),i=this.ids(e,t,"ids:"+r);return zt(r,function(){return de(i.value).map(function(e){var t=n.atoms.value[e];if(!t)throw new Error("no atom found for record id: "+e);return t.value})})}},{key:"ids",value:function(b){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return{}},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"ids:"+b+(n?":"+n.toString():""),w=this.filterHistory(b),x=function(){w.value;var e=n();return 0===Object.keys(e).length?new Set(ie(t.atoms.value).flatMap(function(e){var t=e.value;return t.typeName===b?t.id:[]})):Ht(t,b,e)},k=function(e){var t=x(),n=function(e,t){var n,r={},i=ce(t);try{for(i.s();!(n=i.n()).done;){var o,a=n.value;e.has(a)||(null!==(o=r.added)&&void 0!==o||(r.added=new Set),r.added.add(a))}}catch(e){i.e(e)}finally{i.f()}var s,l=ce(e);try{for(l.s();!(s=l.n()).done;){var u,c=s.value;t.has(c)||(null!==(u=r.removed)&&void 0!==u||(r.removed=new Set),r.removed.add(c))}}catch(e){l.e(e)}finally{l.f()}return r.added||r.removed?r:void 0}(e,t);return n?jt(t,n):e},S=zt("ids_query:"+e,n,{isEqual:Vt});return zt("query:"+e,function(e,t){var n=S.value;if(Mt(e))return x();if(t<S.lastChangedEpoch)return k(e);var r=w.getDiffSince(t);if(r===bt)return k(e);var i,o=new Dt(e),a=ce(r);try{for(a.s();!(i=a.n()).done;){var s,l=i.value,u=ce(ie(l.added));try{for(u.s();!(s=u.n()).done;){var c=s.value;c.typeName===b&&Wt(n,c)&&o.add(c.id)}}catch(e){u.e(e)}finally{u.f()}var d,f=ce(ie(l.updated));try{for(f.s();!(d=f.n()).done;){var p=Ce(d.value,2),h=(p[0],p[1]);h.typeName===b&&(Wt(n,h)?o.add(h.id):o.remove(h.id))}}catch(e){f.e(e)}finally{f.f()}var v,g=ce(ie(l.removed));try{for(g.s();!(v=g.n()).done;){var m=v.value;m.typeName===b&&o.remove(m.id)}}catch(e){g.e(e)}finally{g.f()}}}catch(e){a.e(e)}finally{a.f()}var y=o.get();return y?jt(y.value,y.diff):e},{historyLength:50})}},{key:"exec",value:function(e,t){var n=Ht(this,e,t);if(0===n.size)return dt;var r=this.atoms.value;return de(n).map(function(e){return r[e].value})}}]),n}(),Xt=function(){function i(e){var g=this;z(this,i),Ee(this,"id",Bt()),Ee(this,"atoms",It("store_atoms",{})),Ee(this,"history",It("history",0,{historyLength:1e3})),Ee(this,"query",new Yt(this.atoms,this.history)),Ee(this,"listeners",new Set),Ee(this,"historyAccumulator",new $t),Ee(this,"historyReactor",void 0),Ee(this,"schema",void 0),Ee(this,"props",void 0),Ee(this,"scopedTypes",void 0),Ee(this,"onAfterCreate",void 0),Ee(this,"onAfterChange",void 0),Ee(this,"onBeforeDelete",void 0),Ee(this,"onAfterDelete",void 0),Ee(this,"_runCallbacks",!0),Ee(this,"put",function(h,v){Pt(function(){for(var e,t={},n={},r=g.atoms.__unsafe__getWithoutCapture(),i=null,o=!1,a=0,s=h.length;a<s;a++){var l,u=(null!==(l=i)&&void 0!==l?l:r)[(e=h[a]).id];if(u){var c=u.__unsafe__getWithoutCapture();e=g.schema.validateRecord(g,e,null!=v?v:"updateRecord",c),u.set(e);var d=u.__unsafe__getWithoutCapture();c!==d&&(o=!0,t[e.id]=[c,d])}else o=!0,n[(e=g.schema.validateRecord(g,e,null!=v?v:"createRecord",null)).id]=e,i||(i=Pe({},r)),i[e.id]=It("atom:"+e.id,e)}if(i&&g.atoms.set(i),o){g.updateHistory({added:n,updated:t,removed:{}});var f=g.onAfterCreate,p=g.onAfterChange;f&&g._runCallbacks&&Object.values(n).forEach(function(e){f(e)}),p&&g._runCallbacks&&Object.values(t).forEach(function(e){var t=Ce(e,2),n=t[0],r=t[1];p(n,r)})}})}),Ee(this,"remove",function(s){Pt(function(){if(g.onBeforeDelete&&g._runCallbacks){var e,t=ce(s);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=g.atoms.__unsafe__getWithoutCapture()[n];r&&g.onBeforeDelete(r.value)}}catch(e){t.e(e)}finally{t.f()}}var a=void 0;if(g.atoms.update(function(e){var t,n,r=void 0,i=ce(s);try{for(i.s();!(n=i.n()).done;){var o=n.value;o in e&&(r||(r=Pe({},e)),a||(a={}),delete r[o],a[o]=e[o].value)}}catch(e){i.e(e)}finally{i.f()}return null!==(t=r)&&void 0!==t?t:e}),a&&(g.updateHistory({added:{},updated:{},removed:a}),g.onAfterDelete&&g._runCallbacks))for(var i=0,o=s.length;i<o;i++)g.onAfterDelete(a[s[i]])})}),Ee(this,"get",function(e){var t;return null===(t=g.atoms.value[e])||void 0===t?void 0:t.value}),Ee(this,"unsafeGetWithoutCapture",function(e){var t;return null===(t=g.atoms.value[e])||void 0===t?void 0:t.__unsafe__getWithoutCapture()}),Ee(this,"serialize",function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"document",n={},r=ce(oe(g.atoms.value));try{for(r.s();!(e=r.n()).done;){var i=Ce(e.value,2),o=i[0],a=i[1].value;("all"===t||g.scopedTypes[t].has(a.typeName))&&(n[o]=a)}}catch(e){r.e(e)}finally{r.f()}return n}),Ee(this,"allRecords",function(){return ie(g.atoms.value).map(function(e){return e.value})}),Ee(this,"clear",function(){g.remove(re(g.atoms.value))}),Ee(this,"update",function(e,t){var n=g.atoms.value[e];n?g.put([t(n.__unsafe__getWithoutCapture())]):console.error("Record ".concat(e," not found. This is probably an error"))}),Ee(this,"has",function(e){return!!g.atoms.value[e]}),Ee(this,"listen",function(e,t){var n,r;g._flushHistory();var i={onHistory:e,filters:{source:null!==(n=null==t?void 0:t.source)&&void 0!==n?n:"all",scope:null!==(r=null==t?void 0:t.scope)&&void 0!==r?r:"all"}};return g.listeners.add(i),g.historyReactor.scheduler.isActivelyListening||g.historyReactor.start(),function(){g.listeners.delete(i),0===g.listeners.size&&g.historyReactor.stop()}}),Ee(this,"isMergingRemoteChanges",!1),Ee(this,"mergeRemoteChanges",function(e){if(g.isMergingRemoteChanges)return e();try{g.isMergingRemoteChanges=!0,Pt(e)}finally{g.isMergingRemoteChanges=!1}}),Ee(this,"createComputedCache",function(n,r){var i=new Kt;return{get:function(e){var t=g.atoms.value[e];if(t)return i.get(t,function(){return zt(n+":"+e,function(){return r(t.value)})}).value}}}),Ee(this,"createSelectedComputedCache",function(r,i,o){var a=new Kt;return{get:function(e){var t=g.atoms.value[e];if(t){var n=zt(r+":"+e+":selector",function(){return i(t.value)});return a.get(t,function(){return zt(r+":"+e,function(){return o(n.value)})}).value}}}}),Ee(this,"_integrityChecker",void 0),Ee(this,"_isPossiblyCorrupted",!1);var r,t=e.initialData,n=e.schema;this.schema=n,this.props=e.props,t&&this.atoms.set(se(oe(t).map(function(e){var t=Ce(e,2),n=t[0],r=t[1];return[n,It("atom:"+n,g.schema.validateRecord(g,r,"initialize",null))]}))),this.historyReactor={scheduler:r=new Rt("Store.historyReactor",function(){g.history.value,g._flushHistory()},{scheduleEffect:function(e){return function(e){if(pe())return e();he.includes(e)||(he.push(e),ge())}(e)}}),start:function(e){var t,n=null!==(t=null==e?void 0:e.force)&&void 0!==t&&t;r.attach(),n?r.scheduleEffect():r.maybeScheduleEffect()},stop:function(){r.detach()}},this.scopedTypes={document:new Set(ie(this.schema.types).filter(function(e){return"document"===e.scope}).map(function(e){return e.typeName})),session:new Set(ie(this.schema.types).filter(function(e){return"session"===e.scope}).map(function(e){return e.typeName})),presence:new Set(ie(this.schema.types).filter(function(e){return"presence"===e.scope}).map(function(e){return e.typeName}))}}return P(i,[{key:"_flushHistory",value:function(){if(this.historyAccumulator.hasChanges()){var e,t=ce(this.historyAccumulator.flush());try{for(t.s();!(e=t.n()).done;){var n,r=e.value,i=r.changes,o=r.source,a=null,s=null,l=null,u=ce(this.listeners);try{for(u.s();!(n=u.n()).done;){var c=n.value,d=c.onHistory,f=c.filters;if("all"===f.source||f.source===o)if("all"!==f.scope)if("document"===f.scope){var p;if(null!==(p=s)&&void 0!==p||(s=this.filterChangesByScope(i,"document")),!s)continue;d({changes:s,source:o})}else if("session"===f.scope){var h;if(null!==(h=a)&&void 0!==h||(a=this.filterChangesByScope(i,"session")),!a)continue;d({changes:a,source:o})}else{var v;if(null!==(v=l)&&void 0!==v||(l=this.filterChangesByScope(i,"presence")),!l)continue;d({changes:l,source:o})}else d({changes:i,source:o})}}catch(e){u.e(e)}finally{u.f()}}}catch(e){t.e(e)}finally{t.f()}}}},{key:"filterChangesByScope",value:function(e,n){var r=this,t={added:le(e.added,function(e,t){return r.scopedTypes[n].has(t.typeName)}),updated:le(e.updated,function(e,t){return r.scopedTypes[n].has(t[1].typeName)}),removed:le(e.removed,function(e,t){return r.scopedTypes[n].has(t.typeName)})};return 0===Object.keys(t.added).length&&0===Object.keys(t.updated).length&&0===Object.keys(t.removed).length?null:t}},{key:"updateHistory",value:function(e){this.historyAccumulator.add({changes:e,source:this.isMergingRemoteChanges?"remote":"user"}),0===this.listeners.size&&this.historyAccumulator.clear(),this.history.set(this.history.value+1,e)}},{key:"validate",value:function(t){var n=this;this.allRecords().forEach(function(e){return n.schema.validateRecord(n,e,t,null)})}},{key:"getSnapshot",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"document";return{store:this.serialize(e),schema:this.schema.serialize()}}},{key:"loadSnapshot",value:function(e){var t=this,n=this.schema.migrateStoreSnapshot(e.store,e.schema);if("error"===n.type)throw new Error("Failed to migrate snapshot: ".concat(n.reason));Pt(function(){t.clear(),t.put(Object.values(n.value)),t.ensureStoreIsUsable()})}},{key:"extractingChanges",value:function(e){var t=[],n=this.historyAccumulator.intercepting(function(e){return t.push(e.changes)});try{return Pt(e),qt(t)}finally{n()}}},{key:"applyDiff",value:function(n){var r=this,e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],t=this._runCallbacks;try{this._runCallbacks=e,Pt(function(){var e=ie(n.added).concat(ie(n.updated).map(function(e){var t=Ce(e,2);return t[0],t[1]})),t=re(n.removed);e.length&&r.put(e),t.length&&r.remove(t)})}finally{this._runCallbacks=t}}},{key:"ensureStoreIsUsable",value:function(){var e,t;null!==(e=this._integrityChecker)&&void 0!==e||(this._integrityChecker=this.schema.createIntegrityChecker(this)),null===(t=this._integrityChecker)||void 0===t||t.call(this)}},{key:"markAsPossiblyCorrupted",value:function(){this._isPossiblyCorrupted=!0}},{key:"isPossiblyCorrupted",value:function(){return this._isPossiblyCorrupted}}]),i}();function qt(e){var t,n={added:{},removed:{},updated:{}},r=ce(e);try{for(r.s();!(t=r.n()).done;){var i,o=t.value,a=ce(oe(o.added));try{for(a.s();!(i=a.n()).done;){var s=Ce(i.value,2),l=s[0],u=s[1];if(n.removed[l]){var c=n.removed[l];delete n.removed[l],c!==u&&(n.updated[l]=[c,u])}else n.added[l]=u}}catch(e){a.e(e)}finally{a.f()}var d,f=ce(oe(o.updated));try{for(f.s();!(d=f.n()).done;){var p=Ce(d.value,2),h=p[0],v=Ce(p[1],2),g=(v[0],v[1]);n.added[h]?(n.added[h]=g,delete n.updated[h]):n.updated[h]?n.updated[h][1]=g:n.updated[h]=o.updated[h],delete n.removed[h]}}catch(e){f.e(e)}finally{f.f()}var m,y=ce(oe(o.removed));try{for(y.s();!(m=y.n()).done;){var b=Ce(m.value,2),w=b[0],x=b[1];n.added[w]?delete n.added[w]:n.updated[w]?(n.removed[w]=n.updated[w][0],delete n.updated[w]):n.removed[w]=x}}catch(e){y.e(e)}finally{y.f()}}}catch(e){r.e(e)}finally{r.f()}return n}var $t=function(){function e(){z(this,e),Ee(this,"_history",[]),Ee(this,"_interceptors",new Set)}return P(e,[{key:"intercepting",value:function(e){var t=this;return this._interceptors.add(e),function(){t._interceptors.delete(e)}}},{key:"add",value:function(e){this._history.push(e);var t,n=ce(this._interceptors);try{for(n.s();!(t=n.n()).done;)(0,t.value)(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"flush",value:function(){var e=function(e){for(var t,n=[],r=e[0],i=1,o=e.length;i<o;i++)t=e[i],r=r.source!==t.source?(n.push(r),t):{source:r.source,changes:qt([r.changes,t.changes])};return n.push(r),n}(this._history);return this._history=[],e}},{key:"clear",value:function(){this._history=[]}},{key:"hasChanges",value:function(){return 0<this._history.length}}]),e}();function Gt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Qt=["typeName","id"];function Zt(e){var t=e.currentVersion,n=e.firstVersion,r=e.migrators,i=void 0===r?{}:r,o=e.subTypeKey,a=e.subTypeMigrations;if("number"==typeof t&&"number"==typeof n){if(t===n)throw Error("Current version is equal to initial version.");if(t<n)throw Error("Current version is lower than initial version.")}return{firstVersion:null!=n?n:0,currentVersion:null!=t?t:0,migrators:i,subTypeKey:o,subTypeMigrations:a}}var Jt,en=((Jt=en||{}).IncompatibleSubtype="incompatible-subtype",Jt.UnknownType="unknown-type",Jt.TargetVersionTooNew="target-version-too-new",Jt.TargetVersionTooOld="target-version-too-old",Jt.MigrationError="migration-error",Jt.UnrecognizedSubtype="unrecognized-subtype",Jt);function tn(e){var t=e.record,n=e.migrations,r=e.fromVersion,i=e.toVersion,o=r;if(!("object"==typeof t&&null!==t&&"id"in t&&"typeName"in t))throw new Error("[migrateRecord] object is not a record");for(var a=t.typeName,s=t.id,l=Gt(t,Qt);o<i;){var u=o+1,c=n.migrators[u];if(!c)return{type:"error",reason:"target-version-too-new"};l=c.up(l),o=u}for(;i<o;){var d=o-1,f=n.migrators[o];if(!f)return{type:"error",reason:"target-version-too-old"};l=f.down(l),o=d}return{type:"success",value:Pe(Pe({},l),{},{id:s,typeName:a})}}function nn(e){for(var t=e.value,n=e.migrations,r=e.fromVersion,i=e.toVersion,o=r;o<i;){var a=o+1,s=n.migrators[a];if(!s)return{type:"error",reason:"target-version-too-new"};t=s.up(t),o=a}for(;i<o;){var l=o-1,u=n.migrators[o];if(!u)return{type:"error",reason:"target-version-too-old"};t=u.down(t),o=l}return{type:"success",value:t}}var rn,on=function(){function n(e,t){z(this,n),this.types=e,this.options=t}return P(n,[{key:"currentStoreVersion",get:function(){var e,t;return null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0}},{key:"validateRecord",value:function(t,n,r,i){try{var e=J(this.types,n.typeName);if(!e)throw new Error("Missing definition for record type ".concat(n.typeName));return e.validate(n)}catch(e){if(this.options.onValidationFailure)return this.options.onValidationFailure({store:t,record:n,phase:r,recordBefore:i,error:e});throw e}}},{key:"migratePersistedRecord",value:function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"up",i=J(this.types,e.typeName),o=t.recordVersions[e.typeName];if(!o||!i)return{type:"error",reason:en.UnknownType};var a=i.migrations.currentVersion,s=o.version;if(a!==s){var l=tn("up"===r?{record:e,migrations:i.migrations,fromVersion:s,toVersion:a}:{record:e,migrations:i.migrations,fromVersion:a,toVersion:s});if("error"===l.type)return l;e=l.value}if(!i.migrations.subTypeKey)return{type:"success",value:e};var u=null===(n=i.migrations.subTypeMigrations)||void 0===n?void 0:n[e[i.migrations.subTypeKey]],c="subTypeVersions"in o?o.subTypeVersions[e[i.migrations.subTypeKey]]:void 0;if(void 0===u)return{type:"error",reason:en.UnrecognizedSubtype};if(void 0===c)return{type:"error",reason:en.IncompatibleSubtype};var d=tn("up"===r?{record:e,migrations:u,fromVersion:c,toVersion:u.currentVersion}:{record:e,migrations:u,fromVersion:u.currentVersion,toVersion:c});return"error"===d.type?d:{type:"success",value:d.value}}},{key:"migrateStoreSnapshot",value:function(e,t){var n,r=this.options.snapshotMigrations;if(!r)return{type:"success",value:e};var i=r.currentVersion,o=null!==(n=t.storeVersion)&&void 0!==n?n:0;if(i<o)return{type:"error",reason:en.TargetVersionTooOld};if(o<i){var a=nn({value:e,migrations:r,fromVersion:o,toVersion:i});if("error"===a.type)return a;e=a.value}var s,l=[],u=ce(ie(e));try{for(u.s();!(s=u.n()).done;){var c=s.value,d=this.migratePersistedRecord(c,t);if("error"===d.type)return d;d.value&&d.value!==c&&l.push(d.value)}}catch(e){u.e(e)}finally{u.f()}if(l.length){e=Pe({},e);var f,p=ce(l);try{for(p.s();!(f=p.n()).done;){var h=f.value;e[h.id]=h}}catch(e){p.e(e)}finally{p.f()}}return{type:"success",value:e}}},{key:"createIntegrityChecker",value:function(e){var t,n,r;return null!==(t=null===(n=(r=this.options).createIntegrityChecker)||void 0===n?void 0:n.call(r,e))&&void 0!==t?t:void 0}},{key:"serialize",value:function(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.currentVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(ie(this.types).map(function(e){return[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.currentVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map(function(e){var t=Ce(e,2);return[t[0],t[1].currentVersion]})):void 0}:{version:e.migrations.currentVersion}]}))}}},{key:"serializeEarliestVersion",value:function(){var e,t;return{schemaVersion:1,storeVersion:null!==(e=null===(t=this.options.snapshotMigrations)||void 0===t?void 0:t.firstVersion)&&void 0!==e?e:0,recordVersions:Object.fromEntries(ie(this.types).map(function(e){return[e.typeName,e.migrations.subTypeKey&&e.migrations.subTypeMigrations?{version:e.migrations.firstVersion,subTypeKey:e.migrations.subTypeKey,subTypeVersions:e.migrations.subTypeMigrations?Object.fromEntries(Object.entries(e.migrations.subTypeMigrations).map(function(e){var t=Ce(e,2);return[t[0],t[1].firstVersion]})):void 0}:{version:e.migrations.firstVersion}]}))}}}],[{key:"create",value:function(e,t){return new n(e,null!=t?t:{})}}]),n}(),an=function(e,t){if(e.schemaVersion>t.schemaVersion)return 1;if(e.schemaVersion<t.schemaVersion)return-1;if(e.storeVersion>t.storeVersion)return 1;if(e.storeVersion<t.storeVersion)return-1;for(var n=0,r=Object.keys(e.recordVersions);n<r.length;n++){var i=r[n],o=e.recordVersions[i],a=t.recordVersions[i];if(o.version>a.version)return 1;if(o.version<a.version)return-1;if("subTypeVersions"in o&&!("subTypeVersions"in a))return 1;if(!("subTypeVersions"in o)&&"subTypeVersions"in a)return-1;if("subTypeVersions"in o&&"subTypeVersions"in a)for(var s=0,l=Object.keys(o.subTypeVersions);s<l.length;s++){var u=l[s],c=o.subTypeVersions[u],d=a.subTypeVersions[u];if(d<c)return 1;if(c<d)return-1}}return 0},sn=Ut("camera",{validator:Qe("camera",qe({typeName:We("camera"),id:nt("camera"),x:Re,y:Re,z:Re})),migrations:Zt({}),scope:"session"}).withDefaultProperties(function(){return{x:0,y:0,z:1}}),ln=qe({x:Re,y:Re,z:Re.optional()}),un=qe({x:Re,y:Re,w:Re,h:Re}),cn=Ze(new Set(["accent","white","black","selection-stroke","selection-fill","laser","muted-1"])),dn=Ze(new Set(["none","default","pointer","cross","grab","rotate","grabbing","resize-edge","resize-corner","text","move","ew-resize","ns-resize","nesw-resize","nwse-resize","nesw-rotate","nwse-rotate","swne-rotate","senw-rotate","zoom-in","zoom-out"])),fn=qe({color:cn,type:dn,rotation:Re}),pn=Re.check(function(e){if(e<0||1<e)throw new we("Opacity must be between 0 and 1")}),hn=new Set(["starting","paused","active","stopping"]),vn=qe({points:Ye(ln),size:Ne,color:cn,opacity:Re,state:Ze(hn),delay:Re}),gn=nt("page"),mn=Ut("page",{validator:Qe("page",qe({typeName:We("page"),id:gn,name:ze,index:ze})),migrations:Zt({}),scope:"document"});function yn(e){return mn.isId(e)}var bn=["exportBackground"],wn=["dialog"],xn=["isToolLocked"],kn=["propsForNextShape"],Sn=["propsForNextShape"],_n=["labelColor"],En=["followingUserId"],Pn=["zoomBrush"],Cn=["verticalAlign"],In=["delay"],Tn=["userId"],Mn=["isPenMode","isGridMode"],An=["opacity"],jn=["propsForNextShape"],On=["opacityForNextShape"],Ln=["chatMessage","isChatting"],zn=["highlightedUserIds"],Rn=["propsForNextShape"],Nn=["stylesForNextShape"];nt("instance");var Dn,Bn,Fn=Zt({currentVersion:16,migrators:(rn={},Ee(rn,1,{up:function(e){return Pe(Pe({},e),{},{exportBackground:!0})},down:function(e){return e.exportBackground,Gt(e,bn)}}),Ee(rn,2,{up:function(e){return e.dialog,Gt(e,wn)},down:function(e){return Pe(Pe({},e),{},{dialog:null})}}),Ee(rn,3,{up:function(e){return Pe(Pe({},e),{},{isToolLocked:!1})},down:function(e){return e.isToolLocked,Gt(e,xn)}}),Ee(rn,4,{up:function(e){var t=e.propsForNextShape;return Pe(Pe({},Gt(e,kn)),{},{propsForNextShape:Object.fromEntries(Object.entries(t).filter(function(e){var t=Ce(e,1)[0];return["color","labelColor","dash","fill","size","font","align","verticalAlign","icon","geo","arrowheadStart","arrowheadEnd","spline"].includes(t)}))})},down:function(e){return e}}),Ee(rn,5,{up:function(e){var t=e.propsForNextShape;return Pe(Pe({},Gt(e,Sn)),{},{propsForNextShape:Pe(Pe({},t),{},{labelColor:"black"})})},down:function(e){var t=e.propsForNextShape,n=(t.labelColor,Gt(t,_n));return Pe(Pe({},e),{},{propsForNextShape:Pe({},n)})}}),Ee(rn,6,{up:function(e){return Pe(Pe({},e),{},{followingUserId:null})},down:function(e){return e.followingUserId,Gt(e,En)}}),Ee(rn,7,{up:function(e){var t=e.propsForNextShape.align;return"justify"===t&&(t="start"),Pe(Pe({},e),{},{propsForNextShape:Pe(Pe({},e.propsForNextShape),{},{align:t})})},down:function(e){return Pe({},e)}}),Ee(rn,8,{up:function(e){return Pe(Pe({},e),{},{zoomBrush:null})},down:function(e){return e.zoomBrush,Gt(e,Pn)}}),Ee(rn,9,{up:function(e){return Pe(Pe({},e),{},{propsForNextShape:Pe(Pe({},e.propsForNextShape),{},{verticalAlign:"middle"})})},down:function(e){var t=e.propsForNextShape,n=(t.verticalAlign,Gt(t,Cn));return Pe(Pe({},e),{},{propsForNextShape:n})}}),Ee(rn,10,{up:function(e){return null!==e.scribble?Pe(Pe({},e),{},{scribble:Pe(Pe({},e.scribble),{},{delay:0})}):Pe({},e)},down:function(e){if(null===e.scribble)return Pe({},e);var t=e.scribble,n=(t.delay,Gt(t,In));return Pe(Pe({},e),{},{scribble:n})}}),Ee(rn,11,{up:function(e){return e.userId,Gt(e,Tn)},down:function(e){return Pe(Pe({},e),{},{userId:"user:none"})}}),Ee(rn,12,{up:function(e){return Pe(Pe({},e),{},{isPenMode:!1,isGridMode:!1})},down:function(e){return e.isPenMode,e.isGridMode,Gt(e,Mn)}}),Ee(rn,13,{up:function(e){var t=e.propsForNextShape,n=t.opacity,r=Gt(t,An);return Pe(Pe({},Gt(e,jn)),{},{opacityForNextShape:Number(null!=n?n:"1"),propsForNextShape:r})},down:function(e){var t=e.opacityForNextShape,n=Gt(e,On);return Pe(Pe({},n),{},{propsForNextShape:Pe(Pe({},n.propsForNextShape),{},{opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"})})}}),Ee(rn,14,{up:function(e){return Pe(Pe({},e),{},{chatMessage:"",isChatting:!1})},down:function(e){return e.chatMessage,e.isChatting,Gt(e,Ln)}}),Ee(rn,15,{up:function(e){return Pe(Pe({},e),{},{highlightedUserIds:[]})},down:function(e){return e.highlightedUserIds,Gt(e,zn)}}),Ee(rn,16,{up:function(e){return e.propsForNextShape,Pe(Pe({},Gt(e,Rn)),{},{stylesForNextShape:{}})},down:function(e){return e.stylesForNextShape,Pe(Pe({},Gt(e,Nn)),{},{propsForNextShape:{color:"black",labelColor:"black",dash:"draw",fill:"none",size:"m",icon:"file",font:"draw",align:"middle",verticalAlign:"middle",geo:"rectangle",arrowheadStart:"none",arrowheadEnd:"arrow",spline:"line"}})}}),rn)}),Un="instance:instance",Kn=ze.refine(function(e){if(!e.startsWith("page:")&&!e.startsWith("shape:"))throw new Error('Parent ID must start with "page:" or "shape:"');return e}),Vn=nt("shape"),Wn=["croppingId"],Hn=["instanceId","cameraId"],Yn=Qe("instance_page_state",qe({typeName:We("instance_page_state"),id:nt("instance_page_state"),pageId:gn,selectedIds:Ye(Vn),hintingIds:Ye(Vn),erasingIds:Ye(Vn),hoveredId:Vn.nullable(),editingId:Vn.nullable(),croppingId:Vn.nullable(),focusLayerId:Vn.nullable()})),Xn=Ut("instance_page_state",{migrations:Zt({currentVersion:2,migrators:(Dn={},Ee(Dn,1,{up:function(e){return Pe(Pe({},e),{},{croppingId:null})},down:function(e){return e.croppingId,Gt(e,Wn)}}),Ee(Dn,2,{up:function(e){return e.instanceId,e.cameraId,Gt(e,Hn)},down:function(e){return Pe(Pe({},e),{},{instanceId:Un,cameraId:sn.createId("void")})}}),Dn)}),validator:Yn,scope:"session"}).withDefaultProperties(function(){return{editingId:null,croppingId:null,selectedIds:[],hoveredId:null,erasingIds:[],hintingIds:[],focusLayerId:null}}),qn=Ut("pointer",{validator:Qe("pointer",qe({typeName:We("pointer"),id:nt("pointer"),x:Re,y:Re,lastActivityTimestamp:Re})),migrations:Zt({}),scope:"session"}).withDefaultProperties(function(){return{x:0,y:0,lastActivityTimestamp:0}}),$n=qn.createId("pointer"),Gn=["delay"],Qn=["instanceId"],Zn=["chatMessage"],Jn=Qe("instance_presence",qe({typeName:We("instance_presence"),id:nt("instance_presence"),userId:ze,userName:ze,lastActivityTimestamp:Re,followingUserId:ze.nullable(),cursor:qe({x:Re,y:Re,type:dn,rotation:Re}),color:ze,camera:qe({x:Re,y:Re,z:Re}),screenBounds:un,selectedIds:Ye(nt("shape")),currentPageId:nt("page"),brush:un.nullable(),scribble:vn.nullable(),chatMessage:ze})),er=Ut("instance_presence",{migrations:Zt({currentVersion:3,migrators:(Bn={},Ee(Bn,1,{up:function(e){return null!==e.scribble?Pe(Pe({},e),{},{scribble:Pe(Pe({},e.scribble),{},{delay:0})}):Pe({},e)},down:function(e){if(null===e.scribble)return Pe({},e);var t=e.scribble,n=(t.delay,Gt(t,Gn));return Pe(Pe({},e),{},{scribble:n})}}),Ee(Bn,2,{up:function(e){return e.instanceId,Gt(e,Qn)},down:function(e){return Pe(Pe({},e),{},{instanceId:Un})}}),Ee(Bn,3,{up:function(e){return Pe(Pe({},e),{},{chatMessage:""})},down:function(e){return e.chatMessage,Gt(e,Zn)}}),Bn)}),validator:Jn,scope:"presence"}).withDefaultProperties(function(){return{lastActivityTimestamp:0,followingUserId:null,color:"#FF0000",camera:{x:0,y:0,z:1},cursor:{x:0,y:0,type:"default",rotation:0},screenBounds:{x:0,y:0,w:1,h:1},selectedIds:[],brush:null,scribble:null,chatMessage:""}}),tr=["name"],nr=Qe("document",qe({typeName:We("document"),id:We("document:document"),gridSize:Re,name:ze})),rr=Ut("document",{migrations:Zt({currentVersion:1,migrators:Ee({},1,{up:function(e){return Pe(Pe({},e),{},{name:""})},down:function(e){return e.name,Gt(e,tr)}})}),validator:nr,scope:"document"}).withDefaultProperties(function(){return{gridSize:10,name:""}}),ir=rr.createId("document");function or(e,t){return e.index<t.index?-1:e.index>t.index?1:0}function ar(e){"asset"===e.typeName&&("src"in e&&(e.src="<redacted>"),"src"in e.props&&(e.props.src="<redacted>"))}var sr=function(e){var t=e.error,n=e.phase,r=e.record,i=e.recordBefore;throw q(t,{tags:{origin:"store.validateRecord",storePhase:n,isExistingValidationIssue:"initialize"===n},extras:{recordBefore:i?ar(be(i)):void 0,recordAfter:ar(be(r))}}),t};function lr(d){var f=d.query.ids("page");return function e(){if(!d.has(ir))return d.put([rr.create({id:ir,name:d.props.defaultName})]),e();if(!d.has($n))return d.put([qn.create({id:$n})]),e();var t=f.value;if(0===t.size)return d.put([mn.create({name:"Page 1",index:"a1"})]),e();var n=function(){return de(t).map(function(e){return d.get(e)}).sort(or)[0].id},r=d.get(Un);if(!r)return d.put([d.schema.types.instance.create({id:Un,currentPageId:n(),exportBackground:!0})]),e();if(!t.has(r.currentPageId))return d.put([Pe(Pe({},r),{},{currentPageId:n()})]),e();var i,o=new Set,a=new Set,s=ce(t);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=Xn.createId(l);d.has(u)||o.add(u);var c=sn.createId(l);d.has(c)||a.add(c)}}catch(e){s.e(e)}finally{s.f()}0<o.size&&d.put(de(o).map(function(e){return Xn.create({id:e,pageId:Xn.parseId(e)})})),0<a.size&&d.put(de(a).map(function(e){return sn.create({id:e})}))}}var ur,cr,dr,fr,pr=it("bookmark",qe({title:ze,description:ze,image:ze,src:ze.nullable()})),hr=Zt({}),vr=["isAnimated"],gr=["width","height"],mr=["w","h"],yr=it("image",qe({w:Re,h:Re,name:ze,isAnimated:Ke,mimeType:ze.nullable(),src:ze.nullable()})),br=Zt({currentVersion:2,migrators:(ur={},Ee(ur,1,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{isAnimated:!1})})},down:function(e){var t=e.props,n=(t.isAnimated,Gt(t,vr));return Pe(Pe({},e),{},{props:n})}}),Ee(ur,2,{up:function(e){var t=e.props,n=t.width,r=t.height,i=Gt(t,gr);return Pe(Pe({},e),{},{props:Pe({w:n,h:r},i)})},down:function(e){var t=e.props,n=t.w,r=t.h,i=Gt(t,mr);return Pe(Pe({},e),{},{props:Pe({width:n,height:r},i)})}}),ur)}),wr=["isAnimated"],xr=["width","height"],kr=["w","h"],Sr=it("video",qe({w:Re,h:Re,name:ze,isAnimated:Ke,mimeType:ze.nullable(),src:ze.nullable()})),_r=Zt({currentVersion:2,migrators:(cr={},Ee(cr,1,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{isAnimated:!1})})},down:function(e){var t=e.props,n=(t.isAnimated,Gt(t,wr));return Pe(Pe({},e),{},{props:n})}}),Ee(cr,2,{up:function(e){var t=e.props,n=t.width,r=t.height,i=Gt(t,xr);return Pe(Pe({},e),{},{props:Pe({w:n,h:r},i)})},down:function(e){var t=e.props,n=t.w,r=t.h,i=Gt(t,kr);return Pe(Pe({},e),{},{props:Pe({width:n,height:r},i)})}}),cr)}),Er=Qe("asset",Ge("type",{image:yr,video:Sr,bookmark:pr})),Pr=Ut("asset",{migrations:Zt({subTypeKey:"type",subTypeMigrations:{image:br,video:_r,bookmark:hr}}),validator:Er,scope:"document"}),Cr=function(){function i(e,t,n){z(this,i),this.id=e,this.defaultValue=t,this.type=n}return P(i,[{key:"validate",value:function(e){return this.type.validate(e)}}],[{key:"define",value:function(e,t){var n=t.defaultValue,r=t.type;return new i(e,n,void 0===r?Le:r)}},{key:"defineEnum",value:function(e,t){var n=t.defaultValue,r=t.values;return new Ir(e,n,r)}}]),i}(),Ir=function(e){M(o,Cr);var i=N(o);function o(e,t,n){var r;return z(this,o),(r=i.call(this,e,t,tt.apply(a,de(n)))).values=n,r}return P(o)}(),Tr=["isLocked"],Mr=["opacity"],Ar=["props"],jr=["opacity"],Or=Zt({currentVersion:2,migrators:(dr={},Ee(dr,1,{up:function(e){return Pe(Pe({},e),{},{isLocked:!1})},down:function(e){return e.isLocked,Pe({},Gt(e,Tr))}}),Ee(dr,2,{up:function(e){var t=e.props,n=t.opacity,r=Gt(t,Mr);return Pe(Pe({},Gt(e,Ar)),{},{opacity:Number(null!=n?n:"1"),props:r})},down:function(e){var t=e.opacity,n=Gt(e,jr);return Pe(Pe({},n),{},{props:Pe(Pe({},n.props),{},{opacity:t<.175?"0.1":t<.375?"0.25":t<.625?"0.5":t<.875?"0.75":"1"})})}}),dr)});function Lr(e){return!!e&&"shape"===e.typeName}function zr(e){return!!e&&e.startsWith("shape:")}function Rr(e){return"shape:".concat(null!=e?e:Bt())}function Nr(e){for(var t=new Map,n=0,r=Object.entries(e);n<r.length;n++){var i=Ce(r[n],2),o=i[0],a=i[1];if(a instanceof Cr){if(t.has(a))throw new Error("Duplicate style prop ".concat(a.id,". Each style prop can only be used once within a shape."));t.set(a,o)}}return t}var Dr=Zt({currentVersion:4,migrators:(fr={},Ee(fr,1,{up:function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=Ce(e,2),n=(t[0],t[1]);return"shape"!==n.typeName||"icon"!==n.type&&"code"!==n.type}))},down:function(e){return e}}),Ee(fr,2,{up:function(e){return e},down:function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=Ce(e,2);return t[0],"instance_presence"!==t[1].typeName}))}}),Ee(fr,3,{up:function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=Ce(e,2);return t[0],!t[1].typeName.match(/^(user|user_presence)$/)}))},down:function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=Ce(e,2);return t[0],"pointer"!==t[1].typeName}))}}),Ee(fr,4,{up:function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=Ce(e,2);return t[0],!t[1].typeName.match("user_document")}))},down:function(e){return e}}),fr)});function Br(e){var t,n=e.shapes,l=new Map,r=ce(ie(n));try{for(r.s();!(t=r.n()).done;){var i,o,a=ce(Nr(null!==(i=t.value.props)&&void 0!==i?i:{}).keys());try{for(a.s();!(o=a.n()).done;){var s=o.value;if(l.has(s.id)&&l.get(s.id)!==s)throw new Error("Multiple StyleProp instances with the same id: ".concat(s.id));l.set(s.id,s)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}var u=function(e){return Ut("shape",{migrations:Zt({currentVersion:Or.currentVersion,firstVersion:Or.firstVersion,migrators:Or.migrators,subTypeKey:"type",subTypeMigrations:ue(e,function(e,t){var n;return null!==(n=t.migrations)&&void 0!==n?n:Zt({})})}),scope:"document",validator:Qe("shape",Ge("type",ue(e,function(e,t){return n=e,r=t.props,qe({id:Vn,typeName:We("shape"),x:Re,y:Re,rotation:Re,index:ze,parentId:Kn,type:We(n),isLocked:Ke,opacity:pn,props:r?qe(r):Xe});var n,r})))}).withDefaultProperties(function(){return{x:0,y:0,rotation:0,isLocked:!1,opacity:1}})}(n),c=function(e){var t,n={},r=ce(l);try{for(r.s();!(t=r.n()).done;){var i=Ce(t.value,2),o=i[0],a=i[1];n[o]=Je(a)}}catch(e){r.e(e)}finally{r.f()}var s=Qe("instance",qe({typeName:We("instance"),id:nt("instance"),currentPageId:gn,followingUserId:ze.nullable(),brush:un.nullable(),opacityForNextShape:pn,stylesForNextShape:qe(n),cursor:fn,scribble:vn.nullable(),isFocusMode:Ke,isDebugMode:Ke,isToolLocked:Ke,exportBackground:Ke,screenBounds:un,zoomBrush:un.nullable(),isPenMode:Ke,isGridMode:Ke,chatMessage:ze,isChatting:Ke,highlightedUserIds:Ye(ze)}));return Ut("instance",{migrations:Fn,validator:s,scope:"session"}).withDefaultProperties(function(){return{followingUserId:null,opacityForNextShape:1,stylesForNextShape:{},brush:null,scribble:null,cursor:{type:"default",color:"black",rotation:0},isFocusMode:!1,exportBackground:!1,isDebugMode:!1,isToolLocked:!1,screenBounds:{x:0,y:0,w:1080,h:720},zoomBrush:null,isGridMode:!1,isPenMode:!1,chatMessage:"",isChatting:!1,highlightedUserIds:[]}})}();return on.create({asset:Pr,camera:sn,document:rr,instance:c,instance_page_state:Xn,page:mn,shape:u,instance_presence:er,pointer:qn},{snapshotMigrations:Dr,onValidationFailure:sr,createIntegrityChecker:lr})}var Fr,Ur,Kr,Vr,Wr=["black","grey","light-violet","violet","blue","light-blue","yellow","orange","green","light-green","light-red","red"],Hr=Cr.defineEnum("tldraw:color",{defaultValue:"black",values:Wr}),Yr=Cr.defineEnum("tldraw:labelColor",{defaultValue:"black",values:Wr}),Xr=Cr.defineEnum("tldraw:dash",{defaultValue:"draw",values:["draw","solid","dashed","dotted"]}),qr=Cr.defineEnum("tldraw:fill",{defaultValue:"none",values:["none","semi","solid","pattern"]}),$r=Cr.defineEnum("tldraw:font",{defaultValue:"draw",values:["draw","sans","serif","mono"]}),Gr=Cr.defineEnum("tldraw:size",{defaultValue:"m",values:["s","m","l","xl"]}),Qr=["labelColor"],Zr=["arrow","triangle","square","dot","pipe","diamond","inverted","bar","none"],Jr=Cr.defineEnum("tldraw:arrowheadStart",{defaultValue:"none",values:Zr}),ei=Cr.defineEnum("tldraw:arrowheadEnd",{defaultValue:"arrow",values:Zr}),ti=Ge("type",{binding:qe({type:We("binding"),boundShapeId:Vn,normalizedAnchor:ln,isExact:Ke}),point:qe({type:We("point"),x:Re,y:Re})}),ni={labelColor:Yr,color:Hr,fill:qr,dash:Xr,size:Gr,arrowheadStart:Jr,arrowheadEnd:ei,font:$r,start:ti,end:ti,bend:Re,text:ze},ri=Zt({currentVersion:1,migrators:Ee({},1,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{labelColor:"black"})})},down:function(e){var t=e.props,n=(t.labelColor,Gt(t,Qr));return Pe(Pe({},e),{},{props:n})}})}),ii=["assetId"],oi={w:De,h:De,assetId:rt.nullable(),url:ze},ai=Zt({currentVersion:1,migrators:Ee({},1,{up:function(e){return void 0===e.props.assetId?Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{assetId:null})}):e},down:function(e){if(null!==e.props.assetId)return e;var t=e.props,n=(t.assetId,Gt(t,ii));return Pe(Pe({},e),{},{props:n})}})}),si=["isPen"],li=qe({type:tt("free","straight"),points:Ye(ln)}),ui={color:Hr,fill:qr,dash:Xr,size:Gr,segments:Ye(li),isComplete:Ke,isClosed:Ke,isPen:Ke},ci=Zt({currentVersion:1,migrators:Ee({},1,{up:function(e){var t=e.props.segments[0].points;if(0===t.length)return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{isPen:!1})});var n=!(0===t[0].z||.5===t[0].z);return t[1]&&(n=n&&!(0===t[1].z||.5===t[1].z)),Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{isPen:n})})},down:function(e){var t=e.props,n=(t.isPen,Gt(t,si));return Pe(Pe({},e),{},{props:Pe({},n)})}})}),di=["tmpOldUrl"],fi=["doesResize"],pi=["tmpOldUrl"],hi=["overridePermissions"],vi=/(^\/r\/[^/]+\/?$)/,gi=function(e){try{return new URL(e)}catch(e){return}},mi=[{type:"tldraw",title:"tldraw",hostnames:["beta.tldraw.com","lite.tldraw.com","www.tldraw.com"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(vi))return e},fromEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(vi))return e}},{type:"codesandbox",title:"CodeSandbox",hostnames:["codesandbox.io"],minWidth:300,minHeight:300,width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=gi(e),n=t&&t.pathname.match(/\/s\/([^/]+)\/?/);if(n)return"https://codesandbox.io/embed/".concat(n[1])},fromEmbedUrl:function(e){var t=gi(e),n=t&&t.pathname.match(/\/embed\/([^/]+)\/?/);if(n)return"https://codesandbox.io/s/".concat(n[1])}},{type:"codepen",title:"Codepen",hostnames:["codepen.io"],minWidth:300,minHeight:300,width:520,height:400,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/pen\/([^/]+)/);if(t){var n=Ce(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/embed/").concat(i)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/codepen.io\/([^/]+)\/embed\/([^/]+)/);if(t){var n=Ce(t,3),r=(n[0],n[1]),i=n[2];return"https://codepen.io/".concat(r,"/pen/").concat(i)}}},{type:"scratch",title:"Scratch",hostnames:["scratch.mit.edu"],width:520,height:400,doesResize:!1,canUnmount:!1,toEmbedUrl:function(e){var t=e.match(/https?:\/\/scratch.mit.edu\/projects\/([^/]+)/);if(t){var n=Ce(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/embed/".concat(r)}},fromEmbedUrl:function(e){var t=e.match(/https:\/\/scratch.mit.edu\/projects\/embed\/([^/]+)/);if(t){var n=Ce(t,2),r=(n[0],n[1]);return"https://scratch.mit.edu/projects/".concat(r)}}},{type:"youtube",title:"YouTube",hostnames:["*.youtube.com","youtube.com","youtu.be"],width:800,height:450,doesResize:!0,canUnmount:!1,overridePermissions:{"allow-presentation":!0},isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=gi(e);if(t){var n=t.hostname.replace(/^www./,"");if("youtu.be"===n){var r=t.pathname.split("/").filter(Boolean)[0];return"https://www.youtube.com/embed/".concat(r)}if(("youtube.com"===n||"m.youtube.com"===n)&&t.pathname.match(/^\/watch/)){var i=t.searchParams.get("v");return"https://www.youtube.com/embed/".concat(i)}}},fromEmbedUrl:function(e){var t=gi(e);if(t&&"youtube.com"===t.hostname.replace(/^www./,"")){var n=t.pathname.match(/^\/embed\/([^/]+)\/?/);if(n)return"https://www.youtube.com/watch?v=".concat(n[1])}}},{type:"figma",title:"Figma",hostnames:["figma.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){if(e.match(/https:\/\/([\w\.-]+\.)?figma.com\/(file|proto)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/)&&!e.includes("figma.com/embed"))return"https://www.figma.com/embed?embed_host=share&url=".concat(e)},fromEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/^\/embed\/?$/)){var n=t.searchParams.get("url");if(n)return n}}},{type:"google_maps",title:"Google Maps",hostnames:["google.*"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){if(e.includes("/maps/")){var t,n=e.match(/@(.*),(.*),(.*)z/);if(n){var r=Ce(n,4),i=r[1],o=r[2],a=r[3],s=new URL(e).host.replace("www.","");t="https://".concat(s,"/maps/embed/v1/view?key=").concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_GC_API_KEY,"&center=").concat(i,",").concat(o,"&zoom=").concat(a)}else t="";return t}},fromEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/^\/maps\/embed\/v1\/view\/?$/)&&t.searchParams.has("center")&&t.searchParams.get("zoom")){var n=t.searchParams.get("zoom"),r=Ce(t.searchParams.get("center").split(","),2),i=r[0],o=r[1];return"https://www.google.com/maps/@".concat(i,",").concat(o,",").concat(n,"z")}}},{type:"google_calendar",title:"Google Calendar",hostnames:["calendar.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,instructionLink:"https://support.google.com/calendar/answer/41207?hl=en",toEmbedUrl:function(e){var t=gi(e),n=null==t?void 0:t.searchParams.get("cid");if(null!=t&&t.pathname.match(/\/calendar\/u\/0/)&&n){t.pathname="/calendar/embed";for(var r=0,i=Array.from(t.searchParams.keys());r<i.length;r++){var o=i[r];t.searchParams.delete(o)}return t.searchParams.set("src",n),t.href}},fromEmbedUrl:function(e){var t=gi(e),n=null==t?void 0:t.searchParams.get("src");if(null!=t&&t.pathname.match(/\/calendar\/embed/)&&n){t.pathname="/calendar/u/0";for(var r=0,i=Array.from(t.searchParams.keys());r<i.length;r++){var o=i[r];t.searchParams.delete(o)}return t.searchParams.set("cid",n),t.href}}},{type:"google_slides",title:"Google Slides",hostnames:["docs.google.*"],width:720,height:500,minWidth:460,minHeight:360,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=gi(e);if(null!=t&&t.pathname.match(/^\/presentation/)&&null!=t&&t.pathname.match(/\/pub\/?$/)){t.pathname=t.pathname.replace(/\/pub$/,"/embed");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var i=r[n];t.searchParams.delete(i)}return t.href}},fromEmbedUrl:function(e){var t=gi(e);if(null!=t&&t.pathname.match(/^\/presentation/)&&null!=t&&t.pathname.match(/\/embed\/?$/)){t.pathname=t.pathname.replace(/\/embed$/,"/pub");for(var n=0,r=Array.from(t.searchParams.keys());n<r.length;n++){var i=r[n];t.searchParams.delete(i)}return t.href}}},{type:"github_gist",title:"GitHub Gist",hostnames:["gist.github.com"],width:720,height:500,doesResize:!0,canUnmount:!0,toEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}},fromEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/\/([^/]+)\/([^/]+)/)){if(!e.split("/").pop())return;return e}}},{type:"replit",title:"Replit",hostnames:["replit.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/))return"".concat(e,"?embed=true")},fromEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/\/@([^/]+)\/([^/]+)/)&&t.searchParams.has("embed"))return t.searchParams.delete("embed"),t.href}},{type:"felt",title:"Felt",hostnames:["felt.com"],width:720,height:500,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/^\/map\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/^\/embed\/map\//))return t.pathname=t.pathname.replace(/^\/embed/,""),t.href}},{type:"spotify",title:"Spotify",hostnames:["open.spotify.com"],width:720,height:500,minHeight:500,overrideOutlineRadius:12,doesResize:!0,canUnmount:!1,toEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/^\/(artist|album)\//))return t.origin+"/embed"+t.pathname},fromEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/^\/embed\/(artist|album)\//))return t.origin+t.pathname.replace(/^\/embed/,"")}},{type:"vimeo",title:"Vimeo",hostnames:["vimeo.com","player.vimeo.com"],width:640,height:360,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=gi(e);if(t&&"vimeo.com"===t.hostname&&t.pathname.match(/^\/[0-9]+/))return"https://player.vimeo.com/video/"+t.pathname.split("/")[1]+"?title=0&byline=0"},fromEmbedUrl:function(e){var t=gi(e);if(t&&"player.vimeo.com"===t.hostname){var n=t.pathname.match(/^\/video\/([^/]+)\/?$/);if(n)return"https://vimeo.com/"+n[1]}}},{type:"excalidraw",title:"Excalidraw",hostnames:["excalidraw.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!0,toEmbedUrl:function(e){var t=gi(e);if(t&&t.hash.match(/#room=/))return e},fromEmbedUrl:function(e){var t=gi(e);if(t&&t.hash.match(/#room=/))return e}},{type:"observable",title:"Observable",hostnames:["observablehq.com"],width:720,height:500,doesResize:!0,canUnmount:!1,isAspectRatioLocked:!1,backgroundColor:"#fff",toEmbedUrl:function(e){var t=gi(e);if(t&&t.pathname.match(/^\/@([^/]+)\/([^/]+)\/?$/))return"".concat(t.origin,"/embed").concat(t.pathname,"?cell=*");if(t&&t.pathname.match(/^\/d\/([^/]+)\/?$/)){var n=t.pathname.replace(/^\/d/,"");return"".concat(t.origin,"/embed").concat(n,"?cell=*")}},fromEmbedUrl:function(e){var t=gi(e);return t&&t.pathname.match(/^\/embed\/@([^/]+)\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed",""),"#cell-*"):t&&t.pathname.match(/^\/embed\/([^/]+)\/?$/)?"".concat(t.origin).concat(t.pathname.replace("/embed","/d"),"#cell-*"):void 0}}],yi={"allow-downloads-without-user-activation":!1,"allow-downloads":!1,"allow-modals":!1,"allow-orientation-lock":!1,"allow-pointer-lock":!1,"allow-popups":!0,"allow-popups-to-escape-sandbox":!1,"allow-presentation":!1,"allow-storage-access-by-user-activation":!1,"allow-top-navigation":!1,"allow-top-navigation-by-user-activation":!1,"allow-scripts":!0,"allow-same-origin":!0,"allow-forms":!0},bi={w:De,h:De,url:ze},wi=Zt({currentVersion:4,migrators:(Fr={},Ee(Fr,1,{up:function(e){for(var t,n,r=e.props.url,i=new URL(r).host.replace("www.",""),o=0,a=mi;o<a.length;o++){var s=a[o];if(s.hostnames.includes(i))try{n=s.fromEmbedUrl(r)}catch(e){console.warn(e)}}return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{tmpOldUrl:e.props.url,url:null!==(t=n)&&void 0!==t?t:""})})},down:function(e){var t,n=e.props.tmpOldUrl;if(!n||""===n)for(var r=e.props.url,i=new URL(r).host.replace("www.",""),o=0,a=mi;o<a.length;o++){var s=a[o];if(s.hostnames.includes(i))try{n=s.toEmbedUrl(r)}catch(e){console.warn(e)}}var l=e.props,u=(l.tmpOldUrl,Gt(l,di));return Pe(Pe({},e),{},{props:Pe(Pe({},u),{},{url:null!==(t=n)&&void 0!==t?t:""})})}}),Ee(Fr,2,{up:function(e){var t=e.props,n=(t.doesResize,Gt(t,fi));return Pe(Pe({},e),{},{props:Pe({},n)})},down:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{doesResize:!0})})}}),Ee(Fr,3,{up:function(e){var t=e.props,n=(t.tmpOldUrl,Gt(t,pi));return Pe(Pe({},e),{},{props:Pe({},n)})},down:function(e){return Pe(Pe({},e),{},{props:Pe({},e.props)})}}),Ee(Fr,4,{up:function(e){var t=e.props,n=(t.overridePermissions,Gt(t,hi));return Pe(Pe({},e),{},{props:Pe({},n)})},down:function(e){return Pe(Pe({},e),{},{props:Pe({},e.props)})}}),Fr)}),xi={w:De,h:De,name:ze},ki=Zt({}),Si=Cr.defineEnum("tldraw:horizontalAlign",{defaultValue:"middle",values:["start","middle","end","start-legacy","end-legacy","middle-legacy"]}),_i=Cr.defineEnum("tldraw:verticalAlign",{defaultValue:"middle",values:["start","middle","end"]}),Ei=["url"],Pi=["labelColor"],Ci=["verticalAlign"],Ii=Cr.defineEnum("tldraw:geo",{defaultValue:"rectangle",values:["rectangle","ellipse","triangle","diamond","pentagon","hexagon","octagon","star","rhombus","rhombus-2","oval","trapezoid","arrow-right","arrow-left","arrow-up","arrow-down","x-box","check-box"]}),Ti={geo:Ii,labelColor:Yr,color:Hr,fill:qr,dash:Xr,size:Gr,font:$r,align:Si,verticalAlign:_i,url:ze,w:De,h:De,growY:Ne,text:ze},Mi=Zt({currentVersion:6,migrators:(Ur={},Ee(Ur,1,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Gt(t,Ei));return Pe(Pe({},e),{},{props:n})}}),Ee(Ur,2,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{labelColor:"black"})})},down:function(e){var t=e.props,n=(t.labelColor,Gt(t,Pi));return Pe(Pe({},e),{},{props:n})}}),Ee(Ur,3,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{align:t})})},down:function(e){return Pe({},e)}}),Ee(Ur,4,{up:function(e){return Pe({},e)},down:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{geo:"check-box"===e.props.geo?"rectangle":e.props.geo})})}}),Ee(Ur,5,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{verticalAlign:"middle"})})},down:function(e){var t=e.props,n=(t.verticalAlign,Gt(t,Ci));return Pe(Pe({},e),{},{props:n})}}),Ee(Ur,6,{up:function(e){var t;switch(e.props.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{align:t})})},down:function(e){var t;switch(e.props.align){case"start-legacy":t="start";break;case"end-legacy":t="end";break;case"middle-legacy":t="middle";break;default:t=e.props.align}return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{align:t})})}}),Ur)}),Ai=Zt({}),ji={color:Hr,size:Gr,segments:Ye(li),isComplete:Ke,isPen:Ke},Oi=Zt({}),Li=["url"],zi=["crop"],Ri=qe({topLeft:ln,bottomRight:ln}),Ni={w:De,h:De,playing:Ke,url:ze,assetId:rt.nullable(),crop:Ri.nullable()},Di=Zt({currentVersion:2,migrators:(Kr={},Ee(Kr,1,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Gt(t,Li));return Pe(Pe({},e),{},{props:n})}}),Ee(Kr,2,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{crop:null})})},down:function(e){var t=e.props,n=(t.crop,Gt(t,zi));return Pe(Pe({},e),{},{props:n})}}),Kr)}),Bi=qe({id:ze,type:Ze(new Set(["vertex","virtual","create"])),canBind:Ke.optional(),index:ze,x:Re,y:Re}),Fi=Cr.defineEnum("tldraw:spline",{defaultValue:"line",values:["cubic","line"]}),Ui={color:Hr,dash:Xr,size:Gr,spline:Fi,handles:$e(ze,Bi)},Ki=Zt({}),Vi=["url"],Wi=["verticalAlign"],Hi={color:Hr,size:Gr,font:$r,align:Si,verticalAlign:_i,growY:Ne,url:ze,text:ze},Yi=Zt({currentVersion:4,migrators:(Vr={},Ee(Vr,1,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Gt(t,Vi));return Pe(Pe({},e),{},{props:n})}}),Ee(Vr,2,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{align:t})})},down:function(e){return Pe({},e)}}),Ee(Vr,3,{up:function(e){var t;switch(e.props.align){case"start":t="start-legacy";break;case"end":t="end-legacy";break;default:t="middle-legacy"}return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{align:t})})},down:function(e){var t;switch(e.props.align){case"start-legacy":t="start";break;case"end-legacy":t="end";break;case"middle-legacy":t="middle";break;default:t=e.props.align}return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{align:t})})}}),Ee(Vr,4,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{verticalAlign:"middle"})})},down:function(e){var t=e.props,n=(t.verticalAlign,Gt(t,Wi));return Pe(Pe({},e),{},{props:n})}}),Vr)}),Xi={color:Hr,size:Gr,font:$r,align:Si,w:De,text:ze,scale:De,autoSize:Ke},qi=Zt({currentVersion:1,migrators:Ee({},1,{up:function(e){var t=e.props.align;return"justify"===t&&(t="start"),Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{align:t})})},down:function(e){return Pe({},e)}})}),$i=["url"],Gi={w:De,h:De,time:Re,playing:Ke,url:ze,assetId:rt.nullable()},Qi=Zt({currentVersion:1,migrators:Ee({},1,{up:function(e){return Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{url:""})})},down:function(e){var t=e.props,n=(t.url,Gt(t,$i));return Pe(Pe({},e),{},{props:n})}})}),Zi=[{locale:"ar",label:"عربي"},{locale:"ca",label:"Català"},{locale:"da",label:"Danish"},{locale:"de",label:"Deutsch"},{locale:"en",label:"English"},{locale:"es",label:"Español"},{locale:"fa",label:"فارسی"},{locale:"fi",label:"Suomi"},{locale:"fr",label:"Français"},{locale:"gl",label:"Galego"},{locale:"he",label:"עברית"},{locale:"it",label:"Italiano"},{locale:"ja",label:"日本語"},{locale:"ko-kr",label:"한국어"},{locale:"ku",label:"کوردی"},{locale:"hi-in",label:"हिन्दी"},{locale:"hu",label:"Magyar"},{locale:"my",label:"မြန်မာစာ"},{locale:"ne",label:"नेपाली"},{locale:"no",label:"Norwegian"},{locale:"pl",label:"Polski"},{locale:"pt-br",label:"Português - Brasil"},{locale:"pt-pt",label:"Português - Europeu"},{locale:"ro",label:"Română"},{locale:"ru",label:"Russian"},{locale:"sv",label:"Svenska"},{locale:"te",label:"తెలుగు"},{locale:"th",label:"ภาษาไทย"},{locale:"tr",label:"Türkçe"},{locale:"uk",label:"Ukrainian"},{locale:"vi",label:"Tiếng Việt"},{locale:"zh-cn",label:"Chinese - Simplified"},{locale:"zh-tw",label:"繁體中文 (台灣)"}];var Ji={zh:"zh-cn",pt:"pt-br",ko:"ko-kr",hi:"hi-in"};function eo(t){var e=Zi.find(function(e){return e.locale===t.toLowerCase()});if(e)return e.locale;var n=Ce(t.split(/[-_]/).map(function(e){return e.toLowerCase()}),2),r=n[0];if(n[1]){var i=Zi.find(function(e){return e.locale===r});if(i)return i.locale}return r in Ji?Ji[r]:null}var to=Rj(6417),no="2.0.0-canary.b9c6bf2fe84a",ro={fonts:{draw:"https://unpkg.com/@tldraw/assets@".concat(no,"/fonts/Shantell_Sans-Normal-SemiBold.woff2"),serif:"https://unpkg.com/@tldraw/assets@".concat(no,"/fonts/IBMPlexSerif-Medium.woff2"),sansSerif:"https://unpkg.com/@tldraw/assets@".concat(no,"/fonts/IBMPlexSans-Medium.woff2"),monospace:"https://unpkg.com/@tldraw/assets@".concat(no,"/fonts/IBMPlexMono-Medium.woff2")}};function io(){io=function(){return a};var a={},e=Object.prototype,c=e.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",r=t.toStringTag||"@@toStringTag";function o(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new _(r||[]);return s(o,"_invoke",{value:function(o,a,s){var l="suspendedStart";return function(e,t){if("executing"===l)throw new Error("Generator is already running");if("completed"===l){if("throw"===e)throw t;return{value:void 0,done:!0}}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){var r=x(n,s);if(r){if(r===u)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===l)throw l="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l="executing";var i=d(o,a,s);if("normal"===i.type){if(l=s.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l="completed",s.method="throw",s.arg=i.arg)}}}(e,n,a)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=l;var u={};function f(){}function p(){}function h(){}var v={};o(v,i,function(){return this});var g=Object.getPrototypeOf,m=g&&g(g(E([])));m&&m!==e&&c.call(m,i)&&(v=m);var y=h.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function w(l,u){var t;s(this,"_invoke",{value:function(n,r){function e(){return new u(function(e,t){!function t(e,n,r,i){var o=d(l[e],l,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==C(s)&&c.call(s,"__await")?u.resolve(s.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):u.resolve(s).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,i)})}i(o.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,u;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(c.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return s(y,"constructor",{value:p.prototype=h,configurable:!0}),s(h,"constructor",{value:p,configurable:!0}),p.displayName=o(h,r,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,o(e,r,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},b(w.prototype),o(w.prototype,n,function(){return this}),a.AsyncIterator=w,a.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var o=new w(l(e,t,n,r),i);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},b(y),o(y,r,"Generator"),o(y,i,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),a.keys=function(e){var n=Object(e),r=[];for(var t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=E,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},a}function oo(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function ao(s){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function i(e){oo(r,t,n,i,o,"next",e)}function o(e){oo(r,t,n,i,o,"throw",e)}i(void 0)})}}var so=Rj(6123);function lo(n,e){var r=_e.useRef(e);r.current=e;var t=Ce(_e.useMemo(function(){var t=null,e=new Rt("useStateTracking(".concat(n,")"),function(){var e;return null===(e=r.current)||void 0===e?void 0:e.call(r)},{scheduleEffect:function(){var e;null===(e=t)||void 0===e||e()}});return[e,function(e){return t=e,function(){t=null}},function(){return e.scheduleCount}]},[n]),3),i=t[0],o=t[1],a=t[2];return _e.useSyncExternalStore(o,a,a),_e.useEffect(function(){return i.attach(),i.maybeScheduleEffect(),function(){i.detach()}},[i]),i.execute()}var uo={apply:function(e,t,n){var r,i;return lo(null!==(r=null!==(i=e.displayName)&&void 0!==i?i:e.name)&&void 0!==r?r:"tracked(???)",function(){return e.apply(t,n)})}},co=Symbol.for("react.memo"),fo=Symbol.for("react.forward_ref");function po(e){var t=null,n=e.$$typeof;return n===co&&(t=(e=e.type).compare),n===fo?(0,_e.memo)((0,_e.forwardRef)(new Proxy(e.render,uo))):(0,_e.memo)(new Proxy(e,uo),t)}function ho(){var e=arguments,t=3===e.length?e[2]:[e[0]],n=3===e.length?e[0]:"useValue(".concat(e[0].name,")"),r=(0,_e.useRef)(!0);r.current=!0;var i=(0,_e.useMemo)(function(){return 1===e.length?e[0]:zt(n,function(){if(r.current)return e[1]();try{return e[1]()}catch(e){return{}}})},t);try{var o=(0,_e.useMemo)(function(){return{subscribe:function(e){return Nt("useValue(".concat(n,")"),function(){i.value,e()})},getSnapshot:function(){return i.value}}},[i]),a=o.subscribe,s=o.getSnapshot;return(0,_e.useSyncExternalStore)(a,s,s)}finally{r.current=!1}}Symbol.for("react.memo"),Symbol.for("react.forward_ref");var vo,go=_e.createContext({}),mo=function(){return _e.useContext(go)},yo={openWindow:function(e,t){return window.open(e,t,"noopener noreferrer")},refreshPage:function(){return window.location.reload()},hardReset:(vo=ao(io().mark(function e(){var t,n;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=(n=window).__tldraw__hardReset)||void 0===t?void 0:t.call(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(){return vo.apply(this,arguments)})};function bo(){yo.hardReset()}var wo={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return e<=0?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return 1<=e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return e<=0?0:1<=e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}},xo=function(){function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;z(this,s),this.x=e,this.y=t,this.z=n}return P(s,[{key:"pressure",get:function(){return this.z}},{key:"set",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.x,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.y,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.z;return this.x=e,this.y=t,this.z=n,this}},{key:"setTo",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.z,a=void 0===o?1:o;return this.x=n,this.y=i,this.z=a,this}},{key:"rot",value:function(e){if(0===e)return this;var t=this.x,n=this.y,r=Math.sin(e),i=Math.cos(e);return this.x=t*i-n*r,this.y=t*r+n*i,this}},{key:"rotWith",value:function(e,t){if(0===t)return this;var n=this.x-e.x,r=this.y-e.y,i=Math.sin(t),o=Math.cos(t);return this.x=e.x+(n*o-r*i),this.y=e.y+(n*i+r*o),this}},{key:"clone",value:function(){return new s(this.x,this.y,this.z)}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subXY",value:function(e,t){return this.x-=e,this.y-=t,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addXY",value:function(e,t){return this.x+=e,this.y+=t,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"clamp",value:function(e,t){return this.x=Math.max(this.x,e),this.y=Math.max(this.y,e),void 0!==t&&(this.x=Math.min(this.x,t),this.y=Math.min(this.y,t)),this}},{key:"div",value:function(e){return this.x/=e,this.y/=e,this}},{key:"divV",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"mul",value:function(e){return this.x*=e,this.y*=e,this}},{key:"mulV",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"abs",value:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this}},{key:"nudge",value:function(e,t){var n=s.Tan(e,this);return this.add(n.mul(t))}},{key:"neg",value:function(){return this.x*=-1,this.y*=-1,this}},{key:"cross",value:function(e){return this.x=this.y*e.z-this.z*e.y,this.y=this.z*e.x-this.x*e.z,this}},{key:"dpr",value:function(e){return s.Dpr(this,e)}},{key:"cpr",value:function(e){return s.Cpr(this,e)}},{key:"len2",value:function(){return s.Len2(this)}},{key:"len",value:function(){return s.Len(this)}},{key:"pry",value:function(e){return s.Pry(this,e)}},{key:"per",value:function(){var e=this.x,t=this.y;return this.x=t,this.y=-e,this}},{key:"uni",value:function(){return s.Uni(this)}},{key:"tan",value:function(e){return s.Tan(this,e)}},{key:"dist",value:function(e){return s.Dist(this,e)}},{key:"distanceToLineSegment",value:function(e,t){return s.DistanceToLineSegment(e,t,this)}},{key:"slope",value:function(e){return s.Slope(this,e)}},{key:"snapToGrid",value:function(e){return this.x=Math.round(this.x/e)*e,this.y=Math.round(this.y/e)*e,this}},{key:"angle",value:function(e){return s.Angle(this,e)}},{key:"toAngle",value:function(){return s.ToAngle(this)}},{key:"lrp",value:function(e,t){return this.x=this.x+(e.x-this.x)*t,this.y=this.y+(e.y-this.y)*t,this}},{key:"equals",value:function(e){return s.Equals(this,e)}},{key:"equalsXY",value:function(e,t){return s.EqualsXY(this,e,t)}},{key:"norm",value:function(){var e=this.len();return this.x=0===e?0:this.x/e,this.y=0===e?0:this.y/e,this}},{key:"toFixed",value:function(){return s.ToFixed(this)}},{key:"toString",value:function(){return s.ToString(s.ToFixed(this))}},{key:"toJson",value:function(){return s.ToJson(this)}},{key:"toArray",value:function(){return s.ToArray(this)}}],[{key:"Add",value:function(e,t){return new s(e.x+t.x,e.y+t.y)}},{key:"AddXY",value:function(e,t,n){return new s(e.x+t,e.y+n)}},{key:"Sub",value:function(e,t){return new s(e.x-t.x,e.y-t.y)}},{key:"SubXY",value:function(e,t,n){return new s(e.x-t,e.y-n)}},{key:"AddScalar",value:function(e,t){return new s(e.x+t,e.y+t)}},{key:"SubScalar",value:function(e,t){return new s(e.x-t,e.y-t)}},{key:"Div",value:function(e,t){return new s(e.x/t,e.y/t)}},{key:"Mul",value:function(e,t){return new s(e.x*t,e.y*t)}},{key:"DivV",value:function(e,t){return new s(e.x/t.x,e.y/t.y)}},{key:"MulV",value:function(e,t){return new s(e.x*t.x,e.y*t.y)}},{key:"Neg",value:function(e){return new s(-e.x,-e.y)}},{key:"Per",value:function(e){return new s(e.y,-e.x)}},{key:"Dist2",value:function(e,t){return s.Sub(e,t).len2()}},{key:"Abs",value:function(e){return new s(Math.abs(e.x),Math.abs(e.y))}},{key:"Dist",value:function(e,t){return Math.hypot(e.y-t.y,e.x-t.x)}},{key:"Dpr",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"Cross",value:function(e,t){return new s(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z)}},{key:"Cpr",value:function(e,t){return e.x*t.y-t.x*e.y}},{key:"Len2",value:function(e){return e.x*e.x+e.y*e.y}},{key:"Len",value:function(e){return Math.sqrt(s.Len2(e))}},{key:"Pry",value:function(e,t){return s.Dpr(e,t)/s.Len(t)}},{key:"Uni",value:function(e){return s.Div(e,s.Len(e))}},{key:"Tan",value:function(e,t){return s.Uni(s.Sub(e,t))}},{key:"Min",value:function(e,t){return new s(Math.min(e.x,t.x),Math.min(e.y,t.y))}},{key:"Max",value:function(e,t){return new s(Math.max(e.x,t.x),Math.max(e.y,t.y))}},{key:"From",value:function(e){var t=e.x,n=e.y,r=e.z;return new s(t,n,void 0===r?1:r)}},{key:"FromArray",value:function(e){return new s(e[0],e[1])}},{key:"Rot",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=Math.sin(t),r=Math.cos(t);return new s(e.x*r-e.y*n,e.x*n+e.y*r)}},{key:"RotWith",value:function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=Math.sin(n),a=Math.cos(n);return new s(t.x+(r*a-i*o),t.y+(r*o+i*a))}},{key:"NearestPointOnLineThroughPoint",value:function(e,t,n){return s.Mul(t,s.Sub(n,e).pry(t)).add(e)}},{key:"NearestPointOnLineSegment",value:function(e,t,n){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i=s.Tan(t,e),o=s.Add(e,s.Mul(i,s.Sub(n,e).pry(i)));if(r){if(o.x<Math.min(e.x,t.x))return s.Cast(e.x<t.x?e:t);if(o.x>Math.max(e.x,t.x))return s.Cast(e.x>t.x?e:t);if(o.y<Math.min(e.y,t.y))return s.Cast(e.y<t.y?e:t);if(o.y>Math.max(e.y,t.y))return s.Cast(e.y>t.y?e:t)}return o}},{key:"DistanceToLineThroughPoint",value:function(e,t,n){return s.Dist(n,s.NearestPointOnLineThroughPoint(e,t,n))}},{key:"DistanceToLineSegment",value:function(e,t,n){var r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];return s.Dist(n,s.NearestPointOnLineSegment(e,t,n,r))}},{key:"Snap",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return new s(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}},{key:"Cast",value:function(e){return e instanceof s?e:s.From(e)}},{key:"Slope",value:function(e,t){return e.x===t.y?NaN:(e.y-t.y)/(e.x-t.x)}},{key:"Angle",value:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}},{key:"Lrp",value:function(e,t,n){return s.Sub(t,e).mul(n).add(e)}},{key:"Med",value:function(e,t){return new s((e.x+t.x)/2,(e.y+t.y)/2)}},{key:"Equals",value:function(e,t){return Math.abs(e.x-t.x)<1e-4&&Math.abs(e.y-t.y)<1e-4}},{key:"EqualsXY",value:function(e,t,n){return e.x===t&&e.y===n}},{key:"Clockwise",value:function(e,t,n){return(n.x-e.x)*(t.y-e.y)-(t.x-e.x)*(n.y-e.y)<0}},{key:"Rescale",value:function(e,t){var n=s.Len(e);return new s(t*e.x/n,t*e.y/n)}},{key:"ScaleWithOrigin",value:function(e,t,n){return s.Sub(e,n).mul(t).add(n)}},{key:"ToFixed",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2;return new s(+e.x.toFixed(t),+e.y.toFixed(t),+e.z.toFixed(t))}},{key:"Nudge",value:function(e,t,n){return s.Add(e,s.Tan(t,e).mul(n))}},{key:"ToString",value:function(e){return"".concat(e.x,", ").concat(e.y)}},{key:"ToAngle",value:function(e){var t=Math.atan2(e.y,e.x);return t<0&&(t+=2*Math.PI),t}},{key:"ToArray",value:function(e){return[e.x,e.y,e.z]}},{key:"ToJson",value:function(e){return{x:e.x,y:e.y,z:e.z}}},{key:"Average",value:function(e){for(var t=e.length,n=new s(0,0),r=0;r<t;r++)n.add(e[r]);return n.div(t)}},{key:"Clamp",value:function(e,t,n){return void 0===n?new s(Math.min(Math.max(e.x,t)),Math.min(Math.max(e.y,t))):new s(Math.min(Math.max(e.x,t),n),Math.min(Math.max(e.y,t),n))}},{key:"PointsBetween",value:function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:6,r=[],i=0;i<n;i++){var o=wo.easeInQuad(i/(n-1)),a=s.Lrp(e,t,o);a.z=Math.min(1,.5+.65*Math.abs(.5-ko(o))),r.push(a)}return r}},{key:"SnapToGrid",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:8;return new s(Math.round(e.x/t)*t,Math.round(e.y/t)*t)}}]),s}(),ko=function(e){return e<.5?2*e*e:(4-2*e)*e-1},So=Math.PI,_o=So/2,Eo=2*So,Po=Math.PI/180,Co=Math.sin;function Io(e,t,n){return Math.max(t,void 0!==n?Math.min(e,n):e)}function To(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e10;return e?Math.round(e*t)/t:0}function Mo(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1e-6;return Math.abs(e-t)<=n}function Ao(e,t){var n=Math.pow(e-t,2)/Math.pow(e+t,2);return So*(e+t)*(1+3*n/(10+Math.sqrt(4-3*n)))}function jo(e){return(e%=Eo)<0?e+=Eo:0===e&&(e=0),e}function Oo(e,t){var n=(t-e)%Eo;return 2*n%Eo-n}function Lo(e,t,n){return e+Oo(e,t)*n}function zo(e,t){return Oo(e,t)}function Ro(e){return(Eo+e)%Eo}function No(e,t){var n=Eo/t,r=Math.floor((Ro(e)+n/2)/n)*n%Eo;return r<So&&(r+=Eo),So<r&&(r-=Eo),r}function Do(e,t){return e===t||Mo(e%(Math.PI/2)-t%(Math.PI/2),0)}function Bo(e,t,n,r){var i,o,a,s=(i=e,o=n,a=r,zo(xo.Angle(i,o),xo.Angle(i,a)));return t*Eo*(s/Eo)}function Fo(e,t,n,r){return new xo(e+n*Math.cos(r),t+n*Math.sin(r))}function Uo(e,t,n){for(var r=e/2,i=t/2,o=[],a=0;a<n;a++){var s=a*(Eo/n)-_o;o.push(new xo(r+r*Math.cos(s),i+i*Math.sin(s)))}return o}function Ko(e,t,n,r){return e<r&&n<t}function Vo(e,t,n,r){var i=Math.max(e,n),o=Math.min(t,r);return i<=o?[i,o]:null}function Wo(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)}function Ho(e,t){for(var n,r,i=0,o=0;o<t.length;o++)n=t[o],r=t[(o+1)%t.length],n.y<=e.y?r.y>e.y&&0<Wo(n,r,e)&&(i+=1):r.y<=e.y&&Wo(n,r,e)<0&&(i-=1);return 0!==i}function Yo(e){return+e.toFixed(4)}function Xo(e){return+e.toFixed(2)}var qo=function(e){return Math.abs(e)<Number.MAX_SAFE_INTEGER},$o=function(){function M(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;z(this,M),Ee(this,"x",0),Ee(this,"y",0),Ee(this,"w",0),Ee(this,"h",0),this.x=e,this.y=t,this.w=n,this.h=r}return P(M,[{key:"point",get:function(){return new xo(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}},{key:"minX",get:function(){return this.x},set:function(e){this.x=e}},{key:"midX",get:function(){return this.x+this.w/2}},{key:"maxX",get:function(){return this.x+this.w}},{key:"minY",get:function(){return this.y},set:function(e){this.y=e}},{key:"midY",get:function(){return this.y+this.h/2}},{key:"maxY",get:function(){return this.y+this.h}},{key:"width",get:function(){return this.w},set:function(e){this.w=e}},{key:"height",get:function(){return this.h},set:function(e){this.h=e}},{key:"aspectRatio",get:function(){return this.width/this.height}},{key:"center",get:function(){return new xo(this.midX,this.midY)},set:function(e){this.minX=e.x-this.width/2,this.minY=e.y-this.height/2}},{key:"corners",get:function(){return[new xo(this.minX,this.minY),new xo(this.maxX,this.minY),new xo(this.maxX,this.maxY),new xo(this.minX,this.maxY)]}},{key:"snapPoints",get:function(){return[new xo(this.minX,this.minY),new xo(this.maxX,this.minY),new xo(this.maxX,this.maxY),new xo(this.minX,this.maxY),this.center]}},{key:"sides",get:function(){var e=this.corners;return[[e[0],e[1]],[e[1],e[2]],[e[2],e[3]],[e[3],e[0]]]}},{key:"size",get:function(){return new xo(this.w,this.h)}},{key:"toFixed",value:function(){return this.x=To(this.x),this.y=To(this.y),this.w=To(this.w),this.h=To(this.h),this}},{key:"setTo",value:function(e){return this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h,this}},{key:"set",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return this.x=e,this.y=t,this.w=n,this.h=r,this}},{key:"expand",value:function(e){var t=Math.min(this.minX,e.minX),n=Math.min(this.minY,e.minY),r=Math.max(this.maxX,e.maxX),i=Math.max(this.maxY,e.maxY);return this.x=t,this.y=n,this.w=r-t,this.h=i-n,this}},{key:"expandBy",value:function(e){return this.x-=e,this.y-=e,this.w+=2*e,this.h+=2*e,this}},{key:"scale",value:function(e){return this.x/=e,this.y/=e,this.w/=e,this.h/=e,this}},{key:"clone",value:function(){return new M(this.x,this.y,this.w,this.h)}},{key:"translate",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"snapToGrid",value:function(e){var t=Math.round(this.minX/e)*e,n=Math.round(this.minY/e)*e,r=Math.round(this.maxX/e)*e,i=Math.round(this.maxY/e)*e;this.minX=t,this.minY=n,this.width=Math.max(1,r-t),this.height=Math.max(1,i-n)}},{key:"collides",value:function(e){return M.Collides(this,e)}},{key:"contains",value:function(e){return M.Contains(this,e)}},{key:"includes",value:function(e){return M.Includes(this,e)}},{key:"containsPoint",value:function(e,t){return M.ContainsPoint(this,e,t)}},{key:"getHandlePoint",value:function(e){switch(e){case"top_left":return new xo(this.minX,this.minY);case"top_right":return new xo(this.maxX,this.minY);case"bottom_left":return new xo(this.minX,this.maxY);case"bottom_right":return new xo(this.maxX,this.maxY);case"top":return new xo(this.midX,this.minY);case"right":return new xo(this.maxX,this.midY);case"bottom":return new xo(this.midX,this.maxY);case"left":return new xo(this.minX,this.midY)}}},{key:"toJson",value:function(){return{x:this.minX,y:this.minY,w:this.w,h:this.h}}},{key:"resize",value:function(e,t,n){var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=this.minX,l=this.minY,u=this.maxX,c=this.maxY;switch(e){case"left":case"top_left":case"bottom_left":s+=t;break;case"right":case"top_right":case"bottom_right":u+=t}switch(e){case"top":case"top_left":case"top_right":l+=n;break;case"bottom":case"bottom_left":case"bottom_right":c+=n}if((u-s)/(o-r)<0){var d=u;u=s,s=d}if((c-l)/(a-i)<0){var f=c;c=l,l=f}this.minX=s,this.minY=l,this.width=Math.abs(u-s),this.height=Math.abs(c-l)}},{key:"union",value:function(e){var t=Math.min(this.minX,e.x),n=Math.min(this.minY,e.y),r=Math.max(this.maxX,e.w+e.x),i=Math.max(this.maxY,e.h+e.y);return this.x=t,this.y=n,this.width=r-t,this.height=i-n,this}},{key:"equals",value:function(e){return M.Equals(this,e)}}],[{key:"From",value:function(e){return new M(e.x,e.y,e.w,e.h)}},{key:"FromPoints",value:function(e){if(0===e.length)return new M;for(var t,n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e.length;a<s;a++)t=e[a],n=Math.min(t.x,n),r=Math.min(t.y,r),i=Math.max(t.x,i),o=Math.max(t.y,o);return new M(n,r,i-n,o-r)}},{key:"Expand",value:function(e,t){var n=Math.min(t.minX,e.minX),r=Math.min(t.minY,e.minY);return new M(n,r,Math.max(t.maxX,e.maxX)-n,Math.max(t.maxY,e.maxY)-r)}},{key:"ExpandBy",value:function(e,t){return new M(e.minX-t,e.minY-t,e.width+2*t,e.height+2*t)}},{key:"Resize",value:function(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o=e.minX,a=e.minY,s=e.maxX,l=e.maxY,u=e.minX,c=e.minY,d=e.maxX,f=e.maxY;switch(t){case"left":case"top_left":case"bottom_left":u+=n;break;case"right":case"top_right":case"bottom_right":d+=n}switch(t){case"top":case"top_left":case"top_right":c+=r;break;case"bottom":case"bottom_left":case"bottom_right":f+=r}var p=(d-u)/(s-o),h=(f-c)/(l-a),v=p<0,g=h<0;if(i){var m=(s-o)/(l-a),y=Math.abs(d-u),b=Math.abs(f-c),w=y*(h<0?1:-1)*(1/m),x=b*(p<0?1:-1)*m,k=m<y/b;switch(t){case"top_left":k?c=f+w:u=d+x;break;case"top_right":k?c=f+w:d=u-x;break;case"bottom_right":k?f=c-w:d=u-x;break;case"bottom_left":k?f=c-w:u=d+x;break;case"bottom":case"top":var S=(u+d)/2,_=b*m;u=S-_/2,d=S+_/2;break;case"left":case"right":var E=(c+f)/2,P=y/m;c=E-P/2,f=E+P/2}}if(v){var C=d;d=u,u=C}if(g){var I=f;f=c,c=I}var T=new M(u,c,Math.abs(d-u),Math.abs(f-c));return{box:T,scaleX:+(T.width/e.width*(0<p?1:-1)).toFixed(5),scaleY:+(T.height/e.height*(0<h?1:-1)).toFixed(5)}}},{key:"Equals",value:function(e,t){return t.x===e.x&&t.y===e.y&&t.w===e.w&&t.h===e.h}}]),M}();Ee($o,"Collides",function(e,t){return!(e.maxX<t.minX||e.minX>t.maxX||e.maxY<t.minY||e.minY>t.maxY)}),Ee($o,"Contains",function(e,t){return e.minX<t.minX&&e.minY<t.minY&&e.maxY>t.maxY&&e.maxX>t.maxX}),Ee($o,"Includes",function(e,t){return $o.Collides(e,t)||$o.Contains(e,t)}),Ee($o,"ContainsPoint",function(e,t,n){return"number"==typeof t?!(t<e.minX||n<e.minY||t>e.maxX||n>e.maxY):!(t.x<e.minX||t.y<e.minY||t.x>e.maxX||t.y>e.maxY)}),Ee($o,"Common",function(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o];t=Math.min(t,a.minX),n=Math.min(n,a.minY),r=Math.max(r,a.maxX),i=Math.max(i,a.maxY)}return new $o(t,n,r-t,i-n)}),Ee($o,"Sides",function(e){var t=e.corners;return[[t[0],t[1]],[t[1],t[2]],[t[2],t[3]],[t[3],t[0]]]});var Go,Qo=function(){function t(e){z(this,t),Ee(this,"_values",void 0),Ee(this,"_computed",{}),this._values=e}return P(t,[{key:"values",get:function(){return this._values},set:function(e){this._values=e,this._computed={}}},{key:"length",get:function(){if(void 0!==this._computed.length)return this._computed.length;for(var e=this.lut,t=e[0],n=0,r=1;r<e.length;r++){var i=e[r];n+=t.dist(i),t=i}return this._computed.length=n}},{key:"bounds",get:function(){if(void 0!==this._computed.bounds)return this._computed.bounds;var e,t=1/0,n=1/0,r=-1/0,i=-1/0,o=ce(this.lut);try{for(o.s();!(e=o.n()).done;){var a=e.value;t=Math.min(a.x,t),n=Math.min(a.y,n),r=Math.max(a.x,r),i=Math.max(a.y,i)}}catch(e){o.e(e)}finally{o.f()}var s=new $o(t,n,r-t,i-n);return this._computed.bounds=s}},{key:"lut",get:function(){if(this._computed.lut)return this._computed.lut;for(var e=this.values.p,t=[],n=0;n<e+1;n++)t.push(this.getPoint(n/e));return this._computed.lut=t}},{key:"midPoint",get:function(){if(this._computed.midPoint)return this._computed.midPoint;var e=this.getPoint(.5);return this._computed.midPoint=e}},{key:"path",get:function(){if(this._computed.path)return this._computed.path;var e=this.getPath();return this._computed.path=e}},{key:"getPointAtLength",value:function(e){var t=Math.max(0,Math.min(1,e/this.length));return this.getPoint(t)}},{key:"getNormal",value:function(e){return this.getPoint(e-.0025).tan(this.getPoint(e+.0025)).per().uni().toFixed()}},{key:"getNormalAtLength",value:function(e){return this.getNormal(e/this.length)}},{key:"getClosestPointTo",value:function(e){for(var t=this.lut,n=0,r=t[0],i=t[0].dist(e),o=1;o<t.length;o++){var a=xo.Dist(t[o],e);a<i&&(i=a,r=t[o],n=o/t.length)}for(var s=1/this.values.p,l=Math.max(0,n-s/2);l<Math.min(1,n+s/2);l+=s/10){var u=this.getPoint(l),c=xo.Dist(u,e);c<i&&(i=c,r=u)}return{point:r,distance:i}}},{key:"update",value:function(e){this._computed={},this.values=Pe(Pe({},this.values),e)}}]),t}();Go=Symbol.iterator;var Zo=function(e){M(s,Qo);var a=N(s);function s(e,t,n,r){var i,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:25;return z(this,s),Ee(R(i=a.call(this,{a:e,b:t,c:n,d:r,p:o})),Go,io().mark(function e(){var t,n,r,i,o;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.values,n=t.a,r=t.b,i=t.c,o=t.d,e.delegateYield([n,r,i,o],"t0",2);case 2:case"end":return e.stop()}},e,this)})),i}return P(s,[{key:"getPath",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return xo.Equals(n,o)?"":"".concat(e?"M".concat(n.x.toFixed(2),",").concat(n.y.toFixed(2),"C"):"").concat(r.x.toFixed(2),",").concat(r.y.toFixed(2)," ").concat(i.x.toFixed(2),",").concat(i.y.toFixed(2)," ").concat(o.x.toFixed(2),",").concat(o.y.toFixed(2))}},{key:"getPoint",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return e<=0?xo.From(n):1<=e?xo.From(o):new xo((1-e)*(1-e)*(1-e)*n.x+(1-e)*(1-e)*3*e*r.x+3*(1-e)*(e*e)*i.x+e*e*e*o.x,(1-e)*(1-e)*(1-e)*n.y+(1-e)*(1-e)*3*e*r.y+3*(1-e)*(e*e)*i.y+e*e*e*o.y)}},{key:"getX",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return(1-e)*(1-e)*(1-e)*n.x+(1-e)*(1-e)*3*e*r.x+3*(1-e)*(e*e)*i.x+e*e*e*o.x}},{key:"getY",value:function(e){var t=this.values,n=t.a,r=t.b,i=t.c,o=t.d;return(1-e)*(1-e)*(1-e)*n.y+(1-e)*(1-e)*3*e*r.y+3*(1-e)*(e*e)*i.y+e*e*e*o.y}}]),s}(),Jo=function(){function r(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;z(this,r),Ee(this,"computed",{}),this.points=e,this.p=t,this.k=n}return P(r,[{key:"length",get:function(){if(void 0!==this.computed.length)return this.computed.length;var e=this.segments.reduce(function(e,t){return e+t.length},0);return this.computed.length=e}},{key:"bounds",get:function(){if(void 0!==this.computed.bounds)return this.computed.bounds;var e=this.segments,t=$o.Common(e.map(function(e){return e.bounds}));return this.computed.bounds=t}},{key:"head",get:function(){return this.points[0]}},{key:"tail",get:function(){var e=this.points;return e[e.length-1]}},{key:"path",get:function(){if(void 0!==this.computed.path)return this.computed.path;var e=this.segments.map(function(e){return e.path}).filter(function(e){return null!=e&&""!==e}).join(" ");return this.computed.path=e}},{key:"addPoint",value:function(e){var t=this.points,n=this.k,r=this.p;return t.push(e),this.computed={},this.getSegmentsFromPoints(this.points,r,n),this}},{key:"removePoint",value:function(e){var t=this.points,n=this.k,r=this.p,i="number"==typeof e?Math.floor(e):t.indexOf(e);return-1===i||(t.splice(i,1),this.computed={},this.getSegmentsFromPoints(this.points,r,n)),this}},{key:"getPointAtLength",value:function(e){var t=this.segments,n=e;if(e<=0)return t[0].getPoint(0);if(e>=this.length)return t[t.length-1].getPoint(1);for(var r=0;r<t.length;r++){var i=t[r],o=i.length;if(n<o)return i.getPoint(n/o);n-=i.length}return t[t.length-1].getPoint(1)}},{key:"getPoint",value:function(e){return e<=0?this.segments[0].getPoint(0):1<=e?this.segments[this.segments.length-1].getPoint(1):this.getPointAtLength(e*this.length)}},{key:"getNormal",value:function(e){var t=this.length;return this.getNormalAtLength(e*t)}},{key:"getNormalAtLength",value:function(e){var t=this.segments;if(e<0)return new xo(0,0);var n,r=e,i=ce(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.length;if(r<=a)return o.getNormal(r/a);r-=a}}catch(e){i.e(e)}finally{i.f()}return new xo(0,0)}},{key:"getClosestPointTo",value:function(e){var t,n=this.head,r=this.segments,i=n,o=xo.Dist(e,n),a=ce(r);try{for(a.s();!(t=a.n()).done;){var s=t.value.getClosestPointTo(e);s.distance<o&&(o=s.distance,i=s.point)}}catch(e){a.e(e)}finally{a.f()}return{point:i,distance:o}}}]),r}(),ea=function(e){M(o,Jo);var i=N(o);function o(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1.2,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20;return z(this,o),Ee(R(t=i.call(this,e,n,r)),"segments",void 0),t.segments=t.getSegmentsFromPoints(e,n,r),t}return P(o,[{key:"getSegmentsFromPoints",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1.25,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20,r=e.length,i=r-2,o=[],a=0;a<r-1;a++){var s=0===a?e[0]:e[a-1],l=e[a],u=e[a+1],c=a===i?u:e[a+2];o.push(new Zo(l,0===a?s:new xo(l.x+(u.x-s.x)/6*t,l.y+(u.y-s.y)/6*t),a===i?u:new xo(u.x-(c.x-l.x)/6*t,u.y-(c.y-l.y)/6*t),u,n))}return o}}],[{key:"FromPoints",value:function(e){return new o(e)}}]),o}(),ta=function(e){M(o,Qo);var i=N(o);function o(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:2;return z(this,o),(n=i.call(this,{a:e,b:t,p:r})).a=e,n.b=t,n.values.p=Math.max(10,Math.ceil(n.length/20)),n}return P(o,[{key:"length",get:function(){return xo.Dist(this.a,this.b)}},{key:"tangent",get:function(){return xo.Tan(this.a,this.b)}},{key:"angle",get:function(){return xo.Angle(this.a,this.b)}},{key:"bounds",get:function(){return $o.FromPoints([this.a,this.b])}},{key:"getX",value:function(e){var t=this.values,n=t.a,r=t.b;return n.x+(r.x-n.x)*e}},{key:"getY",value:function(e){var t=this.values,n=t.a,r=t.b;return n.y+(r.y-n.y)*e}},{key:"getPoint",value:function(e){var t=this.values,n=t.a,r=t.b;return e<=0?xo.From(n):1<=e?xo.From(r):xo.Lrp(n,r,e)}},{key:"getPath",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=this.values,n=t.a,r=t.b;return xo.Equals(n,r)?"":e?"M".concat(n.x,",").concat(n.y,"L").concat(r.x,",").concat(r.y):"".concat(r.x,",").concat(r.y)}},{key:"getNormal",value:function(){var e=this.values,t=e.a,n=e.b;return xo.Sub(t,n).per().uni().toFixed()}},{key:"getClosestPointTo",value:function(e){var t=this.values,n=t.a,r=t.b,i=xo.NearestPointOnLineSegment(n,r,e),o=i.dist(e);return{point:i,distance:o}}}],[{key:"Length",value:function(e){return xo.Dist(e.a,e.b)}},{key:"Tangent",value:function(e){return xo.Tan(e.a,e.b)}},{key:"Angle",value:function(e){return xo.Angle(e.a,e.b)}}]),o}(),na=function(){function a(e,t,n,r,i,o){z(this,a),Ee(this,"a",1),Ee(this,"b",0),Ee(this,"c",0),Ee(this,"d",1),Ee(this,"e",0),Ee(this,"f",0),this.a=e,this.b=t,this.c=n,this.d=r,this.e=i,this.f=o}return P(a,[{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this}},{key:"multiply",value:function(e){var t=e,n=this.a,r=this.b,i=this.c,o=this.d,a=this.e,s=this.f;return this.a=n*t.a+i*t.b,this.c=n*t.c+i*t.d,this.e=n*t.e+i*t.f+a,this.b=r*t.a+o*t.b,this.d=r*t.c+o*t.d,this.f=r*t.e+o*t.f+s,this}},{key:"rotate",value:function(e,t,n){return 0===e?this:void 0===t?this.multiply(a.Rotate(e)):this.translate(t,n).multiply(a.Rotate(e)).translate(-t,-n)}},{key:"translate",value:function(e,t){return this.multiply(a.Translate(e,t))}},{key:"scale",value:function(e,t){return this.multiply(a.Scale(e,t))}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=e*r-t*n;return this.a=r/a,this.b=t/-a,this.c=n/-a,this.d=e/a,this.e=(r*i-n*o)/-a,this.f=(t*i-e*o)/a,this}},{key:"applyToPoint",value:function(e){return a.applyToPoint(this,e)}},{key:"applyToPoints",value:function(e){return a.applyToPoints(this,e)}},{key:"decomposed",value:function(){return a.Decompose(this)}},{key:"toCssString",value:function(){return a.toCssString(this)}},{key:"setTo",value:function(e){return Object.assign(this,e),this}},{key:"decompose",value:function(){return a.Decompose(this)}},{key:"clone",value:function(){return new a(this.a,this.b,this.c,this.d,this.e,this.f)}}],[{key:"Identity",value:function(){return new a(1,0,0,1,0,0)}},{key:"Translate",value:function(e,t){return new a(1,0,0,1,e,t)}},{key:"Rotate",value:function(e,t,n){if(0===e)return a.Identity();var r=Math.cos(e),i=Math.sin(e),o=new a(r,i,-i,r,0,0);return void 0===t?o:a.Compose(a.Translate(t,n),o,a.Translate(-t,-n))}},{key:"Multiply",value:function(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}}},{key:"Inverse",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/-t,f:(e.b*e.e-e.a*e.f)/t}}},{key:"Absolute",value:function(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:e.b/-t,c:e.c/-t,d:e.a/t,e:(e.d*e.e-e.c*e.f)/t,f:(e.b*e.e-e.a*e.f)/-t}}},{key:"Compose",value:function(){for(var e=a.Identity(),t=0,n=arguments.length;t<n;t++)e.multiply(t<0||arguments.length<=t?void 0:arguments[t]);return e}},{key:"Decompose",value:function(e){var t,n,r;if(0!==e.a||0!==e.c){var i=Math.hypot(e.a,e.c);t=i,n=(e.a*e.d-e.b*e.c)/i,r=Math.acos(e.a/i)*(0<e.c?-1:1)}else if(0!==e.b||0!==e.d){var o=Math.hypot(e.b,e.d);t=(e.a*e.d-e.b*e.c)/o,n=o,r=_o+Math.acos(e.b/o)*(0<e.d?-1:1)}else r=n=t=0;return{x:e.e,y:e.f,scaleX:t,scaleY:n,rotation:Ro(r)}}},{key:"Smooth",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e10;return e.a=Math.round(e.a*t)/t,e.b=Math.round(e.b*t)/t,e.c=Math.round(e.c*t)/t,e.d=Math.round(e.d*t)/t,e.e=Math.round(e.e*t)/t,e.f=Math.round(e.f*t)/t,e}},{key:"toCssString",value:function(e){return"matrix(".concat(Yo(e.a),", ").concat(Yo(e.b),", ").concat(Yo(e.c),", ").concat(Yo(e.d),", ").concat(Yo(e.e),", ").concat(Yo(e.f),")")}},{key:"applyToPoint",value:function(e,t){return new xo(e.a*t.x+e.c*t.y+e.e,e.b*t.x+e.d*t.y+e.f,t.z)}},{key:"applyToXY",value:function(e,t,n){return[e.a*t+e.c*n+e.e,e.b*t+e.d*n+e.f]}},{key:"applyToPoints",value:function(t,e){return e.map(function(e){return new xo(t.a*e.x+t.c*e.y+t.e,t.b*e.x+t.d*e.y+t.f,e.z)})}},{key:"applyToBounds",value:function(e,t){return new $o(e.e+t.minX,e.f+t.minY,t.width,t.height)}},{key:"From",value:function(e){return new a(e.a,e.b,e.c,e.d,e.e,e.f)}}]),a}();Ee(na,"Scale",function(e,t,n,r){var i=new na(e,0,0,0,t,0);return void 0===n?i:na.Compose(na.Translate(n,r),i,na.Translate(-n,-r))});var ra=function(e){M(o,Jo);var i=N(o);function o(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1.2,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20;return z(this,o),Ee(R(t=i.call(this,e,n,r)),"segments",void 0),t.segments=t.getSegmentsFromPoints(e,r),t}return P(o,[{key:"getSegmentsFromPoints",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:50,n=[],r=0;r<e.length-1;r++)n.push(new ta(e[r],e[r+1],t));return n}}],[{key:"FromPoints",value:function(e){return new o(e)}}]),o}(),ia=Math.PI+1e-4;function oa(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.size,r=void 0===n?16:n,i=t.smoothing,o=void 0===i?.5:i,a=t.start,s=void 0===a?{}:a,l=t.end,u=void 0===l?{}:l,c=t.last,d=void 0!==c&&c,f=s.cap,p=void 0===f||f,h=u.cap,v=void 0===h||h;if(0===e.length||r<=0)return[];for(var g,m=e[0],y=e[e.length-1],b=y.runningLength,w=!1===s.taper?0:!0===s.taper?Math.max(r,b):s.taper,x=!1===u.taper?0:!0===u.taper?Math.max(r,b):u.taper,k=Math.pow(r*o,2),S=[],_=[],E=e[0].vector,P=e[0].point,C=P,I=P,T=C,M=!1,A=0;A<e.length;A++){g=e[A];var j=e[A],O=j.point,L=j.vector,z=g.vector.dpr(E),R=(A<e.length-1?e[A+1]:e[A]).vector,N=A<e.length-1?R.dpr(g.vector):1,D=null!==N&&N<.2;if(z<0&&!M||D){if(-.62<N&&b-g.runningLength>g.radius){var B=E.clone().mul(g.radius);T=E.clone().cpr(R)<0?(I=xo.Add(O,B),xo.Sub(O,B)):(I=xo.Sub(O,B),xo.Add(O,B)),S.push(I),_.push(T)}else for(var F=E.clone().mul(g.radius).per(),U=xo.Sub(g.input,F),K=0;K<1;K+=.07692307692307693)I=xo.RotWith(U,g.input,ia*K),S.push(I),T=xo.RotWith(U,g.input,ia+ia*-K),_.push(T);P=I,C=T,D&&(M=!0)}else if(M=!1,g!==m&&g!==y){var V=xo.Lrp(R,L,N).per().mul(g.radius);I=xo.Sub(O,V),(A<=1||xo.Dist2(P,I)>k)&&(S.push(I),P=I),T=xo.Add(O,V),(A<=1||xo.Dist2(C,T)>k)&&(_.push(T),C=T),E=L}else{var W=xo.Per(L).mul(g.radius);S.push(xo.Sub(O,W)),_.push(xo.Add(O,W))}}var H=m.point,Y=1<e.length?e[e.length-1].point:xo.AddXY(m.point,1,1);if(1===e.length&&(!w&&!x||d)){for(var X=xo.Add(H,xo.Sub(H,Y).uni().per().mul(-m.radius)),q=[],$=1/13;$<=1;$+=1/13)q.push(xo.RotWith(X,H,2*ia*$));return q}var G=[];if(w||x&&1===e.length);else if(p)for(var Q=.125;Q<=1;Q+=.125){var Z=xo.RotWith(_[0],H,ia*Q);G.push(Z)}else{var J=xo.Sub(S[0],_[0]),ee=xo.Mul(J,.5),te=xo.Mul(J,.51);G.push(xo.Sub(H,ee),xo.Sub(H,te),xo.Add(H,te),xo.Add(H,ee))}var ne=[],re=y.vector.clone().per().neg();if(x||w&&1===e.length)ne.push(Y);else if(v)for(var ie=xo.Add(Y,xo.Mul(re,y.radius)),oe=1/29;oe<1;oe+=1/29)ne.push(xo.RotWith(ie,Y,3*ia*oe));else ne.push(xo.Add(Y,xo.Mul(re,y.radius)),xo.Add(Y,xo.Mul(re,.99*y.radius)),xo.Sub(Y,xo.Mul(re,.99*y.radius)),xo.Sub(Y,xo.Mul(re,y.radius)));return S.concat(ne,_.reverse(),G)}var aa=.025,sa=.01;function la(e){var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=n.streamline,i=void 0===r?.5:r,o=n.size,a=void 0===o?16:o,s=n.simulatePressure,l=void 0!==s&&s;if(0===e.length)return[];var u=.15+.85*(1-i),c=e.map(xo.From),d=0;if(!l)for(var f=c[0];f&&!(f.z>=aa);)c.shift(),f=c[0];if(!l)for(var p=c[c.length-1];p&&!(p.z>=sa);)c.pop(),p=c[c.length-1];if(0===c.length)return[{point:xo.From(e[0]),input:xo.From(e[0]),pressure:l?.5:.15,vector:new xo(1,1),distance:0,runningLength:0,radius:1}];for(var h=c[1];h&&!(xo.Dist(h,c[0])>a/3);)c[0].z=Math.max(c[0].z,h.z),c.splice(1,1),h=c[1];var v=c.pop();for(h=c[c.length-1];h&&!(xo.Dist(h,v)>a/3);)c.pop(),h=c[c.length-1],d++;c.push(v);var g=n.last||!n.simulatePressure||1<c.length&&xo.Dist(c[c.length-1],c[c.length-2])<a||0<d;if(2===c.length&&n.simulatePressure){var m=c[1];c=c.slice(0,-1);for(var y=1;y<5;y++){var b=xo.Lrp(c[0],m,y/4);b.z=(c[0].z+(m.z-c[0].z))*y/4,c.push(b)}}var w,x,k=[{point:c[0],input:c[0],pressure:l?.5:c[0].z,vector:new xo(1,1),distance:0,runningLength:0,radius:1}],S=0,_=k[0];g&&0<i&&c.push(c[c.length-1].clone());for(var E=1,P=c.length;E<P;E++)w=!u||n.last&&E===P-1?c[E].clone():c[E].clone().lrp(_.point,1-u),_.point.equals(w)||(S+=x=xo.Dist(w,_.point),E<4&&S<a||(_={input:c[E],point:w,pressure:l?.5:c[E].z,vector:xo.Sub(_.point,w).uni(),distance:x,runningLength:S,radius:1},k.push(_)));if(null!==(t=k[1])&&void 0!==t&&t.vector&&(k[0].vector=k[1].vector.clone()),S<1){var C=Math.max.apply(Math,[.5].concat(de(k.map(function(e){return e.pressure}))));k.forEach(function(e){return e.pressure=C})}return k}var ua=Math.min,ca=.275;function da(e,t){var n,r,i=t.size,o=void 0===i?16:i,a=t.thinning,s=void 0===a?.5:a,l=t.simulatePressure,u=void 0===l||l,c=t.easing,d=void 0===c?function(e){return e}:c,f=t.start,p=void 0===f?{}:f,h=t.end,v=void 0===h?{}:h,g=p.easing,m=void 0===g?wo.easeOutQuad:g,y=v.easing,b=void 0===y?wo.easeOutCubic:y,w=e[e.length-1].runningLength,x=e[0].pressure;if(!u&&w<o){var k=e.reduce(function(e,t){return Math.max(e,t.pressure)},.5);return e.forEach(function(e){e.pressure=k,e.radius=o*d(.5-s*(.5-e.pressure))}),e}for(var S,_=0,E=e.length;_<E&&!((r=e[_]).runningLength>5*o);_++){var P=ua(1,r.distance/o);if(u){var C=ua(1,1-P);S=ua(1,x+P*ca*(C-x))}else S=ua(1,x+.5*(r.pressure-x));x+=.5*(S-x)}for(var I=0;I<e.length;I++){if(r=e[I],s){var T=r.pressure,M=ua(1,r.distance/o);if(u){var A=ua(1,1-M);T=ua(1,x+M*ca*(A-x))}else T=ua(1,x+M*ca*(T-x));r.radius=o*d(.5-s*(.5-T)),x=T}else r.radius=o/2;void 0===n&&(n=r.radius)}var j=!1===p.taper?0:!0===p.taper?Math.max(o,w):p.taper,O=!1===v.taper?0:!0===v.taper?Math.max(o,w):v.taper;if(j||O)for(var L=0;L<e.length;L++){var z=(r=e[L]).runningLength,R=z<j?m(z/j):1,N=w-z<O?b((w-z)/O):1;r.radius=Math.max(.01,r.radius*Math.min(R,N))}return e}function fa(e,t,n,r){var i=e.x-n.x,o=e.y-n.y,a=r.x-n.x,s=r.y-n.y,l=t.x-e.x,u=t.y-e.y,c=a*o-s*i,d=l*o-u*i,f=s*l-a*u;if(0==c||0==d)return null;if(0==f)return null;if(0!=f){var p=c/f,h=d/f;if(0<=p&&p<=1&&0<=h&&h<=1)return xo.AddXY(e,p*l,p*u)}return null}function pa(e,t,n,r){var i=(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y),o=2*((t.x-e.x)*(e.x-n.x)+(t.y-e.y)*(e.y-n.y)),a=o*o-4*i*(n.x*n.x+n.y*n.y+e.x*e.x+e.y*e.y-2*(n.x*e.x+n.y*e.y)-r*r);if(a<0)return null;if(0==a)return null;var s=Math.sqrt(a),l=(-o+s)/(2*i),u=(-o-s)/(2*i);if((l<0||1<l)&&(u<0||1<u))return null;var c=[];return 0<=l&&l<=1&&c.push(xo.Lrp(e,t,l)),0<=u&&u<=1&&c.push(xo.Lrp(e,t,u)),0===c.length?null:c}function ha(e,t,n){for(var r,i=[],o=0,a=n.length-1;o<a;o++)(r=fa(e,t,n[o],n[o+1]))&&i.push(r);return 0===i.length?null:i}function va(e,t,n){for(var r,i=[],o=0,a=n.length;o<a;o++)(r=pa(n[o],n[(o+1)%n.length],e,t))&&i.push.apply(i,de(r));return 0===i.length?null:i}function ga(e,t,n){for(var r,i=[],o=1,a=n.length;o<a;o++)(r=pa(n[o-1],n[o],e,t))&&i.push.apply(i,de(r));return 0===i.length?null:i}function ma(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function ya(e,t,n,r){return ma(e,n,r)!==ma(t,n,r)&&ma(e,t,n)!==ma(e,t,r)}function ba(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)Ho(n=e[o],t)&&i.push(n);for(var s=0,l=t.length;s<l;s++)Ho(n=t[s],e)&&i.push(n);for(var u=0,c=e.length;u<c;u++){n=e[u],r=e[(u+1)%e.length];for(var d=0,f=t.length;d<f;d++){var p=fa(n,r,t[d],t[(d+1)%t.length]);null!==p&&i.push(p)}}return 0===i.length?null:(h=i,v=xo.Average(h),h.sort(function(e,t){return xo.Angle(v,e)-xo.Angle(v,t)}));var h,v}function wa(e){return"".concat(Yo(e.x),",").concat(Yo(e.y)," ")}function xa(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=0,n=0,r=0,i=0;function o(){var e=t^t<<11;return t=n,n=r,(i^=((r=i)>>>19^e^e>>>8)>>>0)/4294967296*2}for(var a=0;a<e.length+64;a++)t^=0|e.charCodeAt(a),o();return o}function ka(e){for(var t,n,r,i="M",o=0,a=e.length;o<a;o+=3)t=e[o],n=e[o+1],r=e[o+2],i+="".concat(wa(t),"L").concat(wa(n),"Q").concat(wa(r));return i+"".concat(wa(e[0]))}function Sa(e,t,n,r,i){for(var o,a=[],s=xa(e),l=t[0],u=t.length,c=0,d=u*i;c<d;c++){o=xo.AddXY(t[(c+1)%u],s()*n,s()*n);var f=xo.Sub(o,l),p=xo.Len(f),h=xo.Div(f,p).mul(Math.min(p/4,r));a.push(xo.Add(l,h),xo.Add(o,h.neg()),o),l=o}return a}function _a(e,t,n){for(var r,i,o="M".concat(wa(t[0]),"L"),a="M".concat(wa(t[0]),"L"),s="M".concat(wa(t[0]),"L"),l=n/3,u=2*n,c=xa(e),d=t[0],f=t[0],p=0,h=t.length-1;p<h;p++){r=xo.AddXY(t[p+1],c()*l,c()*l),i=xo.AddXY(t[p+1],c(),c()*l);var v=xo.Sub(r,d),g=xo.Len(v),m=xo.Div(v,g).mul(Math.min(g/4,u)),y=xo.Add(d,m),b=xo.Add(r,m.neg()),w=xo.Sub(i,f),x=xo.Len(w),k=xo.Div(w,x).mul(Math.min(x/4,u)),S=xo.Add(f,k),_=xo.Add(i,k.neg());p===h-1?(o+="".concat(wa(y)," L ").concat(wa(r)),a+="".concat(wa(y)," L ").concat(wa(r)),s+="".concat(wa(S)," L ").concat(wa(i))):(o+="".concat(wa(y),"L ").concat(wa(b),"Q ").concat(wa(r)),a+="".concat(wa(y),"L ").concat(wa(b),"Q ").concat(wa(r)),s+="".concat(wa(S),"L ").concat(wa(_),"Q ").concat(wa(i)),d=r,f=i)}return[o,a+s]}var Ea={peopleMenu:Ta("peopleMenu"),highlighterTool:Ta("highlighterTool",{all:!0})},Pa={preventDefaultLogging:Ia("preventDefaultLogging",{defaults:{all:!1}}),pointerCaptureLogging:Ia("pointerCaptureLogging",{defaults:{all:!1}}),pointerCaptureTracking:Ia("pointerCaptureTracking",{defaults:{all:!1}}),pointerCaptureTrackingObject:Ia("pointerCaptureTrackingObject",{defaults:{all:new Map},shouldStoreForSession:!1}),elementRemovalLogging:Ia("elementRemovalLogging",{defaults:{all:!1}}),debugSvg:Ia("debugSvg",{defaults:{all:!1}}),throwToBlob:Ia("throwToBlob",{defaults:{all:!1}}),logMessages:Ia("uiLog",{defaults:{all:[]}}),resetConnectionEveryPing:Ia("resetConnectionEveryPing",{defaults:{all:!1}}),debugCursors:Ia("debugCursors",{defaults:{all:!1}}),forceSrgb:Ia("forceSrgbColors",{defaults:{all:!1}})};if("undefined"!=typeof window&&(window.tldrawLog=function(e){Pa.logMessages.set(Pa.logMessages.value.concat(e))}),"undefined"!=typeof Element){var Ca=Element.prototype.removeChild;Nt("element removal logging",function(){Pa.elementRemovalLogging.value?Element.prototype.removeChild=function(e){return console.warn("[tldraw] removing child:",e),Ca.call(this,e)}:Element.prototype.removeChild=Ca})}function Ia(e,t){var n=t.defaults,r=t.shouldStoreForSession;return Ma({name:e,defaults:n,shouldStoreForSession:void 0===r||r})}function Ta(e){return Ma({name:e,defaults:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{all:!0,production:!1},shouldStoreForSession:!0})}function Ma(t){var n=function(e){var t,n,r,i,o,a;switch(null!==(t=null!==(n=null!==(r=Aa(function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.TLDRAW_ENV}))&&void 0!==r?r:Aa(function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VERCEL_PUBLIC_TLDRAW_ENV}))&&void 0!==n?n:Aa(function(){return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NEXT_PUBLIC_TLDRAW_ENV}))&&void 0!==t?t:"production"){case"production":return null!==(i=e.defaults.production)&&void 0!==i?i:e.defaults.all;case"preview":case"staging":return null!==(o=e.defaults.staging)&&void 0!==o?o:e.defaults.all;default:return null!==(a=e.defaults.development)&&void 0!==a?a:e.defaults.all}}(t),e=t.shouldStoreForSession?function(e){try{var t,n;return JSON.parse(null!==(t=null===(n=window)||void 0===n?void 0:n.sessionStorage.getItem("tldraw_debug:".concat(e)))&&void 0!==t?t:"null")}catch(e){return null}}(t.name):null,r=It("debug:".concat(t.name),null!=e?e:n);return"undefined"!=typeof window&&(t.shouldStoreForSession&&Nt("debug:".concat(t.name),function(){var e=r.value;try{e===n?window.sessionStorage.removeItem("tldraw_debug:".concat(t.name)):window.sessionStorage.setItem("tldraw_debug:".concat(t.name),JSON.stringify(e))}catch(e){}}),Object.defineProperty(window,"tldraw".concat(t.name.replace(/^[a-z]/,function(e){return e.toUpperCase()})),{get:function(){return r.value},set:function(e){r.set(e)},configurable:!0})),Object.assign(r,t)}function Aa(e){try{return e()}catch(e){return null}}function ja(e){if(e instanceof HTMLElement)return e;if(e.parentElement)return ja(e.parentElement);throw Error("Could not find a parent element of an HTML type!")}function Oa(e){e.preventDefault(),Pa.preventDefaultLogging.value&&console.warn("preventDefault called on event:",e)}function La(e,t){if(e.setPointerCapture(t.pointerId),Pa.pointerCaptureTracking.value){var n,r=Pa.pointerCaptureTrackingObject.value;r.set(e,(null!==(n=r.get(e))&&void 0!==n?n:0)+1)}Pa.pointerCaptureLogging.value&&console.warn("setPointerCapture called on element:",e,t)}function za(e,t){if(e.hasPointerCapture(t.pointerId)){if(e.releasePointerCapture(t.pointerId),Pa.pointerCaptureTracking.value){var n=Pa.pointerCaptureTrackingObject.value;1===n.get(e)?n.delete(e):n.has(e)?n.set(e,n.get(e)-1):console.warn("Release without capture")}Pa.pointerCaptureLogging.value&&console.warn("releasePointerCapture called on element:",e,t)}}var Ra=[{offsetX:0,offsetY:2,blur:4,spread:0,color:"#00000029"},{offsetX:0,offsetY:3,blur:6,spread:0,color:"#0000001f"}];function Na(u){return Ra.map(function(e){var t=e.offsetX,n=e.offsetY,r=e.blur,i=e.spread,o=e.color,a=new xo(t,n).rot(-u),s=a.x,l=a.y;return"".concat(s,"px ").concat(l,"px ").concat(r,"px ").concat(i,"px ").concat(o)}).join(", ")}function Da(){var e=Ce((0,_e.useState)(!1),2),t=e[0],n=e[1];return(0,_e.useEffect)(function(){var e=window.matchMedia("(prefers-reduced-motion: reduce)"),t=function(){n(e.matches)};return t(),e.addEventListener("change",t),function(){return e.removeEventListener("change",t)}},[]),t}var Ba=function(e,t){return e.length<=t?e:e.substring(0,t-3)+"..."},Fa=function(e){return e.stopPropagation()};function Ua(e,t){e.isKilled=!0;var n=t.getBoundingClientRect(),r=n.top,i=n.left;return{point:{x:e.clientX-i,y:e.clientY-r,z:e.pressure},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:e.pointerId,button:e.button,isPen:"pen"===e.pointerType}}function Ka(e){return"".concat(Yo(e.x),",").concat(Yo(e.y)," ")}function Va(e,t){return"".concat(Yo((e.x+t.x)/2),",").concat(Yo((e.y+t.y)/2)," ")}function Wa(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e.length;if(n<2)return"";var r=e[0],i=e[1];if(2===n)return"M".concat(Ka(r),"L").concat(Ka(i));for(var o="",a=2,s=n-1;a<s;a++)o+=Va(r=e[a],i=e[a+1]);return t?"M".concat(Va(e[0],e[1]),"Q").concat(Ka(e[1])).concat(Va(e[1],e[2]),"T").concat(o).concat(Va(e[n-1],e[0])).concat(Va(e[0],e[1]),"Z"):"M".concat(Ka(e[0]),"Q").concat(Ka(e[1])).concat(Va(e[1],e[2])).concat(3<e.length?"T":"").concat(o,"L").concat(Ka(e[n-1]))}function Ha(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e.length;if(n<2)return"";var r=e[0].point,i=e[1].point;if(2===n)return"M".concat(Ka(r),"L").concat(Ka(i));for(var o="",a=2,s=n-1;a<s;a++)o+=Va(r=e[a].point,i=e[a+1].point);return t?"M".concat(Va(e[0].point,e[1].point),"Q").concat(Ka(e[1].point)).concat(Va(e[1].point,e[2].point),"T").concat(o).concat(Va(e[n-1].point,e[0].point)).concat(Va(e[0].point,e[1].point),"Z"):"M".concat(Ka(e[0].point),"Q").concat(Ka(e[1].point)).concat(Va(e[1].point,e[2].point)).concat(3<e.length?"T":"").concat(o,"L").concat(Ka(e[n-1].point))}var Ya=(0,_e.createContext)(null);function Xa(e){var t=e.container,n=e.children;return(0,to.jsx)(Ya.Provider,{value:t,children:n})}function qa(){return H((0,_e.useContext)(Ya),"useContainer used outside of <Tldraw />")}var $a=["input","select","button","textarea"];function Ga(){var e=document.activeElement;return!(!e||!(e.getAttribute("contenteditable")||-1<$a.indexOf(e.tagName.toLowerCase())))}function Qa(){return(0,to.jsx)("div",{className:"tl-background"})}function Za(n,r,i,o,a,s){(0,_e.useLayoutEffect)(function(){var e=n.current;if(e&&void 0!==r){var t="translate(".concat(r,"px, ").concat(i,"px)");void 0!==o&&(t+=" scale(".concat(o,")")),void 0!==a&&(t+=" rotate(".concat(a,"rad)")),s&&(t+=" translate(".concat(s.x,"px, ").concat(s.y,"px)")),e.style.transform=t}})}for(var Ja=function(e){var t=e.brush,n=e.color,r=e.opacity,i=(0,_e.useRef)(null);return Za(i,t.x,t.y),(0,to.jsx)("svg",{className:"tl-overlays__item",ref:i,children:n?(0,to.jsxs)("g",{className:"tl-brush",opacity:r,children:[(0,to.jsx)("rect",{width:Yo(Math.max(1,t.w)),height:Yo(Math.max(1,t.h)),fill:n,opacity:.75}),(0,to.jsx)("rect",{width:Yo(Math.max(1,t.w)),height:Yo(Math.max(1,t.h)),fill:"none",stroke:n,opacity:.1})]}):(0,to.jsx)("rect",{className:"tl-brush tl-brush__default",width:Yo(Math.max(1,t.w)),height:Yo(Math.max(1,t.h))})})},es=function(e){var t=e.className,n=e.zoom,r=e.point,i=e.color,o=e.viewport,a=e.opacity,s=void 0===a?1:a,l=(0,_e.useRef)(null);return Za(l,Io(r.x,o.minX+5/n,o.maxX-5/n),Io(r.y,o.minY+5/n,o.maxY-5/n),1/n,xo.Angle(o.center,r)),(0,to.jsxs)("svg",{ref:l,className:so("tl-overlays__item",t),children:[(0,to.jsx)("use",{href:"#cursor_hint",color:i,strokeWidth:3,stroke:"var(--color-background)"}),(0,to.jsx)("use",{href:"#cursor_hint",color:i,opacity:s})]})},ts=(0,_e.memo)(function(e){var t=e.className,n=e.zoom,r=e.point,i=e.color,o=e.name,a=e.chatMessage,s=(0,_e.useRef)(null);return Za(s,null==r?void 0:r.x,null==r?void 0:r.y,1/n),r?(0,to.jsxs)("div",{ref:s,className:so("tl-overlays__item",t),children:[(0,to.jsx)("svg",{className:"tl-cursor",children:(0,to.jsx)("use",{href:"#cursor",color:i})}),a?(0,to.jsxs)(to.Fragment,{children:[o&&(0,to.jsx)("div",{className:"tl-nametag-title",style:{color:i},children:o}),(0,to.jsx)("div",{className:"tl-nametag-chat",style:{backgroundColor:i},children:a})]}):o&&(0,to.jsx)("div",{className:"tl-nametag",style:{backgroundColor:i},children:o})]}):null}),ns=2e3,rs=(Symbol("remove"),320),is=[.1,.25,.5,1,2,4,8],os={},as=1;as<=Math.ceil(8);as++)os[as+"_dark"]="hash_pattern_zoom_".concat(as,"_dark"),os[as+"_light"]="hash_pattern_zoom_".concat(as,"_light");var ss={duration:0,easing:wo.easeInOutCubic},ls=[{min:-1,mid:.15,step:100},{min:.05,mid:.375,step:25},{min:.15,mid:1,step:5},{min:.7,mid:2.5,step:1}],us=function(e){var d=e.x,f=e.y,p=e.z,h=e.size;return(0,to.jsxs)("svg",{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,to.jsx)("defs",{children:ls.map(function(e,t){var n=e.min,r=e.mid,i=e.step,o=i*h*p,a=.5+d*p,s=.5+f*p,l=0<a?a%o:o+a%o,u=0<s?s%o:o+s%o,c=p<r?Q(p,[n,r],[0,1]):1;return(0,to.jsx)("pattern",{id:"grid-".concat(i),width:o,height:o,patternUnits:"userSpaceOnUse",children:(0,to.jsx)("circle",{className:"tl-grid-dot",cx:l,cy:u,r:1,opacity:c})},"grid-pattern-".concat(t))})}),ls.map(function(e,t){var n=e.step;return(0,to.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid-".concat(n,")")},"grid-rect-".concat(t))})]})},cs=function(e){var t=e.handle,n=e.className;return(0,to.jsxs)("g",{className:so("tl-handle",{"tl-handle__hint":"vertex"!==t.type},n),children:[(0,to.jsx)("circle",{className:"tl-handle__bg"}),(0,to.jsx)("circle",{className:"tl-handle__fg"})]})},ds=function(e){var t=e.scribble,n=e.zoom,r=e.color,i=e.opacity,o=e.className;if(t.points.length){var a=Wa(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return oa(da(la(e,t),t),t)}(t.points,{size:t.size/n,start:{taper:!0,easing:wo.linear},last:"stopping"===t.state,simulatePressure:!1,streamline:.32}));return(0,to.jsx)("svg",{className:o?so("tl-overlays__item",o):o,children:(0,to.jsx)("path",{className:"tl-scribble",d:a,fill:null!=r?r:"var(--color-".concat(t.color,")"),opacity:null!=i?i:t.opacity})})}},fs=function(){return(0,to.jsx)("div",{className:"tl-shape-error-boundary"})},ps=function(){return(0,to.jsx)("circle",{cx:4,cy:4,r:8,strokeWidth:"1",stroke:"red"})};function hs(e){var t,n,r,i,o=e.points,a=2.5/e.zoom,s=o.reduce(function(e,t){return Math.min(e,t.x)},1/0),l=o.reduce(function(e,t){return Math.max(e,t.x)},-1/0),u=o.reduce(function(e,t){return Math.min(e,t.y)},1/0),c=o.reduce(function(e,t){return Math.max(e,t.y)},-1/0);return i=o.some(function(e){return e.x===s&&e.y===u})?(t=s,n=u,r=l,c):(t=s,n=c,r=l,u),(0,to.jsxs)("g",{className:"tl-snap-line",children:[(0,to.jsx)("line",{x1:t,y1:n,x2:r,y2:i}),o.map(function(e,t){return(0,to.jsx)("g",{transform:"translate(".concat(e.x,",").concat(e.y,")"),children:(0,to.jsx)("path",{className:"tl-snap-point",d:"M ".concat(-a,",").concat(-a," L ").concat(a,",").concat(a," M ").concat(-a,",").concat(a," L ").concat(a,",").concat(-a)})},t)})]})}function vs(e){var t,n=e.gaps,r=e.direction,i=3.5/e.zoom,o=[-1/0,1/0],a=null,s="horizontal"===r,l=ce(n);try{for(l.s();!(t=l.n()).done;){var u=t.value;(a=Vo(o[0],o[1],s?u.startEdge[0].y:u.startEdge[0].x,s?u.startEdge[1].y:u.startEdge[1].x))&&(a=Vo((o=a)[0],o[1],s?u.endEdge[0].y:u.endEdge[0].x,s?u.endEdge[1].y:u.endEdge[1].x))&&(o=a)}}catch(e){l.e(e)}finally{l.f()}if(null===o)return null;var c=(o[0]+o[1])/2;return(0,to.jsx)("g",{className:"tl-snap-line",children:n.map(function(e,t){var n=e.startEdge,r=e.endEdge;return(0,to.jsx)(_e.Fragment,{children:s?(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("line",{x1:n[0].x,y1:c-2*i,x2:n[1].x,y2:c+2*i}),(0,to.jsx)("line",{x1:r[0].x,y1:c-2*i,x2:r[1].x,y2:c+2*i}),(0,to.jsx)("line",{x1:n[0].x,y1:c,x2:r[0].x,y2:c}),(0,to.jsx)("line",{x1:(n[0].x+r[0].x)/2,y1:c-i,x2:(n[0].x+r[0].x)/2,y2:c+i})]}):(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("line",{x1:c-2*i,y1:n[0].y,x2:c+2*i,y2:n[1].y}),(0,to.jsx)("line",{x1:c-2*i,y1:r[0].y,x2:c+2*i,y2:r[1].y}),(0,to.jsx)("line",{x1:c,y1:n[0].y,x2:c,y2:r[0].y}),(0,to.jsx)("line",{x1:c-i,y1:(n[0].y+r[0].y)/2,x2:c+i,y2:(n[0].y+r[0].y)/2})]})},t)})})}var gs=function(e){var t=e.className,n=e.line,r=e.zoom;return(0,to.jsx)("svg",{className:so("tl-overlays__item",t),children:"points"===n.type?(0,to.jsx)(hs,Pe(Pe({},n),{},{zoom:r})):"gaps"===n.type?(0,to.jsx)(vs,Pe(Pe({},n),{},{zoom:r})):null})},ms=function(){return(0,to.jsx)("svg",{width:16,height:16,viewBox:"0 0 16 16",children:(0,to.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,to.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"var(--color-text-1)"}),(0,to.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"var(--color-text-1)",children:(0,to.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})})},ys=function(){return null},bs=["children","fallback"],ws={error:null},xs=function(e){M(o,_e.Component);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"state",ws),e}return P(o,[{key:"componentDidCatch",value:function(e){var t,n;null===(t=(n=this.props).onError)||void 0===t||t.call(n,e)}},{key:"render",value:function(){var e=this.state.error;return null!==e?this.props.fallback(e):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),o}();function ks(e){var t=e.children,n=e.fallback,r=Gt(e,bs);return null===n?(0,to.jsx)(to.Fragment,{children:t}):(0,to.jsx)(xs,Pe(Pe({fallback:n},r),{},{children:t}))}var Ss=function(){function t(e){z(this,t),this.shape=e}return P(t,[{key:"equals",value:function(e){var t,n;return(null===(t=this.shape)||void 0===t?void 0:t.props)===(null==e||null===(n=e.shape)||void 0===n?void 0:n.props)}}]),t}(),_s=function(e){var t=e.shape,n=e.util;return lo("Indicator:"+t.type,function(){return n.indicator(t)})},Es=function(e){var t=e.editor,n=e.id,r=ho("shape",function(){return new Ss(t.store.get(n))},[t,n]),i=Ts().ShapeIndicatorErrorFallback;return r.shape?(0,to.jsx)(ks,{fallback:i?function(e){return(0,to.jsx)(i,{error:e})}:null,onError:function(e){return t.annotateError(e,{origin:"react.shapeIndicator",willCrashApp:!1})},children:(0,to.jsx)(_s,{shape:r.shape,util:t.getShapeUtil(r.shape)},r.shape.id)}):null},Ps=_e.memo(function(e){var t=e.id,n=e.className,r=e.color,i=e.opacity,o=mo(),a=ho("transform",function(){var e=o.getPageTransformById(t);return e?e.toCssString():""},[o,t]);return(0,to.jsx)("svg",{className:so("tl-overlays__item",n),children:(0,to.jsx)("g",{className:"tl-shape-indicator",transform:a,stroke:null!=r?r:"var(--color-selected)",opacity:i,children:(0,to.jsx)(Es,{editor:o,id:t})})})}),Cs=(0,_e.createContext)({});function Is(e){var t=e.overrides,n=e.children;return(0,to.jsx)(Cs.Provider,{value:Pe({Background:Qa,SvgDefs:ys,Brush:Ja,ZoomBrush:Ja,CollaboratorBrush:Ja,Cursor:ts,CollaboratorCursor:ts,CollaboratorHint:es,CollaboratorShapeIndicator:Ps,Grid:us,Scribble:ds,SnapLine:gs,Handle:cs,CollaboratorScribble:ds,ErrorFallback:oc,ShapeErrorFallback:fs,ShapeIndicatorErrorFallback:ps,Spinner:ms},t),children:n})}function Ts(){return(0,_e.useContext)(Cs)}var Ms=["textarea","input"];function As(){return(As="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}var js=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},Os=function(e,t){return[e[0]+t[0],e[1]+t[1]]},Ls=function(e,t){return[e[0]-t[0],e[1]-t[1]]},zs=function(e,t){e[0]+=t[0],e[1]+=t[1]};function Rs(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function Ns(e,t,n){var r,i,o,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:.15;return 0===a?(r=e,i=t,o=n,Math.max(i,Math.min(r,o))):e<t?-Rs(t-e,n-t,a)+t:n<e?+Rs(e-n,n-t,a)+n:e}function Ds(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return String(e);var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Fs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bs(Object(n),!0).forEach(function(e){Ds(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bs(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Us={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ks(e){return e?e[0].toUpperCase()+e.slice(1):""}var Vs=["enter","leave"];var Ws=["gotpointercapture","lostpointercapture"];function Hs(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var r=Ws.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function Ys(e){return"touches"in e}function Xs(e,t){try{var n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,o=(t.clientY+e.clientY)/2,a=Math.hypot(n,r);return{angle:-180*Math.atan2(n,r)/Math.PI,distance:a,origin:[i,o]}}catch(e){}return null}function qs(e,t){var n=Ce(Array.from(e.touches).filter(function(e){return t.includes(e.identifier)}),2);return Xs(n[0],n[1])}function $s(e){var t=e.deltaX,n=e.deltaY,r=e.deltaMode;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function Gs(e){if("function"!=typeof e)return e;for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}function Qs(){}function Zs(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return 0===r.length?Qs:1===r.length?r[0]:function(){for(var e,t=0,n=r;t<n.length;t++)e=n[t].apply(this,arguments)||e;return e}}function Js(e,t){return Object.assign({},t,e||{})}var el=function(){function r(e,t,n){z(this,r),this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return P(r,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,r=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?Gs(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,r=this.shared;t.args=this.args;var i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,r=e.altKey,i=e.metaKey,o=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}(e)),r.down=r.pressed=r.buttons%2==1||0<r.touches,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var o=t._delta.map(Math.abs);zs(t._distance,o)}this.axisIntent&&this.axisIntent(e);var a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k=Ce(t._movement,2),S=k[0],_=k[1],E=Ce(n.threshold,2),P=E[0],C=E[1],I=t._step,T=t.values;if(n.hasCustomTransform?(!1===I[0]&&(I[0]=Math.abs(S)>=P&&T[0]),!1===I[1]&&(I[1]=Math.abs(_)>=C&&T[1])):(!1===I[0]&&(I[0]=Math.abs(S)>=P&&Math.sign(S)*P),!1===I[1]&&(I[1]=Math.abs(_)>=C&&Math.sign(_)*C)),t.intentional=!1!==I[0]||!1!==I[1],t.intentional){var M=[0,0];if(n.hasCustomTransform){var A=Ce(T,2),j=A[0],O=A[1];M[0]=!1!==I[0]?j-I[0]:0,M[1]=!1!==I[1]?O-I[1]:0}else M[0]=!1!==I[0]?S-I[0]:0,M[1]=!1!==I[1]?_-I[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(M);var L=t.offset,z=t._active&&!t._blocked||t.active;z&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=Gs(n.bounds,t)),this.setup&&this.setup()),t.movement=M,this.computeOffset()));var R=Ce(t.offset,2),N=R[0],D=R[1],B=Ce(t._bounds,2),F=Ce(B[0],2),U=F[0],K=F[1],V=Ce(B[1],2),W=V[0],H=V[1];t.overflow=[N<U?-1:K<N?1:0,D<W?-1:H<D?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var Y=t._active&&n.rubberband||[0,0];if(t.offset=(a=t._bounds,s=t.offset,l=Y,u=Ce(s,2),c=u[0],d=u[1],f=Ce(l,2),p=f[0],h=f[1],v=Ce(a,2),g=Ce(v[0],2),m=g[0],y=g[1],b=Ce(v[1],2),w=b[0],x=b[1],[Ns(c,m,y,p),Ns(d,w,x,h)]),t.delta=Ls(t.offset,L),this.computeMovement(),z&&(!t.last||32<i)){t.delta=Ls(t.offset,L);var X=t.delta.map(Math.abs);zs(t.distance,X),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&0<i&&(t.velocity=[X[0]/i,X[1]/i],t.timeDelta=i)}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var r=this.handler(Fs(Fs(Fs({},t),e),{},Ee({},this.aliasKey,e.values)));void 0!==r&&(e.memo=r)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),r}(),tl=function(e){M(o,el);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ds(R(e=i.call.apply(i,[this].concat(n))),"aliasKey","xy"),e}return P(o,[{key:"reset",value:function(){As(A(o.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=Os(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=Ls(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t,n,r,i,o,a,s,l=this.state,u=this.config;if(!l.axis&&e){var c="object"==typeof u.axisThreshold?u.axisThreshold[function(e){return Ys(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}(e)]:u.axisThreshold;l.axis=(t=l._movement,n=c,r=Ce(t,2),i=r[0],o=r[1],a=Math.abs(i),(s=Math.abs(o))<a&&n<a?"x":a<s&&n<s?"y":void 0)}l._blocked=(u.lockDirection||!!u.axis)&&!l.axis||!!u.axis&&u.axis!==l.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),o}(),nl=function(e){return e},rl={enabled:function(){return!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},eventOptions:function(e,t,n){return Fs(Fs({},n.shared.eventOptions),e)},preventDefault:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents:function(){return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]},rubberband:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return js(e)}},from:function(e){return"function"==typeof e?e:null!=e?js(e):void 0},transform:function(e,t,n){var r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||nl},threshold:function(e){return js(e,0)}},il=Fs(Fs({},rl),{},{axis:function(e,t,n){var r=n.axis;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold:function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:0},bounds:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if("function"==typeof t)return function(e){return il.bounds(t(e))};if("current"in t)return function(){return t.current};if("function"==typeof HTMLElement&&t instanceof HTMLElement)return t;var e=t.left,n=void 0===e?-1/0:e,r=t.right,i=void 0===r?1/0:r,o=t.top,a=void 0===o?-1/0:o,s=t.bottom;return[[n,i],[a,void 0===s?1/0:s]]}}),ol="undefined"!=typeof window&&window.document&&window.document.createElement;function al(){return ol&&"ontouchstart"in window||ol&&1<window.navigator.maxTouchPoints}var sl={isBrowser:ol,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:al(),touchscreen:al(),pointer:ol&&"onpointerdown"in window,pointerLock:ol&&"exitPointerLock"in window.document},ll={mouse:0,touch:0,pen:8};function ul(e){var t=Ce(e.overflow,2),n=t[0],r=t[1],i=Ce(e._delta,2),o=i[0],a=i[1],s=Ce(e._direction,2),l=s[0],u=s[1];(n<0&&0<o&&l<0||0<n&&o<0&&0<l)&&(e._movement[0]=e._movementBound[0]),(r<0&&0<a&&u<0||0<r&&a<0&&0<u)&&(e._movement[1]=e._movementBound[1])}Fs(Fs({},il),{},{device:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,o=i.touch,a=void 0!==o&&o,s=i.lock,l=void 0!==s&&s,u=i.mouse,c=void 0!==u&&u;return this.pointerLock=l&&sl.pointerLock,sl.touch&&a?"touch":this.pointerLock?"mouse":sl.pointer&&!c?"pointer":sl.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var r=n.preventScroll;if(this.preventScrollDelay="number"==typeof r?r:r||void 0===r&&e?250:void 0,sl.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture:function(e,t,n){var r=n.pointer,i=void 0===r?{}:r,o=i.capture,a=void 0===o||o,s=i.buttons,l=void 0===s?1:s,u=i.keys,c=void 0===u||u;return this.pointerButtons=l,this.keys=c,!this.pointerLock&&"pointer"===this.device&&a},threshold:function(e,t,n){var r=n.filterTaps,i=void 0!==r&&r,o=n.tapsThreshold,a=void 0===o?3:o,s=n.axis,l=js(e,i?a:(void 0===s?void 0:s)?1:0);return this.filterTaps=i,this.tapsThreshold=a,l},swipe:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,r=e.distance,i=void 0===r?50:r,o=e.duration,a=void 0===o?250:o;return{velocity:this.transform(js(n)),distance:this.transform(js(i)),duration:a}},delay:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?Fs(Fs({},ll),e):ll},keyboardDisplacement:function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:10}});var cl=function(e){M(o,el);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ds(R(e=i.call.apply(i,[this].concat(n))),"ingKey","pinching"),Ds(R(e),"aliasKey","da"),e}return P(o,[{key:"init",value:function(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}},{key:"reset",value:function(){As(A(o.prototype),"reset",this).call(this);var e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}},{key:"computeOffset",value:function(){var e=this.state,t=e.type,n=e.movement,r=e.lastOffset;this.state.offset="wheel"===t?Os(n,r):[(1+n[0])*r[0],n[1]+r[1]]}},{key:"computeMovement",value:function(){var e=this.state,t=e.offset,n=e.lastOffset;this.state.movement=[t[0]/n[0],t[1]-n[1]]}},{key:"axisIntent",value:function(){var e=this.state,t=Ce(e._movement,2),n=t[0],r=t[1];if(!e.axis){var i=30*Math.abs(n)-Math.abs(r);i<0?e.axis="angle":0<i&&(e.axis="scale")}}},{key:"restrictToAxis",value:function(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||setTimeout(function(){t.canceled=!0,t._active=!1,e.compute(),e.emit()},0)}},{key:"touchStart",value:function(e){this.ctrl.setEventIds(e);var t=this.state,n=this.ctrl.touchIds;if(!(t._active&&t._touchIds.every(function(e){return n.has(e)})||n.size<2)){this.start(e),t._touchIds=Array.from(n).slice(0,2);var r=qs(e,t._touchIds);r&&this.pinchStart(e,r)}}},{key:"pointerStart",value:function(e){if(null==e.buttons||e.buttons%2==1){this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);var t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if(!(t._active&&Array.from(n.keys()).every(function(e){return r.has(e)})||(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2))){this.start(e);var i=Xs.apply(void 0,de(Array.from(n.values())));i&&this.pinchStart(e,i)}}}},{key:"pinchStart",value:function(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}},{key:"touchMove",value:function(e){if(this.state._active){var t=qs(e,this.state._touchIds);t&&this.pinchMove(e,t)}}},{key:"pointerMove",value:function(e){var t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),this.state._active){var n=Xs.apply(void 0,de(Array.from(t.values())));n&&this.pinchMove(e,n)}}},{key:"pinchMove",value:function(e,t){var n=this.state,r=n._values[1],i=t.angle-r,o=0;270<Math.abs(i)&&(o+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*o]),n.origin=t.origin,n.turns=o,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}},{key:"touchEnd",value:function(e){var t=this;this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(function(e){return!t.ctrl.touchIds.has(e)})&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"pointerEnd",value:function(e){var t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(e){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}},{key:"gestureStart",value:function(e){e.cancelable&&e.preventDefault();var t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}},{key:"gestureMove",value:function(e){if(e.cancelable&&e.preventDefault(),this.state._active){var t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];var n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=Ls(t._movement,n),this.compute(e),this.emit()}}},{key:"gestureEnd",value:function(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}},{key:"wheel",value:function(e){var t=this.config.modifierKey;t&&!e[t]||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}},{key:"wheelStart",value:function(e){this.start(e),this.wheelChange(e)}},{key:"wheelChange",value:function(e){"uv"in e||e.cancelable&&e.preventDefault();var t=this.state;t._delta=[-$s(e)[1]/100*t.offset[0],0],zs(t._movement,t._delta),ul(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}]),o}(),dl=Fs(Fs({},rl),{},{device:function(e,t,n){var r=n.shared,i=n.pointer,o=(void 0===i?{}:i).touch,a=void 0!==o&&o;if(r.target&&!sl.touch&&sl.gesture)return"gesture";if(sl.touch&&a)return"touch";if(sl.touchscreen){if(sl.pointer)return"pointer";if(sl.touch)return"touch"}},bounds:function(e,t,n){var r=n.scaleBounds,i=void 0===r?{}:r,o=n.angleBounds,a=void 0===o?{}:o,s=function(e){var t=Js(Gs(i,e),{min:-1/0,max:1/0});return[t.min,t.max]},l=function(e){var t=Js(Gs(a,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!=typeof i&&"function"!=typeof a?[s(),l()]:function(e){return[s(e),l(e)]}},threshold:function(e,t,n){return this.lockDirection="lock"===n.axis,js(e,this.lockDirection?[.1,3]:0)},modifierKey:function(e){return void 0===e?"ctrlKey":e},pinchOnWheel:function(){return!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}}),fl=(Fs(Fs({},il),{},{mouseOnly:function(){return!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}}),function(e){M(o,tl);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ds(R(e=i.call.apply(i,[this].concat(n))),"ingKey","wheeling"),e}return P(o,[{key:"wheel",value:function(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}},{key:"wheelChange",value:function(e){var t=this.state;t._delta=$s(e),zs(t._movement,t._delta),ul(t),this.compute(e),this.emit()}},{key:"wheelEnd",value:function(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}},{key:"bind",value:function(e){e("wheel","",this.wheel.bind(this))}}]),o}()),pl=il,hl=(Fs(Fs({},il),{},{mouseOnly:function(){return!(0<arguments.length&&void 0!==arguments[0])||arguments[0]}}),new Map),vl=new Map;function gl(e){hl.set(e.key,e.engine),vl.set(e.key,e.resolver)}var ml={key:"pinch",engine:cl,resolver:dl},yl={key:"wheel",engine:fl,resolver:pl};var bl={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){return!(0<arguments.length&&void 0!==arguments[0])||arguments[0]},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return 0<arguments.length&&void 0!==arguments[0]?arguments[0]:sl.isBrowser?window:void 0}),eventOptions:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,r=e.capture;return{passive:n,capture:void 0!==r&&r}},transform:function(e){return e}},wl=["target","eventOptions","window","enabled","transform"];function xl(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n={},r=0,i=Object.entries(t);r<i.length;r++){var o=Ce(i[r],2),a=o[0],s=o[1];switch(typeof s){case"function":n[a]=s.call(n,e[a],a,e);break;case"object":n[a]=xl(e[a],s);break;case"boolean":s&&(n[a]=e[a])}}return n}var kl=function(){function n(e,t){z(this,n),Ds(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}return P(n,[{key:"add",value:function(t,e,n,r,i){var o=this._listeners,a=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=Us[e];return e+(n&&n[t]||t)}(e,n),s=Fs(Fs({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);t.addEventListener(a,r,s);var l=function e(){t.removeEventListener(a,r,s),o.delete(e)};return o.add(l),l}},{key:"clean",value:function(){this._listeners.forEach(function(e){return e()}),this._listeners.clear()}}]),n}(),Sl=function(){function e(){z(this,e),Ds(this,"_timeouts",new Map)}return P(e,[{key:"add",value:function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var i=arguments.length,o=new Array(3<i?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,r].concat(o)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach(function(e){window.clearTimeout(e)}),this._timeouts.clear()}}]),e}(),_l=function(){function r(e){var t,n;z(this,r),Ds(this,"gestures",new Set),Ds(this,"_targetEventStore",new kl(this)),Ds(this,"gestureEventStores",{}),Ds(this,"gestureTimeoutStores",{}),Ds(this,"handlers",{}),Ds(this,"config",{}),Ds(this,"pointerIds",new Set),Ds(this,"touchIds",new Set),Ds(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),t=this,(n=e).drag&&El(t,"drag"),n.wheel&&El(t,"wheel"),n.scroll&&El(t,"scroll"),n.move&&El(t,"move"),n.pinch&&El(t,"pinch"),n.hover&&El(t,"hover")}return P(r,[{key:"setEventIds",value:function(e){return Ys(e)?(this.touchIds=new Set(function(e){return(r=e,Array.from(r.touches).filter(function(e){var t,n;return e.target===r.currentTarget||(null===(t=r.currentTarget)||void 0===t||null===(n=t.contains)||void 0===n?void 0:n.call(t,e.target))})).map(function(e){return e.identifier});var r}(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=e,i=r.target,o=r.eventOptions,a=r.window,s=r.enabled,l=r.transform,u=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,wl);if(n.shared=xl({target:i,eventOptions:o,window:a,enabled:s,transform:l},bl),t){var c=vl.get(t);n[t]=xl(Fs({shared:n.shared},u),c)}else for(var d in u){var f=vl.get(d);f&&(n[d]=xl(Fs({shared:n.shared},u[d]),f))}return n}(e,t,this.config)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=ce(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(e){t.e(e)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var n=this,e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var i,o=this.config.shared,a={};if(!o.target||(i=o.target())){if(o.enabled){var s,l=ce(this.gestures);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=this.config[u],d=Pl(a,c.eventOptions,!!i);c.enabled&&new(hl.get(u))(this,r,u).bind(d)}}catch(e){l.e(e)}finally{l.f()}var f=Pl(a,o.eventOptions,!!i),p=function(t){f(t,"",function(e){return n.nativeHandlers[t](Fs(Fs({},n.state.shared),{},{event:e,args:r}))},void 0,!0)};for(var h in this.nativeHandlers)p(h)}for(var v in a)a[v]=Zs.apply(void 0,de(a[v]));if(!i)return a;for(var g in a){var m=Hs(g),y=m.device,b=m.capture,w=m.passive;this._targetEventStore.add(i,y,"",a[g],{capture:b,passive:w})}}}}]),r}();function El(e,t){e.gestures.add(t),e.gestureEventStores[t]=new kl(e,t),e.gestureTimeoutStores[t]=new Sl}var Pl=function(c,d,f){return function(e,t,n){var r,i,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=4<arguments.length&&void 0!==arguments[4]&&arguments[4],s=null!==(r=o.capture)&&void 0!==r?r:d.capture,l=null!==(i=o.passive)&&void 0!==i?i:d.passive,u=a?e:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=Us[e],i=r&&r[t]||t;return"on"+Ks(e)+Ks(i)+(function(){var e=1<arguments.length?arguments[1]:void 0;return 0<arguments.length&&void 0!==arguments[0]&&arguments[0]&&!Vs.includes(e)}(n,i)?"Capture":"")}(e,t,s);f&&l&&(u+="Passive"),c[u]=c[u]||[],c[u].push(n)}},Cl=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Il(e,n,r,t,i,o){if(e.has(r)&&hl.has(t)){var a=r+"Start",s=r+"End";i[t]=function(e){var t=void 0;return e.first&&a in n&&n[a](e),r in n&&(t=n[r](e)),e.last&&s in n&&n[s](e),t},o[t]=o[t]||{}}}var Tl=Rj(2061),Ml=10,Al=/Mac|iPod|iPhone|iPad/.test("undefined"==typeof window?"node":window.navigator.platform);function jl(e){var t=e.deltaY,n=e.deltaX,r=0;if(e.ctrlKey||e.altKey||e.metaKey){var i=Math.sign(e.deltaY),o=t;Math.abs(e.deltaY)>Ml&&(o=Ml*i),r=o/100}else e.shiftKey&&!Al&&(n=t,t=0);return{x:-n,y:-t,z:-r}}var Ol=([yl,ml].forEach(gl),function(e,t){var n=function(e,t){var n=Ce(function(e){var t={},n={},r=new Set;for(var i in e)Cl.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}(e),3),r=n[0],i=n[1],o=n[2],a={};return Il(o,r,"onDrag","drag",a,t),Il(o,r,"onWheel","wheel",a,t),Il(o,r,"onScroll","scroll",a,t),Il(o,r,"onPinch","pinch",a,t),Il(o,r,"onMove","move",a,t),Il(o,r,"onHover","hover",a,t),{handlers:a,config:t,nativeHandlers:i}}(e,t||{}),r=n.handlers,i=n.nativeHandlers;return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0,r=3<arguments.length?arguments[3]:void 0,i=_e.useMemo(function(){return new _l(e)},[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),_e.useEffect(i.effect.bind(i)),_e.useEffect(function(){return i.clean.bind(i)},[]),void 0===t.target)return i.bind.bind(i)}(r,n.config,void 0,i)}),Ll=void 0;function zl(e,t,n){var r=e.getShapeById(t);return{shape:r,handle:e.getShapeUtil(r).handles(r).find(function(e){return e.id===n})}}var Rl=function(a,s,l){return new Promise(function(t,n){var e=8*s*a,r=document.createElement("canvas");r.width=e,r.height=e;var i=r.getContext("2d");if(i){i.fillStyle=l?"#212529":"#f8f9fa",i.fillRect(0,0,e,e),i.globalCompositeOperation="destination-out",i.lineCap="round",i.lineWidth=1.25*s*a;var o=function(e){return e*s*a};i.beginPath(),i.moveTo(o(8/12*1),o(2)),i.lineTo(o(2),o(8/12*1)),i.moveTo(o(8/12*5),o(8/12*7)),i.lineTo(o(8/12*7),o(8/12*5)),i.moveTo(o(6),o(8/12*11)),i.lineTo(o(8/12*11),o(6)),i.stroke(),r.toBlob(function(e){!e||Pa.throwToBlob.value?n():t(e)})}})},Nl=function(e,t){var n=document.createElement("canvas");n.width=e[0],n.height=e[1];var r=n.getContext("2d");return r?(t(r),n.toDataURL()):""},Dl=8/12;function Bl(t,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:dt;(0,_e.useEffect)(function(){var e=new Rt(t,n);return e.attach(),e.execute(),function(){e.detach()}},e)}var Fl=Rj(8422);function Ul(e){var t=mo(),n=(0,_e.useMemo)(function(){return t.store.query.records("instance_presence",function(){return{userId:{eq:e}}})},[t,e]),r=ho("latestPresence:".concat(e),function(){return n.value.slice().sort(function(e,t){return t.lastActivityTimestamp-e.lastActivityTimestamp})[0]},[]);return null!=r?r:null}var Kl=po(function(){var e=function(){var e=mo(),t=(0,_e.useMemo)(function(){return e.store.query.records("instance_presence",function(){return{userId:{neq:e.user.id}}})},[e]);return ho(function(){var e=arguments[0],t=arguments[1],n=3===arguments.length?void 0:arguments[2],r=3===arguments.length?arguments[2]:arguments[3];return(0,_e.useMemo)(function(){return zt("useComputed(".concat(e,")"),t,n)},r)}("userIds",function(){return Fl(t.value.map(function(e){return e.userId})).sort()},{isEqual:function(e,t){var n;return e.join(",")===(null===(n=t.join)||void 0===n?void 0:n.call(t,","))}},[t]))}();return(0,to.jsx)(to.Fragment,{children:e.map(function(e){return(0,to.jsx)(Vl,{userId:e},e)})})}),Vl=po(function(e){var t=e.userId,n=mo(),r=n.viewportPageBounds,i=n.zoomLevel,o=Ts(),a=o.CollaboratorBrush,s=o.CollaboratorScribble,l=o.CollaboratorCursor,u=o.CollaboratorHint,c=o.CollaboratorShapeIndicator,d=Ul(t),f=Ce((0,_e.useState)(!1),2),p=f[0],h=f[1],v=(0,_e.useRef)(-1);if((0,_e.useEffect)(function(){var e=setInterval(function(){h(3e3<Date.now()-v.current)},1200);return function(){return clearInterval(e)}},[]),!d)return null;if(v.current=d.lastActivityTimestamp,p&&n.instanceState.followingUserId!==t&&!n.instanceState.highlightedUserIds.includes(t))return null;if(d.currentPageId!==n.currentPageId)return null;var g=d.brush,m=d.scribble,y=d.selectedIds,b=d.userName,w=d.cursor,x=d.color,k=d.chatMessage,S=!(w.x<r.minX-12/i||w.y<r.minY-16/i||w.x>r.maxX-12/i||w.y>r.maxY-16/i);return(0,to.jsxs)(to.Fragment,{children:[g&&a?(0,to.jsx)(a,{className:"tl-collaborator__brush",brush:g,color:x,opacity:.1},t+"_brush"):null,S&&l?(0,to.jsx)(l,{className:"tl-collaborator__cursor",point:w,color:x,zoom:i,name:"New User"!==b?b:null,chatMessage:k},t+"_cursor"):u?(0,to.jsx)(u,{className:"tl-collaborator__cursor-hint",point:w,color:x,zoom:i,viewport:r},t+"_cursor_hint"):null,m&&s?(0,to.jsx)(s,{className:"tl-collaborator__scribble",scribble:m,color:x,zoom:i,opacity:"laser"===m.color?.5:.1},t+"_scribble"):null,c&&y.map(function(e){return(0,to.jsx)(c,{className:"tl-collaborator__shape-indicator",id:e,color:x,opacity:.5},t+"_"+e)})]})}),Wl=po(function(){var n=mo(),e=_e.useMemo(function(){return{onPointerDown:function(e){if(!e.isKilled){La(e.currentTarget,e);var t=Pe({type:"pointer",target:"selection",name:"pointer_down"},Ua(e,n.getContainer()));n.dispatch(t)}},onPointerMove:function(e){if(!e.isKilled){var t=Pe({type:"pointer",target:"selection",name:"pointer_move"},Ua(e,n.getContainer()));n.dispatch(t)}},onPointerUp:function(e){if(!e.isKilled){za(e.currentTarget,e);var t=Pe({type:"pointer",target:"selection",name:"pointer_up"},Ua(e,n.getContainer()));n.dispatch(t)}},onPointerEnter:function(e){if(!e.isKilled){var t=Pe({type:"pointer",target:"selection",name:"pointer_enter"},Ua(e,n.getContainer()));n.dispatch(t)}},onPointerLeave:function(e){if(!e.isKilled){var t=Pe({type:"pointer",target:"selection",name:"pointer_leave"},Ua(e,n.getContainer()));n.dispatch(t)}}}},[n]),t=n.selectionBounds,r=n.selectedIds;if(!t)return null;var i=n.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","text.resizing");if(1===r.length){var o=n.getShapeById(r[0]);if(!o)return null;if(n.getShapeUtil(o).hideSelectionBoundsBg(o))return null}var a=na.toCssString(na.Compose(na.Translate(t.minX,t.minY),na.Rotate(n.selectionRotation)));return(0,to.jsx)("div",Pe({className:"tl-selection__bg",draggable:!1,style:{transform:a,width:Yo(Math.max(1,t.width)),height:Yo(Math.max(1,t.height)),pointerEvents:i?"all":"none",opacity:i?1:0}},e))}),Hl=["children","className"];function Yl(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=Gt(e,Hl);return(0,to.jsx)("div",Pe(Pe({},i),{},{className:"tl-html-container ".concat(r),children:t}))}function Xl(e){var t=mo();return ho("isEditing",function(){return t.editingId===e},[t,e])}var ql=function(e,n){return!!e.find(function(e){var t=new RegExp(function(e){return e.split("*").map(function(e){return function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e)}).join(".+")}(e));return n.match(t)})};function $l(e){var t;return null!==(t=function(e){var t,n=new URL(e).host.replace("www.",""),r=ce(mi);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(ql(i.hostnames,n)){var o=i.toEmbedUrl(e);if(o)return{definition:i,embedUrl:o,url:e}}}}catch(e){r.e(e)}finally{r.f()}}(e))&&void 0!==t?t:function(e){var t,n=new URL(e).host.replace("www.",""),r=ce(mi);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(ql(i.hostnames,n)){var o=i.fromEmbedUrl(e);if(o)return{definition:i,url:o,embedUrl:e}}}}catch(e){r.e(e)}finally{r.f()}}(e)}function Gl(e){try{return $l(e)}catch(e){console.error(e)}}var Ql=Object.defineProperty,Zl=Object.getOwnPropertyDescriptor,Jl=function(e,t,n,r){for(var i,o=1<r?void 0:r?Zl(t,n):t,a=e.length-1;0<=a;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Ql(t,n,o),o},eu=function(){function i(e,t,n){var r=this;z(this,i),Ee(this,"canSnap",function(){return!0}),Ee(this,"canScroll",function(){return!1}),Ee(this,"canUnmount",function(){return!0}),Ee(this,"canBind",function(e,t){return!0}),Ee(this,"canEdit",function(){return!1}),Ee(this,"canResize",function(){return!0}),Ee(this,"canCrop",function(){return!1}),Ee(this,"getEditingBounds",function(e){return r.bounds(e)}),Ee(this,"isClosed",function(){return!0}),Ee(this,"hideResizeHandles",function(){return!1}),Ee(this,"hideRotateHandle",function(){return!1}),Ee(this,"hideSelectionBoundsBg",function(){return!1}),Ee(this,"hideSelectionBoundsFg",function(){return!1}),Ee(this,"isAspectRatioLocked",function(){return!1}),Ee(this,"onBeforeCreate",void 0),Ee(this,"onBeforeUpdate",void 0),Ee(this,"onDragShapesOver",void 0),Ee(this,"onDragShapesOut",void 0),Ee(this,"onDropShapesOver",void 0),Ee(this,"onResizeStart",void 0),Ee(this,"onResize",void 0),Ee(this,"onResizeEnd",void 0),Ee(this,"onTranslateStart",void 0),Ee(this,"onTranslate",void 0),Ee(this,"onTranslateEnd",void 0),Ee(this,"onRotateStart",void 0),Ee(this,"onRotate",void 0),Ee(this,"onRotateEnd",void 0),Ee(this,"onHandleChange",void 0),Ee(this,"onBindingChange",void 0),Ee(this,"onChildrenChange",void 0),Ee(this,"onDoubleClickHandle",void 0),Ee(this,"onDoubleClickEdge",void 0),Ee(this,"onDoubleClick",void 0),Ee(this,"onClick",void 0),Ee(this,"onEditEnd",void 0),this.editor=e,this.type=t,this.styleProps=n}return P(i,[{key:"hasStyle",value:function(e){return this.styleProps.has(e)}},{key:"getStyleIfExists",value:function(e,t){var n=this.styleProps.get(e);if(n)return t.props[n]}},{key:"iterateStyles",value:io().mark(function e(t){var n,r,i,o,a,s;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=ce(this.styleProps),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=10;break}return i=Ce(r.value,2),o=i[0],a=i[1],s=t.props[a],e.next=8,[o,s];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,12,15,18]])})},{key:"setStyleInPartial",value:function(e,t,n){var r=this.styleProps.get(e);return r?Pe(Pe({},t),{},{props:Pe(Pe({},t.props),{},Ee({},r,n))}):t}},{key:"handlesCache",get:function(){var t=this;return this.editor.store.createComputedCache("handles:"+this.type,function(e){return t.getHandles(e)})}},{key:"handles",value:function(e){var t;return this.getHandles&&null!==(t=this.handlesCache.get(e.id))&&void 0!==t?t:dt}},{key:"getOutlineSegments",value:function(e){return[this.outline(e)]}},{key:"outlineSegmentsCache",get:function(){var t=this;return this.editor.store.createComputedCache("outline-segments:"+this.type,function(e){return t.getOutlineSegments(e)})}},{key:"outlineSegments",value:function(e){var t;return this.getOutlineSegments&&null!==(t=this.outlineSegmentsCache.get(e.id))&&void 0!==t?t:dt}},{key:"boundsCache",get:function(){var t=this;return this.editor.store.createComputedCache("bounds:"+this.type,function(e){return t.getBounds(e)})}},{key:"bounds",value:function(e){var t,n=null!==(t=this.boundsCache.get(e.id))&&void 0!==t?t:new $o;return 0===n.width||0===n.height?new $o(n.x,n.y,Math.max(n.width,1),Math.max(n.height,1)):n}},{key:"outlineCache",get:function(){var t=this;return this.editor.store.createComputedCache("outline:"+this.type,function(e){return t.getOutline(e)})}},{key:"outline",value:function(e){var t;return null!==(t=this.outlineCache.get(e.id))&&void 0!==t?t:dt}},{key:"snapPoints",value:function(e){return this.bounds(e).snapPoints}},{key:"center",value:function(e){return this.getCenter(e)}},{key:"canReceiveNewChildrenOfType",value:function(e,t){return!1}},{key:"canDropShapes",value:function(e,t){return!1}},{key:"hitTestPoint",value:function(e,t){return this.bounds(e).containsPoint(t)}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++)if(ya(t,n,r[i],r[(i+1)%r.length]))return!0;return!1}},{key:"expandSelectionOutlinePx",value:function(e){return 0}},{key:"providesBackgroundForChildren",value:function(e){return!1}}]),i}();Ee(eu,"type",void 0),Jl([zt],eu.prototype,"handlesCache",1),Jl([zt],eu.prototype,"outlineSegmentsCache",1),Jl([zt],eu.prototype,"boundsCache",1),Jl([zt],eu.prototype,"outlineCache",1);var tu=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=t.newPoint,i=t.handle,o=t.scaleX,a=t.scaleY,s=n.minWidth,l=void 0===s?1:s,u=n.maxWidth,c=void 0===u?1/0:u,d=n.minHeight,f=void 0===d?1:d,p=n.maxHeight,h=void 0===p?1/0:p,v=e.props.w*o,g=e.props.h*a,m=new xo(0,0);if(0<v){if(v<l){switch(i){case"top_left":case"left":case"bottom_left":m.x=v-l;break;case"top":case"bottom":m.x=(v-l)/2;break;default:m.x=0}v=l}}else if((v=-(m.x=v))<l){switch(i){case"top_left":case"left":case"bottom_left":m.x=-v;break;default:m.x=-l}v=l}if(0<g){if(g<f){switch(i){case"top_left":case"top":case"top_right":m.y=g-f;break;case"right":case"left":m.y=(g-f)/2;break;default:m.y=0}g=f}}else if((g=-(m.y=g))<f){switch(i){case"top_left":case"top":case"top_right":m.y=-g;break;default:m.y=-f}g=f}var y=m.rot(e.rotation).add(r);return{x:y.x,y:y.y,props:{w:Math.min(c,v),h:Math.min(h,g)}}},nu=function(e){M(o,eu);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"onResize",function(e,t){return tu(e,t)}),e}return P(o,[{key:"getBounds",value:function(e){return new $o(0,0,e.props.w,e.props.h)}},{key:"getCenter",value:function(e){return new xo(e.props.w/2,e.props.h/2)}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"hitTestPoint",value:function(e,t){return Ho(t,this.outline(e))}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++)if(ya(t,n,r[i],r[(i+1)%r.length]))return!0;return!1}}]),o}(),ru=function(e){M(g,nu);var r=N(g);function g(){var u;z(this,g);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(u=r.call.apply(r,[this].concat(t))),"hideSelectionBoundsBg",function(e){return!u.canResize(e)}),Ee(R(u),"hideSelectionBoundsFg",function(e){return!u.canResize(e)}),Ee(R(u),"canEdit",function(){return!0}),Ee(R(u),"canUnmount",function(e){var t,n;return!(null===(t=Gl(e.props.url))||void 0===t||null===(n=t.definition)||void 0===n||!n.canUnmount)}),Ee(R(u),"canResize",function(e){var t,n;return!(null===(t=Gl(e.props.url))||void 0===t||null===(n=t.definition)||void 0===n||!n.doesResize)}),Ee(R(u),"isAspectRatioLocked",function(e){var t,n=Gl(e.props.url);return null!==(t=null==n?void 0:n.definition.isAspectRatioLocked)&&void 0!==t&&t}),Ee(R(u),"onResize",function(e,t){var n,r,i=u.isAspectRatioLocked(e),o=Gl(e.props.url),a=null!==(n=null==o?void 0:o.definition.minWidth)&&void 0!==n?n:200,s=null!==(r=null==o?void 0:o.definition.minHeight)&&void 0!==r?r:200;if(i){var l=e.props.w/e.props.h;1<l?a*=l:s/=l}return tu(e,t,{minWidth:a,minHeight:s})}),u}return P(g,[{key:"defaultProps",value:function(){return{w:300,h:300,url:""}}},{key:"render",value:function(e){var t,n,i=this,r=e.props,o=r.w,a=r.h,s=r.url,l=Xl(e.id),u=(0,_e.useMemo)(function(){return $l(s)},[s]),c=ho("is hovering",function(){var e=i.editor.pageState,t=e.editingId,n=e.hoveredId;if(t&&n!==t){var r=i.editor.getShapeById(t);if(r&&i.editor.isShapeOfType(r,g))return!0}return!1},[]),d=this.editor.getPageRotation(e),f=l||c;if("github_gist"===(null==u?void 0:u.definition.type)){var p=u.url.split("/").pop();if(!p)throw Error("No gist id!");return(0,to.jsx)(Yl,{className:"tl-embed-container",id:e.id,children:(0,to.jsx)(iu,{id:p,width:Yo(o),height:Yo(a),isInteractive:f,pageRotation:d})})}var h,v=(h=Pe(Pe({},yi),null!==(t=null==u?void 0:u.definition.overridePermissions)&&void 0!==t?t:{}),Object.entries(h).filter(function(e){var t=Ce(e,2);return t[0],t[1]}).map(function(e){return Ce(e,1)[0]}).join(" "));return(0,to.jsx)(Yl,{className:"tl-embed-container",id:e.id,children:null!=u&&u.definition?(0,to.jsx)("iframe",{className:"tl-embed tl-embed-".concat(e.id),sandbox:v,src:u.embedUrl,width:Yo(o),height:Yo(a),draggable:!1,frameBorder:"0",referrerPolicy:"no-referrer-when-downgrade",style:{border:0,pointerEvents:f?"auto":"none",zIndex:f?"":"-1",boxShadow:Na(d),borderRadius:null!==(n=null==u?void 0:u.definition.overrideOutlineRadius)&&void 0!==n?n:8,background:null==u?void 0:u.definition.backgroundColor}}):(0,to.jsx)("g",{transform:"translate(".concat((o-38)/2,", ").concat((a-38)/2,")"),children:(0,to.jsx)(ms,{})})})}},{key:"indicator",value:function(e){var t,n,r=(0,_e.useMemo)(function(){return Gl(e.props.url)},[e.props.url]);return(0,to.jsx)("rect",{width:Yo(e.props.w),height:Yo(e.props.h),rx:null!==(t=null==r?void 0:r.definition.overrideOutlineRadius)&&void 0!==t?t:8,ry:null!==(n=null==r?void 0:r.definition.overrideOutlineRadius)&&void 0!==n?n:8})}}]),g}();function iu(e){var t=e.id,n=e.file,r=e.isInteractive,i=e.width,o=e.height,a=e.style,s=e.pageRotation;return(0,to.jsx)("iframe",{className:"tl-embed",draggable:!1,width:Yo(i),height:Yo(o),frameBorder:"0",scrolling:"no",seamless:!0,referrerPolicy:"no-referrer-when-downgrade",style:Pe(Pe({},a),{},{pointerEvents:r?"all":"none",zIndex:r?"":"-1",boxShadow:Na(s)}),srcDoc:'\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<base target="_blank">\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<script src='.concat("https://gist.github.com/".concat(t,".js").concat(n?"?file=".concat(n):""),'><\/script>\n\t\t\t\t\t<style type="text/css">\n\t\t\t\t\t\t* { margin: 0px; }\n\t\t\t\t\t\ttable { height: 100%; background-color: red; }\n\t\t\t\t\t\t.gist { background-color: none; height: 100%;  }\n\t\t\t\t\t\t.gist .gist-file { height: calc(100vh - 2px); padding: 0px; display: grid; grid-template-rows: 1fr auto; }\n\t\t\t\t\t</style>\n\t\t\t\t</body>\n\t\t\t</html>')})}Ee(ru,"type","embed");var ou=function(){function e(){z(this,e),Ee(this,"items",new WeakMap)}return P(e,[{key:"get",value:function(e,t){return this.items.has(e)||this.items.set(e,t(e)),this.items.get(e)}},{key:"access",value:function(e){return this.items.get(e)}},{key:"set",value:function(e,t){this.items.set(e,t)}},{key:"has",value:function(e){return this.items.has(e)}},{key:"invalidate",value:function(e){this.items.delete(e)}},{key:"bust",value:function(){this.items=new WeakMap}}]),e}();function au(e,t){return e.match(/^\s*$/)?t:e}function su(e,t,n){var r,i,o=n.padding,a=void 0===o?0:o,s=document.createElementNS("http://www.w3.org/2000/svg","text");if(s.setAttribute("font-size",n.fontSize+"px"),s.setAttribute("font-family",n.fontFamily),s.setAttribute("font-style",n.fontStyle),s.setAttribute("font-weight",n.fontWeight),s.setAttribute("line-height",n.lineHeight*n.fontSize+"px"),s.setAttribute("dominant-baseline","mathematical"),s.setAttribute("alignment-baseline","mathematical"),0===t.length)return s;var l,u=$o.From(t[0].box),c=ce(t);try{for(c.s();!(l=c.n()).done;){var d=l.value.box;u.union(d)}}catch(e){c.e(e)}finally{c.f()}var f,p=a+(null!==(r=n.offsetX)&&void 0!==r?r:0),h=(null!==(i=n.offsetY)&&void 0!==i?i:0)+n.fontSize/2+("start"===n.verticalTextAlign?a:"end"===n.verticalTextAlign?n.height-a-u.height:(Math.ceil(n.height)-u.height)/2),v=null,g=ce(t);try{for(g.s();!(f=g.n()).done;){var m=f.value,y=m.text,b=m.box;if(null!==v&&b.y>v){var w=document.createElementNS("http://www.w3.org/2000/svg","tspan");w.setAttribute("alignment-baseline","mathematical"),w.setAttribute("x",p+"px"),w.setAttribute("y",b.y+h+"px"),w.textContent="\n",s.appendChild(w)}var x=document.createElementNS("http://www.w3.org/2000/svg","tspan");x.setAttribute("alignment-baseline","mathematical"),x.setAttribute("x",b.x+p+"px"),x.setAttribute("y",b.y+h+"px");var k=y.replace(/\s/g," ");x.textContent=k,s.appendChild(x),v=b.y}}catch(e){g.e(e)}finally{g.f()}return n.stroke&&n.strokeWidth&&(s.setAttribute("stroke",n.stroke),s.setAttribute("stroke-width",n.strokeWidth+"px")),n.fill&&s.setAttribute("fill",n.fill),s}var lu={lineHeight:1.35,fontWeight:"normal",fontVariant:"normal",fontStyle:"normal",padding:"0px",maxWidth:"auto"},uu={s:2,m:3.5,l:5,xl:10},cu={s:18,m:24,l:36,xl:44},du={s:18,m:22,l:26,xl:32},fu={s:18,m:20,l:24,xl:28},pu={draw:"var(--tl-font-draw)",sans:"var(--tl-font-sans)",serif:"var(--tl-font-serif)",mono:"var(--tl-font-mono)"},hu="  ",vu=function(){function v(){z(this,v)}return P(v,null,[{key:"insertTextFirefox",value:function(e,t){e.setRangeText(t,e.selectionStart||0,e.selectionEnd||0,"end"),e.dispatchEvent(new InputEvent("input",{data:t,inputType:"insertText",isComposing:!1}))}},{key:"insert",value:function(e,t){var n=e.ownerDocument,r=n.activeElement;r!==e&&e.focus(),n.execCommand("insertText",!1,t)||v.insertTextFirefox(e,t),r===n.body?e.blur():r instanceof HTMLElement&&r!==e&&r.focus()}},{key:"set",value:function(e,t){e.select(),v.insert(e,t)}},{key:"getSelection",value:function(e){var t=e.selectionStart,n=e.selectionEnd;return e.value.slice(t||void 0,n||void 0)}},{key:"wrapSelection",value:function(e,t,n){var r=e.selectionStart,i=e.selectionEnd,o=v.getSelection(e);v.insert(e,t+o+(null!=n?n:t)),e.selectionStart=(r||0)+t.length,e.selectionEnd=(i||0)+t.length}},{key:"replace",value:function(a,e,s){var l=0;a.value.replace(e,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=l+t[t.length-2],i=t[0].length;a.selectionStart=r,a.selectionEnd=r+i;var o="string"==typeof s?s:s.apply(void 0,t);return v.insert(a,o),a.selectionStart=r,l+=o.length-i,o})}},{key:"findLineEnd",value:function(e,t){var n=e.lastIndexOf("\n",t-1)+1;return"\t"!==e.charAt(n)?t:n+1}},{key:"indent",value:function(e){var t,n=e.selectionStart,r=e.selectionEnd,i=e.value,o=i.slice(n,r),a=null===(t=/\n/g.exec(o))||void 0===t?void 0:t.length;if(a&&0<a){var s=i.lastIndexOf("\n",n-1)+1,l=e.value.slice(s,r-1),u=l.replace(/^|\n/g,"$&".concat(hu)),c=u.length-l.length;e.setSelectionRange(s,r-1),v.insert(e,u),e.setSelectionRange(n+1,r+c)}else v.insert(e,hu)}},{key:"unindent",value:function(e){var t=e.selectionStart,n=e.selectionEnd,r=e.value,i=r.lastIndexOf("\n",t-1)+1,o=v.findLineEnd(r,n),a=e.value.slice(i,o),s=a.replace(/(^|\n)(\t| {1,2})/g,"$1"),l=a.length-s.length;e.setSelectionRange(i,o),v.insert(e,s);var u=/\t| {1,2}/.exec(r.slice(i,t)),c=u?u[0].length:0,d=t-c;e.setSelectionRange(t-c,Math.max(d,n-l))}},{key:"indentCE",value:function(e){var t,n,r,i=window.getSelection(),o=e.innerText,a=null!==(t=gu(e))&&void 0!==t?t:0,s=null!==(n=gu(e))&&void 0!==n?n:0,l=o.slice(a,s),u=null===(r=/\n/g.exec(l))||void 0===r?void 0:r.length;if(u&&0<u){var c=o.lastIndexOf("\n",a-1)+1,d=o.slice(c,s-1),f=d.replace(/^|\n/g,"$&".concat(hu)).length-d.length;i&&i.setBaseAndExtent(e,a+1,e,s+f)}else{var p=window.getSelection();e.innerText=o.slice(0,a)+hu+o.slice(a),null==p||p.setBaseAndExtent(e,a+1,e,a+2)}}},{key:"unindentCE",value:function(e){var t,n,r=window.getSelection(),i=e.innerText,o=null!==(t=gu(e))&&void 0!==t?t:0,a=null!==(n=gu(e))&&void 0!==n?n:0,s=i.lastIndexOf("\n",o-1)+1,l=v.findLineEnd(i,a),u=i.slice(s,l),c=u.replace(/(^|\n)(\t| {1,2})/g,"$1"),d=u.length-c.length;if(r){r.setBaseAndExtent(e,s,e,l);var f=/\t| {1,2}/.exec(i.slice(s,o)),p=f?f[0].length:0,h=o-p;r.setBaseAndExtent(e,o-p,e,Math.max(h,a-d))}}},{key:"normalizeText",value:function(e){return e.replace(v.fixNewLines,"\n")}},{key:"normalizeTextForDom",value:function(e){return e.replace(v.fixNewLines,"\n").split("\n").map(function(e){return e||" "}).join("\n")}}]),v}();function gu(e){if(void 0!==window.getSelection){var t=window.getSelection();if(t){var n=0;if(0!==t.rangeCount){var r=t.getRangeAt(0),i=r.cloneRange();i.selectNodeContents(e),i.setEnd(r.endContainer,r.endOffset),n=i.toString().length}return n}}}function mu(i,o,e){var a=mo(),s=(0,_e.useRef)(null),t=ho("isEditing",function(){return a.pageState.editingId===i},[a,i]),l=(0,_e.useRef)(!1),u=(0,_e.useRef)(),n=ho("is editable hovering",function(){if("text"===o&&a.isIn("text")&&a.hoveredId===i)return!0;if(a.isIn("select.editing_shape")){var e=a.editingShape;return!!e&&a.hoveredId===i&&e.type===o&&a.getShapeUtil(e).canEdit(e)}return!1},[o,i]),r=(0,_e.useCallback)(function(){n||requestAnimationFrame(function(){var e=s.current;if(e){var t=a.getShapeById(i);t&&(e.value=t.props.text,e.value.length&&!l.current&&e.select(),l.current=!1)}})},[a,i,n]),c=(0,_e.useCallback)(function(){var r=u.current;requestAnimationFrame(function(){var e,t=s.current;if(a.isIn("select.editing_shape")&&t)if(r)if(r.length){l.current=!0,t.focus();var n=window.getSelection();n&&r.forEach(function(e){return n.addRange(e)})}else t.focus();else t.focus();else null===(e=window.getSelection())||void 0===e||e.removeAllRanges(),a.complete()})},[a]),d=(0,_e.useCallback)(function(e){switch((e.ctrlKey||e.metaKey)&&Fa(e),e.key){case"Enter":(e.ctrlKey||e.metaKey)&&a.complete();break;case"Tab":Oa(e),e.shiftKey?vu.unindent(e.currentTarget):vu.indent(e.currentTarget)}},[a]),f=(0,_e.useCallback)(function(e){var t=vu.normalizeText(e.currentTarget.value),n=t.replace(/\t/g,hu);if(n!==t){var r=e.currentTarget.selectionStart;e.currentTarget.value=n,e.currentTarget.selectionStart=r+(n.length-t.length),e.currentTarget.selectionEnd=r+(n.length-t.length),t=n}a.updateShapes([{id:i,type:o,props:{text:t}}])},[a,i,o]),p=0===e.trim().length;return(0,_e.useEffect)(function(){if(s.current){var e=function(){var e,t,n=null===(e=(t=window).getSelection)||void 0===e?void 0:e.call(t);if(n&&"None"!==n.type){var r=[];if(n)for(var i=0;i<n.rangeCount;i++){var o;r.push(null===(o=n.getRangeAt)||void 0===o?void 0:o.call(n,i))}u.current=r}};return document.addEventListener("selectionchange",e),function(){document.removeEventListener("selectionchange",e)}}}),{rInput:s,isEditing:t,isEditableFromHover:n,handleFocus:r,handleBlur:c,handleKeyDown:d,handleChange:f,isEmpty:p}}Ee(vu,"fixNewLines",/\r?\n|\r/g);var yu=new ou,bu=function(e){M(i,eu);var r=N(i);function i(){var p;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(p=r.call.apply(r,[this].concat(t))),"canEdit",function(){return!0}),Ee(R(p),"isAspectRatioLocked",function(){return!0}),Ee(R(p),"onResize",function(e,t){var n=t.initialBounds,r=t.initialShape,i=t.scaleX,o=t.handle;if("scale_shape"===t.mode||"right"!==o&&"left"!==o)return function(e,t){var n=t.initialBounds,r=t.scaleX,i=t.scaleY,o=t.newPoint,a=Math.max(.01,Math.min(Math.abs(r),Math.abs(i))),s=new xo(0,0);r<0&&(s.x=-n.width*a),i<0&&(s.y=-n.height*a);var l=xo.Add(o,s.rot(e.rotation));return{x:l.x,y:l.y,props:{scale:a*e.props.scale}}}(e,t);var a=n.width,s=a*i,l=new xo(0,0);s=Math.max(1,Math.abs(s)),"left"===o?(l.x=a-s,i<0&&(l.x+=s)):i<0&&(l.x-=s);var u=l.rot(e.rotation).add(r);return{x:u.x,y:u.y,props:{w:s/r.props.scale,autoSize:!1}}}),Ee(R(p),"onBeforeCreate",function(e){if(e.props.autoSize&&!e.props.text.trim()){var t=p.getMinDimensions(e);return Pe(Pe({},e),{},{x:e.x-t.width/2,y:e.y-t.height/2})}}),Ee(R(p),"onEditEnd",function(e){var t=e.id,n=e.type,r=e.props.text,i=e.props.text.trimEnd();0===i.length?p.editor.deleteShapes([e.id]):i!==e.props.text&&p.editor.updateShapes([{id:t,type:n,props:{text:r.trimEnd()}}])}),Ee(R(p),"onBeforeUpdate",function(e,t){if(t.props.autoSize){var n=e.props.size!==t.props.size||e.props.align!==t.props.align||e.props.font!==t.props.font||1!==e.props.scale&&1===t.props.scale,r=e.props.text!==t.props.text;if(n||r){var i,o=p.getMinDimensions(e),a=wu(p.editor,t.props),s=o.width*e.props.scale,l=o.height*e.props.scale,u=a.width*t.props.scale,c=a.height*t.props.scale;switch(t.props.align){case"middle":i=new xo((u-s)/2,r?0:(c-l)/2);break;case"end":i=new xo(u-s,r?0:(c-l)/2);break;default:if(r)break;i=new xo(0,(c-l)/2)}if(i){i.rot(t.rotation);var d=t.x,f=t.y;return Pe(Pe({},t),{},{x:d-i.x,y:f-i.y,props:Pe(Pe({},t.props),{},{w:u})})}return Pe(Pe({},t),{},{props:Pe(Pe({},t.props),{},{w:u})})}}}),Ee(R(p),"onDoubleClickEdge",function(e){return e.props.autoSize?1!==e.props.scale?{id:e.id,type:e.type,props:{scale:1}}:void 0:{id:e.id,type:e.type,props:{autoSize:!0}}}),p}return P(i,[{key:"defaultProps",value:function(){return{color:"black",size:"m",w:8,text:"",font:"draw",align:"middle",autoSize:!0,scale:1}}},{key:"getMinDimensions",value:function(e){var t=this;return yu.get(e.props,function(e){return wu(t.editor,e)})}},{key:"getBounds",value:function(e){var t=e.props.scale,n=this.getMinDimensions(e),r=n.width,i=n.height;return new $o(0,0,r*t,i*t)}},{key:"getOutline",value:function(e){var t=this.bounds(e);return[new xo(0,0),new xo(t.width,0),new xo(t.width,t.height),new xo(0,t.height)]}},{key:"getCenter",value:function(e){var t=this.bounds(e);return new xo(t.width/2,t.height/2)}},{key:"render",value:function(e){var t=e.id,n=e.type,r=e.props.text,i=this.getMinDimensions(e),o=i.width,a=i.height,s=mu(t,n,r),l=s.rInput,u=s.isEmpty,c=s.isEditing,d=s.isEditableFromHover,f=s.handleFocus,p=s.handleChange,h=s.handleKeyDown,v=s.handleBlur;return(0,to.jsx)(Yl,{id:e.id,children:(0,to.jsxs)("div",{className:"tl-text-shape__wrapper tl-text-shadow","data-font":e.props.font,"data-align":e.props.align,"data-hastext":!u,"data-isediting":c||d,"data-textwrap":!0,style:{fontSize:cu[e.props.size],lineHeight:cu[e.props.size]*lu.lineHeight+"px",transform:"scale(".concat(e.props.scale,")"),transformOrigin:"top left",width:Math.max(1,o),height:Math.max(cu[e.props.size]*lu.lineHeight,a)},children:[(0,to.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:r}),c||d?(0,to.jsx)("textarea",{ref:l,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:c,placeholder:"",spellCheck:"true",wrap:"off",dir:"ltr",datatype:"wysiwyg",defaultValue:r,onFocus:f,onChange:p,onKeyDown:h,onBlur:v,onTouchEnd:Fa,onContextMenu:Fa}):null]})})}},{key:"indicator",value:function(e){var t=this.bounds(e);return(0,to.jsx)("rect",{width:Yo(t.width),height:Yo(t.height)})}},{key:"toSvg",value:function(e,t,n){var r,i,o=this.bounds(e),a=e.props.text,s=o.width/(null!==(r=e.props.scale)&&void 0!==r?r:1),l=o.height/(null!==(i=e.props.scale)&&void 0!==i?i:1),u={fontSize:cu[e.props.size],fontFamily:t,textAlign:e.props.align,verticalTextAlign:"middle",width:s,height:l,padding:0,lineHeight:lu.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},c=n.fill[e.props.color],d=document.createElementNS("http://www.w3.org/2000/svg","g"),f=su(this.editor,this.editor.textMeasure.measureTextSpans(a,u),Pe(Pe({},u),{},{stroke:n.background,strokeWidth:2,fill:n.background,padding:0})),p=f.cloneNode(!0);return p.setAttribute("fill",c),p.setAttribute("stroke","none"),d.append(f),d.append(p),d}}]),i}();function wu(e,t){var n=t.font,r=t.text,i=t.autoSize,o=t.size,a=t.w,s=cu[o],l=i?"fit-content":Math.floor(Math.max(16,a))+"px",u=e.textMeasure.measureText(r,Pe(Pe({},lu),{},{fontFamily:pu[n],fontSize:s,width:l}));return i&&(u.w+=1),{width:Math.max(16,u.w),height:Math.max(s,u.h)}}Ee(bu,"type","text");var xu="<path d='m19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill='%23fff'/><path d='m18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill='%23000'/>",ku="<path d='m9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill='%23fff'/><path d='m17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill='%23000'/>",Su='<path d="M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill="white"/>';function _u(e,t,n,r,i){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:16,a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:16,s=So/180*(-n-t),l=Math.sin(s),u=Math.cos(s),c=1*u-1*l,d=1*l+1*u;return"url(\"data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg' style='color: ".concat(i,";'><defs><filter id='shadow' y='-40%' x='-40%' width='180px' height='180%' color-interpolation-filters='sRGB'><feDropShadow dx='").concat(c,"' dy='").concat(d,"' stdDeviation='1.2' flood-opacity='.5'/></filter></defs><g fill='none' transform='rotate(").concat(t+n," 16 16)").concat(r?" scale(-1,-1) translate(0, -32)":"","' filter='url(%23shadow)'>")+e.replaceAll('"',"'")+'</g></svg>") '.concat(o," ").concat(a,", pointer")}var Eu={none:function(){return"none"},default:function(e,t,n){return _u('<path d="m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z" fill="white"/><path d="m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z" fill="white"/><path d="m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z" fill="black"/><path d="m13 10.814v11.188l2.969-2.866.428-.139h4.768z" fill="black"/>',e,0,t,n,12,8)},pointer:function(e,t,n){return _u('<path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.3315 21.3799c-.284-.359-.629-1.093-1.243-1.984-.348-.504-1.211-1.453-1.468-1.935-.223-.426-.199-.617-.146-.97.094-.628.738-1.117 1.425-1.051.519.049.959.392 1.355.716.239.195.533.574.71.788.163.196.203.277.377.509.23.307.302.459.214.121-.071-.496-.187-1.343-.355-2.092-.128-.568-.159-.657-.281-1.093-.129-.464-.195-.789-.316-1.281-.084-.348-.235-1.059-.276-1.459-.057-.547-.087-1.439.264-1.849.275-.321.906-.418 1.297-.22.512.259.803 1.003.936 1.3.239.534.387 1.151.516 1.961.164 1.031.466 2.462.476 2.763.024-.369-.068-1.146-.004-1.5.058-.321.328-.694.666-.795.286-.085.621-.116.916-.055.313.064.643.288.766.499.362.624.369 1.899.384 1.831.086-.376.071-1.229.284-1.584.14-.234.497-.445.687-.479.294-.052.655-.068.964-.008.249.049.586.345.677.487.218.344.342 1.317.379 1.658.015.141.074-.392.293-.736.406-.639 1.843-.763 1.898.639.025.654.02.624.02 1.064 0 .517-.012.828-.04 1.202-.031.4-.117 1.304-.242 1.742-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.191 1.813-.118.562-.079.566-.102.965-.023.398.121.922.121.922s-.802.104-1.234.035c-.391-.063-.875-.841-1-1.079-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.031-3.139.02 0 0 .185-1.011-.227-1.358-.305-.259-.83-.784-1.144-1.06z" stroke-linejoin="round"/><path d="m21.5664 21.7344v-3.459"/><path d="m19.5508 21.7461-.016-3.473"/><path d="m17.5547 18.3047.021 3.426"/></g>',e,0,t,n,14,10)},cross:function(e,t,n){return _u('<path d="m25 16h-6.01v-6h-2.98v6h-6.01v3h6.01v6h2.98v-6h6.01z" fill="white"/><path d="m23.9902 17.0103h-6v-6.01h-.98v6.01h-6v.98h6v6.01h.98v-6.01h6z" fill="%23231f1f"/>',e,0,t,n)},move:function(e,t,n){return _u('<path d="m19 14h1v1h-1zm1 6h-1v-1h1zm-5-5h-1v-1h1zm0 5h-1v-1h1zm2-10.987-7.985 7.988 5.222 5.221 2.763 2.763 7.984-7.985z" fill="white"/><g fill="black"><path d="m23.5664 16.9971-2.557-2.809v1.829h-4.009-4.001v-1.829l-2.571 2.809 2.572 2.808-.001-1.808h4.001 4.009l-.001 1.808z"/><path d="m17.9873 17h.013v-4.001l1.807.001-2.807-2.571-2.809 2.57h1.809v4.001h.008v4.002l-1.828-.001 2.807 2.577 2.805-2.576h-1.805z"/></g>',e,0,t,n)},grab:function(e,t,n){return _u('<path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill="white"/><g stroke="black" stroke-linecap="round" stroke-width=".75"><path d="m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin="round"/><path d="m20.5664 21.7344v-3.459"/><path d="m18.5508 21.7461-.016-3.473"/><path d="m16.5547 18.3047.021 3.426"/></g>',e,0,t,n)},grabbing:function(e,t,n){return _u("<path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill='white'/><g stroke='black' stroke-width='.75'><path d='m13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin='round'/><path d='m20.5664 19.7344v-3.459' stroke-linecap='round'/><path d='m18.5508 19.7461-.016-3.473' stroke-linecap='round'/><path d='m16.5547 16.3047.021 3.426' stroke-linecap='round'/></g>",e,0,t,n)},text:function(e,t,n){return _u('<path fill="white" d="M7.94 0a5.25 5.25 0 0 0-3.47 1.17A5.27 5.27 0 0 0 1 0H0v3h1c1.41 0 1.85.7 2 1v3.94H2v3h1v3c-.13.3-.57 1-2 1H0v3h1a5.27 5.27 0 0 0 3.47-1.17c.98.8 2.21 1.21 3.47 1.17h1v-3h-1c-1.41 0-1.85-.7-2-1v-3H7v-3H6V4c.13-.3.57-1 2-1h1V0H7.94z"/><path fill="black" d="M7.94 2V1a4 4 0 0 0-3.47 1.64A4 4 0 0 0 1 1v1c1.3-.17 2.56.6 3 1.84v5.1H3v1h1v4.16c-.45 1.24-1.7 2-3 1.84v1a4.05 4.05 0 0 0 3.47-1.63 4.05 4.05 0 0 0 3.47 1.63v-1A2.82 2.82 0 0 1 5 14.1V9.93h1v-1H5V3.85A2.81 2.81 0 0 1 7.94 2z"/>',e,0,t,n,4,10)},"ew-resize":function(e,t,n){return _u(ku,e,0,t,n)},"ns-resize":function(e,t,n){return _u(ku,e,90,t,n)},"nesw-resize":function(e,t,n){return _u(xu,e,0,t,n)},"nwse-resize":function(e,t,n){return _u(xu,e,90,t,n)},"nwse-rotate":function(e,t,n){return _u(Su,e,0,t,n)},"nesw-rotate":function(e,t,n){return _u(Su,e,90,t,n)},"senw-rotate":function(e,t,n){return _u(Su,e,180,t,n)},"swne-rotate":function(e,t,n){return _u(Su,e,270,t,n)},"zoom-in":function(e,t,n){return _u('<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 14h-2v-2h-2v2h-2v1.98h2v2.02h2v-2.02h2z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',e,0,t,n)},"zoom-out":function(e,t,n){return _u('<path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5" fill="white"/><path d="m20.5 15c0 3.038-2.462 5.5-5.5 5.5s-5.5-2.462-5.5-5.5 2.462-5.5 5.5-5.5 5.5 2.462 5.5 5.5z" stroke="black"/><g fill="black"><path d="m18 16h-5.98v-1.98h5.98z"/><path d="m23.5859 25 1.414-1.414-5.449-5.449-1.414 1.414z"/></g>',e,0,t,n)}};function Pu(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"black";return Eu[e](180*t/So,!1,n)}var Cu=["default","pointer","cross","move","grab","grabbing","text"];function Iu(r){var i=mo();return(0,_e.useMemo)(function(){var t,n;return{onPointerDown:function(t){if(!t.isKilled&&0===t.button){var n=ja(t.currentTarget);La(n,t),n.addEventListener("pointerup",function e(){n.removeEventListener("pointerup",e),za(n,t)}),i.dispatch(Pe({name:"pointer_down",type:"pointer",target:"selection",handle:r},Ua(t,i.getContainer()))),t.stopPropagation()}},onPointerMove:function(e){e.isKilled||0===e.button&&(e.clientX===t&&e.clientY===n||(t=e.clientX,n=e.clientY,i.dispatch(Pe({name:"pointer_move",type:"pointer",target:"selection",handle:r},Ua(e,i.getContainer())))))},onPointerUp:function(e){e.isKilled||0===e.button&&i.dispatch(Pe({name:"pointer_up",type:"pointer",target:"selection",handle:r},Ua(e,i.getContainer())))}}},[i,r])}function Tu(e){var t=e.size,n=e.width,r=e.height,i=e.hideAlternateHandles,o=Yo(t/3),a=o/2;return(0,to.jsxs)("svg",{className:"tl-overlays__item",children:[(0,to.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat(Yo(0-a),",").concat(Yo(t)," \n\t\t\t\t\t\t").concat(Yo(0-a),",").concat(Yo(0-a)," \n\t\t\t\t\t\t").concat(Yo(t),",").concat(Yo(0-a)),strokeWidth:o,"data-testid":"selection.crop.top_left","aria-label":"top_left handle"}),(0,to.jsx)("line",{className:so("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:Yo(n/2-t),y1:Yo(0-a),x2:Yo(n/2+t),y2:Yo(0-a),strokeWidth:o,"data-testid":"selection.crop.top","aria-label":"top handle"}),(0,to.jsx)("polyline",{className:so("tl-corner-crop-handle",{"tl-hidden":i}),points:"\n\t\t\t\t\t\t".concat(Yo(n-t),",").concat(Yo(0-a)," \n\t\t\t\t\t\t").concat(Yo(n+a),",").concat(Yo(0-a)," \n\t\t\t\t\t\t").concat(Yo(n+a),",").concat(Yo(t)),strokeWidth:o,"data-testid":"selection.crop.top_right","aria-label":"top_right handle"}),(0,to.jsx)("line",{className:so("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:Yo(n+a),y1:Yo(r/2-t),x2:Yo(n+a),y2:Yo(r/2+t),strokeWidth:o,"data-testid":"selection.crop.right","aria-label":"right handle"}),(0,to.jsx)("polyline",{className:"tl-corner-crop-handle",points:"\n\t\t\t\t\t\t".concat(Yo(n+a),",").concat(Yo(r-t)," \n\t\t\t\t\t\t").concat(Yo(n+a),",").concat(Yo(r+a),"\n\t\t\t\t\t\t").concat(Yo(n-t),",").concat(Yo(r+a)),strokeWidth:o,"data-testid":"selection.crop.bottom_right","aria-label":"bottom_right handle"}),(0,to.jsx)("line",{className:so("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:Yo(n/2-t),y1:Yo(r+a),x2:Yo(n/2+t),y2:Yo(r+a),strokeWidth:o,"data-testid":"selection.crop.bottom","aria-label":"bottom handle"}),(0,to.jsx)("polyline",{className:so("tl-corner-crop-handle",{"tl-hidden":i}),points:"\n\t\t\t\t\t\t".concat(Yo(0+t),",").concat(Yo(r+a)," \n\t\t\t\t\t\t").concat(Yo(0-a),",").concat(Yo(r+a),"\n\t\t\t\t\t\t").concat(Yo(0-a),",").concat(Yo(r-t)),strokeWidth:o,"data-testid":"selection.crop.bottom_left","aria-label":"bottom_left handle"}),(0,to.jsx)("line",{className:so("tl-corner-crop-edge-handle",{"tl-hidden":i}),x1:Yo(0-a),y1:Yo(r/2-t),x2:Yo(0-a),y2:Yo(r/2+t),strokeWidth:o,"data-testid":"selection.crop.left","aria-label":"left handle"})]})}var Mu="undefined"!=typeof navigator&&navigator.userAgent&&-1<navigator.userAgent.toLowerCase().indexOf("firefox"),Au=po(function(){var e,t,n=mo(),r=(0,_e.useRef)(null),i=n.isReadOnly,o=Iu("top"),a=Iu("right"),s=Iu("bottom"),l=Iu("left"),u=Iu("top_left"),c=Iu("top_right"),d=Iu("bottom_right"),f=Iu("bottom_left"),p=!n.isMenuOpen&&"default"===n.cursor.type,h=n.isCoarsePointer,v=n.selectionBounds,g=n.selectedShapes,m=n.onlySelectedShape,y=m&&n.isShapeOrAncestorLocked(m),b=m?n.getShapeUtil(m).expandSelectionOutlinePx(m):0;if(Za(r,null===(e=v)||void 0===e?void 0:e.x,null===(t=v)||void 0===t?void 0:t.y,1,n.selectionRotation,{x:-b,y:-b}),!v)return null;v=v.clone().expandBy(b);var w=n.zoomLevel,x=n.selectionRotation,k=n.isChangingStyle,S=Math.max(1,v.width),_=Math.max(1,v.height),E=8/w,P=S<2*E,C=_<2*E,I=S<4*E,T=_<4*E,M=S<5*E,A=_<5*E,j=h?1.75:1,O=6/w*j,L=.75*j*(I?O/2:O),z=.75*j*(T?O/2:O),R=!(m&&n.getShapeUtil(m).hideSelectionBoundsFg(m)||k),N=R&&n.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_canvas","select.pointing_selection","select.pointing_shape","select.crop.idle","select.crop.pointing_crop","select.pointing_resize_handle","select.pointing_crop_handle","select.editing_shape")||R&&n.isIn("select.resizing")&&m&&n.isShapeOfType(m,bu);m&&n.isShapeOfType(m,ru)&&N&&Mu&&(N=!1);var D=n.isInAny("select.pointing_crop_handle","select.crop.idle","select.crop.pointing_crop")&&!k&&!i,B=n.isInAny("select.idle","select.pointing_selection","select.pointing_shape","select.crop.idle")&&!k&&!i,F=!h&&!(P||C)&&(B||D)&&(!m||!n.getShapeUtil(m).hideRotateHandle(m))&&!y,U=h&&(!I||!T)&&(B||D)&&(!m||!n.getShapeUtil(m).hideRotateHandle(m))&&!y,K=B&&(!m||n.getShapeUtil(m).canResize(m)&&!n.getShapeUtil(m).hideResizeHandles(m))&&!D&&!y,V=P||C,W=P&&C,H=M||A,Y=K||D,X=!F,q=!B||!U,$=!B||!Y,G=!B||!Y||V,Q=!B||!Y||V,Z=!B||!Y||W&&!D,J=h;J&&g.every(function(e){return n.getShapeUtil(e).isAspectRatioLocked(e)})&&(J=!1);var ee=!0;D?ee=H:K&&(ee=V||W||J);var te=Math.min(24/w,_-3*z),ne=B&&h&&m&&n.isShapeOfType(m,bu)&&4<=te*w;return(0,to.jsxs)("svg",{ref:r,className:"tl-overlays__item tl-selection__fg","data-testid":"selection-foreground",children:[N&&(0,to.jsx)("rect",{className:so("tl-selection__fg__outline"),width:Yo(S),height:Yo(_)}),(0,to.jsx)(ju,{"data-testid":"selection.rotate.top-left",cx:0,cy:0,targetSize:O,corner:"top_left_rotate",cursor:p?Pu("nwse-rotate",x):void 0,isHidden:X}),(0,to.jsx)(ju,{"data-testid":"selection.rotate.top-right",cx:S+3*O,cy:0,targetSize:O,corner:"top_right_rotate",cursor:p?Pu("nesw-rotate",x):void 0,isHidden:X}),(0,to.jsx)(ju,{"data-testid":"selection.rotate.bottom-left",cx:0,cy:_+3*O,targetSize:O,corner:"bottom_left_rotate",cursor:p?Pu("swne-rotate",x):void 0,isHidden:X}),(0,to.jsx)(ju,{"data-testid":"selection.rotate.bottom-right",cx:S+3*O,cy:_+3*O,targetSize:O,corner:"bottom_right_rotate",cursor:p?Pu("senw-rotate",x):void 0,isHidden:X})," ",(0,to.jsx)(Lu,{"data-testid":"selection.rotate.mobile",cx:I?1.5*-O:S/2,cy:I?_/2:1.5*-O,size:E,isHidden:q}),(0,to.jsx)("rect",Pe({className:so("tl-transparent",{"tl-hidden":ee}),"data-testid":"selection.resize.top","aria-label":"top target",pointerEvents:"all",x:0,y:Yo(0-(T?2*z:z)),width:Yo(Math.max(1,S)),height:Yo(Math.max(1,2*z)),style:p?{cursor:Pu("ns-resize",x)}:void 0},o)),(0,to.jsx)("rect",Pe({className:so("tl-transparent",{"tl-hidden":ee}),"data-testid":"selection.resize.right","aria-label":"right target",pointerEvents:"all",x:Yo(S-(I?0:L)),y:0,height:Yo(Math.max(1,_)),width:Yo(Math.max(1,2*L)),style:p?{cursor:Pu("ew-resize",x)}:void 0},a)),(0,to.jsx)("rect",Pe({className:so("tl-transparent",{"tl-hidden":ee}),"data-testid":"selection.resize.bottom","aria-label":"bottom target",pointerEvents:"all",x:0,y:Yo(_-(T?0:z)),width:Yo(Math.max(1,S)),height:Yo(Math.max(1,2*z)),style:p?{cursor:Pu("ns-resize",x)}:void 0},s)),(0,to.jsx)("rect",Pe({className:so("tl-transparent",{"tl-hidden":ee}),"data-testid":"selection.resize.left","aria-label":"left target",pointerEvents:"all",x:Yo(0-(I?2*L:L)),y:0,height:Yo(Math.max(1,_)),width:Yo(Math.max(1,2*L)),style:p?{cursor:Pu("ew-resize",x)}:void 0},l)),(0,to.jsx)("rect",Pe({className:so("tl-transparent",{"tl-hidden":$}),"data-testid":"selection.target.top-left","aria-label":"top-left target",pointerEvents:"all",x:Yo(0-(I?2*L:1.5*L)),y:Yo(0-(T?2*z:1.5*z)),width:Yo(3*L),height:Yo(3*z),style:p?{cursor:Pu("nwse-resize",x)}:void 0},u)),(0,to.jsx)("rect",Pe({className:so("tl-transparent",{"tl-hidden":G}),"data-testid":"selection.target.top-right","aria-label":"top-right target",pointerEvents:"all",x:Yo(S-(I?0:1.5*L)),y:Yo(0-(T?2*z:1.5*z)),width:Yo(3*L),height:Yo(3*z),style:p?{cursor:Pu("nesw-resize",x)}:void 0},c)),(0,to.jsx)("rect",Pe({className:so("tl-transparent",{"tl-hidden":Z}),"data-testid":"selection.target.bottom-right","aria-label":"bottom-right target",pointerEvents:"all",x:Yo(S-(I?L:1.5*L)),y:Yo(_-(T?z:1.5*z)),width:Yo(3*L),height:Yo(3*z),style:p?{cursor:Pu("nwse-resize",x)}:void 0},d)),(0,to.jsx)("rect",Pe({className:so("tl-transparent",{"tl-hidden":Q}),"data-testid":"selection.target.bottom-left","aria-label":"bottom-left target",pointerEvents:"all",x:Yo(0-(I?3*L:1.5*L)),y:Yo(_-(T?0:1.5*z)),width:Yo(3*L),height:Yo(3*z),style:p?{cursor:Pu("nesw-resize",x)}:void 0},f)),K&&(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("rect",{"data-testid":"selection.resize.top-left",className:so("tl-corner-handle",{"tl-hidden":$}),"aria-label":"top_left handle",x:Yo(0-E/2),y:Yo(0-E/2),width:Yo(E),height:Yo(E)}),(0,to.jsx)("rect",{"data-testid":"selection.resize.top-right",className:so("tl-corner-handle",{"tl-hidden":G}),"aria-label":"top_right handle",x:Yo(S-E/2),y:Yo(0-E/2),width:Yo(E),height:Yo(E)}),(0,to.jsx)("rect",{"data-testid":"selection.resize.bottom-right",className:so("tl-corner-handle",{"tl-hidden":Z}),"aria-label":"bottom_right handle",x:Yo(S-E/2),y:Yo(_-E/2),width:Yo(E),height:Yo(E)}),(0,to.jsx)("rect",{"data-testid":"selection.resize.bottom-left",className:so("tl-corner-handle",{"tl-hidden":Q}),"aria-label":"bottom_left handle",x:Yo(0-E/2),y:Yo(_-E/2),width:Yo(E),height:Yo(E)})]}),ne&&(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("rect",{"data-testid":"selection.text-resize.left.handle",className:"tl-text-handle","aria-label":"bottom_left handle",x:Yo(0-E/4),y:Yo(_/2-te/2),rx:E/4,width:Yo(E/2),height:Yo(te)}),(0,to.jsx)("rect",{"data-testid":"selection.text-resize.right.handle",className:"tl-text-handle","aria-label":"bottom_left handle",rx:E/4,x:Yo(S-E/4),y:Yo(_/2-te/2),width:Yo(E/2),height:Yo(te)})]}),D&&(0,to.jsx)(Tu,Pe({},{size:E,width:S,height:_,hideAlternateHandles:H}))]})}),ju=function(e){var t=e.cx,n=e.cy,r=e.targetSize,i=e.corner,o=e.cursor,a=e.isHidden,s=e["data-testid"],l=Iu(i);return(0,to.jsx)("rect",Pe({className:so("tl-transparent","tl-rotate-corner",{"tl-hidden":a}),"data-testid":s,"aria-label":"".concat(i," target"),pointerEvents:"all",x:Yo(t-3*r),y:Yo(n-3*r),width:Yo(Math.max(1,3*r)),height:Yo(Math.max(1,3*r)),cursor:o},l))},Ou=Math.sqrt(Math.PI),Lu=function(e){var t=e.cx,n=e.cy,r=e.size,i=e.isHidden,o=e["data-testid"],a=Iu("mobile_rotate");return(0,to.jsxs)("g",{children:[(0,to.jsx)("circle",Pe({"data-testid":o,pointerEvents:"all",className:so("tl-transparent","tl-mobile-rotate__bg",{"tl-hidden":i}),cx:t,cy:n},a)),(0,to.jsx)("circle",{className:so("tl-mobile-rotate__fg",{"tl-hidden":i}),cx:t,cy:n,r:r/Ou})]})},zu=function(n,r,i){return function(e){if("pointer_move"!==i&&n.pageState.editingId===r&&(e.isKilled=!0),!e.isKilled){switch(i){case"pointer_down":if(0!==e.button&&1!==e.button&&2!==e.button)return;La(e.currentTarget,e);break;case"pointer_up":za(e.currentTarget,e)}var t=n.getShapeById(r);t?n.dispatch(Pe({type:"pointer",target:"shape",shape:t,name:i},Ua(e,n.getContainer()))):console.error("Shape not found",r)}}},Ru=po(function(e){var i,o,r=e.id,n=e.index,a=e.backgroundIndex,s=e.opacity,t=e.isCulled,l=mo(),u=Ts().ShapeErrorFallback,c=(i=r,o=mo(),_e.useMemo(function(){var t,n,r=zu(o,i,"pointer_move");return{onPointerDown:zu(o,i,"pointer_down"),onPointerUp:zu(o,i,"pointer_up"),onPointerEnter:zu(o,i,"pointer_enter"),onPointerLeave:zu(o,i,"pointer_leave"),onPointerMove:function(e){if(!e.isKilled&&(e.clientX!==t||e.clientY!==n))return t=e.clientX,n=e.clientY,r(e)},onTouchStart:function(e){e.isKilled=!0,Oa(e)},onTouchEnd:function(e){e.isKilled=!0,Oa(e)}}},[o,i])),d=_e.useRef(null),f=_e.useRef(null),p=_e.useCallback(function(e,t){var n,r;null===(n=d.current)||void 0===n||n.style.setProperty(e,t),null===(r=f.current)||void 0===r||r.style.setProperty(e,t)},[]);Bl("set shape container transform position",function(){var e=l.getShapeById(r),t=l.getPageTransformById(r);if(!e||!t)return null;var n=na.toCssString(t);p("transform",n)},[l,p]),Bl("set shape container clip path",function(){if(!l.getShapeById(r))return null;var e=l.getClipPathById(r);p("clip-path",null!=e?e:"none")},[l,p]),Bl("set shape height and width",function(){var e=l.getShapeById(r);if(!e)return null;var t=l.getShapeUtil(e).bounds(e);p("width",Math.ceil(t.width)+"px"),p("height",Math.ceil(t.height)+"px")},[l]),_e.useLayoutEffect(function(){var e,t;p("opacity",s+""),null===(e=d.current)||void 0===e||e.style.setProperty("z-index",n+""),null===(t=f.current)||void 0===t||t.style.setProperty("z-index",a+"")},[s,n,a,p]);var h=l.getShapeById(r);if(!h)return null;var v=l.getShapeUtil(h);return(0,to.jsxs)(to.Fragment,{children:[v.renderBackground&&(0,to.jsx)("div",{ref:f,className:"tl-shape tl-shape-background","data-shape-type":h.type,draggable:!1,children:!t&&(0,to.jsx)(ks,{fallback:u?function(e){return(0,to.jsx)(u,{error:e})}:null,onError:function(e){return l.annotateError(e,{origin:"react.shape",willCrashApp:!1})},children:(0,to.jsx)(Du,{shape:h,util:v})})}),(0,to.jsx)("div",{ref:d,className:"tl-shape","data-shape-type":h.type,draggable:!1,onPointerDown:c.onPointerDown,onPointerMove:c.onPointerMove,onPointerUp:c.onPointerUp,onPointerEnter:c.onPointerEnter,onPointerLeave:c.onPointerLeave,children:t&&v.canUnmount(h)?(0,to.jsx)(Bu,{shape:h,util:v}):(0,to.jsx)(ks,{fallback:u?function(e){return(0,to.jsx)(u,{error:e})}:null,onError:function(e){return l.annotateError(e,{origin:"react.shape",willCrashApp:!1})},children:(0,to.jsx)(Nu,{shape:h,util:v})})})]})}),Nu=_e.memo(function(e){var t=e.shape,n=e.util;return lo("InnerShape:"+n.type,function(){return n.render(t)})},function(e,t){return e.shape.props===t.shape.props}),Du=_e.memo(function(e){var t=e.shape,n=e.util;return lo("InnerShape:"+n.type,function(){var e;return null===(e=n.renderBackground)||void 0===e?void 0:e.call(n,t)})},function(e,t){return e.shape.props===t.shape.props}),Bu=_e.memo(function(e){var t=e.shape,n=e.util.bounds(t);return(0,to.jsx)("div",{className:"tl-shape__culled",style:{transform:"translate(".concat(n.minX,"px, ").concat(n.minY,"px)"),width:n.width,height:n.height}})},function(){return!0}),Fu=po(function(e){var n,r,i,u,l,a,o,s,t=e.onDropOverride,c=mo(),d=Ts(),f=d.Background,p=d.SvgDefs,h=_e.useRef(null),v=_e.useRef(null);o=mo(),s=qa(),(0,_e.useLayoutEffect)(function(){var t=Tl(function(){o.updateViewportScreenBounds()},200,{trailing:!0}),e=new ResizeObserver(function(e){e[0].contentRect&&t()});return s&&e.observe(s),t(),function(){e.disconnect()}},[o,s]),u=mo(),l=qa(),a=ho("isFocused",function(){return u.isFocused},[u]),(0,_e.useEffect)(function(){if(a){var e=function(e){if(!e.altKey||!u.isIn("zoom")&&u.root.path.value.endsWith(".idle")||Ga()||Oa(e),!e.isKilled){switch(e.isKilled=!0,e.key){case"=":case"-":case"0":if(e.metaKey||e.ctrlKey)return void Oa(e);break;case"Tab":default:if(Ga()||u.isMenuOpen)return;break;case",":if(Ga()||(Oa(e),u.inputs.keys.has("Comma")))break;var t=u.inputs.currentScreenPoint,n=t.x,r=t.y,i=t.z,o=u.pageState.hoveredId;u.inputs.keys.add("Comma");var a=Pe({type:"pointer",name:"pointer_down",point:{x:n,y:r,z:i},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:0,button:0,isPen:u.isPenMode},o?{target:"shape",shape:u.getShapeById(o)}:{target:"canvas"});return void u.dispatch(a);case"Escape":return void(u.inputs.keys.has("Escape")||(u.inputs.keys.add("Escape"),u.cancel(),l.focus()))}var s={type:"keyboard",name:u.inputs.keys.has(e.code)?"key_repeat":"key_down",key:e.key,code:e.code,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey};u.dispatch(s)}},t=function(e){if(!e.isKilled&&(e.isKilled=!0,!Ga()&&!u.isMenuOpen)){var t;if(","===e.key&&(null!==(t=document.activeElement)&&void 0!==t&&t.ELEMENT_NODE&&Oa(e),u.inputs.keys.has(e.code))){var n=u.inputs.currentScreenPoint,r=n.x,i=n.y,o=n.z,a=u.pageState.hoveredId;u.inputs.keys.delete(e.code);var s=Pe({type:"pointer",name:"pointer_up",point:{x:r,y:i,z:o},shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey,pointerId:0,button:0,isPen:u.isPenMode},a?{target:"shape",shape:u.getShapeById(a)}:{target:"canvas"});return void u.dispatch(s)}var l={type:"keyboard",name:"key_up",key:e.key,code:e.code,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey};u.dispatch(l)}},n=function(e){l.contains(e.target)&&(e.ctrlKey||e.metaKey)&&Oa(e)};return l.addEventListener("touchstart",r,{passive:!1}),document.addEventListener("wheel",n,{passive:!1}),document.addEventListener("gesturestart",Oa),document.addEventListener("gesturechange",Oa),document.addEventListener("gestureend",Oa),document.addEventListener("keydown",e),document.addEventListener("keyup",t),window.addEventListener("blur",i),window.addEventListener("focus",o),function(){l.removeEventListener("touchstart",r),document.removeEventListener("wheel",n),document.removeEventListener("gesturestart",Oa),document.removeEventListener("gesturechange",Oa),document.removeEventListener("gestureend",Oa),document.removeEventListener("keydown",e),document.removeEventListener("keyup",t),window.removeEventListener("blur",i),window.removeEventListener("focus",o)}}function r(e){if(l.contains(e.target)){var t,n,r=e.touches[0].pageX,i=e.touches[0].radiusX||0;(r-i<10||r+i>u.viewportScreenBounds.width-10)&&("BUTTON"===(null===(t=e.target)||void 0===t?void 0:t.tagName)&&(null===(n=e.target)||void 0===n||n.click()),Oa(e))}}function i(){u.complete()}function o(){u.updateViewportScreenBounds()}},[u,l,a]),i=mo(),(0,_e.useEffect)(function(){if(window.matchMedia){var e=window.matchMedia("(pointer: coarse)"),t=function(){i.isCoarsePointer=e.matches};return t(),e.addEventListener("change",t),function(){return e.removeEventListener("change",t)}}},[i]),function(v){var g=mo(),e=_e.useMemo(function(){var u=null,o=1,c=1,d=1,f=0,a=new xo,p=new xo,h=Tl(function(e){if(null===u){var t=Math.abs(f-o),n=xo.Dist(a,p);"gesture"===e&&t||"touch"===e&&16<t?u="zooming":16<n&&(u="panning")}},32);return{onWheel:function(e){var t=e.event;if(g.isFocused&&(u=null,n=Date.now(),!(void 0===Ll?(Ll=n,0):120<n-Ll&&n-Ll<160?(Ll=n,1):(Ll=n,0)))){var n;if(g.editingId){var r=g.getShapeById(g.editingId);if(r&&g.getShapeUtil(r).canScroll(r)){var i=g.getPageBoundsById(g.editingId);if(null!=i&&i.containsPoint(g.inputs.currentPagePoint))return}}Oa(t);var o=jl(t);if(0!==o.x||0!==o.y){var a={type:"wheel",name:"wheel",delta:o,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.metaKey||t.ctrlKey};g.dispatch(a)}}},onPinchStart:function(e){var t=v.current;u=null;var n=e.event,r=e.origin,i=e.da;n instanceof WheelEvent||(n.target===t||null!=t&&t.contains(n.target))&&(p.x=r[0],p.y=r[1],a.x=r[0],a.y=r[1],o=i[0],c=g.zoomLevel,g.dispatch({type:"pinch",name:"pinch_start",point:{x:r[0],y:r[1],z:g.zoomLevel},delta:{x:0,y:0},shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.metaKey||n.ctrlKey}))},onPinchEnd:function(e){var t=v.current,n=e.event,r=e.origin,i=e.offset;if(!(n instanceof WheelEvent)&&(n.target===t||null!=t&&t.contains(n.target))){var o=i[0];u=null,requestAnimationFrame(function(){g.dispatch({type:"pinch",name:"pinch_end",point:{x:r[0],y:r[1],z:o},delta:{x:r[0],y:r[1]},shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.metaKey||n.ctrlKey})})}},onPinch:function(e){var t=v.current,n=e.event,r=e.origin,i=e.offset,o=e.da;if(!(n instanceof WheelEvent)&&(n.target===t||null!=t&&t.contains(n.target))){var a=!("touches"in n);f=o[0],(a||64<f)&&(d=i[0]);var s=r[0]-p.x,l=r[1]-p.y;switch(p.x=r[0],p.y=r[1],h(a?"gesture":"touch"),u){case"zooming":g.dispatch({type:"pinch",name:"pinch",point:{x:r[0],y:r[1],z:d},delta:{x:s,y:l},shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.metaKey||n.ctrlKey});break;case"panning":g.dispatch({type:"pinch",name:"pinch",point:{x:r[0],y:r[1],z:c},delta:{x:s,y:l},shiftKey:n.shiftKey,altKey:n.altKey,ctrlKey:n.metaKey||n.ctrlKey})}}}}},[g,v]);Ol(e,{target:v,eventOptions:{passive:!1},pinch:{from:function(){return[g.zoomLevel,0]},scaleBounds:function(){return{from:g.zoomLevel,max:8,min:.05}}}})}(h),n=h,r=mo(),(0,_e.useEffect)(function(){var e=n.current;if(e){var t=function(e){if(e instanceof PointerEvent&&"pen"===e.pointerType){var t;e.isKilled=!0;var n=e.target;if(Ms.includes(null===(t=n.tagName)||void 0===t?void 0:t.toLocaleLowerCase())||r.isIn("select.editing_shape"))return;Oa(e)}};return e.addEventListener("touchstart",t),e.addEventListener("touchend",t),function(){e.removeEventListener("touchstart",t),e.addEventListener("touchend",t)}}},[r,n]),Bl("position layers",function(){var e=v.current;if(e){var t=c.camera,n=t.x,r=t.y,i=t.z,o=1<=i?Q(i,[1,8],[.125,.5],!0):Q(i,[.1,1],[-2,.125],!0);e.style.setProperty("transform","scale(".concat(Yo(i),") translate(").concat(Yo(n+o),"px,").concat(Yo(r+o),"px)"))}},[c]);var g,m=function(){var i=mo().devicePixelRatio,e=Ce((0,_e.useState)(!1),2),t=e[0],o=e[1],n=(0,_e.useMemo)(function(){return function(){for(var e=[],t=1;t<=Math.ceil(8);t++){var n=Nl([1,1],function(e){e.fillStyle="#e8e8e8",e.fillRect(0,0,1,1)}),r=Nl([1,1],function(e){e.fillStyle="#2c3036",e.fillRect(0,0,1,1)});e.push({zoom:t,url:n,darkMode:!1}),e.push({zoom:t,url:r,darkMode:!0})}return e}()},[]),r=Ce((0,_e.useState)(n),2),a=r[0],s=r[1];return(0,_e.useEffect)(function(){for(var e=[],t=function(t){e.push(Rl(i,t,!1).then(function(e){return{zoom:t,url:URL.createObjectURL(e),darkMode:!1}})),e.push(Rl(i,t,!0).then(function(e){return{zoom:t,url:URL.createObjectURL(e),darkMode:!0}}))},n=1;n<=Math.ceil(8);n++)t(n);var r=!1;return Promise.all(e).then(function(e){r||(s(e),o(!0))}),function(){o(!(r=!0))}},[i]),{context:(0,to.jsx)(to.Fragment,{children:a.map(function(e){var t=e.zoom+(e.darkMode?"_dark":"_light");return(0,to.jsx)("pattern",{id:os[t],width:8,height:8,patternUnits:"userSpaceOnUse",children:(0,to.jsx)("image",{href:e.url,width:8,height:8})},t)})}),isReady:t}}(),y=m.context,b=m.isReady,w=(g=mo(),(0,_e.useMemo)(function(){var t,n;function r(){return(r=ao(io().mark(function e(t){var n,r,i,o;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Oa(t),null!==(n=t.dataTransfer)&&void 0!==n&&null!==(r=n.files)&&void 0!==r&&r.length){e.next=3;break}return e.abrupt("return");case 3:return i=Array.from(t.dataTransfer.files).filter(function(e){return!e.name.endsWith(".tldr")}),o=g.getContainer().getBoundingClientRect(),e.next=7,g.putExternalContent({type:"files",files:i,point:g.screenToPage(t.clientX-o.x,t.clientY-o.y),ignoreParent:!1});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}return{onPointerDown:function(e){e.isKilled||0!==e.button&&1!==e.button&&5!==e.button||(La(e.currentTarget,e),g.dispatch(Pe({type:"pointer",target:"canvas",name:"pointer_down"},Ua(e,g.getContainer()))))},onPointerMove:function(e){e.isKilled||e.clientX===t&&e.clientY===n||(t=e.clientX,n=e.clientY,g.dispatch(Pe({type:"pointer",target:"canvas",name:"pointer_move"},Ua(e,g.getContainer()))))},onPointerUp:function(e){e.isKilled||0!==e.button&&1!==e.button&&2!==e.button&&5!==e.button||(t=e.clientX,n=e.clientY,za(e.currentTarget,e),g.dispatch(Pe({type:"pointer",target:"canvas",name:"pointer_up"},Ua(e,g.getContainer()))))},onPointerEnter:function(e){e.isKilled||g.dispatch(Pe({type:"pointer",target:"canvas",name:"pointer_enter"},Ua(e,g.getContainer())))},onPointerLeave:function(e){e.isKilled||g.dispatch(Pe({type:"pointer",target:"canvas",name:"pointer_leave"},Ua(e,g.getContainer())))},onDragOver:function(e){Oa(e)},onDrop:function(e){return r.apply(this,arguments)},onTouchStart:function(e){e.isKilled=!0,document.body.click(),Oa(e)},onTouchEnd:function(e){e.isKilled=!0,"A"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&Oa(e)}}},[g]));return t&&(w.onDrop=t(w.onDrop)),_e.useEffect(function(){if(b&&c.isSafari){var e=v.current;e&&requestAnimationFrame(function(){e.style.display="none",requestAnimationFrame(function(){e.style.display=""})})}},[c,b]),_e.useEffect(function(){var e;null===(e=h.current)||void 0===e||e.focus()},[]),(0,to.jsxs)("div",Pe(Pe({ref:h,draggable:!1,className:"tl-canvas","data-testid":"canvas"},w),{},{children:[f&&(0,to.jsx)(f,{}),(0,to.jsx)(Uu,{}),(0,to.jsx)(rc,{}),(0,to.jsxs)("div",{ref:v,className:"tl-html-layer",draggable:!1,children:[(0,to.jsx)("svg",{className:"tl-svg-context",children:(0,to.jsxs)("defs",{children:[y,(0,to.jsx)(Zu,{}),(0,to.jsx)(Ju,{}),(0,to.jsx)(ec,{}),(0,to.jsx)(tc,{}),p&&(0,to.jsx)(p,{})]})}),(0,to.jsx)(Wl,{}),(0,to.jsx)("div",{className:"tl-shapes",children:(0,to.jsx)(qu,{})}),(0,to.jsxs)("div",{className:"tl-overlays",children:[(0,to.jsx)(Yu,{}),(0,to.jsx)(Vu,{}),(0,to.jsx)(Ku,{}),(0,to.jsx)(Wu,{}),(0,to.jsx)($u,{}),(0,to.jsx)(Gu,{}),(0,to.jsx)(Qu,{}),(0,to.jsx)(Hu,{}),(0,to.jsx)(Au,{}),(0,to.jsx)(Kl,{})]})]})]}))}),Uu=po(function(){var e=mo(),t=Ts().Grid,n=e.camera,r=n.x,i=n.y,o=n.z,a=e.isGridMode;return t&&a?(0,to.jsx)(t,{x:r,y:i,z:o,size:e.gridSize}):null}),Ku=po(function(){var e=mo(),t=e.scribble,n=e.zoomLevel,r=Ts().Scribble;return r&&t?(0,to.jsx)(r,{className:"tl-user-scribble",scribble:t,zoom:n}):null}),Vu=po(function(){var e=mo(),t=e.brush,n=Ts().Brush;return n&&t&&e.isIn("select.brushing")?(0,to.jsx)(n,{className:"tl-user-brush",brush:t}):null}),Wu=po(function(){var e=mo(),t=e.zoomBrush,n=Ts().ZoomBrush;return n&&t&&e.isIn("zoom")?(0,to.jsx)(n,{className:"tl-user-brush",brush:t}):null}),Hu=po(function(){var e=mo(),t=e.snaps.lines,n=e.zoomLevel,r=Ts().SnapLine;return r&&0<t.length?(0,to.jsx)(to.Fragment,{children:t.map(function(e){return(0,to.jsx)(r,{className:"tl-user-snapline",line:e,zoom:n},e.id)})}):null}),Yu=po(function(){var e,t=mo(),n=t.zoomLevel,r=t.isChangingStyle,i=t.onlySelectedShape,o=t.isInAny("select.idle","select.pointing_handle")&&!r&&!t.isReadOnly;if(!i||!o)return null;var a=t.getShapeUtil(i),s=null===(e=a.handles)||void 0===e?void 0:e.call(a,i);if(!s)return null;var l=t.getPageTransform(i);if(!l)return null;for(var u=[],c=0,d=s[c];c<s.length;d=s[++c]){if("vertex"!==d.type){var f=s[c-1],p=s[c+1];if(f&&p&&Math.hypot(f.y-p.y,f.x-p.x)<48/n)continue}u.push(d)}return u.sort(function(e){return"vertex"===e.type?1:-1}),(0,to.jsx)("svg",{className:"tl-user-handles tl-overlays__item",children:(0,to.jsx)("g",{transform:na.toCssString(l),children:u.map(function(e){return(0,to.jsx)(Xu,{shapeId:i.id,handle:e},e.id)})})})}),Xu=function(e){var a,s,l,t=e.shapeId,n=e.handle,r=(a=t,s=n.id,l=mo(),_e.useMemo(function(){var i,o;return{onPointerDown:function(e){if(!e.isKilled){La(ja(e.currentTarget),e);var t=zl(l,a,s),n=t.shape,r=t.handle;r&&l.dispatch(Pe({type:"pointer",target:"handle",handle:r,shape:n,name:"pointer_down"},Ua(e,l.getContainer())))}},onPointerMove:function(e){if(!e.isKilled&&(e.clientX!==i||e.clientY!==o)){i=e.clientX,o=e.clientY;var t=zl(l,a,s),n=t.shape,r=t.handle;r&&l.dispatch(Pe({type:"pointer",target:"handle",handle:r,shape:n,name:"pointer_move"},Ua(e,l.getContainer())))}},onPointerUp:function(e){if(!e.isKilled){za(ja(e.currentTarget),e);var t=zl(l,a,s),n=t.shape,r=t.handle;r&&l.dispatch(Pe({type:"pointer",target:"handle",handle:r,shape:n,name:"pointer_up"},Ua(e,l.getContainer())))}},onPointerEnter:function(e){if(!e.isKilled){var t=zl(l,a,s),n=t.shape,r=t.handle;r&&l.dispatch(Pe({type:"pointer",target:"handle",handle:r,shape:n,name:"pointer_enter"},Ua(e,l.getContainer())))}},onPointerLeave:function(e){if(!e.isKilled){var t=zl(l,a,s),n=t.shape,r=t.handle;r&&l.dispatch(Pe({type:"pointer",target:"handle",handle:r,shape:n,name:"pointer_leave"},Ua(e,l.getContainer())))}}}},[l,a,s])),i=Ts().Handle;return i?(0,to.jsx)("g",Pe(Pe({"aria-label":"handle",transform:"translate(".concat(n.x,", ").concat(n.y,")")},r),{},{children:(0,to.jsx)(i,{shapeId:t,handle:n})})):null},qu=po(function(){var e=mo().renderingShapes;return Pa.debugSvg.value?(0,to.jsx)(to.Fragment,{children:e.map(function(e){return(0,to.jsxs)(_e.Fragment,{children:[(0,to.jsx)(Ru,Pe({},e)),(0,to.jsx)(nc,{id:e.id})]},e.id+"_fragment")})}):(0,to.jsx)(to.Fragment,{children:e.map(function(e){return(0,to.jsx)(Ru,Pe({},e),e.id+"_shape")})})}),$u=po(function(){var e=mo();return e.isInAny("select.idle","select.brushing","select.scribble_brushing","select.pointing_shape","select.pointing_selection","select.pointing_handle")&&!e.isChangingStyle?(0,to.jsx)(to.Fragment,{children:e.selectedIds.map(function(e){return(0,to.jsx)(Ps,{className:"tl-user-indicator__selected",id:e},e+"_indicator")})}):null}),Gu=function(){var e=mo(),t=ho("hovered id and should display",function(){return e.isInAny("select.idle","select.editing_shape")?e.pageState.hoveredId:null},[e]);return t?(0,to.jsx)(Ps,{className:"tl-user-indicator__hovered",id:t}):null},Qu=po(function(){var e=B(mo().hintingIds);return e.length?(0,to.jsx)(to.Fragment,{children:e.map(function(e){return(0,to.jsx)(Ps,{className:"tl-user-indicator__hint",id:e},e+"_hinting")})}):null});function Zu(){return(0,to.jsxs)("g",{id:"cursor",children:[(0,to.jsxs)("g",{fill:"rgba(0,0,0,.2)",transform:"translate(-11,-11)",children:[(0,to.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,to.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,to.jsxs)("g",{fill:"white",transform:"translate(-12,-12)",children:[(0,to.jsx)("path",{d:"m12 24.4219v-16.015l11.591 11.619h-6.781l-.411.124z"}),(0,to.jsx)("path",{d:"m21.0845 25.0962-3.605 1.535-4.682-11.089 3.686-1.553z"})]}),(0,to.jsxs)("g",{fill:"currentColor",transform:"translate(-12,-12)",children:[(0,to.jsx)("path",{d:"m19.751 24.4155-1.844.774-3.1-7.374 1.841-.775z"}),(0,to.jsx)("path",{d:"m13 10.814v11.188l2.969-2.866.428-.139h4.768z"})]})]})}function Ju(){return(0,to.jsx)("path",{id:"cursor_hint",fill:"currentColor",d:"M -2,-5 2,0 -2,5 Z"})}function ec(){return(0,to.jsx)("marker",{id:"arrowhead-dot",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"0",children:(0,to.jsx)("circle",{cx:"3",cy:"3",r:"2",strokeDasharray:"100%"})})}function tc(){return(0,to.jsxs)("marker",{id:"arrowhead-cross",className:"tl-arrow-hint",refX:"3.0",refY:"3.0",orient:"auto",children:[(0,to.jsx)("line",{x1:"1.5",y1:"1.5",x2:"4.5",y2:"4.5",strokeDasharray:"100%"}),(0,to.jsx)("line",{x1:"1.5",y1:"4.5",x2:"4.5",y2:"1.5",strokeDasharray:"100%"})]})}var nc=po(function(e){var o=e.id,a=mo(),t=a.getShapeById(o),n=Ce(_e.useState(""),2),r=n[0],s=n[1],l=(null==t?void 0:t.parentId)===a.currentPageId;return _e.useEffect(function(){if(l){var i=null,e=Nt("shape to svg",ao(io().mark(function e(){var t,n,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Math.random(),i=t,n=a.getPageBoundsById(o),e.next=5,a.getSvg([o],{padding:0});case 5:(r=e.sent)&&n&&i===t&&(r.style.setProperty("overflow","visible"),r.setAttribute("preserveAspectRatio","xMidYMin slice"),r.style.setProperty("transform","translate(".concat(n.x,"px, ").concat(n.y+n.h+12,"px)")),r.style.setProperty("border","1px solid black"),s(null==r?void 0:r.outerHTML));case 7:case"end":return e.stop()}},e)})));return function(){i=null,e()}}},[a,o,l]),l?(0,to.jsx)("div",{style:{paddingTop:12,position:"absolute"},children:(0,to.jsx)("div",{style:{display:"flex"},dangerouslySetInnerHTML:{__html:r}})}):null}),rc=po(function(){var e=Pa.logMessages.value;return(0,to.jsx)("div",{className:"debug__ui-logger",children:e.map(function(e,t){var n="string"==typeof e?e:JSON.stringify(e);return(0,to.jsx)("div",{className:"debug__ui-logger__line",children:n},t)})})});function ic(){}var oc=function(e){var t=e.error,n=e.editor,r=(0,_e.useRef)(null),i=Ce((0,_e.useState)(!1),2),o=i[0],a=i[1],s=Ce((0,_e.useState)(!1),2),l=s[0],u=s[1],c=Ce((0,_e.useState)(!1),2),d=c[0],f=c[1],p=t instanceof Error?t.message:String(t),h=t instanceof Error?t.stack:null,v=ho("isDarkMode",function(){try{if(n)return n.isDarkMode}catch(e){}return null},[n]),g=Ce((0,_e.useState)(null),2),m=g[0],y=g[1];(0,_e.useLayoutEffect)(function(){var e;null!==v&&y(v);for(var t=null===(e=r.current)||void 0===e?void 0:e.parentElement,n=!1;t;){if(t.classList.contains("tl-theme__dark")||t.classList.contains("tl-theme__light")){n=!0;break}t=t.parentElement}y(n?null:window.matchMedia("(prefetl-color-scheme: dark)").matches)},[v]),(0,_e.useEffect)(function(){if(l){var e=setTimeout(function(){u(!1)},2e3);return function(){return clearTimeout(e)}}},[l]);var b,w=(b=ao(io().mark(function e(){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:bo();case 1:case"end":return e.stop()}},e)})),function(){return b.apply(this,arguments)}),x=new URL("https://github.com/tldraw/tldraw/issues/new");return x.searchParams.set("title",p),x.searchParams.set("labels","bug"),x.searchParams.set("body","Hey, I ran into an error while using tldraw:\n\n```js\n".concat(null!=h?h:p,"\n```\n\nMy browser: ").concat(navigator.userAgent)),(0,to.jsxs)("div",{ref:r,className:so("tl-container tl-error-boundary",null===m?"":m?"tl-theme__dark":"tl-theme__light"),children:[(0,to.jsx)("div",{className:"tl-error-boundary__overlay"}),n&&(0,to.jsx)(xs,{onError:ic,fallback:function(){return null},children:(0,to.jsx)(go.Provider,{value:n,children:(0,to.jsx)("div",{className:"tl-overlay tl-error-boundary__canvas",children:(0,to.jsx)(Fu,{})})})}),(0,to.jsx)("div",{className:so("tl-modal","tl-error-boundary__content",{"tl-error-boundary__content__expanded":o&&!d}),children:d?(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("h2",{children:"Are you sure?"}),(0,to.jsx)("p",{children:"Resetting your data will delete your drawing and cannot be undone."}),(0,to.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,to.jsx)("button",{onClick:function(){return f(!1)},children:"Cancel"}),(0,to.jsx)("button",{className:"tl-error-boundary__reset",onClick:w,children:"Reset data"})]})]}):(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("h2",{children:"Something's gone wrong."}),(0,to.jsxs)("p",{children:["Sorry, we encountered an error. Please refresh the page to continue. If you keep seeing this error, you can ",(0,to.jsx)("a",{href:x.toString(),children:"create a GitHub issue"})," or"," ",(0,to.jsx)("a",{href:"https://discord.gg/Cq6cPsTfNy",children:"ask for help on Discord"}),"."]}),o&&(0,to.jsxs)("div",{className:"tl-error-boundary__content__error",children:[(0,to.jsx)("pre",{children:(0,to.jsx)("code",{children:null!=h?h:p})}),(0,to.jsx)("button",{onClick:function(){var e=document.createElement("textarea");e.value=null!=h?h:p,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),u(!0)},children:l?"Copied!":"Copy"})]}),(0,to.jsxs)("div",{className:"tl-error-boundary__content__actions",children:[(0,to.jsx)("button",{onClick:function(){return a(!o)},children:o?"Hide details":"Show details"}),(0,to.jsxs)("div",{className:"tl-error-boundary__content__actions__group",children:[(0,to.jsx)("button",{className:"tl-error-boundary__reset",onClick:function(){return f(!0)},children:"Reset data"}),(0,to.jsx)("button",{className:"tl-error-boundary__refresh",onClick:function(){yo.refreshPage()},children:"Refresh Page"})]})]})]})})]})};function ac(){return Bt()}var sc,lc=new RegExp(/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i);function uc(e){return lc.test(e)}var cc=["animationSpeed"],dc=["isSnapMode"],fc="TLDRAW_USER_DATA_v3",pc=qe({id:ze,name:ze,locale:ze,color:ze,isDarkMode:Ke,animationSpeed:Re,isSnapMode:Ke}),hc=Zt({currentVersion:2,migrators:(sc={},Ee(sc,1,{up:function(e){return Pe(Pe({},e),{},{animationSpeed:1})},down:function(e){return e.animationSpeed,Gt(e,cc)}}),Ee(sc,2,{up:function(e){return Pe(Pe({},e),{},{isSnapMode:!1})},down:function(e){return e.isSnapMode,Gt(e,dc)}}),sc)}),vc=["#FF802B","#EC5E41","#F2555A","#F04F88","#E34BA9","#BD54C6","#9D5BD2","#7B66DC","#02B1CC","#11B3A3","#39B178","#55B467"];function gc(){return{id:ac(),locale:"undefined"!=typeof window?function(){var i;return function(e){var t,n=ce("undefined"!=typeof window&&null!==(i=window.navigator.languages)&&void 0!==i?i:["en"]);try{for(n.s();!(t=n.n()).done;){var r=eo(t.value);if(r)return r}}catch(e){n.e(e)}finally{n.f()}return"en"}()}():"en",name:"New User",color:vc[Math.floor(Math.random()*vc.length)],isDarkMode:!1,animationSpeed:1,isSnapMode:!1}}function mc(e){var t;if(null===e||"object"!=typeof e)return gc();if(!("version"in e&&"user"in e&&"number"==typeof e.version))return gc();var n=nn({value:e.user,fromVersion:e.version,toVersion:null!==(t=hc.currentVersion)&&void 0!==t?t:0,migrations:hc});if("error"===n.type)return gc();try{pc.validate(n.value)}catch(e){return gc()}return n.value}var yc,bc,wc,xc=It("globalUserData",mc("undefined"==typeof window?null:null!==(yc=JSON.parse((null===(bc=window)||void 0===bc||null===(wc=bc.localStorage)||void 0===wc?void 0:wc.getItem(fc))||"null"))&&void 0!==yc?yc:null));function kc(e){pc.validate(e),xc.set(e),"undefined"!=typeof window&&window.localStorage&&window.localStorage.setItem(fc,JSON.stringify({version:hc.currentVersion,user:xc.value})),null==_c||_c.postMessage({type:Pc,origin:Ec,data:{user:xc.value,version:hc.currentVersion}})}var Sc="undefined"!=typeof process&&!1,_c="undefined"==typeof BroadcastChannel||Sc?null:new BroadcastChannel("tldraw-user-sync");null==_c||_c.addEventListener("message",function(e){var t=e.data;(null==t?void 0:t.type)===Pc&&(null==t?void 0:t.origin)!==Ec&&xc.set(mc(t.data))});var Ec=ac(),Pc="tldraw-user-preferences-change";function Cc(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{derivePresenceState:null!==(e=r.derivePresenceState)&&void 0!==e?e:function(){return zt("presence",function(){return null})},userPreferences:null!==(t=r.userPreferences)&&void 0!==t?t:zt("userPreferences",function(){return xc.value}),setUserPreferences:null!==(n=r.setUserPreferences)&&void 0!==n?n:kc}}var Ic=Rj(548);function Tc(e,t){return W(e===t.util.type,'Shape type "'.concat(e,'" does not match util type "').concat(t.util.type,'"')),Pe({type:e},t)}var Mc={wheel:"onWheel",pointer_enter:"onPointerEnter",pointer_leave:"onPointerLeave",pointer_down:"onPointerDown",pointer_move:"onPointerMove",pointer_up:"onPointerUp",right_click:"onRightClick",middle_click:"onMiddleClick",key_down:"onKeyDown",key_up:"onKeyUp",key_repeat:"onKeyRepeat",cancel:"onCancel",complete:"onComplete",interrupt:"onInterrupt",double_click:"onDoubleClick",triple_click:"onTripleClick",quadruple_click:"onQuadrupleClick"},Ac=function(){function s(e,t){var n=this;z(this,s),Ee(this,"path",void 0),Ee(this,"id",void 0),Ee(this,"current",void 0),Ee(this,"type",void 0),Ee(this,"shapeType",void 0),Ee(this,"initial",void 0),Ee(this,"children",void 0),Ee(this,"parent",void 0),Ee(this,"isActive",!1),Ee(this,"onWheel",void 0),Ee(this,"onPointerEnter",void 0),Ee(this,"onPointerLeave",void 0),Ee(this,"onPointerDown",void 0),Ee(this,"onPointerMove",void 0),Ee(this,"onPointerUp",void 0),Ee(this,"onDoubleClick",void 0),Ee(this,"onTripleClick",void 0),Ee(this,"onQuadrupleClick",void 0),Ee(this,"onRightClick",void 0),Ee(this,"onMiddleClick",void 0),Ee(this,"onKeyDown",void 0),Ee(this,"onKeyUp",void 0),Ee(this,"onKeyRepeat",void 0),Ee(this,"onCancel",void 0),Ee(this,"onComplete",void 0),Ee(this,"onInterrupt",void 0),Ee(this,"onEnter",void 0),Ee(this,"onExit",void 0),this.editor=e;var r=this.constructor,i=r.id,o=r.children,a=r.initial;this.id=i,this.current=It("toolState"+this.id,void 0),this.path=zt("toolPath"+this.id,function(){var e=n.current.value;return n.id+(e?".".concat(e.path.value):"")}),this.parent=null!=t?t:{},this.parent?o&&a?(this.type="branch",this.initial=a,this.children=Object.fromEntries(o().map(function(e){return[e.id,new e(n.editor,n)]})),this.current.set(this.children[this.initial])):this.type="leaf":(this.type="root",o&&a&&(this.initial=a,this.children=Object.fromEntries(o().map(function(e){return[e.id,new e(n.editor,n)]})),this.current.set(this.children[this.initial])))}return P(s,[{key:"transition",value:function(e,t){for(var n=e.split("."),r=this,i=0;i<n.length;i++){var o,a=n[i],s=r.current.value,l=null===(o=r.children)||void 0===o?void 0:o[a];if(!l)throw Error("".concat(r.id," - no child state exists with the id ").concat(a,"."));if((null==s?void 0:s.id)!==l.id&&(null==s||s.exit(t,a),r.current.set(l),l.enter(t,(null==s?void 0:s.id)||"initial"),!l.isActive))break;r=l}return this}},{key:"handleEvent",value:function(e){var t,n=Mc[e.name],r=this.current.value;null===(t=this[n])||void 0===t||t.call(this,e),this.current.value===r&&this.isActive&&(null==r||r.handleEvent(e))}},{key:"enter",value:function(e,t){var n;if(this.isActive=!0,null===(n=this.onEnter)||void 0===n||n.call(this,e,t),this.children&&this.initial&&this.isActive){var r=this.children[this.initial];this.current.set(r),r.enter(e,t)}}},{key:"exit",value:function(e,t){var n,r;this.isActive=!1,null===(n=this.onExit)||void 0===n||n.call(this,e,t),this.isActive||null===(r=this.current.value)||void 0===r||r.exit(e,t)}}]),s}();Ee(Ac,"id",void 0),Ee(Ac,"initial",void 0),Ee(Ac,"children",void 0);var jc=["children","className"];function Oc(e){var t=e.children,n=e.className,r=void 0===n?"":n,i=Gt(e,jc);return(0,to.jsx)("svg",Pe(Pe({},i),{},{className:"tl-svg-container ".concat(r),children:t}))}function Lc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.closed,i=void 0!==r&&r,o=n.snap,a=void 0===o?1:o,s=n.start,l=void 0===s?"outset":s,u=n.end,c=void 0===u?"outset":u,d=n.lengthRatio,f=void 0===d?2:d,p=n.style,h=void 0===p?"dashed":p,v=0,g=0,m=1,y=0,b=0;switch(h){case"dashed":m=1,v=Math.min(t*f,e/4);break;case"dotted":v=t/(m=100);break;default:return{strokeDasharray:"none",strokeDashoffset:"none"}}return i||("outset"===l?(e+=v/2,b+=v/2):"skip"===l&&(e-=v,b-=v),"outset"===c?e+=v/2:"skip"===c&&(e-=v)),g=Math.floor(e/v/(2*m)),y=(g-=g%a)<3&&"dashed"===h?e/t<5?(v=e,g=1,0):v=.333*e:(v=e/(g=Math.max(g,3))/(2*m),i?(b=v/2,(e-g*v)/g):(e-g*v)/Math.max(1,g-1)),{strokeDasharray:[v,y].join(" "),strokeDashoffset:b.toString()}}var zc=_e.memo(function(e){var t=e.d,n=e.color,r=e.fill;switch(r){case"none":return(0,to.jsx)("path",{className:"tl-hitarea-stroke",fill:"none",d:t});case"solid":return(0,to.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-".concat(n,"-semi)"),d:t});case"semi":return(0,to.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-solid)",d:t});case"pattern":return(0,to.jsx)(Rc,{color:n,fill:r,d:t})}}),Rc=function(e){var t=e.d,n=e.color,r=mo(),i=ho("zoomLevel",function(){return r.zoomLevel},[r]),o=ho("isDarkMode",function(){return r.isDarkMode},[r]),a=Math.ceil(i),s=r.zoomLevel<=.18;return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("path",{className:"tl-hitarea-fill-solid",fill:"var(--palette-".concat(n,"-pattern)"),d:t}),(0,to.jsx)("path",{fill:s?"var(--palette-".concat(n,"-semi)"):"url(#".concat(os[a+(o?"_dark":"_light")],")"),d:t})]})};function Nc(e){var t=e.d,n=e.color,r=e.fill,i=e.colors;if("none"!==r){if("pattern"===r){var o=document.createElementNS("http://www.w3.org/2000/svg","g"),a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",t),a.setAttribute("fill",i.pattern[n]);var s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",t),s.setAttribute("fill","url(#hash_pattern)"),o.appendChild(a),o.appendChild(s),o}var l=document.createElementNS("http://www.w3.org/2000/svg","path");switch(l.setAttribute("d",t),r){case"semi":l.setAttribute("fill",i.solid);break;case"solid":l.setAttribute("fill",i.semi[n])}return l}}function Dc(e,t){if(t){var n=document.createElementNS("http://www.w3.org/2000/svg","g");return n.appendChild(t),n.appendChild(e),n}return e}function Bc(e,t,n){var r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T,M,A,j,O,L,z,R,N,D,B,F,U,K,V,W,H,Y="end"===t?e.end.arrowhead:e.start.arrowhead;if("none"!==Y){var X=function(e,t,n){var r,i,o,a,s,l,u,c,d,f,p="end"===t?e.end.point:e.start.point,h="end"===t?e.start.point:e.end.point,v=e.isStraight?xo.Dist(h,p):Math.abs(e.bodyArc.length),g=Math.max(Math.min(v/5,3*n),n);if(e.isStraight)r=xo.Nudge(p,h,g);else{var m=(i=p,o=g,a=e.handleArc.center,s=e.handleArc.radius,l=a.x-i.x,u=a.y-i.y,c=Math.sqrt(l*l+u*u),d=(c*c-s*s+o*o)/(2*c),f=Math.sqrt(o*o-d*d),l/=c,u/=c,[new xo(i.x+l*d-u*f,i.y+u*d+l*f),new xo(i.x+l*d+u*f,i.y+u*d-l*f)]);r="end"===t?e.handleArc.sweepFlag?m[0]:m[1]:e.handleArc.sweepFlag?m[1]:m[0]}return{point:p,int:r}}(e,t,n);if(X){switch(Y){case"bar":return U=(F=X).int,K=F.point,V=xo.Sub(U,K).div(2),W=xo.Add(K,xo.Rot(V,_o)),H=xo.Sub(K,xo.Rot(V,_o)),"M ".concat(W.x," ").concat(W.y," L ").concat(H.x," ").concat(H.y);case"square":return j=(A=X).int,O=A.point,L=xo.Lrp(O,j,.85),z=xo.Sub(L,O).div(2),R=xo.Add(O,xo.Rot(z,_o)),N=xo.Sub(O,xo.Rot(z,_o)),D=xo.Add(L,xo.Rot(z,_o)),B=xo.Sub(L,xo.Rot(z,_o)),"M ".concat(R.x," ").concat(R.y," L ").concat(D.x," ").concat(D.y," L ").concat(B.x," ").concat(B.y," L ").concat(N.x," ").concat(N.y," Z");case"diamond":return E=(_=X).point,P=_.int,C=xo.Lrp(E,P,.75),I=xo.RotWith(C,E,So/4),T=xo.RotWith(C,E,-So/4),(M=xo.Lrp(I,T,.5)).add(xo.Sub(M,E)),"M ".concat(M.x," ").concat(M.y," L ").concat(I.x," ").concat(I.y," ").concat(E.x," ").concat(E.y," L ").concat(T.x," ").concat(T.y," Z");case"dot":return w=(b=X).point,x=b.int,k=xo.Lrp(w,x,.45),S=xo.Dist(k,w),"M ".concat(k.x-S,",").concat(k.y,"\n  a ").concat(S,",").concat(S," 0 1,0 ").concat(2*S,",0\n  a ").concat(S,",").concat(S," 0 1,0 -").concat(2*S,",0 ");case"inverted":return h=(p=X).point,v=p.int,g=xo.Sub(v,h).div(2),m=xo.Add(h,xo.Rot(g,_o)),y=xo.Sub(h,xo.Rot(g,_o)),"M ".concat(m.x," ").concat(m.y," L ").concat(v.x," ").concat(v.y," L ").concat(y.x," ").concat(y.y," Z");case"arrow":return u=(l=X).point,c=l.int,d=xo.RotWith(c,u,So/6),f=xo.RotWith(c,u,-So/6),"M ".concat(d.x," ").concat(d.y," L ").concat(u.x," ").concat(u.y," L ").concat(f.x," ").concat(f.y);case"triangle":return i=(r=X).point,o=r.int,a=xo.RotWith(o,i,So/6),s=xo.RotWith(o,i,-So/6),"M ".concat(a.x," ").concat(a.y," L ").concat(i.x," ").concat(i.y," L ").concat(s.x," ").concat(s.y," Z")}return""}}}function Fc(e){return Math.abs(e.props.bend)<8}function Uc(e,t){if("point"!==t.type){var n=e.getShapeById(t.boundShapeId);return{shape:n,util:e.getShapeUtil(n),transform:e.getPageTransform(n),isExact:t.isExact,didIntersect:!1}}}function Kc(e,t,n){if("point"===n.type)return xo.From(n);var r=e.getShapeById(n.boundShapeId);if(r){var i=e.getBounds(r),o=i.point,a=i.size,s=xo.Add(o,xo.MulV(n.normalizedAnchor,a)),l=na.applyToPoint(e.getPageTransform(r),s);return na.applyToPoint(na.Inverse(t),l)}return new xo(0,0)}function Vc(e,t){var n=e.getPageTransform(t);return{start:Kc(e,n,t.props.start),end:Kc(e,n,t.props.end)}}var Wc=48,Hc=10;function Yc(e,t){var n=t.props,r=n.start,i=n.end,o=n.arrowheadStart,a=n.arrowheadEnd,s=Vc(e,t),l=s.start.clone(),u=s.end.clone(),c=xo.Med(l,u),d=xo.Sub(u,l).uni(),f=Uc(e,r),p=Uc(e,i),h=e.getPageTransform(t);Xc(u,s.start,h,p),Xc(l,s.end,h,f);var v=Wc,g=f&&p&&f.shape===p.shape;!f||!p||g||f.isExact||p.isExact||(p.didIntersect&&!f.didIntersect?f.util.isClosed(f.shape)&&l.setTo(xo.Nudge(u,l,v)):p.didIntersect||p.util.isClosed(p.shape)&&u.setTo(xo.Nudge(l,u,v)));var m=xo.Sub(u,l).uni(),y=!xo.Equals(m,d);if(!g){if(f&&"none"!==o&&!f.isExact){var b=Hc+uu[t.props.size]/2+("size"in f.shape.props?uu[f.shape.props.size]/2:0);v-=b,l.nudge(u,b*(y?-1:1))}if(p&&"none"!==a&&!p.isExact){var w=Hc+uu[t.props.size]/2+("size"in p.shape.props?uu[p.shape.props.size]/2:0);v-=w,u.nudge(l,w*(y?-1:1))}}f&&p&&(y?u.setTo(xo.Add(l,m.mul(-v))):xo.Dist(l,u)<Wc/2&&u.setTo(xo.Add(l,m.mul(Wc/2)))),y?c.setTo(xo.Med(s.start,s.end)):c.setTo(xo.Med(l,u));var x=xo.Dist(l,u);return{isStraight:!0,start:{handle:s.start,point:l,arrowhead:t.props.arrowheadStart},end:{handle:s.end,point:u,arrowhead:t.props.arrowheadEnd},middle:c,isValid:0<x,length:x}}function Xc(e,t,n,r){if(void 0!==r&&!r.isExact){var i,o,a=na.applyToPoint(n,t),s=na.applyToPoint(n,e),l=na.applyToPoint(na.Inverse(r.transform),a),u=na.applyToPoint(na.Inverse(r.transform),s),c=r.util.isClosed(r.shape),d=(c?function(e,t,n){for(var r,i=[],o=1,a=n.length;o<a+1;o++)(r=fa(e,t,n[o-1],n[o%n.length]))&&i.push(r);return 0===i.length?null:i}:ha)(l,u,r.util.outline(r.shape));if(null!==d&&(i=null!==(o=d.sort(function(e,t){return xo.Dist(e,l)-xo.Dist(t,l)})[0])&&void 0!==o?o:c?void 0:u),void 0!==i){var f=na.applyToPoint(r.transform,i),p=na.applyToPoint(na.Inverse(n),f);e.setTo(p),r.didIntersect=!0}}}function qc(e){return $c(e.start.point,e.end.point)}function $c(e,t){return"M".concat(e.x,",").concat(e.y,"L").concat(t.x,",").concat(t.y)}function Gc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=t.props,i=r.arrowheadEnd,o=r.arrowheadStart,a=t.props.bend+n;if(Math.abs(a)>Math.abs(10*t.props.bend))return Yc(e,t);var s=Vc(e,t),l=xo.Med(s.start,s.end),u=xo.Sub(s.end,s.start).uni(),c=xo.Add(l,u.per().mul(-a)),d=Uc(e,t.props.start),f=Uc(e,t.props.end),p=s.start.clone(),h=s.end.clone(),v=c.clone(),g=Zc(p,h,v);if(0===g.length||0===g.size||!qo(g.length)||!qo(g.size))return Yc(e,t);var m=e.getPageTransform(t);if(d&&!d.isExact){var y,b=na.applyToPoint(m,p),w=na.applyToPoint(m,h),x=na.applyToPoint(m,g.center),k=na.Inverse(d.transform),S=na.applyToPoint(k,b),_=na.applyToPoint(k,w),E=na.applyToPoint(k,x),P=d.util.isClosed(d.shape),C=(P?va:ga)(E,g.radius,d.util.outline(d.shape));if(C){var I;C=C.filter(function(e){return+xo.Clockwise(S,e,_)===g.sweepFlag});var T=Lo(xo.Angle(g.center,c),xo.Angle(g.center,s.start),.5);C.sort(function(e,t){return Math.abs(Oo(T,E.angle(e)))-Math.abs(Oo(T,E.angle(t)))}),y=null!==(I=C[0])&&void 0!==I?I:P?void 0:S}else y=P?void 0:S;if(y&&(p.setTo(e.getPointInShapeSpace(t,na.applyToPoint(d.transform,y))),d.didIntersect=!0,"none"!==o)){var M=Hc+uu[t.props.size]/2+("size"in d.shape.props?uu[d.shape.props.size]/2:0);p.setTo(Fo(g.center.x,g.center.y,g.radius,Lo(xo.Angle(g.center,p),xo.Angle(g.center,c),M/Math.abs(Bo(g.center,g.radius,p,c)))))}}if(f&&!f.isExact){var A,j,O=na.applyToPoint(m,p),L=na.applyToPoint(m,h),z=na.applyToPoint(m,g.center),R=na.Inverse(f.transform),N=na.applyToPoint(R,O),D=na.applyToPoint(R,L),B=na.applyToPoint(R,z),F=f.util.isClosed(f.shape),U=F?va:ga,K=Lo(xo.Angle(g.center,c),xo.Angle(g.center,s.end),.5),V=U(B,g.radius,f.util.outline(f.shape));if((A=V?((V=V.filter(function(e){return+xo.Clockwise(N,e,D)===g.sweepFlag})).sort(function(e,t){return Math.abs(Oo(K,B.angle(e)))-Math.abs(Oo(K,B.angle(t)))}),null!==(j=V[0])&&void 0!==j?j:F?void 0:D):F?void 0:D)&&(h.setTo(e.getPointInShapeSpace(t,na.applyToPoint(f.transform,A))),f.didIntersect=!0,"none"!==i)){var W=Hc+uu[t.props.size]/2+("size"in f.shape.props?uu[f.shape.props.size]/2:0);xo.Dist(p,h)<Wc&&(W*=-2),h.setTo(Fo(g.center.x,g.center.y,g.radius,Lo(xo.Angle(g.center,h),xo.Angle(g.center,c),W/Math.abs(Bo(g.center,g.radius,h,c)))))}}if(Math.abs(Bo(g.center,g.radius,p,h))<Wc/2&&(p.setTo(s.start),h.setTo(s.end)),d&&f&&d.shape!==f.shape&&!d.isExact&&!f.isExact){var H=xo.Angle(g.center,p),Y=xo.Angle(g.center,h),X=g.sweepFlag?Wc:-Wc,q=Bo(g.center,g.radius,h,p),$=g.center,G=$.x,Q=$.y,Z=g.radius;d&&!d.didIntersect&&p.setTo(Fo(G,Q,Z,Lo(H,Y,X/q))),f&&!f.didIntersect&&h.setTo(Fo(G,Q,Z,Lo(H,Y,-X/q)))}var J=Lo(xo.Angle(g.center,p),xo.Angle(g.center,h),.5),ee=Fo(g.center.x,g.center.y,g.radius,J);+xo.Clockwise(p,ee,h)!==g.sweepFlag&&(J+=So,ee=Fo(g.center.x,g.center.y,g.radius,J)),v.setTo(ee);var te=Zc(p,h,v);return{isStraight:!1,start:{point:p,handle:s.start,arrowhead:t.props.arrowheadStart},end:{point:h,handle:s.end,arrowhead:t.props.arrowheadEnd},middle:v,handleArc:g,bodyArc:te,isValid:0!==te.length&&isFinite(te.center.x)&&isFinite(te.center.y)}}function Qc(e){var t=e.start,n=e.end,r=e.bodyArc,i=r.radius,o=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.point.x,",").concat(t.point.y," A").concat(i," ").concat(i," 0 ").concat(o," ").concat(a," ").concat(n.point.x,",").concat(n.point.y)}function Zc(e,t,n){var r=-2*(e.x*(t.y-n.y)-e.y*(t.x-n.x)+t.x*n.y-n.x*t.y),i={x:((e.x*e.x+e.y*e.y)*(n.y-t.y)+(t.x*t.x+t.y*t.y)*(e.y-n.y)+(n.x*n.x+n.y*n.y)*(t.y-e.y))/r,y:((e.x*e.x+e.y*e.y)*(t.x-n.x)+(t.x*t.x+t.y*t.y)*(n.x-e.x)+(n.x*n.x+n.y*n.y)*(e.x-t.x))/r},o=xo.Dist(i,e),a=+xo.Clockwise(e,n,t),s=Math.hypot(e.y-t.y,e.x-t.x),l=Math.hypot(t.y-n.y,t.x-n.x),u=Math.hypot(n.y-e.y,n.x-e.x),c=2*Math.acos((l*l+u*u-s*s)/(2*l*u)),d=(Eo-c)*(a?1:-1);return{center:i,radius:o,size:d,length:d*o,largeArcFlag:+(c<So),sweepFlag:a}}var Jc=_e.memo(function(e){var t=e.id,n=e.text,r=e.size,i=e.font,o=e.position,a=e.width,s=e.labelColor,l=mu(t,"arrow",n),u=l.rInput,c=l.isEditing,d=l.handleFocus,f=l.handleBlur,p=l.handleKeyDown,h=l.handleChange,v=l.isEmpty;return!c&&v?null:(0,to.jsx)("div",{className:"tl-arrow-label","data-font":i,"data-align":"center","data-hastext":!v,"data-isediting":c,style:{textAlign:"center",fontSize:fu[r],lineHeight:fu[r]*lu.lineHeight+"px",transform:"translate(".concat(o.x,"px, ").concat(o.y,"px)"),color:s},children:(0,to.jsxs)("div",{className:"tl-arrow-label__inner",children:[(0,to.jsx)("p",{style:{width:a||"9px"},children:n?vu.normalizeTextForDom(n):" "}),c&&(0,to.jsx)("textarea",{ref:u,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:!0,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:n,onFocus:d,onChange:h,onKeyDown:p,onBlur:f,onContextMenu:Fa})]})})}),ed=Object.defineProperty,td=Object.getOwnPropertyDescriptor,nd=function(e,t,n,r){for(var i,o=1<r?void 0:r?td(t,n):t,a=e.length-1;0<=a;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ed(t,n,o),o},rd=0,id=function(e){M(i,eu);var r=N(i);function i(){var _;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(_=r.call.apply(r,[this].concat(t))),"canEdit",function(){return!0}),Ee(R(_),"canBind",function(){return!1}),Ee(R(_),"isClosed",function(){return!1}),Ee(R(_),"canSnap",function(){return!0}),Ee(R(_),"hideResizeHandles",function(){return!0}),Ee(R(_),"hideRotateHandle",function(){return!0}),Ee(R(_),"hideSelectionBoundsFg",function(){return!0}),Ee(R(_),"hideSelectionBoundsBg",function(){return!0}),Ee(R(_),"onHandleChange",function(i,e){var t=e.handle,n=e.isPrecise,r=ne(i);switch(t.id){case"start":case"end":var o=_.editor.getPageTransformById(r.id),a=na.applyToPoint(o,t);if(_.editor.inputs.ctrlKey)r.props[t.id]={type:"point",x:t.x,y:t.y};else{var s=ae(_.editor.sortedShapesArray.filter(function(e){if(e.id!==i.id){var t=_.editor.getShapeUtil(e);if(t.canBind(e)){var n=_.editor.getPageMaskById(e.id);if(!n||Ho(a,n)){var r=_.editor.getPointInShapeSpace(e,a);return t.isClosed(e)?Ho(r,t.outline(e)):t.hitTestPoint(e,r)}}}}));if(s){var l=_.editor.getBounds(s),u=_.editor.getPointInShapeSpace(s,a),c=r.props[t.id],d="binding"===i.props.start.type&&i.props.start.boundShapeId,f="binding"===i.props.end.type&&i.props.end.boundShapeId,p=n||(d||f)&&d===f||!_.editor.getShapeUtil(s).isClosed(r);("point"===c.type||"binding"===c.type&&s.id!==c.boundShapeId)&&(p=_.editor.inputs.pointerVelocity.len()<.5),p&&(p=xo.Dist(u,l.center)>Math.max(4,Math.min(.15*Math.min(l.width,l.height),16))/_.editor.zoomLevel),r.props[t.id]={type:"binding",boundShapeId:s.id,normalizedAnchor:p?{x:(u.x-l.minX)/l.width,y:(u.y-l.minY)/l.height}:{x:.5,y:.5},isExact:_.editor.inputs.altKey}}else r.props[t.id]={type:"point",x:t.x,y:t.y}}break;case"middle":var h=Vc(_.editor,r),v=h.start,g=h.end,m=xo.Sub(g,v),y=xo.Per(m),b=xo.Med(g,v),w=xo.Sub(b,y),x=xo.Add(b,y),k=xo.NearestPointOnLineSegment(w,x,t,!1),S=xo.Dist(k,b);xo.Clockwise(k,g,b)&&(S*=-1),r.props.bend=S}return r}),Ee(R(_),"onTranslateStart",function(e){var t="binding"===e.props.start.type?e.props.start.boundShapeId:null,n="binding"===e.props.end.type?e.props.end.boundShapeId:null;if(!(t&&_.editor.isWithinSelection(t)||n&&_.editor.isWithinSelection(n))){n=t=null;var r=Vc(_.editor,e),i=r.start,o=r.end;return{id:e.id,type:e.type,props:Pe(Pe({},e.props),{},{start:{type:"point",x:i.x,y:i.y},end:{type:"point",x:o.x,y:o.y}})}}}),Ee(R(_),"onResize",function(e,t){var n=t.scaleX,r=t.scaleY,i=Vc(_.editor,e),o=ne(e.props),a=o.start,s=o.end,l=e.props.bend;"point"===a.type&&(a.x=i.start.x*n,a.y=i.start.y*r),"point"===s.type&&(s.x=i.end.x*n,s.y=i.end.y*r);var u=Math.abs(n),c=Math.abs(r);return n<0&&0<=r?(0!==l&&(l*=-1,l*=Math.max(u,c)),"binding"===a.type&&(a.normalizedAnchor.x=1-a.normalizedAnchor.x),"binding"===s.type&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x)):0<=n&&r<0?(0!==l&&(l*=-1,l*=Math.max(u,c)),"binding"===a.type&&(a.normalizedAnchor.y=1-a.normalizedAnchor.y),"binding"===s.type&&(s.normalizedAnchor.y=1-s.normalizedAnchor.y)):0<=n&&0<=r?0!==l&&(l*=Math.max(u,c)):n<0&&r<0&&(0!==l&&(l*=Math.max(u,c)),"binding"===a.type&&(a.normalizedAnchor.x=1-a.normalizedAnchor.x,a.normalizedAnchor.y=1-a.normalizedAnchor.y),"binding"===s.type&&(s.normalizedAnchor.x=1-s.normalizedAnchor.x,s.normalizedAnchor.y=1-s.normalizedAnchor.y)),{props:{start:a,end:s,bend:l}}}),Ee(R(_),"onDoubleClickHandle",function(e,t){switch(t.id){case"start":return{id:e.id,type:e.type,props:Pe(Pe({},e.props),{},{arrowheadStart:"none"===e.props.arrowheadStart?"arrow":"none"})};case"end":return{id:e.id,type:e.type,props:Pe(Pe({},e.props),{},{arrowheadEnd:"none"===e.props.arrowheadEnd?"arrow":"none"})}}}),Ee(R(_),"getEditingBounds",function(e){var t;return null!==(t=_.getLabelBounds(e))&&void 0!==t?t:new $o}),Ee(R(_),"onEditEnd",function(e){var t=e.id,n=e.type,r=e.props.text;r.trimEnd()!==e.props.text&&_.editor.updateShapes([{id:t,type:n,props:{text:r.trimEnd()}}])}),_}return P(i,[{key:"defaultProps",value:function(){return{dash:"draw",size:"m",fill:"none",color:"black",labelColor:"black",bend:0,start:{type:"point",x:0,y:0},end:{type:"point",x:0,y:0},arrowheadStart:"none",arrowheadEnd:"arrow",text:"",font:"draw"}}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getBounds",value:function(e){return $o.FromPoints(this.getOutlineWithoutLabel(e))}},{key:"getOutlineWithoutLabel",value:function(e){var t=this.getArrowInfo(e);if(!t)return[];if(t.isStraight)return t.isValid?[xo.From(t.start.point),xo.From(t.end.point)]:[new xo(0,0),new xo(1,1)];if(!t.isValid)return[new xo(0,0),new xo(1,1)];var n=Math.max(5,Math.ceil(Math.abs(t.bodyArc.length)/16));if(n<=0&&!isFinite(n))return[new xo(0,0),new xo(1,1)];for(var r=Array(n),i=xo.Angle(t.bodyArc.center,t.start.point),o=xo.Angle(t.bodyArc.center,t.end.point),a=t.bodyArc.sweepFlag?o:i,s=t.bodyArc.sweepFlag?i:o,l=t.bodyArc.largeArcFlag?-(Eo-Oo(a,s)):Oo(a,s),u=Math.max(1,t.bodyArc.radius),c=0;c<n;c++){var d=a+l*(c/(n-1)),f=Fo(t.bodyArc.center.x,t.bodyArc.center.y,u,d);r[c]=f}return r}},{key:"getOutline",value:function(e){var o=this.getOutlineWithoutLabel(e),t=this.getLabelBounds(e);if(!t)return o;for(var a=t.sides,s=[0,1,2,3],l=o[0],u=!1,c=[l],n=function(){var t=o[d];if(!u){var e=F(s.filter(function(e){return ya(a[e][0],a[e][1],l,t)}),function(e){return xo.DistanceToLineSegment(a[e][0],a[e][1],l)});if(void 0!==e){var n=xo.NearestPointOnLineSegment(a[e][0],a[e][1],l);c.push(n);for(var r=0;r<4;r++){var i=(e+r)%4;c.push(a[i][1])}c.push(n),u=!0}}c.push(t),l=t},d=1;d<o.length;d++)n();return c}},{key:"snapPoints",value:function(e){return dt}},{key:"infoCache",get:function(){var t=this;return this.editor.store.createComputedCache("arrow infoCache",function(e){return Fc(e)?Yc(t.editor,e):Gc(t.editor,e)})}},{key:"getArrowInfo",value:function(e){return this.infoCache.get(e.id)}},{key:"getHandles",value:function(e){var t=this.infoCache.get(e.id);return[{id:"start",type:"vertex",index:"a0",x:t.start.handle.x,y:t.start.handle.y,canBind:!0},{id:"middle",type:"vertex",index:"a2",x:t.middle.x,y:t.middle.y,canBind:!1},{id:"end",type:"vertex",index:"a3",x:t.end.handle.x,y:t.end.handle.y,canBind:!0}]}},{key:"hitTestPoint",value:function(e,t){for(var n=this.outline(e),r=this.editor.zoomLevel,i=uu[e.props.size]/r,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1];if(xo.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length-1;i++)if(ya(t,n,r[i],r[i+1]))return!0;return!1}},{key:"render",value:function(e){var t,n=this,r=this.editor.onlySelectedShape,i=this.editor.isInAny("select.idle","select.pointing_handle","select.dragging_handle","arrow.dragging")&&!this.editor.isReadOnly,o=this.getArrowInfo(e),a=this.bounds(e),s=this.getLabelBounds(e),l=_e.useMemo(function(){return n.editor.isSafari?rd+=1:0},[e]);if(null==o||!o.isValid)return null;var u=uu[e.props.size],c=o.start.arrowhead&&Bc(o,"start",u),d=o.end.arrowhead&&Bc(o,"end",u),f=o.isStraight?qc(o):Qc(o),p=null;if(r===e&&i){var h=Lc(o.isStraight?xo.Dist(o.start.handle,o.end.handle):Math.abs(o.handleArc.length),2,{end:"skip",start:"skip",lengthRatio:2.5}),v=h.strokeDasharray,g=h.strokeDashoffset;p="binding"===e.props.start.type||"binding"===e.props.end.type?(0,to.jsx)("path",{className:"tl-arrow-hint",d:o.isStraight?function(e){return $c(e.start.handle,e.end.handle)}(o):function(e){var t=e.start,n=e.end,r=e.handleArc,i=r.radius,o=r.largeArcFlag,a=r.sweepFlag;return"M".concat(t.handle.x,",").concat(t.handle.y," A").concat(i," ").concat(i," 0 ").concat(o," ").concat(a," ").concat(n.handle.x,",").concat(n.handle.y)}(o),strokeDasharray:v,strokeDashoffset:g,strokeWidth:2,markerStart:"binding"===e.props.start.type?e.props.start.isExact?"":sd(e.props.start.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",markerEnd:"binding"===e.props.end.type?e.props.end.isExact?"":sd(e.props.end.normalizedAnchor)?"url(#arrowhead-cross)":"url(#arrowhead-dot)":"",opacity:.16}):null}var m=Lc(o.isStraight?o.length:Math.abs(o.bodyArc.length),u,{style:e.props.dash}),y=m.strokeDasharray,b=m.strokeDashoffset,w=!("none"===o.start.arrowhead||"arrow"===o.start.arrowhead),x=!("none"===o.end.arrowhead||"arrow"===o.end.arrowhead),k=w||x||s,S=(e.id+"_clip_"+l).replace(":","_");return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)(Oc,{id:e.id,style:{minWidth:50,minHeight:50},children:[k&&(0,to.jsx)("defs",{children:(0,to.jsxs)("mask",{id:S,children:[(0,to.jsx)("rect",{x:Yo(-100+a.minX),y:Yo(-100+a.minY),width:Yo(a.width+200),height:Yo(a.height+200),fill:"white"}),s&&(0,to.jsx)("rect",{x:Yo(s.x),y:Yo(s.y),width:Yo(s.w),height:Yo(s.h),fill:"black",rx:4,ry:4}),c&&w&&(0,to.jsx)("path",{d:c,fill:"arrow"===o.start.arrowhead?"none":"black",stroke:"none"}),d&&x&&(0,to.jsx)("path",{d:d,fill:"arrow"===o.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,to.jsxs)("g",{fill:"none",stroke:"var(--palette-".concat(e.props.color,")"),strokeWidth:u,strokeLinejoin:"round",strokeLinecap:"round",pointerEvents:"none",children:[p,(0,to.jsxs)("g",Pe(Pe({},k?{mask:"url(#".concat(S,")")}:void 0),{},{children:[k&&(0,to.jsx)("rect",{x:Yo(a.minX-100),y:Yo(a.minY-100),width:Yo(a.width+200),height:Yo(a.height+200),opacity:0}),(0,to.jsx)("path",{d:f,strokeDasharray:y,strokeDashoffset:b})]})),c&&w&&"none"!==e.props.fill&&(0,to.jsx)(zc,{d:c,color:e.props.color,fill:e.props.fill}),d&&x&&"none"!==e.props.fill&&(0,to.jsx)(zc,{d:d,color:e.props.color,fill:e.props.fill}),c&&(0,to.jsx)("path",{d:c}),d&&(0,to.jsx)("path",{d:d})]}),(0,to.jsx)("path",{d:f,className:"tl-hitarea-stroke"})]}),(0,to.jsx)(Jc,{id:e.id,text:e.props.text,font:e.props.font,size:e.props.size,position:o.middle,width:null!==(t=null==s?void 0:s.w)&&void 0!==t?t:0,labelColor:e.props.labelColor})]})}},{key:"indicator",value:function(e){var t=Vc(this.editor,e),n=t.start,r=t.end,i=this.getArrowInfo(e),o=this.bounds(e),a=this.getLabelBounds(e);if(!i)return null;if(xo.Equals(n,r))return null;var s=uu[e.props.size],l=i.start.arrowhead&&Bc(i,"start",s),u=i.end.arrowhead&&Bc(i,"end",s),c=i.isStraight?qc(i):Qc(i),d=l&&"arrow"!==i.start.arrowhead||u&&"arrow"!==i.end.arrowhead||null!==a,f=(e.id+"_clip").replace(":","_");return(0,to.jsxs)("g",{children:[d&&(0,to.jsx)("defs",{children:(0,to.jsxs)("mask",{id:f,children:[(0,to.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.w+200,height:o.h+200,fill:"white"}),a&&(0,to.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,fill:"black",rx:4,ry:4}),l&&(0,to.jsx)("path",{d:l,fill:"arrow"===i.start.arrowhead?"none":"black",stroke:"none"}),u&&(0,to.jsx)("path",{d:u,fill:"arrow"===i.end.arrowhead?"none":"black",stroke:"none"})]})}),(0,to.jsxs)("g",Pe(Pe({},d?{mask:"url(#".concat(f,")")}:void 0),{},{children:[d&&(0,to.jsx)("rect",{x:o.minX-100,y:o.minY-100,width:o.width+200,height:o.height+200,opacity:0}),(0,to.jsx)("path",{d:c})]})),l&&(0,to.jsx)("path",{d:l}),u&&(0,to.jsx)("path",{d:u}),a&&(0,to.jsx)("rect",{x:a.x,y:a.y,width:a.w,height:a.h,rx:4,ry:4})]})}},{key:"labelBoundsCache",get:function(){var p=this;return this.editor.store.createComputedCache("labelBoundsCache",function(e){var t=p.getArrowInfo(e),n=p.bounds(e),r=e.props,i=r.text,o=r.font,a=r.size;if(!t)return null;if(!i.trim())return null;var s=p.editor.textMeasure.measureText(i,Pe(Pe({},lu),{},{fontFamily:pu[o],fontSize:fu[a],width:"fit-content"})),l=s.w,u=l,c=s.h;if(n.width>n.height){u=Math.max(Math.min(l,64),Math.min(n.width-64,l));var d=p.editor.textMeasure.measureText(i,Pe(Pe({},lu),{},{fontFamily:pu[o],fontSize:fu[a],width:u+"px"}));u=d.w,c=d.h}if(16*fu[a]<u){u=16*fu[a];var f=p.editor.textMeasure.measureText(i,Pe(Pe({},lu),{},{fontFamily:pu[o],fontSize:fu[a],width:u+"px"}));u=f.w,c=f.h}return new $o(t.middle.x-(u+8)/2,t.middle.y-(c+8)/2,u+8,c+8)})}},{key:"getLabelBounds",value:function(e){return this.labelBoundsCache.get(e.id)||null}},{key:"toSvg",value:function(e,t,n){var r=n.fill[e.props.color],i=this.getArrowInfo(e),o=uu[e.props.size],a=document.createElementNS("http://www.w3.org/2000/svg","g");if(!i)return a;var s=i.start.arrowhead&&Bc(i,"start",o),l=i.end.arrowhead&&Bc(i,"end",o),u=this.bounds(e),c=this.getLabelBounds(e),d=(e.id+"_clip").replace(":","_");if(s||l||c){var f=document.createElementNS("http://www.w3.org/2000/svg","defs"),p=document.createElementNS("http://www.w3.org/2000/svg","mask");p.id=d;var h=document.createElementNS("http://www.w3.org/2000/svg","rect");if(h.setAttribute("x",u.minX-100+""),h.setAttribute("y",u.minY-100+""),h.setAttribute("width",u.width+200+""),h.setAttribute("height",u.height+200+""),h.setAttribute("fill","white"),p.appendChild(h),s&&p.appendChild(od(s,i.start.arrowhead)),l&&p.appendChild(od(l,i.end.arrowhead)),c){var v=document.createElementNS("http://www.w3.org/2000/svg","rect");v.setAttribute("x",c.x+""),v.setAttribute("y",c.y+""),v.setAttribute("width",c.w+""),v.setAttribute("height",c.h+""),v.setAttribute("fill","black"),p.appendChild(v)}f.appendChild(p),a.appendChild(f)}var g=document.createElementNS("http://www.w3.org/2000/svg","g");g.setAttribute("mask","url(#".concat(d,")")),a.appendChild(g);var m=document.createElementNS("http://www.w3.org/2000/svg","rect");m.setAttribute("x","-100"),m.setAttribute("y","-100"),m.setAttribute("width",u.width+200+""),m.setAttribute("height",u.height+200+""),m.setAttribute("fill","transparent"),m.setAttribute("stroke","none"),g.appendChild(m);var y,b,w,x,k=(y=i.isStraight?qc(i):Qc(i),b=r,w=o,(x=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",y),x.setAttribute("fill","none"),x.setAttribute("stroke",b),x.setAttribute("stroke-width",w+""),x),S=Lc(i.isStraight?i.length:Math.abs(i.bodyArc.length),o,{style:e.props.dash}),_=S.strokeDasharray,E=S.strokeDashoffset;if(k.setAttribute("stroke-dasharray",_),k.setAttribute("stroke-dashoffset",E),g.appendChild(k),s&&a.appendChild(ad(s,e.props.color,o,"arrow"===e.props.arrowheadStart?"none":e.props.fill,n)),l&&a.appendChild(ad(l,e.props.color,o,"arrow"===e.props.arrowheadEnd?"none":e.props.fill,n)),c){var P={fontSize:fu[e.props.size],lineHeight:lu.lineHeight,fontFamily:t,padding:0,textAlign:"middle",width:c.w-8,verticalTextAlign:"middle",height:c.h,fontStyle:"normal",fontWeight:"normal",overflow:"wrap"},C=su(this.editor,this.editor.textMeasure.measureTextSpans(e.props.text,P),P);C.setAttribute("fill",n.fill[e.props.labelColor]),Array.from(C.children).forEach(function(e){var t=parseFloat(e.getAttribute("x")||"0"),n=parseFloat(e.getAttribute("y")||"0");e.setAttribute("x",t+4+c.x+"px"),e.setAttribute("y",n+c.y+"px")});var I=C.cloneNode(!0);I.setAttribute("stroke-width","2"),I.setAttribute("fill",n.background),I.setAttribute("stroke",n.background),a.appendChild(I),a.appendChild(C)}return a}}]),i}();function od(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("fill","arrow"===t?"none":"black"),n.setAttribute("stroke","none"),n}function ad(e,t,n,r,i){var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",e),o.setAttribute("fill","none"),o.setAttribute("stroke",i.fill[t]),o.setAttribute("stroke-width",n+"");var a=Nc({d:e,fill:r,color:t,colors:i});if(a){var s=document.createElementNS("http://www.w3.org/2000/svg","g");return s.appendChild(a),s.appendChild(o),s}return o}function sd(e){return.5!==e.x||.5!==e.y}Ee(id,"type","arrow"),nd([zt],id.prototype,"infoCache",1),nd([zt],id.prototype,"labelBoundsCache",1);var ld=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onPointerDown",function(e){t.parent.transition("pointing",e)}),Ee(R(t),"onEnter",function(){t.editor.setCursor({type:"cross"})}),Ee(R(t),"onCancel",function(){t.editor.setSelectedTool("select")}),t}return P(o)}();Ee(ld,"id","idle");var ud=function(e){M(i,Ac);var r=N(i);function i(){var d;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(d=r.call.apply(r,[this].concat(t))),"shape",void 0),Ee(R(d),"preciseTimeout",-1),Ee(R(d),"didTimeout",!1),Ee(R(d),"onEnter",function(){var e,t=d.editor.inputs.currentPagePoint;d.didTimeout=!1,d.editor.mark("creating");var n=Rr();d.editor.createShapes([{id:n,type:"arrow",x:t.x,y:t.y}]);var r=d.editor.getShapeUtil(id),i=d.editor.getShapeById(n);if(i){var o=null===(e=r.handles)||void 0===e?void 0:e.call(r,i);if(o){var a,s=d.editor.getPointInShapeSpace(i,t),l=null===(a=r.onHandleChange)||void 0===a?void 0:a.call(r,i,{handle:Pe(Pe({},o[0]),{},{x:s.x,y:s.y}),isPrecise:!0});if(l){var u,c=null===(u=l.props)||void 0===u?void 0:u.start;"binding"===(null==c?void 0:c.type)&&d.editor.setHintingIds([c.boundShapeId]),d.editor.updateShapes([l],!0)}}d.editor.select(n),d.shape=d.editor.getShapeById(n),d.startPreciseTimeout()}}),Ee(R(d),"onExit",function(){d.clearPreciseTimeout()}),Ee(R(d),"onPointerMove",function(){if(d.shape&&d.editor.inputs.isDragging){var e,t=d.editor.getShapeUtil(d.shape),n=null===(e=t.handles)||void 0===e?void 0:e.call(t,d.shape);if(!n)throw d.editor.bailToMark("creating"),Error("No handles found");if(!d.didTimeout){var r=d.editor.getShapeUtil(id),i=d.editor.getShapeById(d.shape.id);if(!i)return;var o=r.handles(i);if(o){var a,s=d.editor.getPointInShapeSpace(i,d.editor.inputs.originPagePoint),l=s.x,u=s.y,c=null===(a=r.onHandleChange)||void 0===a?void 0:a.call(r,i,{handle:Pe(Pe({},o[0]),{},{x:l,y:u}),isPrecise:!1});c&&d.editor.updateShapes([c],!0)}}d.editor.setSelectedTool("select.dragging_handle",{shape:d.shape,handle:n.find(function(e){return"end"===e.id}),isCreating:!0,onInteractionEnd:"arrow"})}}),Ee(R(d),"onPointerUp",function(){d.cancel()}),Ee(R(d),"onCancel",function(){d.cancel()}),Ee(R(d),"onComplete",function(){d.cancel()}),Ee(R(d),"onInterrupt",function(){d.cancel()}),d}return P(i,[{key:"startPreciseTimeout",value:function(){var e=this;this.preciseTimeout=window.setTimeout(function(){e.isActive&&e.shape&&(e.didTimeout=!0)},300)}},{key:"clearPreciseTimeout",value:function(){clearTimeout(this.preciseTimeout)}},{key:"cancel",value:function(){this.editor.bailToMark("creating"),this.editor.setHintingIds([]),this.parent.transition("idle",{})}}]),i}();Ee(ud,"id","pointing");var cd=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"shapeType",id),e}return P(o)}();Ee(cd,"id","arrow"),Ee(cd,"initial","idle"),Ee(cd,"children",function(){return[ld,ud]});var dd=Tc("arrow",{util:id,props:ni,migrations:ri,tool:cd}),fd="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' fill='none'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M13 5H7a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6M19 5h6m0 0v6m0-6L13 17'/%3E%3C/svg%3E";function pd(e){var t=e.url,n=e.zoomLevel;return(0,to.jsx)("a",{className:so("tl-hyperlink-button",{"tl-hyperlink-button__hidden":n<.32}),href:t,target:"_blank",rel:"noopener noreferrer",onPointerDown:Fa,onPointerUp:Fa,title:t,draggable:!1,children:(0,to.jsx)("div",{className:"tl-hyperlink-button__icon",style:{mask:'url("'.concat(fd,'") center 100% / 100% no-repeat'),WebkitMask:'url("'.concat(fd,'") center 100% / 100% no-repeat')}})})}var hd=function(e){M(o,nu);var i=N(o);function o(){var n;z(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ee(R(n=i.call.apply(i,[this].concat(t))),"canResize",function(){return!1}),Ee(R(n),"hideSelectionBoundsBg",function(){return!0}),Ee(R(n),"hideSelectionBoundsFg",function(){return!0}),Ee(R(n),"onBeforeCreate",function(e){gd(n.editor,e)}),Ee(R(n),"onBeforeUpdate",function(e,t){if(e.props.url!==t.props.url){if(!uc(t.props.url))return Pe(Pe({},t),{},{props:Pe(Pe({},t.props),{},{url:e.props.url})});gd(n.editor,t)}}),n}return P(o,[{key:"defaultProps",value:function(){return{url:"",w:300,h:320,assetId:null}}},{key:"render",value:function(e){var t=e.props.assetId?this.editor.getAssetById(e.props.assetId):null,n=this.editor.getPageRotation(e),r=vd(e);return(0,to.jsx)(Yl,{children:(0,to.jsxs)("div",{className:"tl-bookmark__container tl-hitarea-stroke",style:{boxShadow:Na(n)},children:[(0,to.jsxs)("div",{className:"tl-bookmark__image_container",children:[null!=t&&t.props.image?(0,to.jsx)("img",{className:"tl-bookmark__image",draggable:!1,src:null==t?void 0:t.props.image,alt:(null==t?void 0:t.props.title)||""}):(0,to.jsx)("div",{className:"tl-bookmark__placeholder"}),(0,to.jsx)(pd,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]}),(0,to.jsxs)("div",{className:"tl-bookmark__copy_container",children:[(null==t?void 0:t.props.title)&&(0,to.jsx)("h2",{className:"tl-bookmark__heading",children:Ba((null==t?void 0:t.props.title)||"",54)}),(null==t?void 0:t.props.description)&&(0,to.jsx)("p",{className:"tl-bookmark__description",children:Ba((null==t?void 0:t.props.description)||"",128)}),(0,to.jsx)("a",{className:"tl-bookmark__link",href:e.props.url||"",target:"_blank",rel:"noopener noreferrer",onPointerDown:Fa,onPointerUp:Fa,onClick:Fa,children:Ba(r,45)})]})]})})}},{key:"indicator",value:function(e){return(0,to.jsx)("rect",{width:Yo(e.props.w),height:Yo(e.props.h),rx:"8",ry:"8"})}}]),o}();Ee(hd,"type","bookmark");var vd=function(t){try{var e=new URL(t.props.url),n=e.pathname.replace(/\/*$/,"");return"".concat(e.hostname).concat(n)}catch(e){return t.props.url}};function gd(e,t){var n=t.props.url,r=Pr.createId($(n));e.getAssetById(r)?t.props.assetId!==r&&e.updateShapes([{id:t.id,type:t.type,props:{assetId:r}}]):(e.updateShapes([{id:t.id,type:t.type,props:{assetId:null}}]),yd(e,t))}var md,yd=Y((md=ao(io().mark(function e(t,n){var r,i;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.url,e.next=3,t.externalContentManager.createAssetFromUrl(t,r);case 3:if(i=e.sent){e.next=6;break}return e.abrupt("return");case 6:t.batch(function(){t.createAssets([i]),t.updateShapes([{id:n.id,type:n.type,props:{assetId:i.id}}])});case 7:case"end":return e.stop()}},e)})),function(e,t){return md.apply(this,arguments)}),500),bd=Tc("bookmark",{util:hd,props:oi,migrations:ai});function wd(){var e=mo();return ho("zoom",function(){return e.zoomLevel<.35},[e])}var xd=function(e){return.65*e+.35*Co(e*So/2)},kd=function(e){return{size:1+e,thinning:0,streamline:.62+(1+e)/8*.06,smoothing:.62,simulatePressure:!1,easing:wo.linear}};function Sd(e){var t=e.strokeWidth,n=e.showAsComplete,r=e.isPen;return{size:1+t,thinning:.1,streamline:.5,smoothing:.5,simulatePressure:!r,easing:r?xd:wo.easeOutSine,last:n}}function _d(e,t,n,r){return Pe(Pe({},r?kd(t):"draw"===e.dash?e.isPen?{size:1+1.2*t,thinning:.62,streamline:.62,smoothing:.62,simulatePressure:!1,easing:xd}:{size:1+t,thinning:.5,streamline:.62+(1+t)/8*.06,smoothing:.62,easing:wo.easeOutSine,simulatePressure:!0}:kd(t)),{},{last:e.isComplete||n})}function Ed(e){var t,n=[],r=ce(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if("free"===i.type||i.points.length<2)n.push.apply(n,de(i.points.map(xo.Cast)));else{var o=Math.max(4,Math.floor(xo.Dist(i.points[0],i.points[1])/16));n.push.apply(n,de(xo.PointsBetween(i.points[0],i.points[1],o)))}}}catch(e){r.e(e)}finally{r.f()}return n}function Pd(e,t){return{draw:"none",solid:"none",dotted:"0.1 ".concat(2*t),dashed:"".concat(2*t," ").concat(2*t)}[e.props.dash]}var Cd=function(e){M(o,eu);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"hideResizeHandles",function(e){return Td(e)}),Ee(R(e),"hideRotateHandle",function(e){return Td(e)}),Ee(R(e),"hideSelectionBoundsBg",function(e){return Td(e)}),Ee(R(e),"hideSelectionBoundsFg",function(e){return Td(e)}),Ee(R(e),"isClosed",function(e){return e.props.isClosed}),Ee(R(e),"onResize",function(e,t){var n,i=t.scaleX,o=t.scaleY,r=[],a=ce(e.props.segments);try{for(a.s();!(n=a.n()).done;){var s=n.value;r.push(Pe(Pe({},s),{},{points:s.points.map(function(e){var t=e.x,n=e.y,r=e.z;return{x:Xo(i*t),y:Xo(o*n),z:r}})}))}}catch(e){a.e(e)}finally{a.f()}return{props:{segments:r}}}),e}return P(o,[{key:"defaultProps",value:function(){return{segments:[],color:"black",fill:"none",dash:"draw",size:"m",isComplete:!1,isClosed:!1,isPen:!1}}},{key:"getBounds",value:function(e){return $o.FromPoints(this.outline(e))}},{key:"getOutline",value:function(e){return Ed(e.props.segments)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e),r=this.editor.zoomLevel,i=uu[e.props.size]/r;if(1===e.props.segments.length&&e.props.segments[0].points.length<4&&e.props.segments[0].points.some(function(e){return xo.Dist(t,e)<1.5*i}))return!0;if(this.isClosed(e))return Ho(t,n);if(this.bounds(e).containsPoint(t))for(var o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(xo.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){var r=this.outline(e);if(1===e.props.segments.length&&e.props.segments[0].points.length<4){var i=this.editor.zoomLevel,o=uu[e.props.size]/i;if(e.props.segments[0].points.some(function(e){return xo.DistanceToLineSegment(t,n,e)<1.5*o}))return!0}if(this.isClosed(e))for(var a=0;a<r.length;a++){var s=r[a],l=r[(a+1)%r.length];if(ya(t,n,s,l))return!0}else for(var u=0;u<r.length-1;u++){var c=r[u],d=r[u+1];if(ya(t,n,c,d))return!0}return!1}},{key:"render",value:function(e){var t,n=wd(),r=uu[e.props.size],i=Ed(e.props.segments),o=e.props.isComplete||"straight"===(null===(t=ae(e.props.segments))||void 0===t?void 0:t.type),a=r;n||e.props.isPen||"draw"!==e.props.dash||1!==i.length||(a+=G(e.id)()*(r/6));var s=_d(e.props,a,o,n),l=la(i,s),u=1<l.length?Ha(l,e.props.isClosed):Id(i[0],a);if(!n&&"draw"===e.props.dash||l.length<2){da(l,s);var c=oa(l,s);return(0,to.jsxs)(Oc,{id:e.id,children:[(0,to.jsx)(zc,{fill:e.props.isClosed?e.props.fill:"none",color:e.props.color,d:u}),(0,to.jsx)("path",{d:Wa(c,!0),strokeLinecap:"round",fill:"var(--palette-".concat(e.props.color,")")})]})}return(0,to.jsxs)(Oc,{id:e.id,children:[(0,to.jsx)(zc,{color:e.props.color,fill:e.props.isClosed?e.props.fill:"none",d:u}),(0,to.jsx)("path",{d:u,strokeLinecap:"round",fill:"none",stroke:"var(--palette-".concat(e.props.color,")"),strokeWidth:r,strokeDasharray:Pd(e,r),strokeDashoffset:"0"})]})}},{key:"indicator",value:function(e){var t,n=wd(),r=uu[e.props.size],i=Ed(e.props.segments),o=r;n||e.props.isPen||"draw"!==e.props.dash||1!==i.length||(o+=G(e.id)()*(r/6));var a=e.props.isComplete||"straight"===(null===(t=ae(e.props.segments))||void 0===t?void 0:t.type),s=la(i,_d(e.props,o,a,!0)),l=1<s.length?Ha(s,e.props.isClosed):Id(i[0],o);return(0,to.jsx)("path",{d:l})}},{key:"toSvg",value:function(e,t,n){var r,i=e.props.color,o=uu[e.props.size],a=Ed(e.props.segments),s=e.props.isComplete||"straight"===(null===(r=ae(e.props.segments))||void 0===r?void 0:r.type),l=o;e.props.isPen||"draw"!==e.props.dash||1!==a.length||(l+=G(e.id)()*(o/6));var u,c=_d(e.props,l,s,!1),d=la(a,c),f=1<d.length?Ha(d,e.props.isClosed):Id(a[0],l);if("draw"===e.props.dash||d.length<2){da(d,c);var p=oa(d,c),h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d",Wa(p,!0)),h.setAttribute("fill",n.fill[i]),h.setAttribute("stroke-linecap","round"),u=h}else{var v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d",f),v.setAttribute("stroke",n.fill[i]),v.setAttribute("fill","none"),v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-width",o.toString()),v.setAttribute("stroke-dasharray",Pd(e,o)),v.setAttribute("stroke-dashoffset","0"),u=v}var g=Nc({fill:e.props.isClosed?e.props.fill:"none",d:f,color:e.props.color,colors:n});if(g){var m=document.createElementNS("http://www.w3.org/2000/svg","g");return m.appendChild(g),m.appendChild(u),m}return u}},{key:"expandSelectionOutlinePx",value:function(e){var t="draw"===e.props.dash?1.6:1;return uu[e.props.size]*t/2}}]),o}();function Id(e,t){var n=.5*(t+1);return"M ".concat(e.x," ").concat(e.y," m -").concat(n,", 0 a ").concat(n,",").concat(n," 0 1,0 ").concat(2*n,",0 a ").concat(n,",").concat(n," 0 1,0 -").concat(2*n,",0")}function Td(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}Ee(Cd,"type","draw");var Md=function(e){M(o,eu);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"hideResizeHandles",function(e){return zd(e)}),Ee(R(e),"hideRotateHandle",function(e){return zd(e)}),Ee(R(e),"hideSelectionBoundsBg",function(e){return zd(e)}),Ee(R(e),"hideSelectionBoundsFg",function(e){return zd(e)}),Ee(R(e),"onResize",function(e,t){var n,i=t.scaleX,o=t.scaleY,r=[],a=ce(e.props.segments);try{for(a.s();!(n=a.n()).done;){var s=n.value;r.push(Pe(Pe({},s),{},{points:s.points.map(function(e){var t=e.x,n=e.y,r=e.z;return{x:i*t,y:o*n,z:r}})}))}}catch(e){a.e(e)}finally{a.f()}return{props:{segments:r}}}),e}return P(o,[{key:"defaultProps",value:function(){return{segments:[],color:"black",size:"m",isComplete:!1,isPen:!1}}},{key:"getBounds",value:function(e){return $o.FromPoints(this.outline(e))}},{key:"getOutline",value:function(e){return Ed(e.props.segments)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e),r=this.editor.zoomLevel,i=Ld(e)/r;if(1===e.props.segments.length&&e.props.segments[0].points.length<4&&e.props.segments[0].points.some(function(e){return xo.Dist(t,e)<1.5*i}))return!0;if(this.bounds(e).containsPoint(t))for(var o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(xo.DistanceToLineSegment(a,s,t)<i)return!0}return!1}},{key:"hitTestLineSegment",value:function(e,t,n){var r=this.outline(e);if(1===e.props.segments.length&&e.props.segments[0].points.length<4){var i=this.editor.zoomLevel,o=Ld(e)/i;if(e.props.segments[0].points.some(function(e){return xo.DistanceToLineSegment(t,n,e)<1.5*o}))return!0}for(var a=0;a<r.length-1;a++){var s=r[a],l=r[a+1];if(ya(t,n,s,l))return!0}return!1}},{key:"render",value:function(e){return(0,to.jsx)(jd,{strokeWidth:Ld(e),shape:e,opacity:.35})}},{key:"renderBackground",value:function(e){return(0,to.jsx)(jd,{strokeWidth:Ld(e),shape:e,opacity:.82})}},{key:"indicator",value:function(e){var t,n=wd(),r=Ld(e),i=Ed(e.props.segments),o=r;n||e.props.isPen||1!==i.length||(o+=G(e.id)()*(r/6));var a,s,l,u=la(i,Sd({strokeWidth:r,showAsComplete:e.props.isComplete||"straight"===(null===(t=ae(e.props.segments))||void 0===t?void 0:t.type),isPen:e.props.isPen}));return a=u.length<2?(s=i[0],l=o/2,"M ".concat(s.x," ").concat(s.y," m -").concat(l,", 0 a ").concat(l,",").concat(l," 0 1,0 ").concat(2*l,",0 a ").concat(l,",").concat(l," 0 1,0 -").concat(2*l,",0")):Ha(u,!1),(0,to.jsx)("path",{d:a})}},{key:"expandSelectionOutlinePx",value:function(e){return Ld(e)/2}},{key:"toSvg",value:function(e,t,n){return Od(Ld(e),e,.35,n)}},{key:"toBackgroundSvg",value:function(e,t,n){return Od(Ld(e),e,.82,n)}}]),o}();function Ad(e,t,n){var r,i=Ed(e.props.segments),o=e.props.isComplete||"straight"===(null===(r=ae(e.props.segments))||void 0===r?void 0:r.type),a=t;n||e.props.isPen||1!==i.length||(a+=G(e.id)()*(t/6));var s,l=la(i,Sd({strokeWidth:a,showAsComplete:o,isPen:e.props.isPen}));return{solidStrokePath:1<l.length?Ha(l,!1):(s=i[0],"M ".concat(s.x," ").concat(s.y," m -").concat(.1,", 0 a ").concat(.1,",").concat(.1," 0 1,0 ").concat(.2,",0 a ").concat(.1,",").concat(.1," 0 1,0 -").concat(.2,",0")),sw:a}}function jd(e){var t=e.strokeWidth,n=e.shape,r=e.opacity,i=Ad(n,t,wd()),o=i.solidStrokePath,a=i.sw;return(0,to.jsx)(Oc,{id:n.id,style:{opacity:r},children:(0,to.jsx)("path",{d:o,strokeLinecap:"round",fill:"none",pointerEvents:"all",stroke:"var(--palette-".concat(n.props.color,"-highlight)"),strokeWidth:a})})}function Od(e,t,n,r){var i=Ad(t,e,!1),o=i.solidStrokePath,a=i.sw,s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",o),s.setAttribute("fill","none"),s.setAttribute("stroke",r.highlight[t.props.color]),s.setAttribute("stroke-width","".concat(a)),s.setAttribute("opacity","".concat(n)),s}function Ld(e){return 1.12*cu[e.props.size]}function zd(e){return 1===e.props.segments.length&&e.props.segments[0].points.length<2}Ee(Md,"type","highlight");var Rd=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"initialShape",void 0),Ee(R(t),"shapeType","highlight"===t.parent.id?Md:Cd),Ee(R(t),"util",t.editor.getShapeUtil(t.shapeType)),Ee(R(t),"isPen",!1),Ee(R(t),"segmentMode","free"),Ee(R(t),"didJustShiftClickToExtendPreviousShapeLine",!1),Ee(R(t),"pagePointWhereCurrentSegmentChanged",{}),Ee(R(t),"pagePointWhereNextSegmentChanged",null),Ee(R(t),"lastRecordedPoint",{}),Ee(R(t),"mergeNextPoint",!1),Ee(R(t),"currentLineLength",0),Ee(R(t),"canDraw",!1),Ee(R(t),"onEnter",function(e){t.info=e,t.canDraw=!t.editor.isMenuOpen,t.lastRecordedPoint=t.editor.inputs.currentPagePoint.clone(),t.canDraw&&t.startShape()}),Ee(R(t),"onPointerMove",function(){var e=R(t).editor.inputs;t.isPen!==e.isPen&&t.cancel(),!t.canDraw&&e.isDragging&&(t.startShape(),t.canDraw=!0),t.canDraw&&(e.isPen?xo.Dist(e.currentPagePoint,t.lastRecordedPoint)>=1/t.editor.zoomLevel?(t.lastRecordedPoint=e.currentPagePoint.clone(),t.mergeNextPoint=!1):t.mergeNextPoint=!0:t.mergeNextPoint=!1,t.updateShapes())}),Ee(R(t),"onKeyDown",function(e){if("Shift"===e.key)switch(t.segmentMode){case"free":t.segmentMode="starting_straight",t.pagePointWhereNextSegmentChanged=t.editor.inputs.currentPagePoint.clone();break;case"starting_free":t.segmentMode="starting_straight"}t.updateShapes()}),Ee(R(t),"onKeyUp",function(e){if("Shift"===e.key)switch(t.editor.snaps.clear(),t.segmentMode){case"straight":t.segmentMode="starting_free",t.pagePointWhereNextSegmentChanged=t.editor.inputs.currentPagePoint.clone();break;case"starting_straight":t.pagePointWhereNextSegmentChanged=null,t.segmentMode="free"}t.updateShapes()}),Ee(R(t),"onExit",function(){t.editor.snaps.clear(),t.pagePointWhereCurrentSegmentChanged=t.editor.inputs.currentPagePoint.clone()}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onCancel",function(){t.cancel()}),Ee(R(t),"onComplete",function(){t.complete()}),Ee(R(t),"onInterrupt",function(){t.editor.inputs.isDragging||(t.editor.bail(),t.cancel())}),t}return P(o,[{key:"canClose",value:function(){return"highlight"!==this.shapeType.type}},{key:"getIsClosed",value:function(e,t){if(!this.canClose())return!1;var n=uu[t],r=e[0].points[0],i=e[e.length-1],o=i.points[i.points.length-1];return r!==o&&this.currentLineLength>4*n&&xo.Dist(r,o)<2*n}},{key:"startShape",value:function(){var e=this.editor.inputs,t=e.originPagePoint,n=e.isPen;this.editor.mark("draw create start"),this.isPen=n;var r=this.isPen?1.25*this.info.point.z:.5;if(this.segmentMode=this.editor.inputs.shiftKey?"straight":"free",this.didJustShiftClickToExtendPreviousShapeLine=!1,this.lastRecordedPoint=t.clone(),this.initialShape){var i=this.editor.getShapeById(this.initialShape.id);if(i&&"straight"===this.segmentMode){this.didJustShiftClickToExtendPreviousShapeLine=!0;var o=ae(i.props.segments);if(!o)throw Error("Expected a previous segment!");var a=ae(o.points);if(!a)throw Error("Expected a previous point!");var s=this.editor.getPointInShapeSpace(i,t).toFixed(),l=s.x,u=s.y,c=this.isPen?1.25*this.info.point.z:.5,d={type:this.segmentMode,points:[{x:a.x,y:a.y,z:+c.toFixed(2)},{x:l,y:u,z:+c.toFixed(2)}]},f=na.applyToPoint(this.editor.getPageTransformById(i.id),a);this.pagePointWhereCurrentSegmentChanged=f,this.pagePointWhereNextSegmentChanged=null;var p=[].concat(de(i.props.segments),[d]);this.currentLineLength=this.getLineLength(p);var h={id:i.id,type:this.shapeType.type,props:{segments:p}};return this.canClose()&&(h.props.isClosed=this.getIsClosed(p,i.props.size)),void this.editor.updateShapes([h])}}this.pagePointWhereCurrentSegmentChanged=t.clone();var v=Rr();this.editor.createShapes([{id:v,type:this.shapeType.type,x:t.x,y:t.y,props:{isPen:this.isPen,segments:[{type:this.segmentMode,points:[{x:0,y:0,z:+r.toFixed(2)}]}]}}]),this.currentLineLength=0,this.initialShape=this.editor.getShapeById(v)}},{key:"updateShapes",value:function(){var e=this.editor.inputs,t=this.initialShape;if(t){var n=t.id,r=t.props.size,i=this.editor.getShapeById(n);if(i){var o=i.props.segments,a=this.editor.getPointInShapeSpace(i,e.currentPagePoint).toFixed(),s=a.x,l=a.y,u=a.z,c={x:s,y:l,z:this.isPen?+(1.25*u).toFixed(2):.5};switch(this.segmentMode){case"starting_straight":var d=this.pagePointWhereNextSegmentChanged;if(null===d)throw Error("We should have a point where the segment changed");if(4<xo.Dist(d,e.currentPagePoint)){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="straight";var f=ae(o);if(!f)throw Error("Expected a previous segment!");var p,h=ae(f.points);if(!h)throw Error("Expected a previous last point!");var v=this.editor.getPointInShapeSpace(i,this.pagePointWhereCurrentSegmentChanged).toFixed().toJson();if("straight"===f.type){this.currentLineLength+=xo.Dist(h,v),p={type:"straight",points:[Pe({},h),v]};var g=this.editor.getPageTransform(i);this.pagePointWhereCurrentSegmentChanged=na.applyToPoint(g,h)}else p={type:"straight",points:[v,c]};var m={id:n,type:this.shapeType.type,props:{segments:[].concat(de(o),[p])}};this.canClose()&&(m.props.isClosed=this.getIsClosed(o,r)),this.editor.updateShapes([m],!0)}break;case"starting_free":var y=this.pagePointWhereNextSegmentChanged;if(null===y)throw Error("We should have a point where the segment changed");if(4<xo.Dist(y,e.currentPagePoint)){this.pagePointWhereCurrentSegmentChanged=this.pagePointWhereNextSegmentChanged.clone(),this.pagePointWhereNextSegmentChanged=null,this.segmentMode="free";var b=o.slice(),w=ae(b[b.length-1].points);if(!w)throw Error("No previous point!");var x={type:"free",points:de(xo.PointsBetween(w,c,6).map(function(e){return e.toFixed().toJson()}))},k=[].concat(de(b),[x]);this.currentLineLength=this.getLineLength(k);var S={id:n,type:this.shapeType.type,props:{segments:k}};this.canClose()&&(S.props.isClosed=this.getIsClosed(k,r)),this.editor.updateShapes([S],!0)}break;case"straight":var _,E=o.slice(),P=E[E.length-1],C=this.pagePointWhereCurrentSegmentChanged,I=this.editor.inputs,T=I.currentPagePoint,M=I.ctrlKey;if(!C)throw Error("We should have a point where the segment changed");var A=!1;this.didJustShiftClickToExtendPreviousShapeLine?this.editor.inputs.isDragging&&(A=!M,this.didJustShiftClickToExtendPreviousShapeLine=!1):A=!M;var j=this.editor.getPointInShapeSpace(i,T).toFixed().toJson(),O=!1,L=void 0;if((this.editor.isSnapMode?!M:M)&&2<E.length){for(var z=void 0,R=8/this.editor.zoomLevel,N=0,D=o.length-2;N<D;N++){var B=o[N];if(!B)break;if("free"!==B.type){var F=B.points[0],U=ae(B.points);if(F&&U){var K=xo.NearestPointOnLineSegment(F,U,j),V=xo.Dist(K,j);if(V<R){z=K.toFixed().toJson(),R=V,L=B;break}}}}z&&(O=!0,j=z)}if(O&&L){var W=this.editor.getPageTransform(i),H=L.points[0],Y=ae(L.points);if(!Y)throw Error("Expected a last point!");var X=na.applyToPoint(W,H),q=na.applyToPoint(W,Y),$=na.applyToPoint(W,j);this.editor.snaps.setLines([{id:ac(),type:"points",points:[X,$,q]}])}else{if(this.editor.snaps.clear(),A){var G=xo.Angle(C,T),Q=No(G,24)-G;_=xo.RotWith(T,C,Q)}else _=T;j=this.editor.getPointInShapeSpace(i,_).toFixed().toJson()}this.currentLineLength+=xo.Dist(P.points[0],j),E[E.length-1]=Pe(Pe({},P),{},{type:"straight",points:[P.points[0],j]});var Z={id:n,type:this.shapeType.type,props:{segments:E}};this.canClose()&&(Z.props.isClosed=this.getIsClosed(o,r)),this.editor.updateShapes([Z],!0);break;case"free":var J=o.slice(),ee=J[J.length-1],te=de(ee.points);if(te.length&&this.mergeNextPoint){var ne=te[te.length-1].z;te[te.length-1]={x:c.x,y:c.y,z:ne?Math.max(ne,c.z):c.z}}else this.currentLineLength+=xo.Dist(te[te.length-1],c),te.push(c);J[J.length-1]=Pe(Pe({},ee),{},{points:te}),this.currentLineLength=this.getLineLength(J);var re={id:n,type:this.shapeType.type,props:{segments:J}};if(this.canClose()&&(re.props.isClosed=this.getIsClosed(J,r)),this.editor.updateShapes([re],!0),500<te.length){this.editor.updateShapes([{id:n,type:this.shapeType.type,props:{isComplete:!0}}]);var ie=this.editor.inputs.currentPagePoint,oe=Rr();this.editor.createShapes([{id:oe,type:this.shapeType.type,x:Xo(ie.x),y:Xo(ie.y),props:{isPen:this.isPen,segments:[{type:"free",points:[{x:0,y:0,z:this.isPen?+(1.25*u).toFixed():.5}]}]}}]),this.initialShape=be(this.editor.getShapeById(oe)),this.mergeNextPoint=!1,this.lastRecordedPoint=this.editor.inputs.currentPagePoint.clone(),this.currentLineLength=0}}}}}},{key:"getLineLength",value:function(e){var t,n=0,r=ce(e);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,o=0;o<i.points.length-1;o++){var a=i.points[o],s=i.points[o+1];n+=xo.Sub(s,a).len2()}}catch(e){r.e(e)}finally{r.f()}return Math.sqrt(n)}},{key:"complete",value:function(){if(this.canDraw){var e=this.initialShape;e&&(this.editor.updateShapes([{id:e.id,type:e.type,props:{isComplete:!0}}]),this.parent.transition("idle",{}))}else this.cancel()}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}]),o}();Ee(Rd,"id","drawing");var Nd=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onPointerDown",function(e){t.parent.transition("drawing",e)}),Ee(R(t),"onEnter",function(){t.editor.setCursor({type:"cross"})}),Ee(R(t),"onCancel",function(){t.editor.setSelectedTool("select")}),t}return P(o)}();Ee(Nd,"id","idle");var Dd=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"shapeType",Cd),Ee(R(e),"onExit",function(){e.children.drawing.initialShape=void 0}),e}return P(o)}();Ee(Dd,"id","draw"),Ee(Dd,"initial","idle"),Ee(Dd,"children",function(){return[Nd,Rd]});var Bd=Tc("draw",{util:Cd,props:ui,migrations:ci,tool:Dd}),Fd=Tc("embed",{util:ru,props:bi,migrations:wi}),Ud=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onPointerDown",function(e){t.parent.transition("pointing",e)}),Ee(R(t),"onEnter",function(){t.editor.setCursor({type:"cross"})}),Ee(R(t),"onCancel",function(){t.editor.setSelectedTool("select")}),t}return P(o)}();Ee(Ud,"id","idle");var Kd=function(e){M(o,Ac);var r=N(o);function o(){var i;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(i=r.call.apply(r,[this].concat(t))),"markId","creating"),Ee(R(i),"wasFocusedOnEnter",!1),Ee(R(i),"onEnter",function(){var e=i.editor.isMenuOpen;i.wasFocusedOnEnter=!e}),Ee(R(i),"onPointerMove",function(e){if(i.editor.inputs.isDragging){var t=i.editor.inputs.originPagePoint,n=i.parent.shapeType.type,r=Rr();i.editor.mark(i.markId),i.editor.createShapes([{id:r,type:n,x:t.x,y:t.y,props:{w:1,h:1}}],!0),i.editor.setSelectedTool("select.resizing",Pe(Pe({},e),{},{target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:i.parent.id}))}}),Ee(R(i),"onPointerUp",function(){i.complete()}),Ee(R(i),"onCancel",function(){i.cancel()}),Ee(R(i),"onComplete",function(){i.complete()}),Ee(R(i),"onInterrupt",function(){i.cancel()}),i}return P(o,[{key:"complete",value:function(){var e=this.editor.inputs.originPagePoint;if(this.wasFocusedOnEnter){this.editor.mark(this.markId);var t=this.parent.shapeType.type,n=Rr();this.editor.mark(this.markId),this.editor.createShapes([{id:n,type:t,x:e.x,y:e.y}]);var r=this.editor.getShapeById(n),i=this.editor.getShapeUtil(r).defaultProps(),o=i.w,a=i.h,s=this.editor.getDeltaInParentSpace(r,new xo(o/2,a/2));this.editor.updateShapes([{id:n,type:t,x:r.x-s.x,y:r.y-s.y}]),this.editor.setSelectedIds([n]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setSelectedTool("select.idle")}}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),o}();Ee(Kd,"id","pointing");var Vd=function(e){M(n,Ac);var t=N(n);function n(){return z(this,n),t.apply(this,arguments)}return P(n)}();function Wd(e){var t=e.bounds,o=e.zoomLevel,n=e.className;return(0,to.jsx)("g",{className:n,pointerEvents:"none",strokeLinecap:"round",strokeLinejoin:"round",children:t.sides.map(function(e,t){var n=Lc(e[0].dist(e[1]),1/o,{style:"dashed",lengthRatio:4}),r=n.strokeDasharray,i=n.strokeDashoffset;return(0,to.jsx)("line",{x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y,strokeDasharray:r,strokeDashoffset:i},t)})})}Ee(Vd,"id","box"),Ee(Vd,"initial","idle"),Ee(Vd,"children",function(){return[Ud,Kd]});var Hd=function(e){M(d,eu);var i=N(d);function d(){var n;z(this,d);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ee(R(n=i.call.apply(i,[this].concat(t))),"type","group"),Ee(R(n),"hideSelectionBoundsBg",function(){return!1}),Ee(R(n),"hideSelectionBoundsFg",function(){return!0}),Ee(R(n),"canBind",function(){return!1}),Ee(R(n),"onChildrenChange",function(e){var t=n.editor.getSortedChildIds(e.id);return 0===t.length?(n.editor.pageState.focusLayerId===e.id&&n.editor.popFocusLayer(),void n.editor.deleteShapes([e.id])):1===t.length?(n.editor.pageState.focusLayerId===e.id&&n.editor.popFocusLayer(),n.editor.reparentShapesById(t,e.parentId),void n.editor.deleteShapes([e.id])):void 0}),n}return P(d,[{key:"defaultProps",value:function(){return{}}},{key:"getBounds",value:function(e){var n=this,t=this.editor.getSortedChildIds(e.id);if(0===t.length)return new $o;var r=t.flatMap(function(e){var t=n.editor.getShapeById(e);return n.editor.getOutlineById(e).map(function(e){return na.applyToPoint(n.editor.getTransform(t),e)})});return $o.FromPoints(r)}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"render",value:function(t){var n=this,e=this.editor,r=e.erasingIdsSet,i=e.pageState,o=i.hintingIds,a=i.focusLayerId,s=e.zoomLevel,l=r.has(t.id),u=0<o.length&&o.some(function(e){return e!==t.id&&n.editor.isShapeOfType(n.editor.getShapeById(e),d)});if(!l&&(t.id!==a||u))return null;var c=this.bounds(t);return(0,to.jsx)(Oc,{id:t.id,children:(0,to.jsx)(Wd,{className:"tl-group",bounds:c,zoomLevel:s})})}},{key:"indicator",value:function(e){var t=this.editor.camera.z,n=this.bounds(e);return(0,to.jsx)(Wd,{className:"",bounds:n,zoomLevel:t})}}]),d}();Ee(Hd,"type","group");var Yd=(0,_e.forwardRef)(function(e,t){var i=e.id,n=e.name,r=e.isEditing,o=mo(),a=(0,_e.useCallback)(function(e){"Enter"===e.key&&(e.stopPropagation(),e.currentTarget.blur(),o.setEditingId(null))},[o]),s=(0,_e.useCallback)(function(e){var t=o.getShapeById(i);if(t){var n=t.props.name,r=e.currentTarget.value.trim();n!==r&&o.updateShapes([{id:i,type:"frame",props:{name:r}}],!0)}},[i,o]),l=(0,_e.useCallback)(function(e){var t=o.getShapeById(i);if(t){var n=t.props.name,r=e.currentTarget.value;n!==r&&o.updateShapes([{id:i,type:"frame",props:{name:r}}],!0)}},[i,o]);return(0,to.jsxs)("div",{className:"tl-frame-label ".concat(r?"tl-frame-label__editing":""),children:[(0,to.jsx)("input",{className:"tl-frame-name-input",ref:t,style:{display:r?void 0:"none"},value:n,autoFocus:!0,onKeyDown:a,onBlur:s,onChange:l}),au(n,"Frame")+String.fromCharCode(8203)]})}),Xd=function(e){var t=e.id,n=e.name,r=e.width,i=e.height,o=jo(mo().getPageRotationById(t)),a=Xl(t),s=(0,_e.useRef)(null);(0,_e.useEffect)(function(){var e=s.current;e&&a&&(e.focus(),e.select(),requestAnimationFrame(function(){document.activeElement!==e&&(e.focus(),e.select())}))},[s,a]);var l,u=((o+Math.PI/4)*(2/Math.PI)+4)%4,c=["top","left","bottom","right"][Math.floor(u)];switch(c){case"top":l="";break;case"right":l="translate(".concat(Yo(r),"px, 0px) rotate(90deg)");break;case"bottom":l="translate(".concat(Yo(r),"px, ").concat(Yo(i),"px) rotate(180deg)");break;case"left":l="translate(0px, ".concat(Yo(i),"px) rotate(270deg)")}return(0,to.jsx)("div",{className:"tl-frame-heading",style:{overflow:a?"visible":"hidden",maxWidth:"calc(var(--tl-zoom) * ".concat("top"===c||"bottom"===c?Math.ceil(r):Math.ceil(i),"px + var(--space-5))"),bottom:Math.ceil(i),transform:"".concat(l," scale(var(--tl-scale)) translateX(calc(-1 * var(--space-3))")},children:(0,to.jsx)("div",{className:"tl-frame-heading-hit-area",children:(0,to.jsx)(Yd,{ref:s,id:t,name:n,isEditing:a})})})},qd=function(e){M(i,nu);var r=N(i);function i(){var s;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(s=r.call.apply(r,[this].concat(t))),"canBind",function(){return!0}),Ee(R(s),"canEdit",function(){return!0}),Ee(R(s),"canReceiveNewChildrenOfType",function(e,t){return!e.isLocked}),Ee(R(s),"canDropShapes",function(e,t){return!e.isLocked}),Ee(R(s),"onDragShapesOver",function(t,e){return e.every(function(e){return e.parentId===t.id})?{shouldHint:!1}:(s.editor.reparentShapesById(e.map(function(e){return e.id}),t.id),{shouldHint:!0})}),Ee(R(s),"onDragShapesOut",function(e,t){var n=s.editor.getShapeById(e.parentId);n&&s.editor.isShapeOfType(n,Hd)?s.editor.reparentShapesById(t.map(function(e){return e.id}),n.id):s.editor.reparentShapesById(t.map(function(e){return e.id}),s.editor.currentPageId)}),Ee(R(s),"onResizeEnd",function(e){var t,n=s.editor.getPageBounds(e),r=[],i=ce(s.editor.getSortedChildIds(e.id));try{for(i.s();!(t=i.n()).done;){var o=t.value,a=s.editor.getPageBoundsById(o);n.includes(a)||r.push(o)}}catch(e){i.e(e)}finally{i.f()}0<r.length&&s.editor.reparentShapesById(r,s.editor.currentPageId)}),s}return P(i,[{key:"defaultProps",value:function(){return{w:320,h:180,name:""}}},{key:"render",value:function(e){var t=this.bounds(e);return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)(Oc,{children:[(0,to.jsx)("rect",{className:"tl-hitarea-stroke",width:t.width,height:t.height}),(0,to.jsx)("rect",{className:"tl-frame__body",width:t.width,height:t.height,fill:"none"})]}),(0,to.jsx)(Xd,{id:e.id,name:e.props.name,width:t.width,height:t.height})]})}},{key:"toSvg",value:function(e,t,n){var r=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("width",e.props.w.toString()),i.setAttribute("height",e.props.h.toString()),i.setAttribute("fill",n.solid),i.setAttribute("stroke",n.fill.black),i.setAttribute("stroke-width","1"),i.setAttribute("rx","1"),i.setAttribute("ry","1"),r.appendChild(i);var o,a=((jo(this.editor.getPageRotationById(e.id))+Math.PI/4)*(2/Math.PI)+4)%4;switch(["top","left","bottom","right"][Math.floor(a)]){case"top":default:o="";break;case"right":o="translate(".concat(Yo(e.props.w),"px, 0px) rotate(90deg)");break;case"bottom":o="translate(".concat(Yo(e.props.w),"px, ").concat(Yo(e.props.h),"px) rotate(180deg)");break;case"left":o="translate(0px, ".concat(Yo(e.props.h),"px) rotate(270deg)")}var s={fontSize:12,fontFamily:"Inter, sans-serif",textAlign:"start",width:e.props.w,height:32,padding:0,lineHeight:1,fontStyle:"normal",fontWeight:"normal",overflow:"truncate-ellipsis",verticalTextAlign:"middle"},l=this.editor.textMeasure.measureTextSpans(au(e.props.name,"Frame")+String.fromCharCode(8203),s),u=l[0],c=ae(l),d=c.box.w+c.box.x-u.box.x,f=su(this.editor,l,Pe({offsetY:-s.height-2},s));f.style.setProperty("transform",o);var p=document.createElementNS("http://www.w3.org/2000/svg","rect");return p.setAttribute("x","-8px"),p.setAttribute("y",-s.height-4+"px"),p.setAttribute("width",16+d+"px"),p.setAttribute("height","".concat(s.height,"px")),p.setAttribute("rx","4px"),p.setAttribute("ry","4px"),p.setAttribute("fill",n.background),r.appendChild(p),r.appendChild(f),r}},{key:"indicator",value:function(e){var t=this.bounds(e);return(0,to.jsx)("rect",{width:Yo(t.width),height:Yo(t.height),className:"tl-frame-indicator"})}},{key:"providesBackgroundForChildren",value:function(){return!0}}]),i}();Ee(qd,"type","frame");var $d=function(e){M(o,Vd);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"shapeType",qd),e}return P(o)}();Ee($d,"id","frame"),Ee($d,"initial","idle");var Gd=Tc("frame",{util:qd,props:xi,migrations:ki,tool:$d});function Qd(e){var t=e.bounds,n=e.editor,r=e.font,i=e.shape,o={fontSize:du[i.props.size],fontFamily:r,textAlign:i.props.align,verticalTextAlign:i.props.verticalAlign,width:Math.ceil(t.width),height:Math.ceil(t.height),padding:16,lineHeight:lu.lineHeight,fontStyle:"normal",fontWeight:"normal",overflow:"wrap",offsetX:0},a=n.textMeasure.measureTextSpans(i.props.text,o),s=function(e,t,n,r){if(("start-legacy"===e||"end-legacy"===e)&&0!==n.length){var i,o=$o.From(n[0].box),a=ce(n);try{for(a.s();!(i=a.n()).done;){var s=i.value.box;o.union(s)}}catch(e){a.e(e)}finally{a.f()}if("start-legacy"===e)return(r-32-o.width)/2;if("end-legacy"===e)return-(r-32-o.width)/2}}(i.props.align,0,a,t.width);return s&&(o.offsetX=s),su(0,a,o)}var Zd=_e.memo(function(e){var t=e.id,n=e.type,r=e.text,i=e.size,o=e.labelColor,a=e.font,s=e.align,l=e.verticalAlign,u=e.wrap,c=mu(t,n,r),d=c.rInput,f=c.isEmpty,p=c.isEditing,h=c.isEditableFromHover,v=c.handleFocus,g=c.handleChange,m=c.handleKeyDown,y=c.handleBlur,b=p||h,w=vu.normalizeTextForDom(r),x=0<w.trim().length,k="start-legacy"===s||"middle-legacy"===s||"end-legacy"===s;return(0,to.jsx)("div",{className:"tl-text-label","data-font":a,"data-align":s,"data-hastext":!f,"data-isediting":p,"data-textwrap":!!u,style:x||b?{justifyContent:"middle"===s||k?"center":s,alignItems:"middle"===l?"center":l}:void 0,children:(0,to.jsxs)("div",{className:"tl-text-label__inner",style:{fontSize:du[i],lineHeight:du[i]*lu.lineHeight+"px",minHeight:f?du[i]*lu.lineHeight+32:0,minWidth:f?33:0,color:"var(--palette-".concat(o,")")},children:[(0,to.jsx)("div",{className:"tl-text tl-text-content",dir:"ltr",children:w}),b?(0,to.jsx)("textarea",{ref:d,className:"tl-text tl-text-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",autoFocus:p,placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:r,onFocus:v,onChange:g,onKeyDown:m,onBlur:y,onContextMenu:Fa}):null]})})}),Jd=_e.memo(function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.fill,s=t/2,l=n/2,u=Math.max(0,s-r/2),c=Math.max(0,l-r/2),d=Ao(u,c),f=Lc(d<64?2*d:d,r,{style:i,snap:4,closed:!0}),p=f.strokeDasharray,h=f.strokeDashoffset,v="M".concat(s-u,",").concat(l,"a").concat(u,",").concat(c,",0,1,1,").concat(2*u,",0a").concat(u,",").concat(c,",0,1,1,-").concat(2*u,",0");return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(zc,{d:v,color:o,fill:a}),(0,to.jsx)("path",{d:v,strokeWidth:r,width:Yo(t),height:Yo(n),fill:"none",stroke:"var(--palette-".concat(o,")"),strokeDasharray:p,strokeDashoffset:h,pointerEvents:"all"})]})});function ef(e,t){if(e<t){var n=e/2;return"\n    M0,".concat(n,"\n    a").concat(n,",").concat(n,",0,1,1,").concat(2*n,",0\n    L").concat(e,",").concat(t-n,"\n    a").concat(n,",").concat(n,",0,1,1,-").concat(2*n,",0\n    Z")}var r=t/2;return"\n    M".concat(r,",0\n    L").concat(e-r,",0\n    a").concat(r,",").concat(r,",0,1,1,0,").concat(2*r,"\n    L").concat(r,",").concat(t,"\n    a").concat(r,",").concat(r,",0,1,1,0,").concat(2*-r,"\n    Z")}function tf(e,t){if(t<e){var n=t/2;return Ao(n,n)+2*(e-2*n)}var r=e/2;return Ao(r,r)+2*(t-2*r)}var nf=_e.memo(function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.fill,s=ef(t,n),l=tf(t,n),u=Lc(l<64?2*l:l,r,{style:i,snap:4,start:"outset",end:"outset",closed:!0}),c=u.strokeDasharray,d=u.strokeDashoffset;return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(zc,{d:s,color:o,fill:a}),(0,to.jsx)("path",{d:s,strokeWidth:r,width:Yo(t),height:Yo(n),fill:"none",stroke:"var(--palette-".concat(o,")"),strokeDasharray:c,strokeDashoffset:d,pointerEvents:"all"})]})});var rf=_e.memo(function(e){var l=e.dash,t=e.fill,u=e.color,c=e.strokeWidth,s=e.outline,n=e.lines,r="M"+s[0]+"L"+s.slice(1)+"Z";return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(zc,{d:r,fill:t,color:u}),n&&n.map(function(e,t){return(0,to.jsx)("path",{className:"tl-hitarea-stroke",fill:"none",d:"M".concat(e[0].x,",").concat(e[0].y,"L").concat(e[1].x,",").concat(e[1].y)},"line_bg_".concat(t))}),(0,to.jsxs)("g",{strokeWidth:c,stroke:"var(--palette-".concat(u,")"),fill:"none",pointerEvents:"all",children:[Array.from(Array(s.length)).map(function(e,t){var n=s[t],r=s[(t+1)%s.length],i=Lc(xo.Dist(n,r),c,{style:l,start:"outset",end:"outset"}),o=i.strokeDasharray,a=i.strokeDashoffset;return(0,to.jsx)("line",{x1:n.x,y1:n.y,x2:r.x,y2:r.y,strokeDasharray:o,strokeDashoffset:a},t)}),n&&n.map(function(e,t){var n=Ce(e,2),r=n[0],i=n[1],o=Lc(xo.Dist(r,i),c,{style:l,start:"skip",end:"outset",snap:"dotted"===l?4:void 0}),a=o.strokeDasharray,s=o.strokeDashoffset;return(0,to.jsx)("path",{d:"M".concat(r.x,",").concat(r.y,"L").concat(i.x,",").concat(i.y),stroke:"var(--palette-".concat(u,")"),strokeWidth:c,fill:"none",strokeDasharray:a,strokeDashoffset:s},"line_fg_".concat(t))})]})]})});function of(e){return{size:1+e,thinning:.25,end:{taper:e},start:{taper:e},streamline:0,smoothing:1,simulatePressure:!1}}function af(e,t,n,r){for(var i=G(e),o=t/2,a=n/2,s=Ao(o,a),l=[],u=Eo*i(),c=Eo+_o/2+Math.abs(i())*_o,d=Math.max(16,s/10),f=0;f<d;f++){var p=f/(d-1),h=u+p*c,v=Math.cos(h),g=Math.sin(h);l.push(new xo(o*v+.5*t+.05*i(),a*g+n/2+.05*i(),Math.min(1,.5+Math.abs(.5-(0<i()?wo.easeInOutSine(p):wo.easeInExpo(p)))/2)))}return la(l,of(r))}function sf(e,t,n,r){var i=of(r);return Wa(oa(da(af(e,t,n,r),i),i))}function lf(e,t,n,r){return Ha(af(e,t,n,r))}_e.memo(function(e){var t=e.id,n=e.w,r=e.h,i=e.strokeWidth,o=e.fill,a=e.color,s=lf(t,n,r,i),l=sf(t,n,r,i);return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(zc,{d:s,color:a,fill:o}),(0,to.jsx)("path",{d:l,fill:"var(--palette-".concat(a,")"),strokeWidth:0,pointerEvents:"all"})]})});var uf=_e.memo(function(e){var t=e.id,n=e.outline,r=e.lines,i=e.fill,o=e.color,a=e.strokeWidth,s=ka(Sa(t,n,a/3,2*a,2));if(r){var l,u=ce(r);try{for(u.s();!(l=u.n()).done;){var c=Ce(l.value,2),d=c[0],f=c[1];s+="M".concat(d.x,",").concat(d.y,"L").concat(f.x,",").concat(f.y)}}catch(e){u.e(e)}finally{u.f()}}var p=ka(Sa(t,n,0,2*a,1));return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(zc,{d:p,fill:i,color:o}),(0,to.jsx)("path",{d:s,stroke:"var(--palette-".concat(o,")"),strokeWidth:a,fill:"none"})]})}),cf=_e.memo(function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=t/2,s=n/2,l=Math.max(0,a),u=Math.max(0,s),c="M".concat(a-l,",").concat(s,"a").concat(l,",").concat(u,",0,1,1,").concat(2*l,",0a").concat(l,",").concat(u,",0,1,1,-").concat(2*l,",0");return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(zc,{d:c,color:o,fill:i}),(0,to.jsx)("path",{d:c,stroke:"var(--palette-".concat(o,")"),strokeWidth:r,fill:"none"})]})}),df=_e.memo(function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.fill,o=e.color,a=ff(t,n);return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(zc,{d:a,color:o,fill:i}),(0,to.jsx)("path",{d:a,stroke:"var(--palette-".concat(o,")"),strokeWidth:r,fill:"none"})]})});function ff(e,t){var n;if(e<t){var r=e/2;n="\n    M0,".concat(r,"\n    a").concat(r,",").concat(r,",0,1,1,").concat(2*r,",0\n    L").concat(e,",").concat(t-r,"\n    a").concat(r,",").concat(r,",0,1,1,-").concat(2*r,",0\n    Z")}else{var i=t/2;n="\n    M".concat(i,",0\n    L").concat(e-i,",0\n    a").concat(i,",").concat(i,",0,1,1,0,").concat(2*i,"\n    L").concat(i,",").concat(t,"\n    a").concat(i,",").concat(i,",0,1,1,0,").concat(2*-i,"\n    Z")}return n}var pf=_e.memo(function(e){var t=e.outline,n=e.lines,r=e.fill,i=e.color,o=e.strokeWidth,a="M"+t[0]+"L"+t.slice(1)+"Z";if(n){var s,l=ce(n);try{for(l.s();!(s=l.n()).done;){var u=Ce(s.value,2),c=u[0],d=u[1];a+="M".concat(c.x,",").concat(c.y,"L").concat(d.x,",").concat(d.y)}}catch(e){l.e(e)}finally{l.f()}}return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(zc,{d:a,fill:r,color:i}),(0,to.jsx)("path",{d:a,stroke:"var(--palette-".concat(i),strokeWidth:o,fill:"none"})]})}),hf=function(e){M(i,nu);var r=N(i);function i(){var y;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(y=r.call.apply(r,[this].concat(t))),"canEdit",function(){return!0}),Ee(R(y),"onEditEnd",function(e){var t=e.id,n=e.type,r=e.props.text;r.trimEnd()!==e.props.text&&y.editor.updateShapes([{id:t,type:n,props:{text:r.trimEnd()}}])}),Ee(R(y),"onResize",function(e,t){var n=t.initialBounds,r=t.handle,i=t.newPoint,o=t.scaleX,a=t.scaleY,s=n.width*o,l=n.height*a,u=0,c=0;if(e.props.text.trim()){var d=Math.max(Math.abs(s),51),f=Math.max(Math.abs(l),51);d<51&&51===f&&(d=51),51===d&&f<51&&(f=51);var p=vf(y.editor,Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{w:d,h:f})})),h=Math.max(Math.abs(s),p.w)*Math.sign(s),v=Math.max(Math.abs(l),p.h)*Math.sign(l);u=Math.abs(h)-Math.abs(s),c=Math.abs(v)-Math.abs(l),s=h,l=v}var g=new xo(0,0);o<0&&(g.x+=s),"left"!==r&&"top_left"!==r&&"bottom_left"!==r||(g.x+=o<0?u:-u),a<0&&(g.y+=l),"top"!==r&&"top_left"!==r&&"top_right"!==r||(g.y+=a<0?c:-c);var m=g.rot(e.rotation).add(i);return{x:m.x,y:m.y,props:{w:Math.max(Math.abs(s),1),h:Math.max(Math.abs(l),1),growY:0}}}),Ee(R(y),"onBeforeCreate",function(e){if(!e.props.text)return e.props.growY?Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{growY:0})}):void 0;var t=e.props.h,n=vf(y.editor,e).h,r=null;return t<n?r=n-t:e.props.growY&&(r=0),null!==r?Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},{growY:r})}):void 0}),Ee(R(y),"onBeforeUpdate",function(e,t){var n=e.props.text.trimEnd(),r=t.props.text.trimEnd();if(n!==r||e.props.font!==t.props.font||e.props.size!==t.props.size){if(n&&!r)return Pe(Pe({},t),{},{props:Pe(Pe({},t.props),{},{growY:0})});var i=e.props.w,o=e.props.h,a=vf(y.editor,t),s=a.w,l=a.h;if(!n&&r&&1===r.length){var u=Math.max(i,s),c=Math.max(o,l);return e.props.w<51&&e.props.h<51&&(u=Math.max(u,51),c=Math.max(c,51),u=Math.max(u,c),c=Math.max(u,c)),Pe(Pe({},t),{},{props:Pe(Pe({},t.props),{},{w:u,h:c,growY:0})})}var d=null;return o<l?d=l-o:e.props.growY&&(d=0),null!==d?Pe(Pe({},t),{},{props:Pe(Pe({},t.props),{},{growY:d,w:Math.max(t.props.w,s)})}):s>e.props.w?Pe(Pe({},t),{},{props:Pe(Pe({},t.props),{},{w:s})}):void 0}}),Ee(R(y),"onDoubleClick",function(e){if(y.editor.inputs.altKey)switch(e.props.geo){case"rectangle":return Pe(Pe({},e),{},{props:{geo:"check-box"}});case"check-box":return Pe(Pe({},e),{},{props:{geo:"rectangle"}})}}),y}return P(i,[{key:"defaultProps",value:function(){return{w:100,h:100,geo:"rectangle",color:"black",labelColor:"black",fill:"none",dash:"draw",size:"m",font:"draw",text:"",align:"middle",verticalAlign:"middle",growY:0,url:""}}},{key:"hitTestLineSegment",value:function(e,t,n){for(var r=this.outline(e),i=0;i<r.length;i++)if(ya(t,n,r[i],r[(i+1)%r.length]))return!0;var o=gf(e.props,0);if(void 0!==o){var a,s=ce(o);try{for(s.s();!(a=s.n()).done;){var l=Ce(a.value,2);if(ya(t,n,l[0],l[1]))return!0}}catch(e){s.e(e)}finally{s.f()}}return!1}},{key:"hitTestPoint",value:function(e,t){var n=this.outline(e);if("none"!==e.props.fill)return Ho(t,n);for(var r=this.editor.zoomLevel,i=uu[e.props.size]/r,o=0;o<n.length;o++){var a=n[o],s=n[(o+1)%n.length];if(xo.DistanceToLineSegment(a,s,t)<i)return!0}var l=gf(e.props,1);if(void 0!==l){var u,c=ce(l);try{for(c.s();!(u=c.n()).done;){var d=Ce(u.value,2),f=d[0],p=d[1];if(xo.DistanceToLineSegment(f,p,t)<i)return!0}}catch(e){c.e(e)}finally{c.f()}}return!1}},{key:"getBounds",value:function(e){return new $o(0,0,e.props.w,e.props.h+e.props.growY)}},{key:"getCenter",value:function(e){return new xo(e.props.w/2,(e.props.h+e.props.growY)/2)}},{key:"getOutline",value:function(e){var t=Math.max(1,e.props.w),n=Math.max(1,e.props.h+e.props.growY),r=t/2,i=n/2;switch(e.props.geo){case"triangle":return[new xo(r,0),new xo(t,n),new xo(0,n)];case"diamond":return[new xo(r,0),new xo(t,i),new xo(r,n),new xo(0,i)];case"pentagon":return Uo(t,n,5);case"hexagon":return Uo(t,n,6);case"octagon":return Uo(t,n,8);case"ellipse":var o=Math.pow(r-i,2)/Math.pow(r+i,2),a=So*(r+i)*(1+3*o/(10+Math.sqrt(4-3*o))),s=Math.max(4,Math.ceil(a/10));s=4*Math.ceil(s/4);for(var l=Eo/s,u=Math.cos(l),c=Math.sin(l),d=0,f=1,p=1,h=Array(s),v=0;v<s;v++)h[v]=new xo(r+r*f,i+i*d),p=u*f-c*d,d=c*f+u*d,f=p;return h;case"oval":var g=Array(20);if(t<n)for(var m=0;m<10;m++){var y=So*m/8-So,b=So*m/8;g[m]=new xo(r+r*Math.cos(y),r+r*Math.sin(y)),g[m+10]=new xo(r+r*Math.cos(b),n-r+r*Math.sin(b))}else for(var w=0;w<10;w++){var x=So*w/8-_o,k=_o+So*-w/8;g[w]=new xo(t-i+i*Math.cos(x),n-i+i*Math.sin(x)),g[w+10]=new xo(i-i*Math.cos(k),n-i+i*Math.sin(k))}return g;case"star":var S=Eo/5/2,_=2*Math.floor(5/4),E=10-_,P=2*Math.floor(2.5),C=Math.cos(_*S-_o)*t/2,I=Math.cos(E*S-_o)*t/2,T=Math.sin(0*S-_o)*n/2,M=Math.sin(P*S-_o)*n/2,A=t-Math.abs(C-I),j=n-Math.abs(M-T),O=(t-(t/2+I-(t/2-C)))/2,L=(n-(n/2+T-(n/2-M)))/2,z=(t+A)/2,R=(n+j)/2,N=1*z/2,D=1*R/2;return Array.from(Array(10)).map(function(e,t){var n=t*S-_o;return new xo(O+(t%2?N:z)*Math.cos(n),L+(t%2?D:R)*Math.sin(n))});case"rhombus":var B=Math.min(.38*t,.38*n);return[new xo(B,0),new xo(t,0),new xo(t-B,n),new xo(0,n)];case"rhombus-2":var F=Math.min(.38*t,.38*n);return[new xo(0,0),new xo(t-F,0),new xo(t,n),new xo(F,n)];case"trapezoid":var U=Math.min(.38*t,.38*n);return[new xo(U,0),new xo(t-U,0),new xo(t,n),new xo(0,n)];case"arrow-right":var K=.38*Math.min(t,n),V=.16*n;return[new xo(0,V),new xo(t-K,V),new xo(t-K,0),new xo(t,n/2),new xo(t-K,n),new xo(t-K,n-V),new xo(0,n-V)];case"arrow-left":var W=.38*Math.min(t,n),H=.16*n;return[new xo(W,0),new xo(W,H),new xo(t,H),new xo(t,n-H),new xo(W,n-H),new xo(W,n),new xo(0,n/2)];case"arrow-up":var Y=.16*t,X=.38*Math.min(t,n);return[new xo(t/2,0),new xo(t,X),new xo(t-Y,X),new xo(t-Y,n),new xo(Y,n),new xo(Y,X),new xo(0,X)];case"arrow-down":var q=.16*t,$=.38*Math.min(t,n);return[new xo(q,0),new xo(t-q,0),new xo(t-q,n-$),new xo(t,n-$),new xo(t/2,n),new xo(0,n-$),new xo(q,n-$)];case"check-box":case"x-box":case"rectangle":return[new xo(0,0),new xo(t,0),new xo(t,n),new xo(0,n)]}}},{key:"render",value:function(r){var i=this,o=r.id,e=r.type,a=r.props,s=wd(),l=uu[a.size],u=a.w,c=a.color,t=a.labelColor,d=a.fill,f=a.dash,p=a.growY,n=a.font,h=a.align,v=a.verticalAlign,g=a.size,m=a.text;return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(Oc,{id:o,children:function(){var e=a.h+p;switch(a.geo){case"ellipse":if("solid"===f||"draw"===f&&s)return(0,to.jsx)(cf,{strokeWidth:l,w:u,h:e,color:c,fill:d});if("dashed"===f||"dotted"===f)return(0,to.jsx)(Jd,{id:o,strokeWidth:l,w:u,h:e,dash:"dashed"===f?f:"s"===g&&s?"dashed":f,color:c,fill:d});if("draw"===f)return(0,to.jsx)(cf,{strokeWidth:l,w:u,h:e,color:c,fill:d});break;case"oval":if("solid"===f||"draw"===f&&s)return(0,to.jsx)(df,{strokeWidth:l,w:u,h:e,color:c,fill:d});if("dashed"===f||"dotted"===f)return(0,to.jsx)(nf,{id:o,strokeWidth:l,w:u,h:e,dash:"dashed"===f?f:"s"===g&&s?"dashed":f,color:c,fill:d});if("draw"===f)return(0,to.jsx)(df,{strokeWidth:l,w:u,h:e,color:c,fill:d});break;default:var t=i.outline(r),n=gf(r.props,l);if("solid"===f||"draw"===f&&s)return(0,to.jsx)(pf,{fill:d,color:c,strokeWidth:l,outline:t,lines:n});if("dashed"===f||"dotted"===f)return(0,to.jsx)(rf,{dash:"dashed"===f?f:"s"===g&&s?"dashed":f,fill:d,color:c,strokeWidth:l,outline:t,lines:n});if("draw"===f)return(0,to.jsx)(uf,{id:o,fill:d,color:c,strokeWidth:l,outline:t,lines:n})}}()}),(0,to.jsx)(Zd,{id:o,type:e,font:n,fill:d,size:g,align:h,verticalAlign:v,text:m,labelColor:t,wrap:!0}),r.props.url&&(0,to.jsx)(pd,{url:r.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){var t=e.id,n=e.props,r=n.w,i=n.h,o=n.growY,a=n.size,s=wd(),l=uu[a];switch(n.geo){case"ellipse":return"draw"!==n.dash||s?(0,to.jsx)("ellipse",{cx:r/2,cy:(i+o)/2,rx:r/2,ry:(i+o)/2}):(0,to.jsx)("path",{d:lf(t,r,i+o,l)});case"oval":return(0,to.jsx)("path",{d:ff(r,i+o)});default:var u,c=this.outline(e);u="draw"!==n.dash||s?"M"+c[0]+"L"+c.slice(1)+"Z":ka(Sa(t,c,0,2*l,1));var d=gf(e.props,l);if(d){var f,p=ce(d);try{for(p.s();!(f=p.n()).done;){var h=Ce(f.value,2),v=h[0],g=h[1];u+="M".concat(v.x,",").concat(v.y,"L").concat(g.x,",").concat(g.y)}}catch(e){p.e(e)}finally{p.f()}}return(0,to.jsx)("path",{d:u})}}},{key:"toSvg",value:function(e,t,n){var r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T,M,A,j,O,L,z,R,N,D,B,F,U,K,V,W,H,Y,X,q,$,G,Q,Z,J=e.id,ee=e.props,te=uu[ee.size];switch(ee.geo){case"ellipse":switch(ee.dash){case"draw":W={id:J,w:ee.w,h:ee.h,color:ee.color,fill:ee.fill,strokeWidth:te,colors:n},H=W.id,Y=W.w,X=W.h,q=W.strokeWidth,$=W.fill,G=W.color,Q=W.colors,(Z=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",sf(H,Y,X,q)),Z.setAttribute("fill",Q.fill[G]),r=Dc(Z,Nc({d:lf(H,Y,X,q),fill:$,color:G,colors:Q}));break;case"solid":A={strokeWidth:te,w:ee.w,h:ee.h,color:ee.color,fill:ee.fill,colors:n},L=A.strokeWidth,z=A.fill,R=A.color,N=A.colors,D=(j=A.w)/2,B=(O=A.h)/2,F=Math.max(0,D),U=Math.max(0,B),K="M".concat(D-F,",").concat(B,"a").concat(F,",").concat(U,",0,1,1,").concat(2*F,",0a").concat(F,",").concat(U,",0,1,1,-").concat(2*F,",0"),(V=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",K),V.setAttribute("stroke-width",L.toString()),V.setAttribute("width",j.toString()),V.setAttribute("height",O.toString()),V.setAttribute("fill","none"),V.setAttribute("stroke",N.fill[R]),r=Dc(V,Nc({d:K,fill:z,color:R,colors:N}));break;default:p={id:J,strokeWidth:te,w:ee.w,h:ee.h,dash:ee.dash,color:ee.color,fill:ee.fill,colors:n},g=p.strokeWidth,m=p.dash,y=p.color,b=p.colors,w=p.fill,x=(h=p.w)/2,k=(v=p.h)/2,S=Math.max(0,x-g/2),_=Math.max(0,k-g/2),E=Ao(S,_),P=Lc(E<64?2*E:E,g,{style:m,snap:4,closed:!0}),C=P.strokeDasharray,I=P.strokeDashoffset,T="M".concat(x-S,",").concat(k,"a").concat(S,",").concat(_,",0,1,1,").concat(2*S,",0a").concat(S,",").concat(_,",0,1,1,-").concat(2*S,",0"),(M=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",T),M.setAttribute("stroke-width",g.toString()),M.setAttribute("width",h.toString()),M.setAttribute("height",v.toString()),M.setAttribute("fill","none"),M.setAttribute("stroke",b.fill[y]),M.setAttribute("stroke-dasharray",C),M.setAttribute("stroke-dashoffset",I),r=Dc(M,Nc({d:T,fill:w,color:y,colors:b}))}break;case"oval":switch(ee.dash){case"draw":default:r=function(e){var t=e.w,n=e.h,r=e.strokeWidth,i=e.dash,o=e.color,a=e.colors,s=e.fill,l=ef(t,n),u=tf(t,n),c=Lc(u<64?2*u:u,r,{style:i,snap:4,closed:!0}),d=c.strokeDasharray,f=c.strokeDashoffset,p=document.createElementNS("http://www.w3.org/2000/svg","path");return p.setAttribute("d",l),p.setAttribute("stroke-width",r.toString()),p.setAttribute("width",t.toString()),p.setAttribute("height",n.toString()),p.setAttribute("fill","none"),p.setAttribute("stroke",a.fill[o]),p.setAttribute("stroke-dasharray",d),p.setAttribute("stroke-dashoffset",f),Dc(p,Nc({d:l,fill:s,color:o,colors:a}))}({id:J,strokeWidth:te,w:ee.w,h:ee.h,dash:ee.dash,color:ee.color,fill:ee.fill,colors:n});break;case"solid":i={strokeWidth:te,w:ee.w,h:ee.h,color:ee.color,fill:ee.fill,colors:n},s=i.strokeWidth,l=i.fill,u=i.color,c=i.colors,d=ff(o=i.w,a=i.h),(f=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d",d),f.setAttribute("stroke-width",s.toString()),f.setAttribute("width",o.toString()),f.setAttribute("height",a.toString()),f.setAttribute("fill","none"),f.setAttribute("stroke",c.fill[u]),r=Dc(f,Nc({d:d,fill:l,color:u,colors:c}))}break;default:var ne=this.outline(e),re=gf(e.props,te);switch(ee.dash){case"draw":r=function(e){var t=e.id,n=e.outline,r=e.lines,i=e.fill,o=e.color,a=e.colors,s=e.strokeWidth,l=ka(Sa(t,n,s/3,2*s,2));if(r){var u,c=ce(r);try{for(c.s();!(u=c.n()).done;){var d=Ce(u.value,2),f=d[0],p=d[1];l+="M".concat(f.x,",").concat(f.y,"L").concat(p.x,",").concat(p.y)}}catch(e){c.e(e)}finally{c.f()}}var h=ka(Sa(t,n,0,2*s,1)),v=document.createElementNS("http://www.w3.org/2000/svg","path");return v.setAttribute("d",l),v.setAttribute("fill","none"),v.setAttribute("stroke",a.fill[o]),v.setAttribute("stroke-width",s.toString()),Dc(v,Nc({d:h,fill:i,color:o,colors:a}))}({id:J,fill:ee.fill,color:ee.color,strokeWidth:te,outline:ne,lines:re,colors:n});break;case"solid":r=function(e){var t=e.outline,n=e.lines,r=e.fill,i=e.color,o=e.strokeWidth,a=e.colors,s="M"+t[0]+"L"+t.slice(1)+"Z",l=s,u=s;if(n){var c,d=ce(n);try{for(d.s();!(c=d.n()).done;){var f=Ce(c.value,2),p=f[0],h=f[1];u+="M".concat(p.x,",").concat(p.y,"L").concat(h.x,",").concat(h.y)}}catch(e){d.e(e)}finally{d.f()}}var v=document.createElementNS("http://www.w3.org/2000/svg","path");return v.setAttribute("d",u),v.setAttribute("stroke-width",o.toString()),v.setAttribute("stroke",a.fill[i]),v.setAttribute("fill","none"),Dc(v,Nc({d:l,fill:r,color:i,colors:a}))}({fill:ee.fill,color:ee.color,strokeWidth:te,outline:ne,lines:re,colors:n});break;default:r=function(e){var l=e.dash,t=e.fill,n=e.color,r=e.colors,u=e.strokeWidth,c=e.outline,i=e.lines,d=document.createElementNS("http://www.w3.org/2000/svg","g");if(d.setAttribute("stroke-width",u.toString()),d.setAttribute("stroke",r.fill[n]),d.setAttribute("fill","none"),Array.from(Array(c.length)).forEach(function(e,t){var n=c[t],r=c[(t+1)%c.length],i=Lc(xo.Dist(n,r),u,{style:l}),o=i.strokeDasharray,a=i.strokeDashoffset,s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("x1",n.x.toString()),s.setAttribute("y1",n.y.toString()),s.setAttribute("x2",r.x.toString()),s.setAttribute("y2",r.y.toString()),s.setAttribute("stroke-dasharray",o.toString()),s.setAttribute("stroke-dashoffset",a.toString()),d.appendChild(s)}),i){var o,a=ce(i);try{for(a.s();!(o=a.n()).done;){var s=Ce(o.value,2),f=s[0],p=s[1],h=Lc(xo.Dist(f,p),u,{style:l,start:"skip",end:"skip",snap:"dotted"===l?4:2}),v=h.strokeDasharray,g=h.strokeDashoffset,m=document.createElementNS("http://www.w3.org/2000/svg","line");m.setAttribute("x1",f.x.toString()),m.setAttribute("y1",f.y.toString()),m.setAttribute("x2",p.x.toString()),m.setAttribute("y2",p.y.toString()),m.setAttribute("stroke-dasharray",v.toString()),m.setAttribute("stroke-dashoffset",g.toString()),d.appendChild(m)}}catch(e){a.e(e)}finally{a.f()}}var y=Nc({d:"M"+c[0]+"L"+c.slice(1)+"Z",fill:t,color:n,colors:r});return Dc(d,y)}({dash:ee.dash,fill:ee.fill,color:ee.color,strokeWidth:te,outline:ne,lines:re,colors:n})}}if(ee.text){var ie=this.bounds(e),oe=Qd({editor:this.editor,shape:e,font:t,bounds:ie}),ae=oe.cloneNode(!0);ae.setAttribute("fill",n.fill[e.props.labelColor]),ae.setAttribute("stroke","none");var se=oe.cloneNode(!0);se.setAttribute("stroke-width","2"),se.setAttribute("fill",n.background),se.setAttribute("stroke",n.background);var le=document.createElementNS("http://www.w3.org/2000/svg","g");if(le.append(se),le.append(ae),"g"===r.nodeName)return r.appendChild(le),r;var ue=document.createElementNS("http://www.w3.org/2000/svg","g");return ue.appendChild(r),ue.appendChild(le),ue}return r}}]),i}();function vf(e,t){var n=t.props.text.trimEnd();if(!n)return{w:0,h:0};var r=e.textMeasure.measureText("w",Pe(Pe({},lu),{},{fontFamily:pu[t.props.font],fontSize:du[t.props.size],width:"fit-content",maxWidth:"100px"})),i=e.textMeasure.measureText(n,Pe(Pe({},lu),{},{fontFamily:pu[t.props.font],fontSize:du[t.props.size],width:"fit-content",minWidth:r.w+"px",maxWidth:Math.max(0,Math.ceil(r.w+{s:2,m:3.5,l:5,xl:10}[t.props.size]),Math.ceil(t.props.w-32))+"px"}));return{w:i.w+32,h:i.h+32}}function gf(e,t){switch(e.geo){case"x-box":return s=e.w,l=e.h,u=t,c=e.dash,d="draw"===c?.62:0,"dashed"===c?[[new xo(0,0),new xo(s/2,l/2)],[new xo(s,l),new xo(s/2,l/2)],[new xo(0,l),new xo(s/2,l/2)],[new xo(s,0),new xo(s/2,l/2)]]:[[new xo(u*d,u*d),new xo(s-u*d,l-u*d)],[new xo(u*d,l-u*d),new xo(s-u*d,u*d)]];case"check-box":return n=e.w,r=e.h,i=.82*Math.min(n,r),[[new xo((o=(n-i)/2)+.25*i,(a=(r-i)/2)+.52*i),new xo(o+.45*i,a+.82*i)],[new xo(o+.45*i,a+.82*i),new xo(o+.82*i,a+.22*i)]];default:return}var n,r,i,o,a,s,l,u,c,d}Ee(hf,"type","geo");var mf=function(e){M(o,Ac);var i=N(o);function o(){var n;z(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ee(R(n=i.call.apply(i,[this].concat(t))),"onPointerDown",function(e){n.parent.transition("pointing",e)}),Ee(R(n),"onEnter",function(){n.editor.setCursor({type:"cross"})}),Ee(R(n),"onKeyUp",function(e){if("Enter"===e.key){var t=n.editor.onlySelectedShape;t&&n.editor.isShapeOfType(t,hf)&&(n.editor.mark("editing shape"),n.editor.setEditingId(t.id),n.editor.setSelectedTool("select.editing_shape",Pe(Pe({},e),{},{target:"shape",shape:t})))}}),Ee(R(n),"onCancel",function(){n.editor.setSelectedTool("select")}),n}return P(o)}();Ee(mf,"id","idle");var yf=function(e){M(o,Ac);var i=N(o);function o(){var r;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(r=i.call.apply(i,[this].concat(t))),"onPointerMove",function(e){if(r.editor.inputs.isDragging){var t=r.editor.inputs.originPagePoint,n=Rr();r.editor.mark("creating"),r.editor.createShapes([{id:n,type:"geo",x:t.x,y:t.y,props:{w:1,h:1,geo:r.editor.getStyleForNextShape(Ii)}}]),r.editor.select(n),r.editor.setSelectedTool("select.resizing",Pe(Pe({},e),{},{target:"selection",handle:"bottom_right",isCreating:!0,creationCursorOffset:{x:1,y:1},onInteractionEnd:"geo"}))}}),Ee(R(r),"onPointerUp",function(){r.complete()}),Ee(R(r),"onCancel",function(){r.cancel()}),Ee(R(r),"onComplete",function(){r.complete()}),Ee(R(r),"onInterrupt",function(){r.cancel()}),r}return P(o,[{key:"complete",value:function(){var e=this.editor.inputs.originPagePoint,t=Rr();this.editor.mark("creating"),this.editor.createShapes([{id:t,type:"geo",x:e.x,y:e.y,props:{geo:this.editor.getStyleForNextShape(Ii),w:1,h:1}}]);var n,r,i,o,a,s,l,u,c=this.editor.getShapeById(t);if(c){var d="star"===c.props.geo?(n=Eo/5/2,r=2*Math.floor(5/4),i=10-r,o=2*Math.floor(2.5),a=200*Math.cos(r*n-_o)/2,s=200*Math.cos(i*n-_o)/2,l=200*Math.sin(0*n-_o)/2,u=200*Math.sin(o*n-_o)/2,new $o(0,0,a-s,u-l)):new $o(0,0,200,200),f=this.editor.getDeltaInParentSpace(c,d.center);this.editor.select(t),this.editor.updateShapes([{id:c.id,type:"geo",x:c.x-f.x,y:c.y-f.y,props:{geo:this.editor.getStyleForNextShape(Ii),w:d.width,h:d.height}}]),this.editor.instanceState.isToolLocked?this.parent.transition("idle",{}):this.editor.setSelectedTool("select",{})}}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),o}();Ee(yf,"id","pointing");var bf=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"shapeType",hf),e}return P(o)}();Ee(bf,"id","geo"),Ee(bf,"initial","idle"),Ee(bf,"children",function(){return[mf,yf]});var wf=Tc("geo",{util:hf,props:Ti,migrations:Mi,tool:bf}),xf=Tc("group",{util:Hd,props:{},migrations:Ai}),kf=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"shapeType",Md),Ee(R(e),"onExit",function(){e.children.drawing.initialShape=void 0}),e}return P(o)}();Ee(kf,"id","highlight"),Ee(kf,"initial","idle"),Ee(kf,"children",function(){return[Nd,Rd]});var Sf=Tc("highlight",{util:Md,props:ji,migrations:Oi,tool:kf});function _f(e){var t=mo();return ho("isCropping",function(){return t.croppingId===e},[t,e])}var Ef,Pf,Cf=(Pf=ao(io().mark(function e(r){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=function(){return t(new Error("Failed to load image"))},n.crossOrigin="anonymous",n.src=r}));case 1:case"end":return e.stop()}},e)})),function(e){return Pf.apply(this,arguments)}),If=(Ef=ao(io().mark(function e(t){var n,r,i;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cf(t);case 2:if(n=e.sent,(r=document.createElement("canvas")).width=n.width,r.height=n.height,i=r.getContext("2d")){e.next=9;break}return e.abrupt("return");case 9:return i.drawImage(n,0,0),e.abrupt("return",r.toDataURL());case 11:case"end":return e.stop()}},e)})),function(e){return Ef.apply(this,arguments)});function Tf(e){return Mf.apply(this,arguments)}function Mf(){return(Mf=ao(io().mark(function e(t){var n,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",new Promise(function(e,t){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.onerror=t,n.readAsDataURL(r)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Af=function(e){M(i,nu);var t,r=N(i);function i(){var s;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(s=r.call.apply(r,[this].concat(t))),"isAspectRatioLocked",function(){return!0}),Ee(R(s),"canCrop",function(){return!0}),Ee(R(s),"onDoubleClick",function(e){var t=e.props.assetId?s.editor.getAssetById(e.props.assetId):void 0;t&&t.props.src&&"mimeType"in t.props&&"image/gif"===t.props.mimeType&&s.editor.updateShapes([{type:"image",id:e.id,props:{playing:!e.props.playing}}])}),Ee(R(s),"onDoubleClickEdge",function(e){var t=e.props;if(t&&s.editor.croppingId===e.id){var n=ne(t.crop)||{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},r=1/(n.bottomRight.x-n.topLeft.x)*e.props.w,i=1/(n.bottomRight.y-n.topLeft.y)*e.props.h,o=new xo(n.topLeft.x*r,n.topLeft.y*i).rot(e.rotation),a={id:e.id,type:e.type,x:e.x-o.x,y:e.y-o.y,props:{crop:{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}},w:r,h:i}};s.editor.updateShapes([a])}}),s}return P(i,[{key:"defaultProps",value:function(){return{w:100,h:100,assetId:null,playing:!0,url:"",crop:null}}},{key:"render",value:function(t){var e,n,r=this,i=jf(t),o=_f(t.id),a=Da(),s=Ce((0,_e.useState)(""),2),l=s[0],u=s[1],c=t.props,d=c.w,f=c.h,p=t.props.assetId?this.editor.getAssetById(t.props.assetId):void 0;if("bookmark"===(null==p?void 0:p.type))throw Error("Bookmark assets can't be rendered as images");var h=ho("onlySelectedShape",function(){var e;return t.id===(null===(e=r.editor.onlySelectedShape)||void 0===e?void 0:e.id)},[this.editor])&&o&&this.editor.isInAny("select.crop","select.cropping","select.pointing_crop_handle"),v=a&&((null==p||null===(e=p.props.mimeType)||void 0===e?void 0:e.includes("video"))||(null==p||null===(n=p.props.mimeType)||void 0===n?void 0:n.includes("gif")));return(0,_e.useEffect)(function(){if(null!=p&&p.props.src&&"mimeType"in p.props&&"image/gif"===(null==p?void 0:p.props.mimeType)){var n=!1;return(e=ao(io().mark(function e(){var t;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,If(p.props.src);case 2:if(t=e.sent,n)return e.abrupt("return");e.next=5;break;case 5:t&&u(t);case 6:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})(),function(){n=!0}}var e},[a,null==p?void 0:p.props]),(0,to.jsxs)(to.Fragment,{children:[(null==p?void 0:p.props.src)&&h&&(0,to.jsx)("div",{style:i,children:(0,to.jsx)("div",{className:"tl-image tl-image-".concat(t.id,"-crop"),style:{opacity:.1,backgroundImage:"url(".concat(!t.props.playing||v?l:p.props.src,")")},draggable:!1})}),(0,to.jsx)(Yl,{id:t.id,style:{overflow:"hidden"},children:(0,to.jsxs)("div",{className:"tl-image-container",style:i,children:[null!=p&&p.props.src?(0,to.jsx)("div",{className:"tl-image tl-image-".concat(t.id),style:{backgroundImage:"url(".concat(!t.props.playing||v?l:p.props.src,")")},draggable:!1}):(0,to.jsx)("g",{transform:"translate(".concat((d-38)/2,", ").concat((f-38)/2,")"),children:(0,to.jsx)(ms,{})}),(null==p?void 0:p.props.isAnimated)&&!t.props.playing&&(0,to.jsx)("div",{className:"tl-image__tg",children:"GIF"})]})}),"url"in t.props&&t.props.url&&(0,to.jsx)(pd,{url:t.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){return _f(e.id)?null:(0,to.jsx)("rect",{width:Yo(e.props.w),height:Yo(e.props.h)})}},{key:"toSvg",value:(t=ao(io().mark(function e(t){var n,r,i,o,a,s,l,u,c,d,f;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=document.createElementNS("http://www.w3.org/2000/svg","g"),r=t.props.assetId?this.editor.getAssetById(t.props.assetId):null,(i=(null==r?void 0:r.props.src)||"")&&i.startsWith("http"))return e.next=6,Tf(i);e.next=10;break;case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0="";case 9:i=e.t0;case 10:return(o=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttributeNS("http://www.w3.org/1999/xlink","href",i),a=jf(t),s=t.props.crop,a&&s?(l=a.transform,u=a.width,c=a.height,d=[new xo(s.topLeft.x*u,s.topLeft.y*c),new xo(s.bottomRight.x*u,s.topLeft.y*c),new xo(s.bottomRight.x*u,s.bottomRight.y*c),new xo(s.topLeft.x*u,s.bottomRight.y*c)],(f=document.createElementNS("http://www.w3.org/2000/svg","g")).style.clipPath="polygon(".concat(d.map(function(e){return"".concat(e.x,"px ").concat(e.y,"px")}).join(","),")"),o.setAttribute("width",u.toString()),o.setAttribute("height",c.toString()),o.style.transform=l,f.appendChild(o),n.appendChild(f)):(o.setAttribute("width",t.props.w.toString()),o.setAttribute("height",t.props.h.toString()),n.appendChild(o)),e.abrupt("return",n);case 16:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),i}();function jf(e){var t=e.props.crop,n=null==t?void 0:t.topLeft;if(n){var r=1/(t.bottomRight.x-t.topLeft.x)*e.props.w,i=1/(t.bottomRight.y-t.topLeft.y)*e.props.h,o=-n.x*r,a=-n.y*i;return{transform:"translate(".concat(o,"px, ").concat(a,"px)"),width:r,height:i}}}Ee(Af,"type","image");var Of=Tc("image",{util:Af,props:Ni,migrations:Di});function Lf(e){for(var t=e.segments,n=[],r=0,i=t.length;r<i;r++){var o=t[r].lut,a=o.length-1;0<r?n.push(xo.Lrp(o[0],o[1],.25)):n.push(o[0]);for(var s=1;s<a;s++)n.push(o[s]);r<i-1?n.push(xo.Lrp(o[a-1],o[a],.75)):n.push(o[a])}return n}function zf(e){return{size:e,thinning:.4,streamline:0,smoothing:.5,simulatePressure:!0,last:!0}}function Rf(e,t,n){return la(Lf(t),zf(n))}function Nf(e,t,n){var r,i,o;return Wa((r=t,o=zf(i=n),oa(da(Rf(0,r,i),o),o)))}var Df=new ou,Bf=new ou,Ff=function(e){M(o,eu);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"hideResizeHandles",function(){return!0}),Ee(R(e),"hideRotateHandle",function(){return!0}),Ee(R(e),"hideSelectionBoundsBg",function(){return!0}),Ee(R(e),"hideSelectionBoundsFg",function(){return!0}),Ee(R(e),"isClosed",function(){return!1}),Ee(R(e),"onResize",function(e,t){var i=t.scaleX,o=t.scaleY,a=ne(e.props.handles);return Object.values(e.props.handles).forEach(function(e){var t=e.id,n=e.x,r=e.y;a[t].x=n*i,a[t].y=r*o}),{props:{handles:a}}}),Ee(R(e),"onHandleChange",function(e,t){var n=t.handle,r=ne(e);switch(n.id){case"start":case"end":r.props.handles[n.id]=Pe(Pe({},r.props.handles[n.id]),{},{x:n.x,y:n.y});break;default:var i="handle:"+n.index,o=e.props.handles[i];r.props.handles[i]=o?Pe(Pe({},o),{},{x:n.x,y:n.y}):{id:i,type:"vertex",canBind:!1,index:n.index,x:n.x,y:n.y}}return r}),e}return P(o,[{key:"defaultProps",value:function(){return{dash:"draw",size:"m",color:"black",spline:"line",handles:{start:{id:"start",type:"vertex",canBind:!1,index:"a1",x:0,y:0},end:{id:"end",type:"vertex",canBind:!1,index:"a2",x:0,y:0}}}}},{key:"getBounds",value:function(e){return Uf(e).bounds}},{key:"getCenter",value:function(e){return this.bounds(e).center}},{key:"getHandles",value:function(s){return Bf.get(s.props,function(){for(var e=s.props.handles,t=Uf(s),n=Object.values(e).sort(I),r=n.slice(),i=0;i<t.segments.length;i++){var o=t.segments[i].midPoint,a=L(n[i].index,n[i+1].index);r.push({id:"mid-".concat(i),type:"create",index:a,x:o.x,y:o.y})}return r.sort(I)})}},{key:"getOutline",value:function(e){return Lf(Uf(e))}},{key:"getOutlineSegments",value:function(e){var t=Uf(e);return"cubic"===e.props.spline?t.segments.map(function(e){return e.lut}):t.segments.map(function(e){return[e.getPoint(0),e.getPoint(1)]})}},{key:"hitTestPoint",value:function(e,t){var n=this.editor.zoomLevel,r=uu[e.props.size]/n;return function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:8,r=t.length,i=1;i<r;i++){var o=t[i-1],a=t[i];if(xo.DistanceToLineSegment(o,a,e)<n)return!0}return!1}(t,this.outline(e),r)}},{key:"hitTestLineSegment",value:function(e,t,n){return null!==ha(t,n,this.outline(e))}},{key:"render",value:function(e){var t=wd(),o=Uf(e),a=uu[e.props.size],n=e.props,s=n.dash,r=n.color;if("line"===e.props.spline){if("solid"===s){var i=o.points,l="M"+i[0]+"L"+i.slice(1);return(0,to.jsxs)(Oc,{id:e.id,children:[(0,to.jsx)(zc,{d:l,fill:"none",color:r}),(0,to.jsx)("path",{d:l,stroke:"var(--palette-".concat(r,")"),strokeWidth:a,fill:"none"})]})}if("dashed"===s||"dotted"===s){var u=o.points,c="M"+u[0]+"L"+u.slice(1);return(0,to.jsxs)(Oc,{id:e.id,children:[(0,to.jsx)(zc,{d:c,fill:"none",color:r}),(0,to.jsx)("g",{stroke:"var(--palette-".concat(r,")"),strokeWidth:a,children:o.segments.map(function(e,t){var n=Lc(e.length,a,{style:s,start:0<t?"outset":"none",end:t<o.segments.length-1?"outset":"none"}),r=n.strokeDasharray,i=n.strokeDashoffset;return(0,to.jsx)("path",{strokeDasharray:r,strokeDashoffset:i,d:e.path,fill:"none"},t)})})]})}if("draw"===s){var d=o.points,f=Ce(_a(e.id,d,a),2),p=f[0],h=f[1];return(0,to.jsxs)(Oc,{id:e.id,children:[(0,to.jsx)(zc,{d:p,fill:"none",color:r}),(0,to.jsx)("path",{d:h,stroke:"var(--palette-".concat(r,")"),strokeWidth:a,fill:"none"})]})}}if("cubic"===e.props.spline){var v=o.path;if("solid"===s||"draw"===s&&t)return(0,to.jsxs)(Oc,{id:e.id,children:[(0,to.jsx)(zc,{d:v,fill:"none",color:r}),(0,to.jsx)("path",{strokeWidth:a,stroke:"var(--palette-".concat(r,")"),fill:"none",d:v})]});if("dashed"===s||"dotted"===s)return(0,to.jsxs)(Oc,{id:e.id,children:[(0,to.jsx)(zc,{d:v,fill:"none",color:r}),(0,to.jsx)("g",{stroke:"var(--palette-".concat(r,")"),strokeWidth:a,children:o.segments.map(function(e,t){var n=Lc(e.length,a,{style:s,start:0<t?"outset":"none",end:t<o.segments.length-1?"outset":"none"}),r=n.strokeDasharray,i=n.strokeDashoffset;return(0,to.jsx)("path",{strokeDasharray:r,strokeDashoffset:i,d:e.path,fill:"none"},t)})})]});if("draw"===s)return(0,to.jsxs)(Oc,{id:e.id,children:[(0,to.jsx)(zc,{d:v,fill:"none",color:r}),(0,to.jsx)("path",{d:Nf(0,o,a),strokeWidth:1,stroke:"var(--palette-".concat(r,")"),fill:"var(--palette-".concat(r,")")})]})}}},{key:"indicator",value:function(e){var t,n,r,i=uu[e.props.size],o=Uf(e),a=e.props.dash;if("line"===e.props.spline){var s=o.points;t="solid"===a||"dotted"===a||"dashed"===a?"M"+s[0]+"L"+s.slice(1):Ce(_a(e.id,s,i),1)[0]}else n=o,r=i,t="draw"===e.props.dash?Ha(Rf(0,n,r)):n.path;return(0,to.jsx)("path",{d:t})}},{key:"toSvg",value:function(e,t,n){var r=e.props,i=r.color,o=r.size,a=n.fill[i];return function(e,t,n,r){switch(e.props.dash){case"draw":return g=(v={shape:e,strokeWidth:r,spline:t,color:n}).color,m=Nf(0,v.spline,v.strokeWidth),(y=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("stroke-width","0"),y.setAttribute("stroke","none"),y.setAttribute("fill",g),y.setAttribute("d",m),y;case"solid":return d=(c={strokeWidth:r,spline:t,color:n}).strokeWidth,f=c.color,p=c.spline.path,(h=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("stroke-width",d.toString()),h.setAttribute("stroke",f),h.setAttribute("fill","none"),h.setAttribute("d",p),h;default:return i={strokeWidth:r,spline:t,dash:e.props.dash,color:n},a=i.dash,s=i.strokeWidth,o=i.color,l=i.spline.segments,(u=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("stroke",o),u.setAttribute("stroke-width",s.toString()),l.forEach(function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path"),r=Lc(e.length,s,{style:a,start:0<t?"outset":"none",end:t<l.length-1?"outset":"none"}),i=r.strokeDasharray,o=r.strokeDashoffset;n.setAttribute("stroke-dasharray",i.toString()),n.setAttribute("stroke-dashoffset",o.toString()),n.setAttribute("d",e.path),n.setAttribute("fill","none"),u.appendChild(n)}),u}var i,a,s,o,l,u,c,d,f,p,h,v,g,m,y}(e,Uf(e),a,uu[o])}}]),o}();function Uf(i){return Df.get(i.props,function(){var e=i.props,t=e.spline,n=e.handles,r=Object.values(n).sort(I).map(xo.From);switch(t){case"cubic":return new ea(r,2===r.length?2:1.2,20);case"line":return new ra(r)}})}Ee(Ff,"type","line");var Kf=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"shapeId",""),Ee(R(t),"onEnter",function(e){t.shapeId=e.shapeId,t.editor.setCursor({type:"cross"})}),Ee(R(t),"onPointerDown",function(){t.parent.transition("pointing",{shapeId:t.shapeId})}),Ee(R(t),"onCancel",function(){t.editor.setSelectedTool("select")}),t}return P(o)}();Ee(Kf,"id","idle");var Vf=function(e){M(i,Ac);var r=N(i);function i(){var p;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(p=r.call.apply(r,[this].concat(t))),"shape",{}),Ee(R(p),"markPointId",""),Ee(R(p),"onEnter",function(e){var t=p.editor.inputs,n=t.currentPagePoint;p.markPointId=p.editor.mark("creating");var r=!1;if(e.shapeId){var i=p.editor.getShapeById(e.shapeId);i&&(r=!0,p.shape=i)}if(t.shiftKey&&r){var o,a,s,l=p.editor.getShapeUtil(p.shape).handles(p.shape).filter(function(e){return"vertex"===e.type}).sort(I),u=l[l.length-1],c=na.applyToPoint(p.editor.getParentTransform(p.shape),new xo(p.shape.x,p.shape.y));s=2===l.length&&1===l[1].x&&1===l[1].y?(o=l[1].index,a=l[1].id,Pe(Pe({},l[1]),{},{x:n.x-c.x,y:n.y-c.y})):(a="handle:"+(o=ee(u.index)),{x:n.x-c.x,y:n.y-c.y,index:o,canBind:!1,type:"vertex",id:a});var d=be(p.shape.props.handles);d[s.id]=s,p.editor.updateShapes([{id:p.shape.id,type:p.shape.type,props:{handles:d}}])}else{var f=Rr();p.editor.createShapes([{id:f,type:"line",x:n.x,y:n.y}]),p.editor.select(f),p.shape=p.editor.getShapeById(f)}}),Ee(R(p),"onPointerMove",function(){if(p.shape&&p.editor.inputs.isDragging){var e,t=p.editor.getShapeUtil(p.shape),n=null===(e=t.handles)||void 0===e?void 0:e.call(t,p.shape);if(!n)throw p.editor.bailToMark("creating"),Error("No handles found");p.editor.setSelectedTool("select.dragging_handle",{shape:p.shape,isCreating:!0,handle:ae(n),onInteractionEnd:"line"})}}),Ee(R(p),"onPointerUp",function(){p.complete()}),Ee(R(p),"onCancel",function(){p.cancel()}),Ee(R(p),"onComplete",function(){p.complete()}),Ee(R(p),"onInterrupt",function(){p.parent.transition("idle",{}),p.editor.bailToMark("creating"),p.editor.snaps.clear()}),p}return P(i,[{key:"complete",value:function(){this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}},{key:"cancel",value:function(){this.editor.bailToMark(this.markPointId),this.parent.transition("idle",{shapeId:this.shape.id}),this.editor.snaps.clear()}}]),i}();Ee(Vf,"id","pointing");var Wf=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"shapeType",Ff),e}return P(o)}();Ee(Wf,"id","line"),Ee(Wf,"initial","idle"),Ee(Wf,"children",function(){return[Kf,Vf]});var Hf=Tc("line",{util:Ff,props:Ui,migrations:Ki,tool:Wf}),Yf=200,Xf=function(e){M(o,eu);var r=N(o);function o(){var i;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(i=r.call.apply(r,[this].concat(t))),"canEdit",function(){return!0}),Ee(R(i),"hideResizeHandles",function(){return!0}),Ee(R(i),"hideSelectionBoundsBg",function(){return!0}),Ee(R(i),"hideSelectionBoundsFg",function(){return!0}),Ee(R(i),"onBeforeCreate",function(e){return qf(i.editor,e,e.props.growY)}),Ee(R(i),"onBeforeUpdate",function(e,t){if(e.props.text!==t.props.text||e.props.font!==t.props.font||e.props.size!==t.props.size)return qf(i.editor,t,e.props.growY)}),Ee(R(i),"onEditEnd",function(e){var t=e.id,n=e.type,r=e.props.text;r.trimEnd()!==e.props.text&&i.editor.updateShapes([{id:t,type:n,props:{text:r.trimEnd()}}])}),i}return P(o,[{key:"defaultProps",value:function(){return{color:"black",size:"m",text:"",font:"draw",align:"middle",verticalAlign:"middle",growY:0,url:""}}},{key:"getHeight",value:function(e){return Yf+e.props.growY}},{key:"getBounds",value:function(e){var t=this.getHeight(e);return new $o(0,0,Yf,t)}},{key:"getOutline",value:function(e){return this.bounds(e).corners}},{key:"getCenter",value:function(e){return new xo(100,this.getHeight(e)/2)}},{key:"render",value:function(e){var t=e.id,n=e.type,r=e.props,i=r.color,o=r.font,a=r.size,s=r.align,l=r.text,u=r.verticalAlign,c="black"===i?"yellow":i;return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("div",{style:{position:"absolute",width:Yf,height:this.getHeight(e)},children:(0,to.jsxs)("div",{className:"tl-note__container tl-hitarea-fill",style:{color:"var(--palette-".concat(c,")"),backgroundColor:"var(--palette-".concat(c,")")},children:[(0,to.jsx)("div",{className:"tl-note__scrim"}),(0,to.jsx)(Zd,{id:t,type:n,font:o,size:a,align:s,verticalAlign:u,text:l,labelColor:c,wrap:!0})]})}),"url"in e.props&&e.props.url&&(0,to.jsx)(pd,{url:e.props.url,zoomLevel:this.editor.zoomLevel})]})}},{key:"indicator",value:function(e){return(0,to.jsx)("rect",{rx:"7",width:Yo(Yf),height:Yo(this.getHeight(e))})}},{key:"toSvg",value:function(e,t,n){var r=this.bounds(e),i=document.createElementNS("http://www.w3.org/2000/svg","g"),o="black"===e.props.color?"yellow":e.props.color,a=document.createElementNS("http://www.w3.org/2000/svg","rect");a.setAttribute("rx","10"),a.setAttribute("width",Yf.toString()),a.setAttribute("height",r.height.toString()),a.setAttribute("fill",n.fill[o]),a.setAttribute("stroke",n.fill[o]),a.setAttribute("stroke-width","1"),i.appendChild(a);var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("rx","10"),s.setAttribute("width",Yf.toString()),s.setAttribute("height",r.height.toString()),s.setAttribute("fill",n.background),s.setAttribute("opacity",".28"),i.appendChild(s);var l=Qd({editor:this.editor,shape:e,font:t,bounds:r});return l.setAttribute("fill",n.text),l.setAttribute("stroke","none"),i.appendChild(l),i}}]),o}();function qf(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=e.textMeasure.measureText(t.props.text,Pe(Pe({},lu),{},{fontFamily:pu[t.props.font],fontSize:du[t.props.size],width:"166px"})).h+34,i=null;if(Yf<r?i=r-Yf:n&&(i=0),null!==i)return Pe(Pe({},t),{},{props:Pe(Pe({},t.props),{},{growY:i})})}Ee(Xf,"type","note");var $f=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onPointerDown",function(e){t.parent.transition("pointing",e)}),Ee(R(t),"onEnter",function(){t.editor.setCursor({type:"cross"})}),Ee(R(t),"onCancel",function(){t.editor.setSelectedTool("select")}),t}return P(o)}();Ee($f,"id","idle");var Gf=function(e){M(o,Ac);var i=N(o);function o(){var n;z(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ee(R(n=i.call.apply(i,[this].concat(t))),"dragged",!1),Ee(R(n),"info",{}),Ee(R(n),"wasFocusedOnEnter",!1),Ee(R(n),"markPointId","creating"),Ee(R(n),"onEnter",function(){n.wasFocusedOnEnter=!n.editor.isMenuOpen}),Ee(R(n),"onPointerMove",function(e){if(n.editor.inputs.isDragging){n.editor.mark(n.markPointId);var t=n.createShape();if(!t)return;n.editor.setSelectedTool("select.translating",Pe(Pe({},e),{},{target:"shape",shape:t,isCreating:!0,editAfterComplete:!0,onInteractionEnd:"note"}))}}),Ee(R(n),"onPointerUp",function(){n.complete()}),Ee(R(n),"onInterrupt",function(){n.cancel()}),Ee(R(n),"onComplete",function(){n.complete()}),Ee(R(n),"onCancel",function(){n.cancel()}),n}return P(o,[{key:"complete",value:function(){if(this.wasFocusedOnEnter){this.editor.mark(this.markPointId);var e=this.createShape();if(this.editor.instanceState.isToolLocked)this.parent.transition("idle",{});else{if(!e)return;this.editor.setEditingId(e.id),this.editor.setSelectedTool("select.editing_shape",Pe(Pe({},this.info),{},{target:"shape",shape:e}))}}}},{key:"cancel",value:function(){this.editor.bailToMark(this.markPointId),this.parent.transition("idle",this.info)}},{key:"createShape",value:function(){var e=this.editor.inputs.originPagePoint,t=Rr();this.editor.createShapes([{id:t,type:"note",x:e.x,y:e.y}],!0);var n=this.editor.getShapeUtil(Xf),r=this.editor.getShapeById(t),i=n.bounds(r);return this.editor.updateShapes([{id:t,type:"note",x:r.x-i.width/2,y:r.y-i.height/2}]),this.editor.getShapeById(t)}}]),o}();Ee(Gf,"id","pointing");var Qf=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"shapeType",Xf),e}return P(o)}();Ee(Qf,"id","note"),Ee(Qf,"initial","idle"),Ee(Qf,"children",function(){return[$f,Gf]});var Zf=Tc("note",{util:Xf,props:Hi,migrations:Yi,tool:Qf}),Jf=function(e){M(i,Ac);var r=N(i);function i(){var o;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(o=r.call.apply(r,[this].concat(t))),"onPointerEnter",function(e){switch(e.target){case"canvas":break;case"shape":var t=o.editor,n=t.selectedIds,r=t.focusLayerId,i=o.editor.getOutermostSelectableShape(e.shape,function(e){return!n.includes(e.id)});i.id!==r&&o.editor.isShapeOfType(i,bu)&&o.editor.setHoveredId(i.id)}}),Ee(R(o),"onPointerLeave",function(e){"shape"===e.target&&o.editor.setHoveredId(null)}),Ee(R(o),"onPointerDown",function(e){var t=o.editor.hoveredId;if(t){var n=o.editor.getShapeById(t);if(o.editor.isShapeOfType(n,bu))return void requestAnimationFrame(function(){o.editor.setSelectedIds([n.id]),o.editor.setEditingId(n.id),o.editor.setSelectedTool("select.editing_shape",Pe(Pe({},e),{},{target:"shape",shape:n}))})}o.parent.transition("pointing",e)}),Ee(R(o),"onEnter",function(){o.editor.setCursor({type:"cross"})}),Ee(R(o),"onKeyDown",function(e){if("Enter"===e.key){var t=o.editor.selectedShapes[0];t&&o.editor.isShapeOfType(t,hf)&&(o.editor.setSelectedTool("select"),o.editor.setEditingId(t.id),o.editor.root.current.value.transition("editing_shape",Pe(Pe({},e),{},{target:"shape",shape:t})))}}),Ee(R(o),"onCancel",function(){o.editor.setSelectedTool("select")}),o}return P(i)}();Ee(Jf,"id","idle");var ep=function(e){M(o,Ac);var i=N(o);function o(){var r;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(r=i.call.apply(i,[this].concat(t))),"shape",void 0),Ee(R(r),"onExit",function(){r.editor.setHintingIds([])}),Ee(R(r),"onPointerMove",function(e){if(r.editor.inputs.isDragging){var t=r.editor.inputs.originPagePoint,n=Rr();if(r.editor.mark("creating"),r.editor.createShapes([{id:n,type:"text",x:t.x,y:t.y,props:{text:"",autoSize:!1,w:20}}]),r.editor.select(n),r.shape=r.editor.getShapeById(n),!r.shape)return;r.editor.setSelectedTool("select.resizing",Pe(Pe({},e),{},{target:"selection",handle:"right",isCreating:!0,creationCursorOffset:{x:1,y:1},editAfterComplete:!0,onInteractionEnd:"text"}))}}),Ee(R(r),"onPointerUp",function(){r.complete()}),Ee(R(r),"onComplete",function(){r.cancel()}),Ee(R(r),"onCancel",function(){r.cancel()}),Ee(R(r),"onInterrupt",function(){r.cancel()}),r}return P(o,[{key:"complete",value:function(){var e;this.editor.mark("creating text shape");var t=Rr(),n=this.editor.inputs.currentPagePoint,r=n.x,i=n.y;this.editor.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}],!0),this.editor.setEditingId(t),this.editor.setSelectedTool("select"),null===(e=this.editor.root.current.value)||void 0===e||e.transition("editing_shape",{})}},{key:"cancel",value:function(){this.parent.transition("idle",{}),this.editor.bailToMark("creating")}}]),o}();Ee(ep,"id","pointing");var tp=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"shapeType",bu),e}return P(o)}();Ee(tp,"id","text"),Ee(tp,"initial","idle"),Ee(tp,"children",function(){return[Jf,ep]});var np=Tc("text",{util:bu,props:Xi,migrations:qi,tool:tp}),rp=function(e){M(o,nu);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"canEdit",function(){return!0}),Ee(R(e),"isAspectRatioLocked",function(){return!0}),e}return P(o,[{key:"defaultProps",value:function(){return{w:100,h:100,assetId:null,time:0,playing:!0,url:""}}},{key:"render",value:function(e){return(0,to.jsx)(op,{shape:e,videoUtil:this})}},{key:"indicator",value:function(e){return(0,to.jsx)("rect",{width:Yo(e.props.w),height:Yo(e.props.h)})}},{key:"toSvg",value:function(i){var e=document.createElementNS("http://www.w3.org/2000/svg","g"),t=document.createElementNS("http://www.w3.org/2000/svg","image");return t.setAttributeNS("http://www.w3.org/1999/xlink","href",function(e){var t=i.id.split(":")[1],n=document.querySelector(".tl-video-shape-".concat(t));if(n){var r=document.createElement("canvas");return r.width=n.videoWidth,r.height=n.videoHeight,r.getContext("2d").drawImage(n,0,0),r.toDataURL("image/png")}throw new Error("Video with id "+t+" not found")}()),t.setAttribute("width",i.props.w.toString()),t.setAttribute("height",i.props.h.toString()),e.appendChild(t),e}}]),o}();Ee(rp,"type","video");var ip,op=po(function(e){var n=e.shape,r=e.videoUtil,t=110<=r.editor.getBounds(n).w*r.editor.zoomLevel,i=n.props.assetId?r.editor.getAssetById(n.props.assetId):null,o=n.props,a=o.w,s=o.h,l=o.time,u=o.playing,c=Xl(n.id),d=Da(),f=_e.useRef(null),p=_e.useCallback(function(e){var t=e.currentTarget;r.editor.updateShapes([{type:"video",id:n.id,props:{playing:!0,time:t.currentTime}}])},[n.id,r.editor]),h=_e.useCallback(function(e){var t=e.currentTarget;r.editor.updateShapes([{type:"video",id:n.id,props:{playing:!1,time:t.currentTime}}])},[n.id,r.editor]),v=_e.useCallback(function(e){var t=e.currentTarget;c&&r.editor.updateShapes([{type:"video",id:n.id,props:{time:t.currentTime}}])},[c,n.id,r.editor]),g=Ce(_e.useState(!1),2),m=g[0],y=g[1],b=_e.useCallback(function(e){var t=e.currentTarget;l!==t.currentTime&&(t.currentTime=l),u||t.pause(),y(!0)},[u,l]);return _e.useEffect(function(){var e=f.current;e&&m&&!c&&l!==e.currentTime&&(e.currentTime=l)},[c,m,l]),_e.useEffect(function(){if(d){var e=f.current;e.pause(),e.currentTime=0}},[f,d]),(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(Yl,{id:n.id,children:(0,to.jsx)("div",{className:"tl-counter-scaled",children:null!=i&&i.props.src?(0,to.jsx)("video",{ref:f,className:"tl-video tl-video-shape-".concat(n.id.split(":")[1]," tl-hitarea-stroke"),width:"100%",height:"100%",draggable:!1,playsInline:!0,autoPlay:!0,muted:!0,loop:!0,disableRemotePlayback:!0,disablePictureInPicture:!0,controls:c&&t,onPlay:p,onPause:h,onTimeUpdate:v,onLoadedData:b,hidden:!m,children:(0,to.jsx)("source",{src:i.props.src})}):(0,to.jsx)("g",{transform:"translate(".concat((a-38)/2,", ").concat((s-38)/2,")"),children:(0,to.jsx)(ms,{})})})}),"url"in n.props&&n.props.url&&(0,to.jsx)(pd,{url:n.props.url,zoomLevel:r.editor.zoomLevel})]})}),ap=Tc("video",{util:rp,props:Gi,migrations:Qi}),sp=[xf,Fd,bd,Of,np],lp=[Bd,wf,Hf,Zf,Gd,dd,Sf,ap],up=new Set(sp.map(function(e){return e.type}));function cp(e){var t,n=[].concat(sp),r=new Set,i=ce(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(up.has(o.type))throw new Error('Shape type "'.concat(o.type,'" is a core shapes type and cannot be overridden'));if(r.has(o.type))throw new Error('Shape type "'.concat(o.type,'" is defined more than once'));n.push(o),r.add(o.type)}}catch(e){i.e(e)}finally{i.f()}return n}function dp(e,t){if(!t)return!1;switch(e.type){case"mixed":return"mixed"===t.type;case"shared":return"shared"===t.type&&e.value===t.value;default:throw V(e)}}ip=Symbol.iterator;var fp=function(e){M(n,function(){function t(e){z(this,t),Ee(this,"map",void 0),this.map=new Map(e)}return P(t,[{key:"get",value:function(e){return this.map.get(e)}},{key:"getAsKnownValue",value:function(e){var t=this.get(e);if(t&&"mixed"!==t.type)return t.value}},{key:"size",get:function(){return this.map.size}},{key:"equals",value:function(e){if(this.size!==e.size)return!1;var t,n=new Set,r=ce(this);try{for(r.s();!(t=r.n()).done;){var i=Ce(t.value,2),o=i[0];if(!dp(i[1],e.get(o)))return!1;n.add(o)}}catch(e){r.e(e)}finally{r.f()}var a,s=ce(e);try{for(s.s();!(a=s.n()).done;){var l=Ce(a.value,2),u=l[0],c=l[1];if(!n.has(u)&&!dp(c,this.get(u)))return!1}}catch(e){s.e(e)}finally{s.f()}return!0}},{key:"keys",value:function(){return this.map.keys()}},{key:"values",value:function(){return this.map.values()}},{key:"entries",value:function(){return this.map.entries()}},{key:ip,value:function(){return this.map[Symbol.iterator]()}}]),t}());var t=N(n);function n(){return z(this,n),t.apply(this,arguments)}return P(n,[{key:"set",value:function(e,t){this.map.set(e,t)}},{key:"applyValue",value:function(e,t){var n=this.get(e);if(n)switch(n.type){case"mixed":return;case"shared":return void(n.value!==t&&this.set(e,{type:"mixed"}));default:V(n,"type")}else this.set(e,{type:"shared",value:t})}}]),n}();function pp(e,t){for(var n=0;e[t+n];)n+=e[t+n]+1;return n+1}function hp(e){var t,n,r,i=new Uint8Array(e),o=0,a=0;if(r=e,"GIF"!==new TextDecoder("ascii").decode(r.slice(0,3)))return!1;for(t=128&i[10],n=7&i[10],o+=6,o+=7,o+=t?3*Math.pow(2,n+1):0;a<2&&o<i.length;)switch(i[o]){case 44:a+=1,t=128&i[o+9],n=7&i[o+9],o+=10,o+=t?3*Math.pow(2,n+1):0,o+=pp(i,o+1)+1;break;case 33:o+=2,o+=pp(i,o);break;default:o=i.length}return 1<a}var vp=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(vp=new Int32Array(vp));var gp,mp,yp=Rj(918),bp=function(e,t){return yp.lW.from(e,t)},wp=(gp=function(e,t){for(var n=0===t?0:-1^~~t,r=0;r<e.length;r++)n=vp[255&(n^e[r])]^n>>>8;return-1^n},(mp=function(e,t){return gp(bp(e),t)>>>0}).signed=function(e,t){return gp(bp(e),t)},(mp.unsigned=mp).model="crc-32",mp);function xp(e,t){return 137===e.getUint8(t+0)&&80===e.getUint8(t+1)&&78===e.getUint8(t+2)&&71===e.getUint8(t+3)&&13===e.getUint8(t+4)&&10===e.getUint8(t+5)&&26===e.getUint8(t+6)&&10===e.getUint8(t+7)}var kp=4,Sp=4;function _p(e,t){return function(e){var t,n,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i={};if(!xp(e,r))throw new Error("Not a PNG");for(r+=8;r<=e.buffer.byteLength;){var o=r,a=e.getInt32(r),s=(t=e,n=r+=4,[String.fromCharCode(t.getUint8(n)),String.fromCharCode(t.getUint8(n+1)),String.fromCharCode(t.getUint8(n+2)),String.fromCharCode(t.getUint8(n+3))].join(""));if("IDAT"===s&&i[s])r+=a+kp+Sp;else{if("IEND"===s)break;i[s]={start:o,dataOffset:r+4,size:a},r+=a+kp+Sp}}return i}(e)[t]}function Ep(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length?arguments[2]:void 0,r=46,i=0,o=_p(e,"pHYs");o&&(r=o.start,i=o.size);var a=_p(e,"IDAT");a&&(r=a.start,i=0);var s=new ArrayBuffer(21),l=new DataView(s);l.setUint32(0,9),l.setUint8(4,"p".charCodeAt(0)),l.setUint8(5,"H".charCodeAt(0)),l.setUint8(6,"Y".charCodeAt(0)),l.setUint8(7,"s".charCodeAt(0));l.setInt32(8,2835.5*t),l.setInt32(12,2835.5*t),l.setInt8(16,1);var u=new Uint8Array(s.slice(4,17));l.setInt32(17,wp(u));var c=e.buffer.slice(0,r),d=e.buffer.slice(r+i);return new Blob([c,s,d],n)}var Pp=["image/jpeg","image/png","image/gif","image/svg+xml"],Cp=["video/mp4","video/quicktime"],Ip=Pp.concat(Cp).join(", "),Tp=function(e){return Pp.includes(e)};function Mp(e){return Ap.apply(this,arguments)}function Ap(){return(Ap=ao(io().mark(function e(r){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,t){var n=document.createElement("video");n.onloadeddata=function(){return e({w:n.videoWidth,h:n.videoHeight})},n.onerror=function(e){console.error(e),t(new Error("Could not get video size"))},n.crossOrigin="anonymous",n.src=r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jp(e){return Op.apply(this,arguments)}function Op(){return(Op=ao(io().mark(function e(t){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t).then(function(e){return e.arrayBuffer()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Lp(e){return zp.apply(this,arguments)}function zp(){return(zp=ao(io().mark(function e(c){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(l,t){var u=new Image;u.onload=ao(io().mark(function e(){var r,i,o,a,s;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,jp(c);case 3:if(r=e.sent,!xp(i=new DataView(r),0)){e.next=13;break}if(!(o=_p(i,"pHYs"))){e.next=13;break}if(0===(t=i,n=o.dataOffset,a={ppux:t.getUint32(n),ppuy:t.getUint32(n+4),unit:t.getUint8(n+4)}).unit&&a.ppux===a.ppuy)return s=Math.round(a.ppux/2834.5),l({w:u.width/s,h:u.height/s}),e.abrupt("return");e.next=13;break;case 13:l({w:u.width,h:u.height}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0),l({w:u.width,h:u.height});case 20:case"end":return e.stop()}var t,n},e,null,[[0,16]])})),u.onerror=function(e){console.error(e),t(new Error("Could not get image size"))},u.crossOrigin="anonymous",u.src=c});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rp(e,t,n){return Np.apply(this,arguments)}function Np(){return(Np=ao(io().mark(function e(t,o,a){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(r){var i=new Image;i.onload=function(){var e=document.createElement("canvas"),t=e.getContext("2d");if(t){e.width=2*o,e.height=2*a,t.drawImage(i,0,0,e.width,e.height);var n=e.toDataURL();r(n)}},i.crossOrigin="anonymous",i.src=t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dp(e){return Bp.apply(this,arguments)}function Bp(){return(Bp=ao(io().mark(function e(r){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("image/gif"===r.type)return e.next=3,new Promise(function(e,t){var n=new FileReader;n.onerror=function(){return t(n.error)},n.onload=function(){e({isAnimated:!!n.result&&hp(n.result)})},n.readAsArrayBuffer(r)});e.next=4;break;case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",{isAnimated:!Tp(r.type)});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fp(e,t,n){return fetch(e).then(function(e){return e.arrayBuffer()}).then(function(e){return new File([e],t,{type:n})})}function Up(e){var t=e.editor,n=t.selectionRotation,r=t.selectionPageCenter,i=t.inputs.originPagePoint,o=t.selectedShapes;return{selectionPageCenter:r,initialCursorAngle:r.angle(i),initialSelectionRotation:n,shapeSnapshots:o.map(function(e){return{shape:be(e),initialPagePoint:t.getPagePointById(e.id)}})}}function Kp(e){var s=e.delta,c=e.editor,t=e.snapshot,d=e.stage,l=t.selectionPageCenter,n=t.shapeSnapshots;c.updateShapes(n.map(function(e){var t=e.shape,n=e.initialPagePoint,r=zr(t.parentId)?c.getPageTransformById(t.parentId):na.Identity(),i=xo.RotWith(n,l,s),o=na.applyToPoint(na.Inverse(r),i),a=jo(t.rotation+s);return{id:t.id,type:t.type,x:o.x,y:o.y,rotation:a}}));var f=[];n.forEach(function(e){var t,n=e.shape,r=c.getShapeById(n.id);if(r){var i=c.getShapeUtil(n);if("start"===d||"one-off"===d){var o,a=null===(o=i.onRotateStart)||void 0===o?void 0:o.call(i,n);a&&f.push(a)}var s=null===(t=i.onRotate)||void 0===t?void 0:t.call(i,n,r);if(s&&f.push(s),"end"===d||"one-off"===d){var l,u=null===(l=i.onRotateEnd)||void 0===l?void 0:l.call(i,n,r);u&&f.push(u)}}}),0<f.length&&c.updateShapes(f)}var Vp=function(e,t,n){for(;!yn(n.parentId);){var r=e.get(n.parentId);if(!r)return!1;n=r}return n.parentId===t},Wp={top:10,left:10,bottom:10,right:10};function Hp(e){var t=e.getContainer(),n=t.querySelector('*[data-tldraw-area="active-drawing"]'),r=Pe(Pe({},Wp),{},{width:0,height:0});if(n&&t){var i=t.getBoundingClientRect(),o=n.getBoundingClientRect();r.top=o.top,r.left=o.left,r.bottom=i.height-o.bottom,r.right=i.width-o.right}return r.width=e.viewportScreenBounds.width-r.left-r.right,r.height=e.viewportScreenBounds.height-r.top-r.bottom,r}var Yp,Xp,qp=P(function e(t){var i=this;z(this,e),Ee(this,"offsets",It("activeAreaOffsets",Wp)),Ee(this,"updateOffsets",function(){var e,t,n,r=(e=i.editor,t=Hp(e),n=e.zoomLevel,t.left/=n,t.right/=n,t.top/=n,t.bottom/=n,t.width/=n,t.height/=n,t);i.offsets.set(r)}),Ee(this,"dispose",function(){window.addEventListener("resize",i.updateOffsets)}),this.editor=t,window.addEventListener("resize",this.updateOffsets),this.editor.disposables.add(this.dispose)}),$p=function(){function t(e){var n=this;z(this,t),Ee(this,"_clickId",""),Ee(this,"_clickTimeout",void 0),Ee(this,"_clickScreenPoint",void 0),Ee(this,"_previousScreenPoint",void 0),Ee(this,"_getClickTimeout",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ac();n._clickId=t,clearTimeout(n._clickTimeout),n._clickTimeout=setTimeout(function(){if(n._clickState===e&&n._clickId===t){switch(n._clickState){case"pendingTriple":n.editor.dispatch(Pe(Pe({},n.lastPointerInfo),{},{type:"click",name:"double_click",phase:"settle"}));break;case"pendingQuadruple":n.editor.dispatch(Pe(Pe({},n.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"settle"}));break;case"pendingOverflow":n.editor.dispatch(Pe(Pe({},n.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"settle"}))}n._clickState="idle"}},"idle"===e||"pendingDouble"===e?450:200)}),Ee(this,"_clickState","idle"),Ee(this,"lastPointerInfo",{}),Ee(this,"transformPointerDownEvent",function(e){if(!n._clickState)return e;switch(n._clickScreenPoint=xo.From(e.point),n._previousScreenPoint&&40<n._previousScreenPoint.dist(n._clickScreenPoint)&&(n._clickState="idle"),n._previousScreenPoint=n._clickScreenPoint,n.lastPointerInfo=e,n._clickState){case"idle":return n._clickState="pendingDouble",n._clickTimeout=n._getClickTimeout(n._clickState),e;case"pendingDouble":return n._clickState="pendingTriple",n._clickTimeout=n._getClickTimeout(n._clickState),Pe(Pe({},e),{},{type:"click",name:"double_click",phase:"down"});case"pendingTriple":return n._clickState="pendingQuadruple",n._clickTimeout=n._getClickTimeout(n._clickState),Pe(Pe({},e),{},{type:"click",name:"triple_click",phase:"down"});case"pendingQuadruple":return n._clickState="pendingOverflow",n._clickTimeout=n._getClickTimeout(n._clickState),Pe(Pe({},e),{},{type:"click",name:"quadruple_click",phase:"down"});case"pendingOverflow":return n._clickState="overflow",n._clickTimeout=n._getClickTimeout(n._clickState),e;default:return n._clickTimeout=n._getClickTimeout(n._clickState),e}}),Ee(this,"transformPointerUpEvent",function(e){if(!n._clickState)return e;switch(n._clickScreenPoint=xo.From(e.point),n._clickState){case"pendingTriple":return Pe(Pe({},n.lastPointerInfo),{},{type:"click",name:"double_click",phase:"up"});case"pendingQuadruple":return Pe(Pe({},n.lastPointerInfo),{},{type:"click",name:"triple_click",phase:"up"});case"pendingOverflow":return Pe(Pe({},n.lastPointerInfo),{},{type:"click",name:"quadruple_click",phase:"up"});default:return e}}),Ee(this,"cancelDoubleClickTimeout",function(){n._clickTimeout=clearTimeout(n._clickTimeout),n._clickState="idle"}),Ee(this,"handleMove",function(){"idle"!==n._clickState&&n._clickScreenPoint&&n._clickScreenPoint.dist(n.editor.inputs.currentScreenPoint)>(n.editor.isCoarsePointer?6:4)&&n.cancelDoubleClickTimeout()}),this.editor=e}return P(t,[{key:"clickState",get:function(){return this._clickState}}]),t}(),Gp=function(){function n(e){var t=this;z(this,n),Ee(this,"_currentMM",void 0),Ee(this,"dpr",It("devicePixelRatio","undefined"==typeof window?1:window.devicePixelRatio)),Ee(this,"updateDevicePixelRatio",function(){t.dpr.set(window.devicePixelRatio),t.rebind()}),Ee(this,"dispose",function(){var e;null===(e=t._currentMM)||void 0===e||e.removeEventListener("change",t.updateDevicePixelRatio)}),this.editor=e,this.rebind(),this.editor.disposables.add(this.dispose)}return P(n,[{key:"rebind",value:function(){var e;this.dispose(),this._currentMM=this.getMedia(),null===(e=this._currentMM)||void 0===e||e.addEventListener("change",this.updateDevicePixelRatio)}},{key:"getMedia",value:function(){if(window.matchMedia)return matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)"))}}]),n}(),Qp=function(){function r(e){var n,t,c=this;z(this,r),Ee(this,"handleContent",(t=ao(io().mark(function e(t){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="text"===e.t0?3:"files"===e.t0?6:"embed"===e.t0?9:"svg-text"===e.t0?12:"url"===e.t0?15:18;break;case 3:return e.next=5,c.handleText(c.editor,t);case 5:case 8:case 11:case 14:case 17:return e.abrupt("return",e.sent);case 6:return e.next=8,c.handleFiles(c.editor,t);case 9:return e.next=11,c.handleEmbed(c.editor,t);case 12:return e.next=14,c.handleSvgText(c.editor,t);case 15:return e.next=17,c.handleUrl(c.editor,t);case 18:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})),Ee(this,"handleUrl",(n=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.point,i=n.url,o=Gl(i))return e.abrupt("return",c.handleEmbed(t,{type:"embed",url:o.url,point:r,embed:o.definition}));e.next=4;break;case 4:if(a=null!=r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,s=Pr.createId($(i)),l=t.getAssetById(s),u=!1,l){e.next=13;break}return u=!0,e.next=12,c.createAssetFromUrl(t,i);case 12:l=e.sent;case 13:t.batch(function(){u&&t.createAssets([l]),c.createShapesForAssets(t,[l],a)});case 14:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)})),this.editor=e}return P(r,[{key:"handleSvgText",value:(u=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u,c;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.point,i=n.text,o=null!=r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,a=(new DOMParser).parseFromString(i,"image/svg+xml").querySelector("svg")){e.next=5;break}throw new Error("No <svg/> element present");case 5:return s=parseFloat(a.getAttribute("width")||"0"),l=parseFloat(a.getAttribute("height")||"0"),s&&l||(document.body.appendChild(a),u=a.getBoundingClientRect(),document.body.removeChild(a),s=u.width,l=u.height),e.next=10,this.createAssetFromFile(t,new File([i],"asset.svg",{type:"image/svg+xml"}));case 10:c=e.sent,this.createShapesForAssets(t,[c],o);case 12:case"end":return e.stop()}},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"handleEmbed",value:(l=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.point,i=n.url,o=n.embed,a=null!=r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:t.viewportPageCenter,s=o.width,l=o.height,u={id:Rr(),type:"embed",x:a.x-(s||450)/2,y:a.y-(l||450)/2,props:{w:s,h:l,url:i}},t.createShapes([u],!0);case 5:case"end":return e.stop()}},e)})),function(e,t){return l.apply(this,arguments)})},{key:"handleFiles",value:(s=ao(io().mark(function e(i,t){var n,r,o,a,s,l=this;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.point,r=t.files,o=null!=n?n:i.inputs.shiftKey?i.inputs.currentPagePoint:i.viewportPageCenter,a=new xo(o.x,o.y),s=[],e.next=6,Promise.all(r.map(function(){var n=ao(io().mark(function e(t,n){var r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.type){e.next=2;break}throw new Error("No mime type");case 2:if(Pp.concat(Cp).includes(t.type)){e.next=5;break}return console.warn("".concat(t.name," not loaded - Extension not allowed.")),e.abrupt("return",null);case 5:return e.prev=5,e.next=8,l.createAssetFromFile(i,t);case 8:if(r=e.sent){e.next=11;break}throw Error("Could not create an asset");case 11:s[n]=r,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(5),console.error(e.t0),e.abrupt("return",null);case 18:case"end":return e.stop()}},e,null,[[5,14]])}));return function(e,t){return n.apply(this,arguments)}}()));case 6:this.createShapesForAssets(i,U(s),a);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"handleText",value:(a=ao(io().mark(function e(n,r){var i,o,a,s,l,u,c,d,f,p,h,v,g,m;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.point,o=r.text,a=null!=i?i:n.inputs.shiftKey?n.inputs.currentPagePoint:n.viewportPageCenter,s=n.getShapeUtil(bu).defaultProps(),t=Jp(o.replace(/\t/g,hu)),l=t.replace(/[ \t]+$/gm,"").replace(/\n+$/,""),f="middle",p=1<l.split("\n").length,h=Zp.test(l),p&&(f=p?h?"end":"start":"middle"),v=n.textMeasure.measureText(l,Pe(Pe({},lu),{},{fontFamily:pu[s.font],fontSize:cu[s.size],width:"fit-content"})),g=Math.min(p?.9*n.viewportPageBounds.width:920,Math.max(200,.9*n.viewportPageBounds.width)),v.w>g?(m=n.textMeasure.measureText(l,Pe(Pe({},lu),{},{fontFamily:pu[s.font],fontSize:cu[s.size],width:g+"px"})),u=m.w,c=m.h,d=!1,f=h?"end":"start"):(u=v.w,c=v.h,d=!0),a.y-c/2<n.viewportPageBounds.minY+40&&(a.y=n.viewportPageBounds.minY+40+c/2),n.createShapes([{id:Rr(),type:"text",x:a.x-u/2,y:a.y-c/2,props:{text:l,align:f,autoSize:d,w:u}}]);case 13:case"end":return e.stop()}var t},e)})),function(e,t){return a.apply(this,arguments)})},{key:"createShapesForAssets",value:(o=ao(io().mark(function e(i,o,a){var t,s,n,r,l;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.length){e.next=2;break}return e.abrupt("return");case 2:t=xo.From(a),s=[],n=ce(o),e.prev=5,n.s();case 7:if((r=n.n()).done){e.next=22;break}l=r.value,e.t0=l.type,e.next="bookmark"===e.t0?12:"image"===e.t0?15:"video"===e.t0?18:20;break;case 12:return s.push({id:Rr(),type:"bookmark",x:t.x-150,y:t.y-160,opacity:1,props:{assetId:l.id,url:l.props.src}}),t.x+=300,e.abrupt("break",20);case 15:return s.push({id:Rr(),type:"image",x:t.x-l.props.w/2,y:t.y-l.props.h/2,opacity:1,props:{assetId:l.id,w:l.props.w,h:l.props.h}}),t.x+=l.props.w,e.abrupt("break",20);case 18:s.push({id:Rr(),type:"video",x:t.x-l.props.w/2,y:t.y-l.props.h/2,opacity:1,props:{assetId:l.id,w:l.props.w,h:l.props.h}}),t.x+=l.props.w;case 20:e.next=7;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(5),n.e(e.t1);case 27:return e.prev=27,n.f(),e.finish(27);case 30:i.batch(function(){var e=o.filter(function(e){return!i.getAssetById(e.id)});e.length&&i.createAssets(e),i.createShapes(s,!0);var t=i.viewportPageBounds,n=i.selectedPageBounds;if(n){var r=n.center.sub(a);i.updateShapes(s.map(function(e){return{id:e.id,type:e.type,x:e.x-r.x,y:e.y-r.y}}))}(n=i.selectedPageBounds)&&!t.contains(n)&&i.zoomToSelection()});case 31:case"end":return e.stop()}},e,null,[[5,24,27,30]])})),function(e,t,n){return o.apply(this,arguments)})},{key:"createAssetFromFile",value:(i=ao(io().mark(function e(t,v){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(p,e){var h=new FileReader;h.onerror=function(){return e(h.error)},h.onload=ao(io().mark(function e(){var o,a,s,l,u,c,d,f;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.result,a=Tp(v.type),s=a?Lp:Mp,"video/quicktime"===v.type&&o.includes("video/quicktime")&&(o=o.replace("video/quicktime","video/mp4")),e.next=6,s(o);case 6:if(l=e.sent,n={w:1e3,h:1e3},void 0,r=(t=l).w/n.w,i=t.h/n.h,(u=r<=1&&i<=1?t:i<r?{w:t.w/r,h:t.h/r}:{w:t.w/i,h:t.h/i})===l||"image/jpeg"!==v.type&&"image/png"!==v.type){e.next=12;break}return e.next=11,Rp(o,u.w,u.h);case 11:o=e.sent;case 12:return c=Pr.createId($(o)),e.next=15,Dp(v);case 15:d=e.sent,f={id:c,type:a?"image":"video",typeName:"asset",props:{name:v.name,src:o,w:u.w,h:u.h,mimeType:v.type,isAnimated:d.isAnimated}},p(f);case 18:case"end":return e.stop()}var t,n,r,i},e)})),h.readAsDataURL(v)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})},{key:"createAssetFromUrl",value:(n=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u,c,d,f;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n,{method:"GET",mode:"no-cors"});case 3:return c=e.sent,e.next=6,c.text();case 6:d=e.sent,f=(new DOMParser).parseFromString(d,"text/html"),r={image:null!==(i=null===(o=f.head.querySelector('meta[property="og:image"]'))||void 0===o?void 0:o.getAttribute("content"))&&void 0!==i?i:"",title:null!==(a=null===(s=f.head.querySelector('meta[property="og:title"]'))||void 0===s?void 0:s.getAttribute("content"))&&void 0!==a?a:Ba(n,32),description:null!==(l=null===(u=f.head.querySelector('meta[property="og:description"]'))||void 0===u?void 0:u.getAttribute("content"))&&void 0!==l?l:""},e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),r={image:"",title:Ba(n,32),description:""};case 15:return e.abrupt("return",{id:Pr.createId($(n)),typeName:"asset",type:"bookmark",props:{src:n,description:r.description,image:r.image,title:r.title}});case 16:case"end":return e.stop()}},e,null,[[0,11]])})),function(e,t){return n.apply(this,arguments)})}]),r;var n,i,o,a,s,l,u}(),Zp=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/;function Jp(e){for(var t=e.split("\n");0===t[0].trim().length;)t.shift();var n,r=1/0,i=ce(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(0<o.trim().length){var a=o.length-o.trimStart().length;r=Math.min(r,a)}}}catch(e){i.e(e)}finally{i.f()}return t.map(function(e){return e.slice(r)}).join("\n")}function eh(e){if(e){for(var t=th;e.length;)t=t.push(e.pop());return t}return th}Yp=Symbol.iterator;var th=new(function(){function e(){z(this,e),Ee(this,"length",0),Ee(this,"head",null),Ee(this,"tail",this)}return P(e,[{key:"push",value:function(e){return new nh(e,this)}},{key:"toArray",value:function(){return dt}},{key:Yp,value:function(){return{next:function(){return{value:void 0,done:!0}}}}}]),e}());Xp=Symbol.iterator;var nh=function(){function n(e,t){z(this,n),Ee(this,"length",void 0),this.head=e,this.tail=t,this.length=t.length+1}return P(n,[{key:"push",value:function(e){return new n(e,this)}},{key:"toArray",value:function(){return Array.from(this)}},{key:Xp,value:function(){var t=this;return{next:function(){if(t.length){var e=t.head;return t=t.tail,{value:e,done:!1}}return{value:void 0,done:!0}}}}}]),n}(),rh=function(){function r(e,t,n){var p=this;z(this,r),Ee(this,"_undos",It("HistoryManager.undos",eh())),Ee(this,"_redos",It("HistoryManager.redos",eh())),Ee(this,"_batchDepth",0),Ee(this,"_commands",{}),Ee(this,"createCommand",function(c,d,f){if(p._commands[c])throw new Error("Duplicate command: ".concat(c));return p._commands[c]=f,function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!p._batchDepth)return p.batch(function(){return e.apply(void 0,n)}),p.ctx;var i=d.apply(void 0,n);if(!i)return p.ctx;var o=i.data,a=i.ephemeral,s=i.squashing,l=i.preservesRedoStack;if(p.ignoringUpdates(function(e,t){return f.do(o),{undos:e,redos:t}}),!a){var u=p._undos.value.head;s&&u&&"command"===u.type&&u.name===c&&u.preservesRedoStack===l?p._undos.update(function(e){return e.tail.push(Pe(Pe({},u),{},{id:ac(),data:f.squash(u.data,o)}))}):p._undos.update(function(e){return e.push({type:"command",name:c,data:o,id:ac(),preservesRedoStack:l})}),i.preservesRedoStack||p._redos.set(eh()),p.ctx.emit("change-history",{reason:"push"})}return p.ctx}}),Ee(this,"batch",function(r){try{p._batchDepth++,1===p._batchDepth?Pt(function(){var e,t,n=null===(e=p._undos.value.head)||void 0===e?void 0:e.id;r(),n!==(null===(t=p._undos.value.head)||void 0===t?void 0:t.id)&&p.onBatchComplete()}):r()}catch(e){throw p.annotateError(e),e}finally{p._batchDepth--}return p}),Ee(this,"ignoringUpdates",function(e){var t=p._undos.value,n=p._redos.value;p._undos.set(eh()),p._redos.set(eh());try{var r=Pt(function(){return e(t,n)});t=r.undos,n=r.redos}finally{p._undos.set(t),p._redos.set(n)}}),Ee(this,"_undo",function(e){var o=e.pushToRedoStack,t=e.toMark,a=void 0===t?void 0:t;return p.ignoringUpdates(function(e,t){if(0===e.length)return{undos:e,redos:t};for(;"STOP"===(null===(n=e.head)||void 0===n?void 0:n.type);){var n,r=e.head;if(e=e.tail,o&&(t=t.push(r)),r.id===a)return p.ctx.emit("change-history",o?{reason:"undo"}:{reason:"bail",markId:a}),{undos:e,redos:t}}if(0===e.length)return p.ctx.emit("change-history",o?{reason:"undo"}:{reason:"bail",markId:a}),{undos:e,redos:t};for(;e.head;){var i=e.head;if(e=e.tail,o&&(t=t.push(i)),"STOP"===i.type){if(i.onUndo&&(!a||i.id===a))return p.ctx.emit("change-history",o?{reason:"undo"}:{reason:"bail",markId:a}),{undos:e,redos:t}}else p._commands[i.name].undo(i.data)}return p.ctx.emit("change-history",o?{reason:"undo"}:{reason:"bail",markId:a}),{undos:e,redos:t}}),p}),Ee(this,"undo",function(){return p._undo({pushToRedoStack:!0}),p}),Ee(this,"redo",function(){return p.ignoringUpdates(function(e,t){if(0===t.length)return{undos:e,redos:t};for(;"STOP"===(null===(n=t.head)||void 0===n?void 0:n.type);){var n;e=e.push(t.head),t=t.tail}if(0===t.length)return p.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t};for(;t.head;){var r=t.head;if(e=e.push(t.head),t=t.tail,"STOP"===r.type){if(r.onRedo)break}else{var i=p._commands[r.name];i.redo?i.redo(r.data):i.do(r.data)}}return p.ctx.emit("change-history",{reason:"redo"}),{undos:e,redos:t}}),p}),Ee(this,"bail",function(){return p._undo({pushToRedoStack:!1}),p}),Ee(this,"bailToMark",function(e){return p._undo({pushToRedoStack:!1,toMark:e}),p}),Ee(this,"mark",function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ac(),n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],e=p._undos.value.head;return e&&"STOP"===e.type&&e.id===t&&e.onUndo===n&&e.onRedo===r?e.id:(p._undos.update(function(e){return e.push({type:"STOP",id:t,onUndo:n,onRedo:r})}),p.ctx.emit("mark-history",{id:t}),t)}),this.ctx=e,this.onBatchComplete=t,this.annotateError=n}return P(r,[{key:"numUndos",get:function(){return this._undos.value.length}},{key:"numRedos",get:function(){return this._redos.value.length}},{key:"clear",value:function(){this._undos.set(eh()),this._redos.set(eh())}}]),r}(),ih=Object.defineProperty,oh=Object.getOwnPropertyDescriptor,ah=function(e,t,n,r){for(var i,o=1<r?void 0:r?oh(t,n):t,a=e.length-1;0<=a;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&ih(t,n,o),o},sh=function(e){return Math.round(e*Math.pow(10,8))/Math.pow(10,8)};function lh(e,t,n,r,i,o){if(20<o)return[];var a=e.filter(function(e){return("forward"===r?e.startNode.id===t:e.endNode.id===t)&&sh(e.length)===sh(n)&&Vo(e.breadthIntersection[0],e.breadthIntersection[1],i[0],i[1])});if(0===a.length)return[];var s,l=new Set,u=ce(a);try{for(u.s();!(s=u.n()).done;){var c=s.value,d="forward"===r?c.endNode.id:c.startNode.id;l.has(d)||(l.add(d),a.push.apply(a,de(lh(e,d,n,r,Vo(c.breadthIntersection[0],c.breadthIntersection[1],i[0],i[1]),o+1))))}}catch(e){u.e(e)}finally{u.f()}return a}var uh=function(){function t(e){z(this,t),Ee(this,"_snapLines",It("snapLines",void 0)),this.editor=e}return P(t,[{key:"lines",get:function(){var e;return null!==(e=this._snapLines.value)&&void 0!==e?e:dt}},{key:"clear",value:function(){this.lines.length&&this._snapLines.set(void 0)}},{key:"setLines",value:function(e){this._snapLines.set(e)}},{key:"snapPointsCache",get:function(){var e=this;return this.editor.store.createComputedCache("snapPoints",function(r){var i=e.editor.getPageTransformById(r.id);if(i)return e.editor.getShapeUtil(r).snapPoints(r).map(function(e,t){var n=na.applyToPoint(i,e);return{x:n.x,y:n.y,id:"".concat(r.id,":").concat(t)}})})}},{key:"snapThreshold",get:function(){return 8/this.editor.zoomLevel}},{key:"snappableShapes",get:function(){var e,l=this.editor,u=l.selectedIds,c=l.renderingBounds,d=[];return function e(t){var n,r=ce(l.getSortedChildIds(t));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!u.includes(i)){var o=l.getShapeById(i);if(o){var a=l.getShapeUtil(o);if(a.canSnap(o)){var s=l.getPageBoundsById(i);s&&c.includes(s)&&(l.isShapeOfType(o,Hd)?e(i):d.push({id:i,pageBounds:s,isClosed:a.isClosed(o)}))}}}}}catch(e){r.e(e)}finally{r.f()}}(null!==(e=this.currentCommonAncestor)&&void 0!==e?e:l.currentPageId),d}},{key:"currentCommonAncestor",get:function(){return this.editor.findCommonAncestor(this.editor.selectedShapes)}},{key:"snappablePoints",get:function(){var e=this.snappableShapes,n=this.snapPointsCache,r=[];return e.forEach(function(e){var t=n.get(e.id);t&&r.push.apply(r,de(t))}),r}},{key:"visibleGaps",get:function(){for(var e,t,n=[],r=[],i=this.snappableShapes.sort(function(e,t){return e.pageBounds.minX-t.pageBounds.minX}),o=0;o<i.length;o++){e=i[o];for(var a=o+1;a<i.length;a++)t=i[a],e.pageBounds.maxX<t.pageBounds.minX&&Ko(e.pageBounds.minY,e.pageBounds.maxY,t.pageBounds.minY,t.pageBounds.maxY)&&n.push({startNode:e,endNode:t,startEdge:[new xo(e.pageBounds.maxX,e.pageBounds.minY),new xo(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new xo(t.pageBounds.minX,t.pageBounds.minY),new xo(t.pageBounds.minX,t.pageBounds.maxY)],length:t.pageBounds.minX-e.pageBounds.maxX,breadthIntersection:Vo(e.pageBounds.minY,e.pageBounds.maxY,t.pageBounds.minY,t.pageBounds.maxY)})}for(var s=i.sort(function(e,t){return e.pageBounds.minY-t.pageBounds.minY}),l=0;l<s.length;l++){e=s[l];for(var u=l+1;u<s.length;u++)t=s[u],e.pageBounds.maxY<t.pageBounds.minY&&Ko(e.pageBounds.minX,e.pageBounds.maxX,t.pageBounds.minX,t.pageBounds.maxX)&&r.push({startNode:e,endNode:t,startEdge:[new xo(e.pageBounds.minX,e.pageBounds.maxY),new xo(e.pageBounds.maxX,e.pageBounds.maxY)],endEdge:[new xo(t.pageBounds.minX,t.pageBounds.minY),new xo(t.pageBounds.maxX,t.pageBounds.minY)],length:t.pageBounds.minY-e.pageBounds.maxY,breadthIntersection:Vo(e.pageBounds.minX,e.pageBounds.maxX,t.pageBounds.minX,t.pageBounds.maxX)})}return{horizontal:n,vertical:r}}},{key:"snapTranslate",value:function(e){var t,n,r,i,o=e.lockedAxis,a=e.initialSelectionPageBounds,s=e.initialSelectionSnapPoints,l=e.dragDelta,u=this.snappablePoints,c=this.snapThreshold,d=a.clone().translate(l),f=s.map(function(e,t){var n=e.x,r=e.y;return{id:"selection:"+t,x:n+l.x,y:r+l.y}}),p=u,h=[],v=[],g=new xo(c,c);this.collectPointSnaps({minOffset:g,nearestSnapsX:h,nearestSnapsY:v,otherNodeSnapPoints:p,selectionSnapPoints:f}),this.collectGapSnaps({selectionPageBounds:d,nearestSnapsX:h,nearestSnapsY:v,minOffset:g});var m=new xo("x"===o?0:null!==(t=null===(n=h[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,"y"===o?0:null!==(r=null===(i=v[0])||void 0===i?void 0:i.nudge)&&void 0!==r?r:0);g.x=0,g.y=0,h.length=0,v.length=0,f.forEach(function(e){e.x+=m.x,e.y+=m.y}),d.translate(m),this.collectPointSnaps({minOffset:g,nearestSnapsX:h,nearestSnapsY:v,otherNodeSnapPoints:p,selectionSnapPoints:f}),this.collectGapSnaps({selectionPageBounds:d,nearestSnapsX:h,nearestSnapsY:v,minOffset:g});var y=this.getPointSnapLines({nearestSnapsX:h,nearestSnapsY:v}),b=this.getGapSnapLines({selectionPageBounds:d,nearestSnapsX:h,nearestSnapsY:v});return this._snapLines.set([].concat(de(b),de(y))),{nudge:m}}},{key:"outlinesInPageSpace",get:function(){var o=this;return this.snappableShapes.map(function(e){var t=e.id,n=e.isClosed,r=ne(o.editor.getOutlineById(t));n&&r.push(r[0]);var i=o.editor.getPageTransformById(t);if(!i)throw Error("No page transform");return na.applyToPoints(i,r)})}},{key:"getSnappingHandleDelta",value:function(e){var t,n,r,i,o,a=e.handlePoint,s=e.additionalSegments,l=this.outlinesInPageSpace,u=this.snapThreshold,c=null,d=ce([].concat(de(l),de(s)));try{for(d.s();!(o=d.n()).done;)for(var f=o.value,p=0;p<f.length-1;p++)t=f[p],n=f[p+1],r=xo.NearestPointOnLineSegment(t,n,a),i=xo.Dist(a,r),isNaN(i)||i<u&&(u=i,c=r)}catch(e){d.e(e)}finally{d.f()}return c?(this._snapLines.set([{id:ac(),type:"points",points:[c]}]),xo.Sub(c,a)):null}},{key:"snapResize",value:function(e){var t,n,r,i,o=e.initialSelectionPageBounds,a=e.dragDelta,s=e.handle,l=e.isAspectRatioLocked,u=e.isResizingFromCenter,c=this.snapThreshold,d=$o.Resize(o,s,u?2*a.x:a.x,u?2*a.y:a.y,l),f=d.box,p=d.scaleX,h=d.scaleY,v=s;p<0&&(v=function(e){switch(e){case"left":return"right";case"right":return"left";case"top_left":return"top_right";case"top_right":return"top_left";case"bottom_left":return"bottom_right";case"bottom_right":return"bottom_left";default:return e}}(v)),h<0&&(v=function(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"top_left":return"bottom_left";case"top_right":return"bottom_right";case"bottom_left":return"top_left";case"bottom_right":return"top_right";default:return e}}(v)),u&&(f.center=o.center);var g="top"===v||"bottom"===v,m="left"===v||"right"===v,y=ch(v,f),b=this.snappablePoints,w=[],x=[],k=new xo(c,c);this.collectPointSnaps({minOffset:k,nearestSnapsX:w,nearestSnapsY:x,otherNodeSnapPoints:b,selectionSnapPoints:y});var S,_=new xo(g?0:null!==(t=null===(n=w[0])||void 0===n?void 0:n.nudge)&&void 0!==t?t:0,m?0:null!==(r=null===(i=x[0])||void 0===i?void 0:i.nudge)&&void 0!==r?r:0);if(l&&("top_left"===(S=v)||"top_right"===S||"bottom_right"===S||"bottom_left"===S)&&0!==_.len()){var E=w.length&&x.length?Math.abs(_.x)<Math.abs(_.y)?"x":"y":w.length?"x":"y",P=o.aspectRatio;"x"==E?(x.length=0,_.y=_.x/P,"bottom_left"!==v&&"top_right"!==v||(_.y=-_.y)):(w.length=0,_.x=_.y*P,"bottom_left"!==v&&"top_right"!==v||(_.x=-_.x))}var C=xo.Add(a,_),I=$o.Resize(o,s,u?2*C.x:C.x,u?2*C.y:C.y,l).box;u&&(I.center=o.center);var T=ch("any",I);w.length=0,x.length=0,k.x=0,k.y=0,this.collectPointSnaps({minOffset:k,nearestSnapsX:w,nearestSnapsY:x,otherNodeSnapPoints:b,selectionSnapPoints:T});var M=this.getPointSnapLines({nearestSnapsX:w,nearestSnapsY:x});return this._snapLines.set(de(M)),{nudge:_}}},{key:"collectPointSnaps",value:function(e){var t,n=e.selectionSnapPoints,r=e.otherNodeSnapPoints,i=e.minOffset,o=e.nearestSnapsX,a=e.nearestSnapsY,s=ce(n);try{for(s.s();!(t=s.n()).done;){var l,u=t.value,c=ce(r);try{for(c.s();!(l=c.n()).done;){var d=l.value,f=xo.Sub(u,d),p=Math.abs(f.x),h=Math.abs(f.y);sh(p)<=sh(i.x)&&(sh(p)<sh(i.x)&&(o.length=0),o.push({type:"points",points:{thisPoint:u,otherPoint:d},nudge:d.x-u.x}),i.x=p),sh(h)<=sh(i.y)&&(sh(h)<sh(i.y)&&(a.length=0),a.push({type:"points",points:{thisPoint:u,otherPoint:d},nudge:d.y-u.y}),i.y=h)}}catch(e){c.e(e)}finally{c.f()}}}catch(e){s.e(e)}finally{s.f()}}},{key:"collectGapSnaps",value:function(e){var t,n=e.selectionPageBounds,r=e.minOffset,i=e.nearestSnapsX,o=e.nearestSnapsY,a=this.visibleGaps,s=a.horizontal,l=a.vertical,u=ce(s);try{for(u.s();!(t=u.n()).done;){var c=t.value;if(Ko(c.breadthIntersection[0],c.breadthIntersection[1],n.minY,n.maxY)){var d=c.startEdge[0].x+c.length/2-n.center.x;if(c.length>n.width&&sh(Math.abs(d))<=sh(r.x)){sh(Math.abs(d))<sh(r.x)&&(i.length=0),r.x=Math.abs(d);var f={type:"gap_center",gap:c,nudge:d},p=i.find(function(e){return"gap_center"===e.type}),h=p&&Vo(c.breadthIntersection[0],c.breadthIntersection[1],p.gap.breadthIntersection[0],p.gap.breadthIntersection[1]);p&&p.gap.length>c.length&&h?i[i.indexOf(p)]=f:p&&h||i.push(f)}var v=c.startNode.pageBounds.minX-c.length-n.maxX;sh(Math.abs(v))<=sh(r.x)&&(sh(Math.abs(v))<sh(r.x)&&(i.length=0),r.x=Math.abs(v),i.push({type:"gap_duplicate",gap:c,protrusionDirection:"left",nudge:v}));var g=c.endNode.pageBounds.maxX+c.length-n.minX;sh(Math.abs(g))<=sh(r.x)&&(sh(Math.abs(g))<sh(r.x)&&(i.length=0),r.x=Math.abs(g),i.push({type:"gap_duplicate",gap:c,protrusionDirection:"right",nudge:g}))}}}catch(e){u.e(e)}finally{u.f()}var m,y=ce(l);try{for(y.s();!(m=y.n()).done;){var b=m.value;if(Ko(b.breadthIntersection[0],b.breadthIntersection[1],n.minX,n.maxX)){var w=b.startEdge[0].y+b.length/2-n.center.y;if(b.length>n.height&&sh(Math.abs(w))<=sh(r.y)){sh(Math.abs(w))<sh(r.y)&&(o.length=0),r.y=Math.abs(w);var x={type:"gap_center",gap:b,nudge:w},k=o.find(function(e){return"gap_center"===e.type}),S=k&&Ko(k.gap.breadthIntersection[0],k.gap.breadthIntersection[1],b.breadthIntersection[0],b.breadthIntersection[1]);k&&k.gap.length>b.length&&S?o[o.indexOf(k)]=x:k&&S||o.push(x)}else{var _=b.startNode.pageBounds.minY-b.length-n.maxY;sh(Math.abs(_))<=sh(r.y)&&(sh(Math.abs(_))<sh(r.y)&&(o.length=0),r.y=Math.abs(_),o.push({type:"gap_duplicate",gap:b,protrusionDirection:"top",nudge:_}));var E=b.endNode.pageBounds.maxY+b.length-n.minY;sh(Math.abs(E))<=sh(r.y)&&(sh(Math.abs(E))<sh(r.y)&&(o.length=0),r.y=Math.abs(E),o.push({type:"gap_duplicate",gap:b,protrusionDirection:"bottom",nudge:E}))}}}}catch(e){y.e(e)}finally{y.f()}}},{key:"getPointSnapLines",value:function(e){var t=e.nearestSnapsX,n=e.nearestSnapsY,r={},i={};if(0<t.length){var o,a=ce(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;if("points"===s.type){var l=sh(s.points.otherPoint.x);r[l]||(r[l]=[]),r[l].push(s.points)}}}catch(e){a.e(e)}finally{a.f()}}if(0<n.length){var u,c=ce(n);try{for(c.s();!(u=c.n()).done;){var d=u.value;if("points"===d.type){var f=sh(d.points.otherPoint.y);i[f]||(i[f]=[]),i[f].push(d.points)}}}catch(e){c.e(e)}finally{c.f()}}return Object.values(r).concat(Object.values(i)).map(function(e){return{id:ac(),type:"points",points:B(e.map(function(e){return xo.From(e.otherPoint)}).concat(e.map(function(e){return xo.From(e.thisPoint)})),function(e,t){return e.equals(t)})}})}},{key:"getGapSnapLines",value:function(e){var d=e.selectionPageBounds,t=e.nearestSnapsX,n=e.nearestSnapsY,r=this.visibleGaps,f=r.vertical,p=r.horizontal,h={top:d.sides[0],right:d.sides[1],bottom:[d.corners[3],d.corners[2]],left:[d.corners[0],d.corners[3]]},v=[];if(0<t.length){var g,i=ce(t);try{var o=function(){var t=g.value;if("points"===t.type)return"continue";var e=t.gap,n=e.breadthIntersection,r=e.startEdge,i=e.startNode,o=e.endNode,a=e.length,s=e.endEdge;switch(t.type){case"gap_center":var l=(a-d.width)/2,u=Vo(n[0],n[1],d.minY,d.maxY);v.push({type:"gaps",direction:"horizontal",id:ac(),gaps:[].concat(de(lh(p,i.id,l,"backward",u,0)),[{startEdge:r,endEdge:h.left},{startEdge:h.right,endEdge:s}],de(lh(p,o.id,l,"forward",u,0)))});break;case"gap_duplicate":var c=Vo(n[0],n[1],d.minY,d.maxY);v.push({type:"gaps",direction:"horizontal",id:ac(),gaps:"left"===t.protrusionDirection?[{startEdge:h.right,endEdge:r.map(function(e){return e.clone().addXY(-i.pageBounds.width,0)})},{startEdge:r,endEdge:s}].concat(de(lh(p,o.id,a,"forward",c,0))):[].concat(de(lh(p,i.id,a,"backward",c,0)),[{startEdge:r,endEdge:s},{startEdge:s.map(function(e){return e.clone().addXY(t.gap.endNode.pageBounds.width,0)}),endEdge:h.left}])})}};for(i.s();!(g=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}}if(0<n.length){var m,a=ce(n);try{var s=function(){var e=m.value;if("points"===e.type)return"continue";var t=e.gap,n=t.breadthIntersection,r=t.startEdge,i=t.startNode,o=t.endNode,a=t.length,s=t.endEdge;switch(e.type){case"gap_center":var l=(a-d.height)/2,u=Vo(n[0],n[1],d.minX,d.maxX);v.push({type:"gaps",direction:"vertical",id:ac(),gaps:[].concat(de(lh(f,i.id,l,"backward",u,0)),[{startEdge:r,endEdge:h.top},{startEdge:h.bottom,endEdge:s}],de(lh(f,e.gap.endNode.id,l,"forward",u,0)))});break;case"gap_duplicate":var c=Vo(n[0],n[1],d.minX,d.maxX);v.push({type:"gaps",direction:"vertical",id:ac(),gaps:"top"===e.protrusionDirection?[{startEdge:h.bottom,endEdge:r.map(function(e){return e.clone().addXY(0,-i.pageBounds.height)})},{startEdge:r,endEdge:s}].concat(de(lh(f,o.id,a,"forward",c,0))):[].concat(de(lh(f,i.id,a,"backward",c,0)),[{startEdge:r,endEdge:s},{startEdge:s.map(function(e){return e.clone().addXY(0,o.pageBounds.height)}),endEdge:h.top}])})}};for(a.s();!(m=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}}return function(t){t.sort(function(e,t){return t.gaps.length-e.gaps.length});for(var n=t.length-1;0<n;n--)for(var r=t[n],e=function(){var e=t[i];if(e.direction===r.direction&&r.gaps.every(function(t){return e.gaps.some(function(e){return sh(t.startEdge[0].x)===sh(e.startEdge[0].x)&&sh(t.startEdge[0].y)===sh(e.startEdge[0].y)&&sh(t.startEdge[1].x)===sh(e.startEdge[1].x)&&sh(t.startEdge[1].y)===sh(e.startEdge[1].y)})&&e.gaps.some(function(e){return sh(t.endEdge[0].x)===sh(e.endEdge[0].x)&&sh(t.endEdge[0].y)===sh(e.endEdge[0].y)&&sh(t.endEdge[1].x)===sh(e.endEdge[1].x)&&sh(t.endEdge[1].y)===sh(e.endEdge[1].y)})}))return t.splice(n,1),"break"},i=n-1;0<=i&&"break"!==e();i--);}(v),v}}]),t}();function ch(e,t){var n=t.minX,r=t.maxX,i=t.minY,o=t.maxY,a=[];switch(e){case"top":case"left":case"top_left":case"any":a.push({id:"top_left",handle:"top_left",x:n,y:i})}switch(e){case"top":case"right":case"top_right":case"any":a.push({id:"top_right",handle:"top_right",x:r,y:i})}switch(e){case"bottom":case"right":case"bottom_right":case"any":a.push({id:"bottom_right",handle:"bottom_right",x:r,y:o})}switch(e){case"bottom":case"left":case"bottom_left":case"any":a.push({id:"bottom_left",handle:"bottom_left",x:n,y:o})}return a}ah([zt],uh.prototype,"snapPointsCache",1),ah([zt],uh.prototype,"snapThreshold",1),ah([zt],uh.prototype,"snappableShapes",1),ah([zt],uh.prototype,"currentCommonAncestor",1),ah([zt],uh.prototype,"snappablePoints",1),ah([zt],uh.prototype,"visibleGaps",1),ah([zt],uh.prototype,"outlinesInPageSpace",1);var dh={start:"left","start-legacy":"left",middle:"center","middle-legacy":"center",end:"right","end-legacy":"right"},fh=/\s/,ph=function(){function t(e){var o=this;z(this,t),Ee(this,"measureText",function(e,t){var n,r=o.getTextElement();r.setAttribute("dir","ltr"),r.style.setProperty("font-family",t.fontFamily),r.style.setProperty("font-style",t.fontStyle),r.style.setProperty("font-weight",t.fontWeight),r.style.setProperty("font-size",t.fontSize+"px"),r.style.setProperty("line-height",t.lineHeight*t.fontSize+"px"),r.style.setProperty("width",t.width),r.style.setProperty("min-width",null!==(n=t.minWidth)&&void 0!==n?n:null),r.style.setProperty("max-width",t.maxWidth),r.style.setProperty("padding",t.padding),r.textContent=vu.normalizeTextForDom(e);var i=r.getBoundingClientRect();return{x:0,y:0,w:i.width,h:i.height}}),this.editor=e}return P(t,[{key:"getTextElement",value:function(){var e=document.querySelector(".tl-text-measure");null==e||e.remove();var t=document.createElement("div");return this.editor.getContainer().appendChild(t),t.id="__textMeasure_".concat(ac()),t.classList.add("tl-text"),t.classList.add("tl-text-measure"),t.tabIndex=-1,t}},{key:"measureElementTextNodeSpans",value:function(e){var t,n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).shouldTruncateToFirstLine,r=void 0!==n&&n,i=[],o=e.getBoundingClientRect(),a=-o.left,s=-o.top,l=new Range,u=e.childNodes[0],c=0,d=null,f=null,p=0,h=!1,v=ce(e.childNodes);try{for(v.s();!(t=v.n()).done;){var g,m=t.value;if(m.nodeType===Node.TEXT_NODE){var y,b=ce(null!==(g=m.textContent)&&void 0!==g?g:"");try{for(b.s();!(y=b.n()).done;){var w=y.value;l.setStart(u,c),l.setEnd(u,c+w.length);var x=l.getClientRects(),k=x[x.length-1],S=k.top+s,_=k.left+a,E=k.right+a,P=fh.test(w);if(P===f&&S===p&&d)d.box.w=E-d.box.x,d.text+=w;else{if(d){if(r&&S!==p){h=!0;break}i.push(d)}d={box:{x:_,y:S,w:k.width,h:k.height},text:w}}f=P,p=S,c+=w.length}}catch(e){b.e(e)}finally{b.f()}}}}catch(e){v.e(e)}finally{v.f()}return d&&i.push(d),{spans:i,didTruncate:h}}},{key:"measureTextSpans",value:function(e,t){var n="truncate-ellipsis"===t.overflow||"truncate-clip"===t.overflow,r=this.getTextElement(),i=Math.ceil(t.width-2*t.padding);r.style.setProperty("width","".concat(i,"px")),r.style.setProperty("height","min-content"),r.style.setProperty("dir","ltr"),r.style.setProperty("font-size","".concat(t.fontSize,"px")),r.style.setProperty("font-family",t.fontFamily),r.style.setProperty("font-weight",t.fontWeight),r.style.setProperty("line-height","".concat(t.lineHeight*t.fontSize,"px")),r.style.setProperty("text-align",dh[t.textAlign]),n&&(r.style.setProperty("overflow-wrap","anywhere"),r.style.setProperty("word-break","break-all")),r.textContent=e;var o=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:n}),a=o.spans,s=o.didTruncate;if("truncate-ellipsis"===t.overflow&&s){r.textContent="…";var l=Math.ceil(this.measureElementTextNodeSpans(r).spans[0].box.w);r.style.setProperty("width","".concat(i-l,"px")),r.textContent=e;var u=this.measureElementTextNodeSpans(r,{shouldTruncateToFirstLine:!0}).spans,c=u[u.length-1];return u.push({text:"…",box:{x:Math.min(c.box.x+c.box.w,t.width-t.padding-l),y:c.box.y,w:l,h:c.box.h}}),u}return r.remove(),a}}]),t}(),hh=P(function e(t){var u=this;z(this,e),Ee(this,"raf",void 0),Ee(this,"isPaused",!0),Ee(this,"last",0),Ee(this,"t",0),Ee(this,"start",function(){u.isPaused=!1,cancelAnimationFrame(u.raf),u.raf=requestAnimationFrame(u.tick),u.last=Date.now()}),Ee(this,"tick",function(){if(!u.isPaused){var e=Date.now(),t=e-u.last;u.last=e,u.t+=t,u.editor.emit("frame",t),u.t<16||(u.t-=16,u.updatePointerVelocity(t),u.editor.emit("tick",t)),u.raf=requestAnimationFrame(u.tick)}}),Ee(this,"dispose",function(){u.isPaused=!0,cancelAnimationFrame(u.raf)}),Ee(this,"prevPoint",new xo),Ee(this,"updatePointerVelocity",function(e){var t=u.prevPoint,n=u.editor.inputs,r=n.currentScreenPoint,i=n.pointerVelocity;if(0!==e){var o=xo.Sub(r,t);u.prevPoint=r.clone();var a=o.len(),s=a?o.div(a):new xo(0,0),l=i.clone().lrp(s.mul(a/e),.5);Math.abs(l.x)<.01&&(l.x=0),Math.abs(l.y)<.01&&(l.y=0),i.equals(l)||(u.editor.inputs.pointerVelocity=l)}}),this.editor=t,this.editor.disposables.add(this.dispose),this.start()}),vh=function(){function n(e){var t=this;z(this,n),Ee(this,"updateUserPreferences",function(e){t.user.setUserPreferences(Pe(Pe({},t.user.userPreferences.value),e))}),this.user=e}return P(n,[{key:"userPreferences",get:function(){return this.user.userPreferences}},{key:"isDarkMode",get:function(){return this.user.userPreferences.value.isDarkMode}},{key:"animationSpeed",get:function(){return this.user.userPreferences.value.animationSpeed}},{key:"id",get:function(){return this.user.userPreferences.value.id}},{key:"name",get:function(){return this.user.userPreferences.value.name}},{key:"locale",get:function(){return this.user.userPreferences.value.locale}},{key:"color",get:function(){return this.user.userPreferences.value.color}},{key:"isSnapMode",get:function(){return this.user.userPreferences.value.isSnapMode}}]),n}(),gh=function(e){M(o,Ac);var r=N(o);function o(){var i;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(i=r.call.apply(r,[this].concat(t))),"info",{}),Ee(R(i),"brush",new $o),Ee(R(i),"initialSelectedIds",[]),Ee(R(i),"excludedShapeIds",new Set),Ee(R(i),"initialStartShape",null),Ee(R(i),"onEnter",function(e){var t=i.editor.inputs,n=t.altKey,r=t.currentPagePoint;n?i.parent.transition("scribble_brushing",e):(i.excludedShapeIds=new Set(i.editor.shapesArray.filter(function(e){return i.editor.isShapeOfType(e,Hd)||i.editor.isShapeOrAncestorLocked(e)}).map(function(e){return e.id})),i.info=e,i.initialSelectedIds=i.editor.selectedIds.slice(),i.initialStartShape=i.editor.getShapesAtPoint(r)[0],i.onPointerMove())}),Ee(R(i),"onExit",function(){i.initialSelectedIds=[],i.editor.setBrush(null)}),Ee(R(i),"onPointerMove",function(){i.hitTestShapes()}),Ee(R(i),"onPointerUp",function(){i.complete()}),Ee(R(i),"onComplete",function(){i.complete()}),Ee(R(i),"onCancel",function(e){i.editor.setSelectedIds(i.initialSelectedIds,!0),i.parent.transition("idle",e)}),Ee(R(i),"onKeyDown",function(e){i.editor.inputs.altKey?i.parent.transition("scribble_brushing",e):i.hitTestShapes()}),Ee(R(i),"onKeyUp",function(){i.hitTestShapes()}),Ee(R(i),"onInterrupt",function(){i.editor.setBrush(null)}),i}return P(o,[{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"hitTestShapes",value:function(){var e=this.editor,t=e.currentPageId,n=e.shapesArray,r=e.inputs,i=r.originPagePoint,o=r.currentPagePoint,a=r.shiftKey,s=r.ctrlKey;this.brush.setTo($o.FromPoints([i,o]));var l,u,c,d,f,p,h,v=new Set(a?this.initialSelectedIds:[]),g=this.brush.corners,m=this.excludedShapeIds;e:for(var y=0,b=n.length;y<b;y++)if(c=n[y],!m.has(c.id)&&!v.has(c.id)&&(f=this.editor.getPageBounds(c)))if(this.brush.contains(f))this.handleHit(c,o,t,v,g);else if(!s&&!this.editor.isShapeOfType(c,qd)&&this.brush.collides(f)){if(d=this.editor.getShapeUtil(c),!(p=this.editor.getPageTransform(c)))continue e;h=na.applyToPoints(na.Inverse(p),g);t:for(var w=0;w<h.length;w++)if(l=h[w],u=h[(w+1)%h.length],d.hitTestLineSegment(c,l,u)){this.handleHit(c,o,t,v,g);break t}}this.editor.setBrush(Pe({},this.brush.toJson())),this.editor.setSelectedIds(Array.from(v),!0)}},{key:"handleHit",value:function(e,t,n,r,i){if(e.parentId!==n){var o=this.editor.getOutermostSelectableShape(e),a=this.editor.getPageMaskById(o.id);a&&null!==function(e,t){for(var n,r,i=0,o=e.length;i<o;i++){n=e[i],r=e[(i+1)%o];for(var a=0,s=t.length;a<s;a++)if(ya(n,r,t[a],t[(a+1)%s]))return!0}return!1}(a,i)&&!Ho(t,a)||r.add(o.id)}else r.add(e.id)}}]),o}();function mh(e,t,n){if(!t)throw Error("Needs to translate a cropped shape!");var r=t.props.crop;if(r){var i=e.inputs.shiftKey?Math.abs(n.x)<Math.abs(n.y)?"x":"y":null;"x"===i?n.x=0:"y"===i&&(n.y=0),n.rot(-t.rotation);var o=1/(r.bottomRight.x-r.topLeft.x)*t.props.w,a=1/(r.bottomRight.y-r.topLeft.y)*t.props.h,s=r.bottomRight.y-r.topLeft.y,l=r.bottomRight.x-r.topLeft.x,u=ne(r);return u.topLeft.x=Math.min(1-l,Math.max(0,u.topLeft.x-n.x/o)),u.topLeft.y=Math.min(1-s,Math.max(0,u.topLeft.y-n.y/a)),u.bottomRight.x=u.topLeft.x+l,u.bottomRight.y=u.topLeft.y+s,{id:t.id,type:t.type,props:{crop:u}}}}Ee(gh,"id","brushing");var yh=function(e){M(o,Ac);var r=N(o);function o(){var i;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(i=r.call.apply(r,[this].concat(t))),"onEnter",function(){i.editor.setCursor({type:"default"});var e=i.editor.onlySelectedShape;i.editor.on("change-history",i.cleanupCroppingState),i.editor.mark("crop"),e&&i.editor.setCroppingId(e.id)}),Ee(R(i),"onExit",function(){i.editor.setCursor({type:"default"}),i.editor.off("change-history",i.cleanupCroppingState)}),Ee(R(i),"onCancel",function(){i.editor.setCroppingId(null),i.editor.setSelectedTool("select.idle",{})}),Ee(R(i),"onPointerDown",function(e){if(!i.editor.isMenuOpen){if(e.ctrlKey)return i.editor.setCroppingId(null),void i.editor.setSelectedTool("select.brushing",e);switch(e.target){case"canvas":i.cancel();break;case"shape":if(e.shape.id===i.editor.croppingId)return void i.editor.setSelectedTool("select.crop.pointing_crop",e);var t;null!==(t=i.editor.getShapeUtil(e.shape))&&void 0!==t&&t.canCrop(e.shape)?(i.editor.setCroppingId(e.shape.id),i.editor.setSelectedIds([e.shape.id]),i.editor.setSelectedTool("select.crop.pointing_crop",e)):i.cancel();break;case"selection":switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":i.editor.setSelectedTool("select.pointing_rotate_handle",Pe(Pe({},e),{},{onInteractionEnd:"select.crop"}));break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":i.editor.setSelectedTool("select.pointing_crop_handle",Pe(Pe({},e),{},{onInteractionEnd:"select.crop"}));break;default:i.cancel()}}}}),Ee(R(i),"onDoubleClick",function(e){if("up"===e.phase&&i.editor.croppingId){var t=i.editor.getShapeById(i.editor.croppingId);if(t){var n,r=i.editor.getShapeUtil(t);r&&"selection"===e.target&&(null===(n=r.onDoubleClickEdge)||void 0===n||n.call(r,t))}}}),Ee(R(i),"onKeyDown",function(){i.nudgeCroppingImage(!1)}),Ee(R(i),"onKeyRepeat",function(){i.nudgeCroppingImage(!0)}),Ee(R(i),"onKeyUp",function(e){"Enter"===e.code&&(i.editor.setCroppingId(null),i.editor.setSelectedTool("select.idle",{}))}),Ee(R(i),"cleanupCroppingState",function(){i.editor.croppingId||i.editor.setSelectedTool("select.idle",{})}),i}return P(o,[{key:"cancel",value:function(){this.editor.setCroppingId(null),this.editor.setSelectedTool("select.idle",{})}},{key:"nudgeCroppingImage",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.editor.inputs.keys,n=t.has("ShiftLeft"),r=new xo(0,0);if(t.has("ArrowLeft")&&(r.x+=1),t.has("ArrowRight")&&(r.x-=1),t.has("ArrowUp")&&(r.y+=1),t.has("ArrowDown")&&(r.y-=1),!r.equals(new xo(0,0))){n&&r.mul(10);var i=this.editor.getShapeById(this.editor.croppingId);if(i){var o=mh(this.editor,i,r);o&&(e||this.editor.mark("translate crop"),this.editor.updateShapes([o]))}}}}]),o}();Ee(yh,"id","idle");var bh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onCancel",function(){t.editor.setSelectedTool("select.crop.idle",{})}),Ee(R(t),"onPointerMove",function(e){t.editor.inputs.isDragging&&t.editor.setSelectedTool("select.crop.translating_crop",e)}),Ee(R(t),"onPointerUp",function(e){t.editor.setSelectedTool("select.crop.idle",e)}),t}return P(o)}();Ee(bh,"id","pointing_crop");var wh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"markId","translating crop"),Ee(R(t),"snapshot",{}),Ee(R(t),"onEnter",function(e){t.info=e,t.snapshot=t.createSnapshot(),t.editor.mark(t.markId),t.editor.setCursor({type:"move"}),t.updateShapes()}),Ee(R(t),"onExit",function(){t.editor.setCursor({type:"default"})}),Ee(R(t),"onPointerMove",function(){t.updateShapes()}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onComplete",function(){t.complete()}),Ee(R(t),"onCancel",function(){t.cancel()}),Ee(R(t),"onKeyDown",function(e){switch(e.key){case"Alt":case"Shift":return void t.updateShapes()}}),Ee(R(t),"onKeyUp",function(e){switch(e.key){case"Enter":return void t.complete();case"Alt":case"Shift":t.updateShapes()}}),t}return P(o,[{key:"complete",value:function(){this.updateShapes(),this.editor.setSelectedTool("select.crop.idle",this.info)}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.editor.setSelectedTool("select.crop.idle",this.info)}},{key:"createSnapshot",value:function(){return{shape:this.editor.onlySelectedShape}}},{key:"updateShapes",value:function(){var e=this.snapshot.shape;if(e){var t=this.editor.inputs,n=t.originPagePoint,r=t.currentPagePoint.clone().sub(n),i=mh(this.editor,e,r);i&&this.editor.updateShapes([i],!0)}}}]),o}();Ee(wh,"id","translating_crop");var xh=function(e){M(n,Ac);var t=N(n);function n(){return z(this,n),t.apply(this,arguments)}return P(n)}();Ee(xh,"id","crop"),Ee(xh,"initial","idle"),Ee(xh,"children",function(){return[yh,wh,bh]});var kh={bottom:"ns-resize",top:"ns-resize",left:"ew-resize",right:"ew-resize",bottom_left:"nesw-resize",bottom_right:"nwse-resize",top_left:"nwse-resize",top_right:"nesw-resize",bottom_left_rotate:"swne-rotate",bottom_right_rotate:"senw-rotate",top_left_rotate:"nwse-rotate",top_right_rotate:"nesw-rotate",mobile_rotate:"grabbing"},Sh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"onEnter",function(e){t.info=e,t.updateCursor()}),Ee(R(t),"onPointerMove",function(){t.editor.inputs.isDragging&&t.parent.transition("resizing",t.info)}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onCancel",function(){t.cancel()}),Ee(R(t),"onComplete",function(){t.cancel()}),Ee(R(t),"onInterrupt",function(){t.cancel()}),t}return P(o,[{key:"updateCursor",value:function(){var e=this.editor.selectedShapes,t=kh[this.info.handle];this.editor.setCursor({type:t,rotation:1===e.length?e[0].rotation:0})}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}]),o}();Ee(Sh,"id","pointing_resize_handle");var _h=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"markId",""),Ee(R(t),"snapshot",{}),Ee(R(t),"onEnter",function(e){t.info=e,t.markId=t.editor.mark("cropping"),t.snapshot=t.createSnapshot(),t.updateShapes()}),Ee(R(t),"onPointerMove",function(){t.updateShapes()}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onComplete",function(){t.complete()}),Ee(R(t),"onCancel",function(){t.cancel()}),Ee(R(t),"getDefaultCrop",function(){return{topLeft:{x:0,y:0},bottomRight:{x:1,y:1}}}),t}return P(o,[{key:"updateCursor",value:function(){var e=this.editor.selectedShapes[0];if(e){var t=kh[this.info.handle];this.editor.setCursor({type:t,rotation:e.rotation})}}},{key:"updateShapes",value:function(){var e,t=this.snapshot,n=t.shape,r=t.cursorHandleOffset;if(n&&this.editor.getShapeUtil(Af)){var i=n.props,o=this.editor.inputs.currentPagePoint.clone().sub(r),a=this.editor.inputs.originPagePoint.clone().sub(r),s=o.clone().sub(a).rot(-n.rotation),l=null!==(e=i.crop)&&void 0!==e?e:this.getDefaultCrop(),u=ne(l),c=new xo(n.x,n.y),d=new xo(0,0),f=1/(l.bottomRight.x-l.topLeft.x)*i.w,p=1/(l.bottomRight.y-l.topLeft.y)*i.h,h=!1;switch(this.info.handle){case"top":case"top_left":case"top_right":if(p<8)break;h=!0,u.topLeft.y=u.topLeft.y+s.y/p,p*(u.bottomRight.y-u.topLeft.y)<8?(u.topLeft.y=u.bottomRight.y-8/p,d.y=(u.topLeft.y-l.topLeft.y)*p):u.topLeft.y<=0?(u.topLeft.y=0,d.y=(u.topLeft.y-l.topLeft.y)*p):d.y=s.y;break;case"bottom":case"bottom_left":case"bottom_right":if(p<8)break;h=!0,u.bottomRight.y=Math.min(1,u.bottomRight.y+s.y/p),p*(u.bottomRight.y-u.topLeft.y)<8&&(u.bottomRight.y=u.topLeft.y+8/p)}switch(this.info.handle){case"left":case"top_left":case"bottom_left":if(f<8)break;h=!0,u.topLeft.x=u.topLeft.x+s.x/f,f*(u.bottomRight.x-u.topLeft.x)<8?(u.topLeft.x=u.bottomRight.x-8/f,d.x=(u.topLeft.x-l.topLeft.x)*f):u.topLeft.x<=0?(u.topLeft.x=0,d.x=(u.topLeft.x-l.topLeft.x)*f):d.x=s.x;break;case"right":case"top_right":case"bottom_right":if(f<8)break;h=!0,u.bottomRight.x=Math.min(1,u.bottomRight.x+s.x/f),f*(u.bottomRight.x-u.topLeft.x)<8&&(u.bottomRight.x=u.topLeft.x+8/f)}if(h){c.add(d.rot(n.rotation));var v={id:n.id,type:n.type,x:c.x,y:c.y,props:{crop:u,w:(u.bottomRight.x-u.topLeft.x)*f,h:(u.bottomRight.y-u.topLeft.y)*p}};this.editor.updateShapes([v],!0),this.updateCursor()}}}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}},{key:"createSnapshot",value:function(){var e=this.editor,t=e.selectionRotation,n=e.inputs.originPagePoint,r=this.editor.onlySelectedShape,i=this.editor.selectionBounds,o=xo.RotWith(i.getHandlePoint(this.info.handle),i.point,t);return{shape:r,cursorHandleOffset:xo.Sub(n,o)}}}]),o}();Ee(_h,"id","cropping");var Eh=function(e){M(i,Ac);var r=N(i);function i(){var d;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(d=r.call.apply(r,[this].concat(t))),"shapeId",""),Ee(R(d),"initialHandle",{}),Ee(R(d),"initialAdjacentHandle",null),Ee(R(d),"markId",""),Ee(R(d),"initialPageTransform",void 0),Ee(R(d),"initialPageRotation",void 0),Ee(R(d),"info",{}),Ee(R(d),"isPrecise",!1),Ee(R(d),"isPreciseId",null),Ee(R(d),"pointingId",null),Ee(R(d),"onEnter",function(t){var e=t.shape,n=t.isCreating,r=t.handle;d.info=t,d.shapeId=e.id,d.markId=n?"creating":d.editor.mark("dragging handle"),d.initialHandle=ne(r),d.initialPageTransform=d.editor.getPageTransform(e),d.initialPageRotation=d.editor.getPageRotation(e),d.editor.setCursor({type:n?"cross":"grabbing",rotation:0});var i=d.editor.getShapeUtil(e).handles(e).sort(I),o=i.findIndex(function(e){return e.id===t.handle.id});d.initialAdjacentHandle=null;for(var a=o+1;a<i.length;a++){var s=i[a];if("vertex"===s.type&&"middle"!==s.id&&s.id!==t.handle.id){d.initialAdjacentHandle=s;break}}if(!d.initialAdjacentHandle)for(var l=i.length-1;0<=l;l--){var u=i[l];if("vertex"===u.type&&"middle"!==u.id&&u.id!==t.handle.id){d.initialAdjacentHandle=u;break}}var c=e.props[t.handle.id];d.isPrecise=!1,"binding"===(null==c?void 0:c.type)&&(d.editor.setHintingIds([c.boundShapeId]),d.isPrecise=!xo.Equals(c.normalizedAnchor,{x:.5,y:.5}),d.isPrecise?d.isPreciseId=c.boundShapeId:d.resetExactTimeout()),d.update()}),Ee(R(d),"exactTimeout",-1),Ee(R(d),"onPointerMove",function(){d.update()}),Ee(R(d),"onKeyDown",function(){d.update()}),Ee(R(d),"onKeyUp",function(){d.update()}),Ee(R(d),"onPointerUp",function(){d.complete()}),Ee(R(d),"onComplete",function(){d.complete()}),Ee(R(d),"onCancel",function(){d.cancel()}),Ee(R(d),"onExit",function(){d.editor.setHintingIds([]),d.editor.snaps.clear(),d.editor.setCursor({type:"default"})}),d}return P(i,[{key:"resetExactTimeout",value:function(){var e=this;-1!==this.exactTimeout&&this.clearExactTimeout(),this.exactTimeout=setTimeout(function(){e.isActive&&!e.isPrecise&&(e.isPrecise=!0,e.isPreciseId=e.pointingId,e.update()),e.exactTimeout=-1},750)}},{key:"clearExactTimeout",value:function(){-1!==this.exactTimeout&&(clearTimeout(this.exactTimeout),this.exactTimeout=-1)}},{key:"complete",value:function(){this.editor.snaps.clear();var e=this.info.onInteractionEnd;this.editor.instanceState.isToolLocked&&e?this.editor.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.editor.snaps.clear();var e=this.info.onInteractionEnd;e?this.editor.setSelectedTool(e,{shapeId:this.shapeId}):this.parent.transition("idle",{})}},{key:"update",value:function(){var e,t=this.editor,n=this.shapeId,r=this.initialHandle,i=this.initialPageRotation,o=this.initialAdjacentHandle,a=t.isSnapMode,s=t.hintingIds,l=t.snaps,u=t.inputs,c=u.currentPagePoint,d=u.originPagePoint,f=u.shiftKey,p=u.ctrlKey,h=u.altKey,v=u.pointerVelocity,g=t.getShapeById(n);if(g){var m=t.getShapeUtil(g),y=c.clone().sub(d).rot(-i).add(r);if(f&&o&&"middle"!==r.id){var b=xo.Angle(o,y),w=No(b,24)-b;y=xo.RotWith(y,o,w)}if(t.snaps.clear(),a?!p:p){var x=t.getPageTransformById(g.id);if(!x)throw Error("Expected a page transform");var k=m.outlineSegments(g).map(function(e){return na.applyToPoints(x,e)}),S=m.handles(g).filter(function(e){return"vertex"===e.type}).sort(I).findIndex(function(e){var t=e.index;return r.index===t});k.splice(S-1,2);var _=l.getSnappingHandleDelta({additionalSegments:k,handlePoint:na.applyToPoint(x,y)});_&&y.add(t.getDeltaInShapeSpace(g,_))}var E=null===(e=m.onHandleChange)||void 0===e?void 0:e.call(m,g,{handle:Pe(Pe({},r),{},{x:y.x,y:y.y}),isPrecise:this.isPrecise||h}),P=Pe(Pe({},g),E);if(r.canBind){var C=P.props[r.id];"binding"===(null==C?void 0:C.type)?s[0]!==C.boundShapeId&&(t.setHintingIds([C.boundShapeId]),this.pointingId=C.boundShapeId,this.isPrecise=v.len()<.5||h,this.isPreciseId=this.isPrecise?C.boundShapeId:null,this.resetExactTimeout()):0<s.length&&(t.setHintingIds([]),this.pointingId=null,this.isPrecise=!1,this.isPreciseId=null,this.resetExactTimeout())}E&&t.updateShapes([P],!0)}}}]),i}();Ee(Eh,"id","dragging_handle");var Ph=function(e){M(i,Ac);var r=N(i);function i(){var c;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(c=r.call.apply(r,[this].concat(t))),"onPointerEnter",function(e){if("shape"===e.target){var t=c.editor,n=t.selectedIds,r=t.focusLayerId,i=c.editor.getOutermostSelectableShape(e.shape,function(e){return!n.includes(e.id)});i.id!==r&&c.editor.setHoveredId(i.id)}}),Ee(R(c),"onPointerLeave",function(e){"shape"===e.target&&c.editor.setHoveredId(null)}),Ee(R(c),"onExit",function(){var e;if(c.editor.pageState.editingId){var t=c.editor.pageState.editingId;if(t){c.editor.setEditingId(null);var n=c.editor.getShapeById(t),r=c.editor.getShapeUtil(n);null===(e=r.onEditEnd)||void 0===e||e.call(r,n)}}}),Ee(R(c),"onPointerDown",function(e){var t,n;if("shape"===e.target){var r=e.shape,i=c.editor.pageState.editingId;if(i){if(r.id===i)return;var o=c.editor.getShapeById(i);if(o){var a,s,l=c.editor.getShapeUtil(o);null===(a=l.onEditEnd)||void 0===a||a.call(l,o);var u=c.editor.getShapeUtil(r);if(r.type===o.type&&null!==(s=u.canEdit)&&void 0!==s&&s.call(u,r)&&!c.editor.isShapeOrAncestorLocked(r))return c.editor.setEditingId(r.id),c.editor.setHoveredId(r.id),void c.editor.setSelectedIds([r.id])}}}c.parent.transition("idle",e),null===(t=c.parent.current.value)||void 0===t||null===(n=t.onPointerDown)||void 0===n||n.call(t,e)}),Ee(R(c),"onComplete",function(e){c.parent.transition("idle",e)}),Ee(R(c),"onCancel",function(e){c.parent.transition("idle",e)}),c}return P(i)}();Ee(Ph,"id","editing_shape");var Ch=function(e){M(i,Ac);var r=N(i);function i(){var v;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(v=r.call.apply(r,[this].concat(t))),"isDarwin",-1<window.navigator.userAgent.toLowerCase().indexOf("mac")),Ee(R(v),"onPointerEnter",function(e){switch(e.target){case"canvas":break;case"shape":var t=v.editor,n=t.selectedIds,r=t.focusLayerId,i=v.editor.getOutermostSelectableShape(e.shape,function(e){return!n.includes(e.id)});if(i.id!==r&&v.editor.setHoveredId(i.id),Pa.debugCursors.value){if("geo"!==i.type)break;var o=i.props.text;try{v.editor.setCursor({type:o})}catch(e){console.error("Cursor type not recognized: '".concat(o,"'")),v.editor.setCursor({type:"default"})}}}}),Ee(R(v),"onPointerLeave",function(e){"shape"===e.target&&v.editor.setHoveredId(null)}),Ee(R(v),"onPointerDown",function(e){if(!v.editor.isMenuOpen){var t=v.shouldEnterCropMode(e,!0);if(e.ctrlKey&&!t)return"shape"===e.target&&v.isDarwin&&v.editor.inputs.keys.has("ControlLeft")&&!v.editor.isShapeOrAncestorLocked(e.shape)?void v.parent.transition("pointing_shape",e):void v.parent.transition("brushing",e);switch(e.target){case"canvas":v.parent.transition("pointing_canvas",e);break;case"shape":if(v.editor.isShapeOrAncestorLocked(e.shape))break;v.parent.transition("pointing_shape",e);break;case"handle":if(v.editor.isReadOnly)break;v.editor.inputs.altKey?v.parent.transition("pointing_shape",e):v.parent.transition("pointing_handle",e);break;case"selection":switch(e.handle){case"mobile_rotate":case"top_left_rotate":case"top_right_rotate":case"bottom_left_rotate":case"bottom_right_rotate":v.parent.transition("pointing_rotate_handle",e);break;case"top":case"right":case"bottom":case"left":case"top_left":case"top_right":case"bottom_left":case"bottom_right":t?v.parent.transition("pointing_crop_handle",e):v.parent.transition("pointing_resize_handle",e);break;default:v.parent.transition("pointing_selection",e)}}}}),Ee(R(v),"onDoubleClick",function(e){if("up"===e.phase)switch(e.target){case"canvas":if(v.editor.isReadOnly)break;v.handleDoubleClickOnCanvas(e);break;case"selection":if(v.editor.isReadOnly)break;var t=v.editor.onlySelectedShape;if(t){var n=v.editor.getShapeUtil(t);if("right"===e.handle||"left"===e.handle||"top"===e.handle||"bottom"===e.handle){var r,i=null===(r=n.onDoubleClickEdge)||void 0===r?void 0:r.call(n,t);if(i)return v.editor.mark("double click edge"),void v.editor.updateShapes([i])}if(n.canCrop(t)&&!v.editor.isShapeOrAncestorLocked(t))return void v.parent.transition("crop",e);v.shouldStartEditingShape(t)&&v.startEditingShape(t,e)}break;case"shape":var o=e.shape,a=v.editor.getShapeUtil(o);if("video"!==o.type&&"embed"!==o.type&&v.editor.isReadOnly)break;if(a.onDoubleClick){var s,l,u=null===(s=a.onDoubleClick)||void 0===s?void 0:s.call(a,o);if(u)return void v.editor.updateShapes([u]);if(a.canCrop(o)&&!v.editor.isShapeOrAncestorLocked(o))return v.editor.mark("select and crop"),v.editor.select(null===(l=e.shape)||void 0===l?void 0:l.id),void v.parent.transition("crop",e)}v.shouldStartEditingShape(o)?v.startEditingShape(o,e):v.handleDoubleClickOnCanvas(e);break;case"handle":var c;if(v.editor.isReadOnly)break;var d=e.shape,f=e.handle,p=v.editor.getShapeUtil(d),h=null===(c=p.onDoubleClickHandle)||void 0===c?void 0:c.call(p,d,f);h?v.editor.updateShapes([h]):v.shouldStartEditingShape(d)&&v.startEditingShape(d,e)}}),Ee(R(v),"onRightClick",function(e){switch(e.target){case"canvas":v.editor.selectNone();break;case"shape":var t=v.editor.pageState.selectedIds,n=e.shape,r=v.editor.getOutermostSelectableShape(n,function(e){return!v.editor.isSelected(e.id)});t.includes(r.id)||(v.editor.mark("selecting shape"),v.editor.setSelectedIds([r.id]))}}),Ee(R(v),"onEnter",function(){v.editor.setHoveredId(null),v.editor.setCursor({type:"default"})}),Ee(R(v),"onCancel",function(){v.editor.focusLayerId!==v.editor.currentPageId&&0<v.editor.selectedIds.length?v.editor.popFocusLayer():(v.editor.mark("clearing selection"),v.editor.selectNone())}),Ee(R(v),"onKeyDown",function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":v.nudgeSelectedShapes(!1)}}),Ee(R(v),"onKeyRepeat",function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":v.nudgeSelectedShapes(!0)}}),Ee(R(v),"onKeyUp",function(e){if(v.editor.isReadOnly){if("Enter"===e.code&&v.shouldStartEditingShape()&&v.editor.onlySelectedShape)return void v.startEditingShape(v.editor.onlySelectedShape,Pe(Pe({},e),{},{target:"shape",shape:v.editor.onlySelectedShape}))}else if("Enter"===e.code){var t=v.editor.selectedShapes;if(t.every(function(e){return v.editor.isShapeOfType(e,Hd)}))return void v.editor.setSelectedIds(t.flatMap(function(e){return v.editor.getSortedChildIds(e.id)}));if(v.shouldStartEditingShape()&&v.editor.onlySelectedShape)return void v.startEditingShape(v.editor.onlySelectedShape,Pe(Pe({},e),{},{target:"shape",shape:v.editor.onlySelectedShape}));v.shouldEnterCropMode(e,!1)&&v.parent.transition("crop",e)}}),v}return P(i,[{key:"shouldStartEditingShape",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.editor.onlySelectedShape;return!!e&&(!this.editor.isShapeOrAncestorLocked(e)||"embed"===e.type)&&this.editor.getShapeUtil(e).canEdit(e)}},{key:"shouldEnterCropMode",value:function(e,t){var n=this.editor.onlySelectedShape;if(!n)return!1;if(this.editor.isShapeOrAncestorLocked(n))return!1;var r=this.editor.getShapeUtil(n);return t?r.canCrop(n)&&e.ctrlKey:r.canCrop(n)}},{key:"startEditingShape",value:function(e,t){this.editor.isShapeOrAncestorLocked(e)&&"embed"!==e.type||(this.editor.mark("editing shape"),this.editor.setEditingId(e.id),this.parent.transition("editing_shape",t))}},{key:"handleDoubleClickOnCanvas",value:function(e){this.editor.mark("creating text shape");var t=Rr(),n=this.editor.inputs.currentPagePoint,r=n.x,i=n.y;this.editor.createShapes([{id:t,type:"text",x:r,y:i,props:{text:"",autoSize:!0}}]);var o=this.editor.getShapeById(t);if(o){var a=this.editor.getBounds(o);this.editor.updateShapes([{id:t,type:"text",x:o.x-a.width/2,y:o.y-a.height/2}]),this.editor.setEditingId(t),this.editor.select(t),this.parent.transition("editing_shape",e)}}},{key:"nudgeSelectedShapes",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.editor.inputs.keys,n=t.has("ShiftLeft"),r=new xo(0,0);t.has("ArrowLeft")&&(r.x-=1),t.has("ArrowRight")&&(r.x+=1),t.has("ArrowUp")&&(r.y-=1),t.has("ArrowDown")&&(r.y+=1),r.equals(new xo(0,0))||(e||this.editor.mark("nudge shapes"),this.editor.nudgeShapes(this.editor.selectedIds,r,n))}}]),i}();Ee(Ch,"id","idle");var Ih=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onEnter",function(){t.editor.inputs.shiftKey||0<t.editor.selectedIds.length&&(t.editor.mark("selecting none"),t.editor.selectNone())}),Ee(R(t),"onPointerMove",function(e){t.editor.inputs.isDragging&&t.parent.transition("brushing",e)}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onComplete",function(){t.complete()}),Ee(R(t),"onInterrupt",function(){t.parent.transition("idle",{})}),t}return P(o,[{key:"_clickWasInsideFocusedGroup",value:function(){var e=this.editor,t=e.focusLayerId,n=e.inputs;if(!zr(t))return!1;var r=this.editor.getShapeById(t);if(!r)return!1;var i=this.editor.getPointInShapeSpace(r,n.currentPagePoint);return this.editor.getShapeUtil(r).hitTestPoint(r,i)}},{key:"complete",value:function(){this.editor.inputs.shiftKey||(this.editor.selectNone(),this._clickWasInsideFocusedGroup()||this.editor.setFocusLayer(null)),this.parent.transition("idle",{})}}]),o}();Ee(Ih,"id","pointing_canvas");var Th=function(e){M(o,Ac);var i=N(o);function o(){var n;z(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ee(R(n=i.call.apply(i,[this].concat(t))),"info",{}),Ee(R(n),"onEnter",function(e){n.info=e;var t=n.editor.selectedShapes[0];t&&(n.updateCursor(t),n.editor.setCroppingId(t.id))}),Ee(R(n),"onPointerMove",function(){n.editor.inputs.isDragging&&n.parent.transition("cropping",Pe(Pe({},n.info),{},{onInteractionEnd:n.info.onInteractionEnd}))}),Ee(R(n),"onPointerUp",function(){n.info.onInteractionEnd?n.editor.setSelectedTool(n.info.onInteractionEnd,n.info):(n.editor.setCroppingId(null),n.parent.transition("idle",{}))}),Ee(R(n),"onCancel",function(){n.cancel()}),Ee(R(n),"onComplete",function(){n.cancel()}),Ee(R(n),"onInterrupt",function(){n.cancel()}),n}return P(o,[{key:"updateCursor",value:function(e){var t=kh[this.info.handle];this.editor.setCursor({type:t,rotation:e.rotation})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):(this.editor.setCroppingId(null),this.parent.transition("idle",{}))}}]),o}();Ee(Th,"id","pointing_crop_handle");var Mh=function(e){M(o,Ac);var i=N(o);function o(){var n;z(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Ee(R(n=i.call.apply(i,[this].concat(t))),"info",{}),Ee(R(n),"onEnter",function(e){var t=(n.info=e).shape.props[e.handle.id];"binding"===(null==t?void 0:t.type)&&n.editor.setHintingIds([t.boundShapeId]),n.editor.setCursor({type:"grabbing"})}),Ee(R(n),"onExit",function(){n.editor.setHintingIds([]),n.editor.setCursor({type:"default"})}),Ee(R(n),"onPointerUp",function(){n.parent.transition("idle",n.info)}),Ee(R(n),"onPointerMove",function(){n.editor.inputs.isDragging&&n.parent.transition("dragging_handle",n.info)}),Ee(R(n),"onCancel",function(){n.cancel()}),Ee(R(n),"onComplete",function(){n.cancel()}),Ee(R(n),"onInterrupt",function(){n.cancel()}),n}return P(o,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),o}();Ee(Mh,"id","pointing_handle");var Ah=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"onEnter",function(e){t.info=e,t.updateCursor()}),Ee(R(t),"onPointerMove",function(){t.editor.inputs.isDragging&&t.parent.transition("rotating",t.info)}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onCancel",function(){t.cancel()}),Ee(R(t),"onComplete",function(){t.cancel()}),Ee(R(t),"onInterrupt",function(){t.cancel()}),t}return P(o,[{key:"updateCursor",value:function(){var e=this.editor.selectionRotation;this.editor.setCursor({type:kh[this.info.handle],rotation:e})}},{key:"complete",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}}]),o}();Ee(Ah,"id","pointing_rotate_handle");var jh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"onEnter",function(e){t.info=e}),Ee(R(t),"onPointerUp",function(e){t.editor.selectNone(),t.parent.transition("idle",e)}),Ee(R(t),"onPointerMove",function(e){if(t.editor.inputs.isDragging){if(t.editor.isReadOnly)return;t.parent.transition("translating",e)}}),Ee(R(t),"onCancel",function(){t.cancel()}),Ee(R(t),"onComplete",function(){t.cancel()}),Ee(R(t),"onInterrupt",function(){t.cancel()}),t}return P(o,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),o}();Ee(jh,"id","pointing_selection");var Oh=function(e){M(i,Ac);var r=N(i);function i(){var l;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(l=r.call.apply(r,[this].concat(t))),"eventTargetShape",{}),Ee(R(l),"selectingShape",{}),Ee(R(l),"didSelectOnEnter",!1),Ee(R(l),"onEnter",function(e){var t;if(l.eventTargetShape=e.shape,l.selectingShape=l.editor.getOutermostSelectableShape(e.shape),l.editor.getShapeUtil(e.shape).onClick||l.selectingShape.id===l.editor.focusLayerId)l.didSelectOnEnter=!1;else{var n=l.editor.isWithinSelection(l.selectingShape.id),r=1<l.editor.selectedIds.length&&(null===(t=l.editor.selectionBounds)||void 0===t?void 0:t.containsPoint(l.editor.inputs.currentPagePoint));if(l.didSelectOnEnter=!n&&l.selectingShape.id!==l.editor.focusLayerId&&!r,l.didSelectOnEnter){var i=l.editor,o=i.inputs,a=i.selectedIds,s=l.editor.getParentShape(e.shape);s&&l.editor.isShapeOfType(s,Hd)&&l.editor.cancelDoubleClick(),o.shiftKey&&!o.altKey?a.includes(l.selectingShape.id)||(l.editor.mark("shift selecting shape"),l.editor.setSelectedIds([].concat(de(a),[l.selectingShape.id]))):(l.editor.mark("selecting shape"),l.editor.setSelectedIds([l.selectingShape.id]))}}}),Ee(R(l),"onPointerUp",function(e){var t=e.shape;if(t){var n=l.editor.getShapeUtil(t);if(n.onClick){var r,i=null===(r=n.onClick)||void 0===r?void 0:r.call(n,t);if(i)return l.editor.updateShapes([i]),void l.parent.transition("idle",e)}}if(l.didSelectOnEnter||l.selectingShape.id===l.editor.focusLayerId)l.selectingShape.id===l.editor.focusLayerId&&(0<l.editor.selectedIds.length?l.editor.setSelectedIds([]):l.editor.popFocusLayer());else{l.editor.mark("selecting shape (pointer up)");var o=l.editor.getOutermostSelectableShape(l.eventTargetShape,function(e){return!l.editor.isSelected(e.id)});if(l.editor.selectedIds.includes(o.id))l.editor.setSelectedIds(l.editor.inputs.shiftKey?l.editor.selectedIds.filter(function(e){return e!==l.selectingShape.id}):[l.selectingShape.id]);else if(l.editor.inputs.shiftKey){var a=l.editor.getAncestors(o);l.editor.setSelectedIds([].concat(de(l.editor.selectedIds.filter(function(t){return!a.find(function(e){return e.id===t})})),[o.id]))}else l.editor.setSelectedIds([o.id])}l.parent.transition("idle",e)}),Ee(R(l),"onPointerMove",function(e){if(l.editor.inputs.isDragging){if(l.editor.isReadOnly)return;l.parent.transition("translating",e)}}),Ee(R(l),"onCancel",function(){l.cancel()}),Ee(R(l),"onComplete",function(){l.cancel()}),Ee(R(l),"onInterrupt",function(){l.cancel()}),l}return P(i,[{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),i}();Ee(Oh,"id","pointing_shape");var Lh=function(e){M(i,Ac);var r=N(i);function i(){var u;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(u=r.call.apply(r,[this].concat(t))),"info",{}),Ee(R(u),"markId",""),Ee(R(u),"creationCursorOffset",{x:0,y:0}),Ee(R(u),"editAfterComplete",!1),Ee(R(u),"snapshot",{}),Ee(R(u),"onEnter",function(e){var t=e.isCreating,n=void 0!==t&&t,r=e.editAfterComplete,i=void 0!==r&&r,o=e.creationCursorOffset,a=void 0===o?{x:0,y:0}:o;u.info=e,u.editAfterComplete=i,u.creationCursorOffset=a,e.isCreating&&u.editor.setCursor({type:"cross",rotation:0}),u.snapshot=u._createSnapshot(),u.markId=n?"creating":u.editor.mark("starting resizing"),u.handleResizeStart(),u.updateShapes()}),Ee(R(u),"onPointerMove",function(){u.updateShapes()}),Ee(R(u),"onKeyDown",function(){u.updateShapes()}),Ee(R(u),"onKeyUp",function(){u.updateShapes()}),Ee(R(u),"onPointerUp",function(){u.complete()}),Ee(R(u),"onComplete",function(){u.complete()}),Ee(R(u),"onCancel",function(){u.cancel()}),Ee(R(u),"onExit",function(){u.editor.snaps.clear()}),Ee(R(u),"_createSnapshot",function(){var e=u.editor,n=e.selectedIds,t=e.selectionRotation,r=e.inputs.originPagePoint,i=u.editor.selectionBounds,o=xo.RotWith(i.getHandlePoint(u.info.handle),i.point,t),a=xo.Sub(r,o),s=new Map;n.forEach(function(e){var t=u.editor.getShapeById(e);if(t){if(s.set(t.id,u._createShapeSnapshot(t)),u.editor.isShapeOfType(t,qd)&&1===n.length)return;u.editor.visitDescendants(t.id,function(e){var t=u.editor.getShapeById(e);if(t&&(s.set(t.id,u._createShapeSnapshot(t)),u.editor.isShapeOfType(t,qd)))return!1})}});var l=!de(s.values()).some(function(e){return!Do(e.pageRotation,t)||e.isAspectRatioLocked});return{shapeSnapshots:s,selectionBounds:i,cursorHandleOffset:a,selectionRotation:t,selectedIds:n,canShapesDeform:l,initialSelectionPageBounds:u.editor.selectedPageBounds}}),Ee(R(u),"_createShapeSnapshot",function(e){var t=u.editor.getPageTransform(e),n=u.editor.getShapeUtil(e);return{shape:e,bounds:n.bounds(e),pageTransform:t,pageRotation:na.Decompose(t).rotation,isAspectRatioLocked:n.isAspectRatioLocked(e)}}),u}return P(i,[{key:"cancel",value:function(){this.editor.bailToMark(this.markId),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"complete",value:function(){if(this.handleResizeEnd(),this.editAfterComplete&&this.editor.onlySelectedShape)return this.editor.setEditingId(this.editor.onlySelectedShape.id),this.editor.setSelectedTool("select"),void this.editor.root.current.value.transition("editing_shape",{});this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,{}):this.parent.transition("idle",{})}},{key:"handleResizeStart",value:function(){var o=this,e=this.snapshot.shapeSnapshots,a=[];e.forEach(function(e){var t,n=e.shape,r=o.editor.getShapeUtil(n),i=null===(t=r.onResizeStart)||void 0===t?void 0:t.call(r,n);i&&a.push(i)}),0<a.length&&this.editor.updateShapes(a)}},{key:"handleResizeEnd",value:function(){var a=this,e=this.snapshot.shapeSnapshots,s=[];e.forEach(function(e){var t,n=e.shape,r=a.editor.getShapeById(n.id),i=a.editor.getShapeUtil(n),o=null===(t=i.onResizeEnd)||void 0===t?void 0:t.call(i,n,r);o&&s.push(o)}),0<s.length&&this.editor.updateShapes(s)}},{key:"updateShapes",value:function(){var e=this.editor.inputs,t=e.altKey,n=e.shiftKey,r=this.snapshot,i=r.shapeSnapshots,o=r.selectionBounds,a=r.cursorHandleOffset,s=r.selectedIds,l=r.selectionRotation,u=r.canShapesDeform,c=n||!u,d=this.editor.inputs.ctrlKey,f=this.editor.inputs.currentPagePoint.clone().sub(a).sub(this.creationCursorOffset),p=this.editor.inputs.originPagePoint.clone().sub(a);this.editor.isGridMode&&!d&&f.snapToGrid(this.editor.gridSize);var h=this.info.handle,v=Rh(h,Math.PI);if(this.editor.snaps.clear(),(this.editor.isSnapMode?!d:d)&&l%_o==0){var g=this.editor.snaps.snapResize({dragDelta:xo.Sub(f,p),initialSelectionPageBounds:this.snapshot.initialSelectionPageBounds,handle:Rh(h,l),isAspectRatioLocked:c,isResizingFromCenter:t}).nudge;f.add(g)}var m=xo.RotWith(t?o.center:o.getHandlePoint(v),o.point,l),y=xo.Sub(f,m).rot(-l),b=xo.Sub(p,m).rot(-l),w=xo.DivV(y,b);Number.isFinite(w.x)||(w.x=1),Number.isFinite(w.y)||(w.y=1);var x="top"===h||"bottom"===h,k="left"===h||"right"===h;c?k?w.y=Math.abs(w.x):x?w.x=Math.abs(w.y):Math.abs(w.x)>Math.abs(w.y)?w.y=Math.abs(w.x)*(w.y<0?-1:1):w.x=Math.abs(w.y)*(w.x<0?-1:1):(x&&(w.x=1),k&&(w.y=1)),this.info.isCreating||this.updateCursor({dragHandle:h,isFlippedX:w.x<0,isFlippedY:w.y<0,rotation:l});var S,_=ce(i.keys());try{for(_.s();!(S=_.n()).done;){var E=S.value,P=i.get(E);this.editor.resizeShape(E,w,{initialBounds:P.bounds,dragHandle:h,initialPageTransform:P.pageTransform,initialShape:P.shape,mode:1===s.length&&E===s[0]?"resize_bounds":"scale_shape",scaleOrigin:m,scaleAxisRotation:l})}}catch(e){_.e(e)}finally{_.f()}}},{key:"updateCursor",value:function(e){var t=e.dragHandle,n=e.isFlippedX,r=e.isFlippedY,i=e.rotation,o=Pe({},this.editor.cursor);switch(t){case"top_left":case"bottom_right":o.type="nwse-resize",n!==r&&(o.type="nesw-resize");break;case"top_right":case"bottom_left":o.type="nesw-resize",n!==r&&(o.type="nwse-resize")}o.rotation=i,this.editor.setCursor(o)}}]),i}();Ee(Lh,"id","resizing");var zh=["top","top_right","right","bottom_right","bottom","bottom_left","left","top_left"];function Rh(e,t){t%=Eo;var n=Math.round(t/(So/4)),r=zh.indexOf(e);return zh[(r+n)%zh.length]}var Nh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"snapshot",{}),Ee(R(t),"info",{}),Ee(R(t),"markId",""),Ee(R(t),"onEnter",function(e){t.info=e,t.markId=t.editor.mark("rotate start"),t.snapshot=Up({editor:t.editor}),t.handleStart()}),Ee(R(t),"onExit",function(){t.editor.setCursor({type:"none"}),t.snapshot={}}),Ee(R(t),"onPointerMove",function(){t.update()}),Ee(R(t),"onKeyDown",function(){t.update()}),Ee(R(t),"onKeyUp",function(){t.update()}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onComplete",function(){t.complete()}),Ee(R(t),"onCancel",function(){t.cancel()}),Ee(R(t),"update",function(){var e=t._getRotationFromPointerPosition({snapToNearestDegree:!1});Kp({editor:t.editor,delta:e,snapshot:t.snapshot,stage:"update"}),t.editor.setCursor({type:kh[t.info.handle],rotation:e+t.snapshot.initialSelectionRotation})}),Ee(R(t),"cancel",function(){t.editor.bailToMark(t.markId),t.info.onInteractionEnd?t.editor.setSelectedTool(t.info.onInteractionEnd,t.info):t.parent.transition("idle",t.info)}),Ee(R(t),"complete",function(){Kp({editor:t.editor,delta:t._getRotationFromPointerPosition({snapToNearestDegree:!0}),snapshot:t.snapshot,stage:"end"}),t.info.onInteractionEnd?t.editor.setSelectedTool(t.info.onInteractionEnd,t.info):t.parent.transition("idle",t.info)}),t}return P(o,[{key:"handleStart",value:function(){var e=this._getRotationFromPointerPosition({snapToNearestDegree:!1});Kp({editor:this.editor,delta:this._getRotationFromPointerPosition({snapToNearestDegree:!1}),snapshot:this.snapshot,stage:"start"}),this.editor.setCursor({type:kh[this.info.handle],rotation:e+this.snapshot.initialSelectionRotation})}},{key:"_getRotationFromPointerPosition",value:function(e){var t=e.snapToNearestDegree,n=this.editor,r=n.selectionPageCenter,i=n.inputs,o=i.shiftKey,a=i.currentPagePoint,s=this.snapshot,l=s.initialCursorAngle,u=s.initialSelectionRotation,c=u+(r.angle(a)-l);if(o)c=No(c,24);else if(t&&(c=Math.round(c/Po)*Po,this.editor.isCoarsePointer)){var d=No(c,4),f=zo(c,d);Math.abs(f)<5*So/180&&(c=d)}return c-u}}]),o}();Ee(Nh,"id","rotating");var Dh=function(){function f(e){var a=this;z(this,f),Ee(this,"state",void 0),Ee(this,"points",void 0),Ee(this,"size",void 0),Ee(this,"color",void 0),Ee(this,"opacity",void 0),Ee(this,"delay",void 0),Ee(this,"timeoutMs",0),Ee(this,"delayRemaining",0),Ee(this,"onUpdate",void 0),Ee(this,"onComplete",void 0),Ee(this,"prev",null),Ee(this,"next",null),Ee(this,"resume",function(){a.state="active"}),Ee(this,"pause",function(){a.state="starting"}),Ee(this,"stop",function(){a.delayRemaining=Math.min(a.delayRemaining,200),a.state="stopping"}),Ee(this,"addPoint",function(e,t){var n=a.prev,r={x:e,y:t,z:.5};n&&xo.Dist(n,r)<1||(a.next=r)}),Ee(this,"tick",function(e){a.timeoutMs+=e,0<a.delayRemaining&&(a.delayRemaining=Math.max(0,a.delayRemaining-e)),16<=a.timeoutMs&&(a.timeoutMs=0);var t=a.timeoutMs,n=a.state,r=a.prev,i=a.next,o=a.points;switch(n){case"active":i&&i!==r?(a.prev=i,o.push(i),0===a.delayRemaining&&8<o.length&&o.shift(),a.updateScribble()):0===t&&(1<o.length?(o.shift(),a.updateScribble()):a.delayRemaining=a.delay);break;case"stopping":if(0===a.delayRemaining&&0===t){if(1===o.length)return a.state="paused",void a.onComplete();a.size*=.9,o.shift(),a.updateScribble()}}});var t=e.size,n=void 0===t?20:t,r=e.color,i=void 0===r?"accent":r,o=e.opacity,s=void 0===o?.8:o,l=e.delay,u=void 0===l?0:l,c=e.onComplete,d=e.onUpdate;this.onUpdate=d,this.onComplete=c,this.size=n,this.color=i,this.delay=u,this.opacity=s,this.points=[],this.state="starting",this.prev=null,this.next=null,this.delayRemaining=this.delay,this.resume()}return P(f,[{key:"getScribble",value:function(){return{state:this.state,size:this.size,color:this.color,opacity:this.opacity,delay:this.delay,points:de(this.points)}}},{key:"updateScribble",value:function(){this.onUpdate(this.getScribble())}}]),f}(),Bh=function(e){M(o,Ac);var i=N(o);function o(){var r;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(r=i.call.apply(i,[this].concat(t))),"hits",new Set),Ee(R(r),"size",0),Ee(R(r),"scribble",{}),Ee(R(r),"initialSelectedIds",new Set),Ee(R(r),"newlySelectedIds",new Set),Ee(R(r),"onEnter",function(){r.initialSelectedIds=new Set(r.editor.inputs.shiftKey?r.editor.selectedIds:[]),r.newlySelectedIds=new Set,r.size=0,r.hits.clear(),r.startScribble(),r.updateBrushSelection(),requestAnimationFrame(function(){r.editor.setBrush(null)})}),Ee(R(r),"onExit",function(){r.editor.setErasingIds([]),r.scribble.stop()}),Ee(R(r),"onPointerMove",function(){r.updateBrushSelection()}),Ee(R(r),"onPointerUp",function(){r.complete()}),Ee(R(r),"onKeyDown",function(){r.updateBrushSelection()}),Ee(R(r),"onKeyUp",function(){r.editor.inputs.altKey?r.updateBrushSelection():r.parent.transition("brushing",{})}),Ee(R(r),"startScribble",function(){var e;r.scribble.tick&&r.editor.off("tick",null===(e=r.scribble)||void 0===e?void 0:e.tick),r.scribble=new Dh({onUpdate:r.onScribbleUpdate,onComplete:r.onScribbleComplete,color:"selection-stroke",opacity:.32,size:12}),r.editor.on("tick",r.scribble.tick)}),Ee(R(r),"pushPointToScribble",function(){var e=r.editor.inputs.currentPagePoint,t=e.x,n=e.y;r.scribble.addPoint(t,n)}),Ee(R(r),"onScribbleUpdate",function(e){r.editor.setScribble(e)}),Ee(R(r),"onScribbleComplete",function(){r.editor.off("tick",r.scribble.tick),r.editor.setScribble(null)}),Ee(R(r),"onCancel",function(){r.cancel()}),Ee(R(r),"onComplete",function(){r.complete()}),r}return P(o,[{key:"updateBrushSelection",value:function(){var e=this.editor,t=e.shapesArray,n=e.inputs,r=n.originPagePoint,i=n.previousPagePoint,o=n.currentPagePoint;this.pushPointToScribble();for(var a,s,l=t,u=0,c=l.length;u<c;u++)if(a=l[u],s=this.editor.getShapeUtil(a),!(this.editor.isShapeOfType(a,Hd)||this.newlySelectedIds.has(a.id)||this.editor.isShapeOfType(a,qd)&&s.hitTestPoint(a,this.editor.getPointInShapeSpace(a,r))||this.editor.isShapeOrAncestorLocked(a))&&s.hitTestLineSegment(a,this.editor.getPointInShapeSpace(a,i),this.editor.getPointInShapeSpace(a,o))){var d=this.editor.getOutermostSelectableShape(a),f=this.editor.getPageMaskById(d.id);if(f&&null!==ha(i,o,f)&&!Ho(o,f))continue;this.newlySelectedIds.add(d.id)}this.editor.setSelectedIds(de(new Set([].concat(de(this.newlySelectedIds),de(this.initialSelectedIds)))),!0)}},{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setSelectedIds(de(this.initialSelectedIds),!0),this.parent.transition("idle",{})}}]),o}();Ee(Bh,"id","scribble_brushing");var Fh=function(){function n(e){var t=this;z(this,n),Ee(this,"prevDroppingShapeId",null),Ee(this,"currDroppingShapeId",null),Ee(this,"droppingNodeTimer",null),Ee(this,"dispose",function(){t.clear()}),(this.editor=e).disposables.add(this.dispose)}return P(n,[{key:"updateDroppingNode",value:function(e,t){if(null===this.droppingNodeTimer){var n,r,i=this.editor.inputs.currentPagePoint;this.currDroppingShapeId=null!==(n=null===(r=this.editor.getDroppingShape(i,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null,this.setDragTimer(e,1e3,t)}else.5<this.editor.inputs.pointerVelocity.len()&&(clearInterval(this.droppingNodeTimer),this.setDragTimer(e,100,t))}},{key:"setDragTimer",value:function(e,t,n){var r=this;this.droppingNodeTimer=setTimeout(function(){r.editor.batch(function(){r.handleDrag(e,n)}),r.droppingNodeTimer=null},t)}},{key:"handleDrag",value:function(e,t){var n,r,i=this,o=this.editor.inputs.currentPagePoint;e=U(e.map(function(e){return i.editor.getShapeById(e.id)}));var a=null!==(n=null===(r=this.editor.getDroppingShape(o,e))||void 0===r?void 0:r.id)&&void 0!==n?n:null;a!==this.currDroppingShapeId&&(this.prevDroppingShapeId=this.currDroppingShapeId,this.currDroppingShapeId=a);var s=this.prevDroppingShapeId;if(a!==s){var l,u,c=s&&this.editor.getShapeById(s),d=a&&this.editor.getShapeById(a);if(this.prevDroppingShapeId=this.currDroppingShapeId,c&&(null===(l=(u=this.editor.getShapeUtil(c)).onDragShapesOut)||void 0===l||l.call(u,c,e)),d){var f,p,h=null===(f=(p=this.editor.getShapeUtil(d)).onDragShapesOver)||void 0===f?void 0:f.call(p,d,e);h&&h.shouldHint&&this.editor.setHintingIds([d.id])}else this.editor.setHintingIds([]);null==t||t()}}},{key:"dropShapes",value:function(e){var t=this.currDroppingShapeId;if(this.handleDrag(e),t){var n,r,i=this.editor.getShapeById(t);if(!i)return;null===(n=(r=this.editor.getShapeUtil(i)).onDropShapesOver)||void 0===n||n.call(r,i,e)}}},{key:"clear",value:function(){this.prevDroppingShapeId=null,(this.currDroppingShapeId=null)!==this.droppingNodeTimer&&clearInterval(this.droppingNodeTimer),this.droppingNodeTimer=null,this.editor.setHintingIds([])}}]),n}(),Uh=function(e){M(i,Ac);var r=N(i);function i(){var o;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(o=r.call.apply(r,[this].concat(t))),"info",{}),Ee(R(o),"selectionSnapshot",{}),Ee(R(o),"snapshot",{}),Ee(R(o),"markId",""),Ee(R(o),"isCloning",!1),Ee(R(o),"isCreating",!1),Ee(R(o),"editAfterComplete",!1),Ee(R(o),"dragAndDropManager",new Fh(o.editor)),Ee(R(o),"onEnter",function(e){var t=e.isCreating,n=void 0!==t&&t,r=e.editAfterComplete,i=void 0!==r&&r;o.info=e,o.isCreating=n,o.editAfterComplete=i,o.markId=n?"creating":o.editor.mark("translating"),o.handleEnter(e),o.editor.on("tick",o.updateParent)}),Ee(R(o),"updateParent",function(){var e=R(o).snapshot;o.dragAndDropManager.updateDroppingNode(e.movingShapes,o.updateParentTransforms)}),Ee(R(o),"onExit",function(){o.editor.off("tick",o.updateParent),o.selectionSnapshot={},o.snapshot={},o.editor.snaps.clear(),o.editor.setCursor({type:"default"}),o.dragAndDropManager.clear()}),Ee(R(o),"onPointerMove",function(){o.updateShapes()}),Ee(R(o),"onKeyDown",function(){!o.editor.inputs.altKey||o.isCloning?o.updateShapes():o.startCloning()}),Ee(R(o),"onKeyUp",function(){o.editor.inputs.altKey||!o.isCloning?o.updateShapes():o.stopCloning()}),Ee(R(o),"onPointerUp",function(){o.complete()}),Ee(R(o),"onComplete",function(){o.complete()}),Ee(R(o),"onCancel",function(){o.cancel()}),Ee(R(o),"updateParentTransforms",function(){var e=R(o),r=e.editor,t=e.snapshot.shapeSnapshots,i=[];t.forEach(function(e){var t=r.getShapeById(e.shape.id);if(!t)return null;i.push(t);var n=yn(t.parentId)?null:na.Inverse(r.getPageTransformById(t.parentId));e.parentTransform=n})}),o}return P(i,[{key:"reset",value:function(){this.editor.bailToMark(this.markId)}},{key:"startCloning",value:function(){this.isCreating||(this.isCloning=!0,this.reset(),this.markId=this.editor.mark("translating"),this.editor.duplicateShapes(),this.snapshot=Kh(this.editor),this.handleStart(),this.updateShapes())}},{key:"stopCloning",value:function(){this.isCloning=!1,this.snapshot=this.selectionSnapshot,this.reset(),this.markId=this.editor.mark("translating"),this.updateShapes()}},{key:"complete",value:function(){if(this.updateShapes(),this.dragAndDropManager.dropShapes(this.snapshot.movingShapes),this.handleEnd(),this.editor.instanceState.isToolLocked&&this.info.onInteractionEnd)this.editor.setSelectedTool(this.info.onInteractionEnd);else if(this.editAfterComplete){var e=this.editor.onlySelectedShape;e&&(this.editor.setEditingId(e.id),this.editor.setSelectedTool("select"),this.editor.root.current.value.transition("editing_shape",{}))}else this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.reset(),this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd):this.parent.transition("idle",this.info)}},{key:"handleEnter",value:function(e){this.isCloning=!1,this.info=e,this.editor.setCursor({type:"move"}),this.selectionSnapshot=Kh(this.editor),this.isCreating||!this.editor.inputs.altKey?(this.snapshot=this.selectionSnapshot,this.handleStart(),this.updateShapes()):this.startCloning()}},{key:"handleStart",value:function(){var i=this,e=this.snapshot.movingShapes,o=[];e.forEach(function(e){var t,n=i.editor.getShapeUtil(e),r=null===(t=n.onTranslateStart)||void 0===t?void 0:t.call(n,e);r&&o.push(r)}),0<o.length&&this.editor.updateShapes(o)}},{key:"handleEnd",value:function(){var o=this,e=this.snapshot.movingShapes,a=[];e.forEach(function(e){var t,n=o.editor.getShapeById(e.id),r=o.editor.getShapeUtil(e),i=null===(t=r.onTranslateEnd)||void 0===t?void 0:t.call(r,e,n);i&&a.push(i)}),0<a.length&&this.editor.updateShapes(a)}},{key:"handleChange",value:function(){var o=this,e=this.snapshot.movingShapes,a=[];e.forEach(function(e){var t,n=o.editor.getShapeById(e.id),r=o.editor.getShapeUtil(e),i=null===(t=r.onTranslate)||void 0===t?void 0:t.call(r,e,n);i&&a.push(i)}),0<a.length&&this.editor.updateShapes(a)}},{key:"updateShapes",value:function(){var e=this.snapshot;this.dragAndDropManager.updateDroppingNode(e.movingShapes,this.updateParentTransforms),function(e){var t=e.editor,n=e.shapeSnapshots,r=e.averagePagePoint,i=e.initialSelectionPageBounds,o=e.initialSelectionSnapPoints,a=t.inputs,s=t.isGridMode,l=t.gridSize,u=xo.Sub(a.currentPagePoint,a.originPagePoint),c=t.inputs.shiftKey?Math.abs(u.x)<Math.abs(u.y)?"x":"y":null;if("x"===c?u.x=0:"y"===c&&(u.y=0),t.snaps.clear(),(t.isSnapMode?!a.ctrlKey:a.ctrlKey)&&t.inputs.pointerVelocity.len()<.5){var d=t.snaps.snapTranslate({dragDelta:u,initialSelectionPageBounds:i,lockedAxis:c,initialSelectionSnapPoints:o}).nudge;u.add(d)}var f=xo.Add(r,u);s&&!a.ctrlKey&&f.snapToGrid(l);var p=xo.Sub(f,r);t.updateShapes(U(n.map(function(e){var t=e.shape,n=e.pagePoint,r=e.parentTransform,i=xo.Add(n,p),o=r?na.applyToPoint(r,i):i;return{id:t.id,type:t.type,x:o.x,y:o.y}})),!0)}({editor:this.editor,shapeSnapshots:e.shapeSnapshots,averagePagePoint:e.averagePagePoint,initialSelectionPageBounds:e.initialPageBounds,initialSelectionSnapPoints:e.initialSnapPoints}),this.handleChange()}}]),i}();function Kh(r){var i=[],o=[],e=U(r.selectedIds.map(function(e){var t=r.getShapeById(e);if(!t)return null;i.push(t);var n=r.getPagePointById(e);return n?(o.push(n),{shape:t,pagePoint:n,parentTransform:mn.isId(t.parentId)?null:na.Inverse(r.getPageTransformById(t.parentId))}):null}));return{averagePagePoint:xo.Average(o),movingShapes:i,shapeSnapshots:e,initialPageBounds:r.selectedPageBounds,initialSnapPoints:1===r.selectedIds.length?r.snaps.snapPointsCache.get(r.selectedIds[0]):r.selectedPageBounds?r.selectedPageBounds.snapPoints.map(function(e,t){return{id:"selection:"+t,x:e.x,y:e.y}}):[]}}Ee(Uh,"id","translating");var Vh=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"onExit",function(){e.editor.pageState.editingId&&e.editor.setEditingId(null)}),e}return P(o)}();Ee(Vh,"id","select"),Ee(Vh,"initial","idle"),Ee(Vh,"children",function(){return[xh,_h,Ch,Ih,Oh,Uh,gh,Bh,Th,jh,Sh,Ph,Lh,Nh,Ah,Mh,Eh]});var Wh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"onEnter",function(e){t.info=e}),Ee(R(t),"onPointerDown",function(){t.parent.transition("pointing",t.info)}),t}return P(o)}();Ee(Wh,"id","idle");var Hh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"onEnter",function(e){t.info=e}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onPointerMove",function(){t.editor.inputs.isDragging&&t.parent.transition("zoom_brushing",t.info)}),Ee(R(t),"onCancel",function(){t.cancel()}),t}return P(o,[{key:"complete",value:function(){var e=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(e,{duration:220}):this.editor.zoomIn(e,{duration:220}),this.parent.transition("idle",this.info)}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}}]),o}();Ee(Hh,"id","pointing");var Yh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"zoomBrush",new $o),Ee(R(t),"onEnter",function(e){t.info=e,t.update()}),Ee(R(t),"onExit",function(){t.editor.setZoomBrush(null)}),Ee(R(t),"onPointerMove",function(){t.update()}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onCancel",function(){t.cancel()}),t}return P(o,[{key:"update",value:function(){var e=this.editor.inputs,t=e.originPagePoint,n=e.currentPagePoint;this.zoomBrush.setTo($o.FromPoints([t,n])),this.editor.setZoomBrush(this.zoomBrush.toJson())}},{key:"cancel",value:function(){this.parent.transition("idle",this.info)}},{key:"complete",value:function(){var e=this.zoomBrush,t=8/this.editor.zoomLevel;if(e.width<t&&e.height<t){var n=this.editor.inputs.currentScreenPoint;this.editor.inputs.altKey?this.editor.zoomOut(n,{duration:220}):this.editor.zoomIn(n,{duration:220})}else{var r=this.editor.inputs.altKey?this.editor.zoomLevel/2:void 0;this.editor.zoomToBounds(e.x,e.y,e.width,e.height,r,{duration:220})}this.parent.transition("idle",this.info)}}]),o}();Ee(Yh,"id","zoom_brushing");var Xh=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"info",{}),Ee(R(t),"onEnter",function(e){t.info=e,t.updateCursor()}),Ee(R(t),"onExit",function(){t.editor.setZoomBrush(null),t.editor.setCursor({type:"default"})}),Ee(R(t),"onKeyDown",function(){t.updateCursor()}),Ee(R(t),"onKeyUp",function(e){t.updateCursor(),"KeyZ"===e.code&&t.complete()}),Ee(R(t),"onInterrupt",function(){t.complete()}),t}return P(o,[{key:"updateCursor",value:function(){this.editor.inputs.altKey?this.editor.setCursor({type:"zoom-out"}):this.editor.setCursor({type:"zoom-in"})}},{key:"complete",value:function(){this.info.onInteractionEnd&&"select"!==this.info.onInteractionEnd?this.editor.setSelectedTool(this.info.onInteractionEnd,this.info):this.parent.transition("select",{})}}]),o}();Ee(Xh,"id","zoom"),Ee(Xh,"initial","idle"),Ee(Xh,"children",function(){return[Wh,Yh,Hh]});var qh=function(e){M(o,Ac);var i=N(o);function o(){var r;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(r=i.call.apply(i,[this].concat(t))),"onKeyDown",function(e){if("KeyZ"===e.code&&!e.shiftKey&&!e.ctrlKey){var t,n=r.current.value;n&&"idle"===(null===(t=n.current.value)||void 0===t?void 0:t.id)&&r.editor.setSelectedTool("zoom",Pe(Pe({},e),{},{onInteractionEnd:n.id}))}}),r}return P(o)}();Ee(qh,"id","root"),Ee(qh,"initial","select"),Ee(qh,"children",function(){return[Vh,Xh]});var $h,Gh,Qh=Object.defineProperty,Zh=Object.getOwnPropertyDescriptor,Jh=function(e,t,n,r){for(var i,o=1<r?void 0:r?Zh(t,n):t,a=e.length-1;0<=a;a--)(i=e[a])&&(o=(r?i(t,n,o):i(o))||o);return r&&o&&Qh(t,n,o),o},ev=function(e){M(O,Ic.EventEmitter);var t,n,j=N(O);function O(e){var E,t=e.store,n=e.user,r=e.shapes,i=e.tools,o=e.getContainer;z(this,O),Ee(R(E=j.call(this)),"store",void 0),Ee(R(E),"root",void 0),Ee(R(E),"disposables",new Set),Ee(R(E),"_dprManager",new Gp(R(E))),Ee(R(E),"_activeAreaManager",new qp(R(E))),Ee(R(E),"_tickManager",new hh(R(E))),Ee(R(E),"_updateDepth",0),Ee(R(E),"externalContentManager",new Qp(R(E))),Ee(R(E),"snaps",new uh(R(E))),Ee(R(E),"user",void 0),Ee(R(E),"isSafari",void 0),Ee(R(E),"isIos",void 0),Ee(R(E),"isChromeForIos",void 0),Ee(R(E),"getContainer",void 0),Ee(R(E),"history",new rh(R(E),function(){return E._complete()},function(e){E.annotateError(e,{origin:"history.batch",willCrashApp:!0}),E.crash(e)})),Ee(R(E),"shapeUtils",void 0),Ee(R(E),"_selectionSharedStyles",zt("_selectionSharedStyles",function(){var e,t=R(E).selectedShapes,n=new fp,r=ce(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;E._extractSharedStyles(i,n)}}catch(e){r.e(e)}finally{r.f()}return n})),Ee(R(E),"_invalidParents",new Set),Ee(R(E),"_crashingError",null),Ee(R(E),"_canMoveCamera",It("can move camera",!0)),Ee(R(E),"_isFocused",It("_isFocused",!1)),Ee(R(E),"_isCoarsePointer",It("isCoarsePointer",!1)),Ee(R(E),"_openMenus",It("open-menus",[])),Ee(R(E),"_isChangingStyle",It("isChangingStyle",!1)),Ee(R(E),"_isChangingStyleTimeout",-1),Ee(R(E),"_isPenMode",It("isPenMode",!1)),Ee(R(E),"_touchEventsRemainingBeforeExitingPenMode",0),Ee(R(E),"_isReadOnly",It("isReadOnly",!1)),Ee(R(E),"_currentPageShapeIds",void 0),Ee(R(E),"_setSelectedIds",E.history.createCommand("setSelectedIds",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=E.pageState.selectedIds,r=new Set(E.pageState.selectedIds);return e.length===r.size&&e.every(function(e){return r.has(e)})?null:{data:{ids:e,prevSelectedIds:n},squashing:t,preservesRedoStack:!0}},{do:function(e){var t=e.ids;E.store.update(E.pageState.id,function(e){return Pe(Pe({},e),{},{selectedIds:t})})},undo:function(e){var t=e.prevSelectedIds;E.store.update(E.pageState.id,function(){return Pe(Pe({},E.pageState),{},{selectedIds:t})})},squash:function(e,t){return{ids:t.ids,prevSelectedIds:e.prevSelectedIds}}})),Ee(R(E),"_setFocusLayer",E.history.createCommand("setFocusLayer",function(e){if(null!==e||E.canUndo)return{data:{prev:E.pageState.focusLayerId,next:e},preservesRedoStack:!0,squashing:!0}},{do:function(e){var t=e.next;E.store.update(E.pageState.id,function(e){return Pe(Pe({},e),{},{focusLayerId:t})})},undo:function(e){var t=e.prev;E.store.update(E.pageState.id,function(e){return Pe(Pe({},e),{},{focusLayerId:t})})},squash:function(e,t){return{prev:e.prev,next:t.next}}})),Ee(R(E),"_cameraState",It("camera state","idle")),Ee(R(E),"_cameraStateTimeoutRemaining",0),Ee(R(E),"_lastUpdateRenderingBoundsTimestamp",Date.now()),Ee(R(E),"_decayCameraStateTimeout",function(e){E._cameraStateTimeoutRemaining-=e,E._cameraStateTimeoutRemaining<=0&&(E.off("tick",E._decayCameraStateTimeout),E._cameraState.set("idle"),E.updateRenderingBounds())}),Ee(R(E),"_tickCameraState",function(){E._cameraStateTimeoutRemaining=64;var e=Date.now();"idle"===E._cameraState.__unsafe__getWithoutCapture()?(E._lastUpdateRenderingBoundsTimestamp=e,E._cameraState.set("moving"),E.on("tick",E._decayCameraStateTimeout)):620<e-E._lastUpdateRenderingBoundsTimestamp&&E.updateRenderingBounds()}),Ee(R(E),"_renderingBounds",It("rendering viewport",new $o)),Ee(R(E),"_renderingBoundsExpanded",It("rendering viewport expanded",new $o)),Ee(R(E),"inputs",{originPagePoint:new xo,originScreenPoint:new xo,previousPagePoint:new xo,previousScreenPoint:new xo,currentPagePoint:new xo,currentScreenPoint:new xo,keys:new Set,buttons:new Set,isPen:!1,shiftKey:!1,ctrlKey:!1,altKey:!1,isDragging:!1,isPointing:!1,isPinching:!1,isEditing:!1,isPanning:!1,pointerVelocity:new xo}),Ee(R(E),"_clickManager",new $p(R(E))),Ee(R(E),"_prevCursor","default"),Ee(R(E),"_shiftKeyTimeout",-1),Ee(R(E),"_setShiftKeyTimeout",function(){E.inputs.shiftKey=!1,E.dispatch({type:"keyboard",name:"key_up",key:"Shift",shiftKey:E.inputs.shiftKey,ctrlKey:E.inputs.ctrlKey,altKey:E.inputs.altKey,code:"ShiftLeft"})}),Ee(R(E),"_altKeyTimeout",-1),Ee(R(E),"_setAltKeyTimeout",function(){E.inputs.altKey=!1,E.dispatch({type:"keyboard",name:"key_up",key:"Alt",shiftKey:E.inputs.shiftKey,ctrlKey:E.inputs.ctrlKey,altKey:E.inputs.altKey,code:"AltLeft"})}),Ee(R(E),"_ctrlKeyTimeout",-1),Ee(R(E),"_setCtrlKeyTimeout",function(){E.inputs.ctrlKey=!1,E.dispatch({type:"keyboard",name:"key_up",key:"Ctrl",shiftKey:E.inputs.shiftKey,ctrlKey:E.inputs.ctrlKey,altKey:E.inputs.altKey,code:"ControlLeft"})}),Ee(R(E),"_restoreToolId","select"),Ee(R(E),"_pinchStart",1),Ee(R(E),"_didPinch",!1),Ee(R(E),"_selectedIdsAtPointerDown",[]),Ee(R(E),"capturedPointerId",null),Ee(R(E),"_createShapes",E.history.createCommand("createShapes",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(E.isReadOnly)return null;if(e.length<=0)return null;var n=R(E),r=n.currentPageShapeIds,i=n.selectedIds,o=t?i:void 0,a=e.length+r.size>ns;a&&tv(R(E));var s=a?e.slice(0,ns-r.size):e;return 0===s.length?null:{data:{currentPageId:E.currentPageId,createdIds:e.map(function(e){return e.id}),prevSelectedIds:o,partials:s,select:t}}},{do:function(e){var t=e.createdIds,l=e.partials,n=e.select,u=R(E).focusLayerId;l=l.map(function(t){if(t.parentId&&(E.store.get(t.parentId)||l.find(function(e){return e.id===t.parentId})))return t;var e,n;t=Pe({},t);var r=E.getParentIdForNewShapeAtPoint({x:null!==(e=t.x)&&void 0!==e?e:0,y:null!==(n=t.y)&&void 0!==n?n:0},t.type);if(zr(t.parentId=r)){var i,o,a,s=E.getPointInShapeSpace(E.getShapeById(r),{x:null!==(i=t.x)&&void 0!==i?i:0,y:null!==(o=t.y)&&void 0!==o?o:0});t.x=s.x,t.y=s.y,t.rotation=-E.getPageRotationById(r)+(null!==(a=t.rotation)&&void 0!==a?a:0)}return t.parentId===t.id&&(t.parentId=u),t});var r,i=new Map,o=[],a=ce(l);try{for(a.s();!(r=a.n()).done;){var s,c,d,f,p=r.value,h=E.getShapeUtil(p),v=p.index;if(!v){var g,m=null!==(g=p.parentId)&&void 0!==g?g:u;i.has(m)||i.set(m,E.getHighestIndexForParent(m)),v=i.get(m),i.set(m,ee(v))}var y,b=h.defaultProps(),w=ce(h.styleProps);try{for(w.s();!(y=w.n()).done;){var x=Ce(y.value,2),k=x[0];b[x[1]]=E.getStyleForNextShape(k)}}catch(e){w.e(e)}finally{w.f()}var S=E.store.schema.types.shape.create(Pe(Pe({},p),{},{index:v,opacity:null!==(s=p.opacity)&&void 0!==s?s:E.instanceState.opacityForNextShape,parentId:null!==(c=p.parentId)&&void 0!==c?c:u,props:"props"in p?Pe(Pe({},b),p.props):b}));if(void 0===S.index)throw Error("no index!");var _=null===(d=(f=E.getShapeUtil(S)).onBeforeCreate)||void 0===d?void 0:d.call(f,S);_&&(S=_),o.push(S)}}catch(e){a.e(e)}finally{a.f()}E.store.put(o),n&&E.store.update(E.pageState.id,function(e){return Pe(Pe({},e),{},{selectedIds:t})})},undo:function(e){var t=e.createdIds,n=e.prevSelectedIds;E.store.remove(t),n&&E.store.update(E.pageState.id,function(e){return Pe(Pe({},e),{},{selectedIds:n})})}})),Ee(R(E),"animatingShapes",new Map),Ee(R(E),"_updateShapes",E.history.createCommand("updateShapes",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(E.isReadOnly)return null;var n=U(e),v=Object.fromEntries(U(n.map(function(e){var t=e.id;return E.getShapeById(t)})).map(function(e){return[e.id,e]}));if(n.length<=0)return null;var r=U(n.map(function(e){var t,n=v[e.id];if(!n)return null;for(var r=null,i=0,o=Object.entries(e);i<o.length;i++){var a=Ce(o[i],2),s=a[0],l=a[1];if(void 0!==l)switch(s){case"id":case"type":case"typeName":continue;default:if(l!==n[s])if(r||(r=Pe({},n)),"props"===s){for(var u=Pe({},n.props),c=0,d=Object.entries(l);c<d.length;c++){var f=Ce(d[c],2),p=f[0],h=f[1];void 0!==h&&(u[p]=h)}r.props=u}else r[s]=l}}return null!==(t=r)&&void 0!==t?t:n})),i=Object.fromEntries(r.map(function(e){return[e.id,e]}));return{data:{snapshots:v,updates:i},squashing:t}},{do:function(e){for(var t=e.updates,n=Object.values(t),r=0;r<n.length;r++){var i,o,a=n[r],s=E.store.get(a.id);if(s){var l=null===(i=(o=E.getShapeUtil(a)).onBeforeUpdate)||void 0===i?void 0:i.call(o,s,a);l&&(n[r]=l)}}E.store.put(n)},undo:function(e){var t=e.snapshots;E.store.put(Object.values(t))},squash:function(e,t){return{snapshots:Pe(Pe({},t.snapshots),e.snapshots),updates:Pe(Pe({},e.updates),t.updates)}}})),Ee(R(E),"_deleteShapes",E.history.createCommand("delete_shapes",function(e){if(E.isReadOnly)return null;if(0===e.length)return null;var t,n=de(E.pageState.selectedIds),r=new Set(e),i=ce(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;E.visitDescendants(o,function(e){r.add(e)})}}catch(e){i.e(e)}finally{i.f()}var a=de(r),s=E._arrowBindingsIndex.value,l=U(a.flatMap(function(e){var t=E.getShapeById(e),n=s[e];return n&&0<n.length?n.map(function(e){var t=e.arrowId;return E.getShapeById(t)}).concat(t):t})),u=n.filter(function(e){return!r.has(e)});return{data:{deletedIds:a,snapshots:l,prevSelectedIds:n,postSelectedIds:u}}},{do:function(e){var t=e.deletedIds,n=e.postSelectedIds;E.store.remove(t),E.store.update(E.pageState.id,function(e){return Pe(Pe({},e),{},{selectedIds:n})})},undo:function(e){var t=e.snapshots,n=e.prevSelectedIds;E.store.put(t),E.store.update(E.pageState.id,function(e){return Pe(Pe({},e),{},{selectedIds:n})})}})),Ee(R(E),"_updatePage",E.history.createCommand("updatePage",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(E.isReadOnly)return null;var n=E.getPageById(e.id);return n?{data:{prev:n,partial:e},squashing:t}:null},{do:function(e){var t=e.partial;E.store.update(t.id,function(e){return Pe(Pe({},e),t)})},undo:function(e){var t=e.prev,n=e.partial;E.store.update(n.id,function(){return t})},squash:function(e,t){return{prev:Pe(Pe({},e.prev),t.prev),partial:t.partial}}})),Ee(R(E),"_createPage",E.history.createCommand("createPage",function(e){var t,n,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:mn.createId(),o=2<arguments.length?arguments[2]:void 0;if(E.isReadOnly)return null;if(40<=E.pages.length)return null;var a=E.pages,s=null!==(t=null!=o?o:null===(n=a[a.length-1])||void 0===n?void 0:n.index)&&void 0!==t?t:"a1",l=null===(r=a[a.findIndex(function(e){return e.index===s})+1])||void 0===r?void 0:r.index;e=function(e,t){for(var n=e,r=new Set(t);r.has(n);){var i;n=null!==(i=/^.*(\d+)$/.exec(n))&&void 0!==i&&i[1]?n.replace(/(\d+)(?=\D?)$/,function(e){return(+e+1).toString()}):"".concat(n," 1")}return n}(e,a.map(function(e){return e.name}));var u=mn.create({id:i,name:e,index:l&&s!==l?L(s,l):ee(s)}),c=sn.create({id:sn.createId(u.id)}),d=Xn.create({id:Xn.createId(u.id),pageId:u.id});return{data:{prevSelectedPageId:E.currentPageId,newPage:u,newTabPageState:d,newCamera:c}}},{do:function(e){var t=e.newPage,n=e.newTabPageState,r=e.newCamera;E.store.put([t,r,n,Pe(Pe({},E.instanceState),{},{currentPageId:t.id})]),E.updateRenderingBounds()},undo:function(e){var t=e.newPage,n=e.prevSelectedPageId,r=e.newTabPageState,i=e.newCamera;1!==E.pages.length&&(E.store.remove([r.id,t.id,i.id]),E.store.has(n)&&E.currentPageId!==n&&E.store.put([Pe(Pe({},E.instanceState),{},{currentPageId:n})]),E.updateRenderingBounds())}})),Ee(R(E),"_deletePage",E.history.createCommand("delete_page",function(t){if(E.isReadOnly)return null;var e=R(E).pages;if(1===e.length)return null;var n=E.getPageById(t),r=E._pageStates.value.filter(function(e){return e.pageId===t});if(!n)return null;if(t===E.currentPageId){var i,o=e.findIndex(function(e){return e.id===t}),a=null!==(i=e[o-1])&&void 0!==i?i:e[o+1];E.setCurrentPageId(a.id)}return{data:{id:t,deletedPage:n,deletedPageStates:r}}},{do:function(e){var t=e.deletedPage,n=e.deletedPageStates,r=R(E).pages;if(1!==r.length){if(t.id===E.currentPageId){var i,o=r.findIndex(function(e){return e.id===t.id}),a=null!==(i=r[o-1])&&void 0!==i?i:r[o+1];E.setCurrentPageId(a.id)}E.store.remove(n.map(function(e){return e.id})),E.store.remove([t.id]),E.updateRenderingBounds()}},undo:function(e){var t=e.deletedPage,n=e.deletedPageStates;E.store.put([t]),E.store.put(n),E.updateRenderingBounds()}})),Ee(R(E),"_setInstancePageState",E.history.createCommand("setInstancePageState",function(e){var t,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{data:{prev:E.store.get(null!==(t=e.id)&&void 0!==t?t:E.pageState.id),partial:e},ephemeral:n}},{do:function(e){var t=e.prev,n=e.partial;E.store.update(t.id,function(e){return Pe(Pe({},e),n)})},undo:function(e){var t=e.prev;E.store.update(t.id,function(){return t})}})),Ee(R(E),"_createAssets",E.history.createCommand("createAssets",function(e){return E.isReadOnly||e.length<=0?null:{data:{assets:e}}},{do:function(e){var t=e.assets;E.store.put(t)},undo:function(e){var t=e.assets;E.store.remove(t.map(function(e){return e.id}))}})),Ee(R(E),"_deleteAssets",E.history.createCommand("deleteAssets",function(e){if(!(E.isReadOnly||e.length<=0)){var t=U(e.map(function(e){return E.store.get(e)}));return{data:{ids:e,prev:t}}}},{do:function(e){var t=e.ids;E.store.remove(t)},undo:function(e){var t=e.prev;E.store.put(t)}})),Ee(R(E),"_updateAssets",E.history.createCommand("updateAssets",function(e){if(!(E.isReadOnly||e.length<=0))return{data:{snapshots:{},assets:e}}},{do:function(e){var t=e.assets,n=e.snapshots;E.store.put(t.map(function(e){var t=E.store.get(e.id);return Pe(Pe({},n[e.id]=t),e)}))},undo:function(e){var t=e.snapshots;E.store.put(Object.values(t))}})),Ee(R(E),"_parentIdsToChildIds",void 0),Ee(R(E),"_childIdsCache",new ou),Ee(R(E),"_setCurrentPageId",E.history.createCommand("setCurrentPage",function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).stopFollowing,n=void 0===t||t;if(E.store.has(e))return n&&E.instanceState.followingUserId&&E.stopFollowingUser(),{data:{toId:e,fromId:E.currentPageId},squashing:!0,preservesRedoStack:!0};console.error("Tried to set the current page id to a page that doesn't exist.")},{do:function(e){var t=e.toId;if(E.store.has(t)){if(!E.getPageStateByPageId(t)){var n=sn.create({id:sn.createId(t)});E.store.put([n,Xn.create({id:Xn.createId(t),pageId:t})])}E.store.put([Pe(Pe({},E.instanceState),{},{currentPageId:t})]),E.updateRenderingBounds()}},undo:function(e){var t=e.fromId;E.store.has(t)&&(E.store.put([Pe(Pe({},E.instanceState),{},{currentPageId:t})]),E.updateRenderingBounds())},squash:function(e,t){var n=e.fromId;return{toId:t.toId,fromId:n}}})),Ee(R(E),"_updateInstanceState",E.history.createCommand("updateTabState",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=E.instanceState;return{data:{prev:r,next:Pe(Pe({},r),e)},squashing:n,ephemeral:t}},{do:function(e){var t=e.next;E.store.put([t])},undo:function(e){var t=e.prev;E.store.put([t])},squash:function(e,t){return{prev:e.prev,next:t.next}}})),Ee(R(E),"_willSetInitialBounds",!0),Ee(R(E),"_viewportAnimation",null),Ee(R(E),"textMeasure",void 0),E.store=t,E.user=new vh(null!=n?n:Cc()),E.getContainer=null!=o?o:function(){return document.body},E.textMeasure=new ph(R(E)),E.root=new qh(R(E));var a,s=cp(r),l=new Set(Object.keys(t.schema.types.shape.migrations.subTypeMigrations)),u=ce(s);try{for(u.s();!(a=u.n()).done;){var c=a.value;if(!l.has(c.type))throw Error('Editor and store have different shapes: "'.concat(c.type,'" was passed into the editor but not the schema'));l.delete(c.type)}}catch(e){u.e(e)}finally{u.f()}if(0<l.size)throw Error('Editor and store have different shapes: "'.concat(de(l)[0],'" is present in the store schema but not provided to the editor'));var d,f={},p=new Map,h=ce(s);try{for(h.s();!(d=h.n()).done;){var v=d.value,g=v.util,m=v.props,y=Nr(null!=m?m:{});f[g.type]=new g(R(E),g.type,y);var b,w=ce(y.keys());try{for(w.s();!(b=w.n()).done;){var x=b.value;if(p.has(x.id)){if(p.get(x.id)!==x)throw Error('Multiple style props with id "'.concat(x.id,'" in use. Style prop IDs must be unique.'))}else p.set(x.id,x)}}catch(e){w.e(e)}finally{w.f()}}}catch(e){h.e(e)}finally{h.f()}E.shapeUtils=f;var k,S=ce(s);try{for(S.s();!(k=S.n()).done;){var _=k.value.tool;if(_){if(Z(E.root.children,_.id))throw Error("Can't override tool with id \"".concat(_.id,'"'));E.root.children[_.id]=new _(R(E))}}}catch(e){S.e(e)}finally{S.f()}var P,C=ce(i);try{for(C.s();!(P=C.n()).done;){var I=P.value;if(Z(E.root.children,I.id))throw Error("Can't override tool with id \"".concat(I.id,'"'));E.root.children[I.id]=new I(R(E))}}catch(e){C.e(e)}finally{C.f()}"undefined"!=typeof window&&"navigator"in window?(E.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),E.isIos=!!navigator.userAgent.match(/iPad/i)||!!navigator.userAgent.match(/iPhone/i),E.isChromeForIos=/crios.*safari/i.test(navigator.userAgent)):(E.isSafari=!1,E.isIos=!1,E.isChromeForIos=!1),E.store.onBeforeDelete=function(e){"shape"===e.typeName?E._shapeWillBeDeleted(e):"page"===e.typeName&&E._pageWillBeDeleted(e)},E.store.onAfterChange=function(e,t){E._updateDepth++,1e3<E._updateDepth&&console.error("[onAfterChange] Maximum update depth exceeded, bailing out."),"shape"===e.typeName&&"shape"===t.typeName?E._shapeDidChange(e,t):"instance_page_state"===e.typeName&&"instance_page_state"===t.typeName&&E._pageStateDidChange(e,t),E._updateDepth--},E.store.onAfterCreate=function(e){if("shape"===e.typeName&&E.isShapeOfType(e,id)&&E._arrowDidUpdate(e),"page"===e.typeName){var t=sn.createId(e.id),n=Xn.createId(e.id);E.store.has(t)||E.store.put([sn.create({id:t})]),E.store.has(n)||E.store.put([Xn.create({id:n,pageId:e.id})])}},E._currentPageShapeIds=function(b,w){var e=b.query.ids("shape"),x=null;function k(){var t=w();return x=t,new Set(de(e.value).filter(function(e){return Vp(b,t,b.get(e))}))}return zt("_shapeIdsInCurrentPage",function(e,t){if(Mt(e))return k();var n=w();if(n!==x)return k();var r=b.history.getDiffSince(t);if(r===bt)return k();var i,o=new Dt(e),a=ce(r);try{for(a.s();!(i=a.n()).done;){for(var s=i.value,l=0,u=Object.values(s.added);l<u.length;l++){var c=u[l];Lr(c)&&Vp(b,n,c)&&o.add(c.id)}for(var d=0,f=Object.values(s.updated);d<f.length;d++){var p=Ce(f[d],2),h=(p[0],p[1]);Lr(h)&&(Vp(b,n,h)?o.add(h.id):o.remove(h.id))}for(var v=0,g=Object.keys(s.removed);v<g.length;v++){var m=g[v];zr(m)&&o.remove(m)}}}catch(e){a.e(e)}finally{a.f()}var y=o.get();return y?jt(y.value,y.diff):e})}(E.store,function(){return E.currentPageId}),E._parentIdsToChildIds=function(x){var e=x.query.ids("shape");function k(){var n={};return e.value.forEach(function(e){var t=x.get(e);n[t.parentId]||(n[t.parentId]=[]),n[t.parentId].push([e,t.index])}),Object.values(n).forEach(function(e){return e.sort(function(e,t){return e[1]<t[1]?-1:1})}),n}return zt("parentsToChildrenWithIndexes",function(t,e){var n;if(Mt(t))return k();var r=x.history.getDiffSince(e);if(r===bt)return k();if(0===r.length)return t;for(var i,o=null,a=function(e){o||(o=Pe({},t)),o[e]?o[e]===t[e]&&(o[e]=de(o[e])):o[e]=[]},s=new Set,l=0,u=r.length;l<u;l++){i=r[l];for(var c=0,d=Object.values(i.added);c<d.length;c++){var f=d[c];Lr(f)&&(a(f.parentId),o[f.parentId].push([f.id,f.index]),s.add(o[f.parentId]))}for(var p=function(){var e=Ce(v[h],2),t=e[0],n=e[1];if(!Lr(n))return"continue";if(!Lr(t))return"continue";if(t.parentId!==n.parentId)a(t.parentId),a(n.parentId),o[t.parentId].splice(o[t.parentId].findIndex(function(e){return e[0]===n.id}),1),o[n.parentId].push([n.id,n.index]),s.add(o[n.parentId]);else if(t.index!==n.index){a(n.parentId);var r=o[n.parentId].findIndex(function(e){return e[0]===n.id});o[n.parentId][r]=[n.id,n.index],s.add(o[n.parentId])}},h=0,v=Object.values(i.updated);h<v.length;h++)p();for(var g=function(){var t=y[m];if(!Lr(t))return"continue";a(t.parentId),o[t.parentId].splice(o[t.parentId].findIndex(function(e){return e[0]===t.id}),1)},m=0,y=Object.values(i.removed);m<y.length;m++)g()}var b,w=ce(s);try{for(w.s();!(b=w.n()).done;)b.value.sort(function(e,t){return e[1]<t[1]?-1:1})}catch(e){w.e(e)}finally{w.f()}return null!==(n=o)&&void 0!==n?n:t})}(E.store),E.disposables.add(E.store.listen(function(e){E.emit("change",e)}));var T=E.getContainer(),M=function(){E._isFocused.set(!0)},A=function(){E._isFocused.set(!1)};return T.addEventListener("focusin",M),T.addEventListener("focus",M),T.addEventListener("focusout",A),T.addEventListener("blur",A),E.disposables.add(function(){T.removeEventListener("focusin",M),T.removeEventListener("focus",M),T.removeEventListener("focusout",A),T.removeEventListener("blur",A)}),E.store.ensureStoreIsUsable(),E.setInstancePageState({editingId:null,hoveredId:null,erasingIds:[]},!0),E.root.enter(void 0,"initial"),E.instanceState.followingUserId&&E.stopFollowingUser(),E.updateRenderingBounds(),requestAnimationFrame(function(){E._tickManager.start()}),E}return P(O,[{key:"_pageTransformCache",get:function(){var r=this;return this.store.createComputedCache("pageTransformCache",function(e){var t;if(yn(e.parentId))return r.getTransform(e);var n=null!==(t=r._pageTransformCache.get(e.parentId))&&void 0!==t?t:na.Identity();return na.Compose(n,r.getTransform(e))})}},{key:"_pageBoundsCache",get:function(){var n=this;return this.store.createComputedCache("pageBoundsCache",function(e){var t=n._pageTransformCache.get(e.id);return t?$o.FromPoints(na.applyToPoints(t,n.getShapeUtil(e).outline(e))):new $o})}},{key:"dispose",value:function(){this.disposables.forEach(function(e){return e()}),this.disposables.clear()}},{key:"undo",value:function(){return this.history.undo()}},{key:"canUndo",get:function(){return 0<this.history.numUndos}},{key:"redo",value:function(){return this.history.redo(),this}},{key:"canRedo",get:function(){return 0<this.history.numRedos}},{key:"mark",value:function(e,t,n){return this.history.mark(e,t,n)}},{key:"bail",value:function(){return this.history.bail(),this}},{key:"bailToMark",value:function(e){return this.history.bailToMark(e),this}},{key:"batch",value:function(e){return this.history.batch(e),this}},{key:"getShapeUtil",value:function(e){var t=J(this.shapeUtils,e.type);return W(t,'No shape util found for type "'.concat(e.type,'"')),"prototype"in e&&e.prototype instanceof eu&&W(t instanceof e,'Shape util found for type "'.concat(e.type,'" is not an instance of the provided constructor')),t}},{key:"_extractSharedStyles",value:function(e,t){if(this.isShapeOfType(e,Hd)){var n=this._parentIdsToChildIds.value[e.id];if(!n)return;for(var r=0,i=n.length;r<i;r++)this._extractSharedStyles(this.getShapeById(n[r][0]),t)}else{var o,a=ce(this.getShapeUtil(e).iterateStyles(e));try{for(a.s();!(o=a.n()).done;){var s=Ce(o.value,2),l=s[0],u=s[1];t.applyValue(l,u)}}catch(e){a.e(e)}finally{a.f()}}}},{key:"_stylesForNextShape",get:function(){return this.instanceState.stylesForNextShape}},{key:"getStyleForNextShape",value:function(e){var t=this._stylesForNextShape[e.id];return void 0===t?e.defaultValue:t}},{key:"sharedStyles",get:function(){if(this.isIn("select")&&0<this.selectedIds.length)return this._selectionSharedStyles.value;var e=this.root.current.value,t=new fp;if(e.shapeType){var n,r=ce(this.getShapeUtil(e.shapeType).styleProps.keys());try{for(r.s();!(n=r.n()).done;){var i=n.value;t.applyValue(i,this.getStyleForNextShape(i))}}catch(e){r.e(e)}finally{r.f()}}return t}},{key:"sharedOpacity",get:function(){var o=this;if(this.isIn("select")&&0<this.selectedIds.length){var e,a=[],t=function e(t){var n=o.getShapeById(t);if(n)if(o.isShapeOfType(n,Hd)){var r,i=ce(o.getSortedChildIds(n.id));try{for(i.s();!(r=i.n()).done;)e(r.value)}catch(e){i.e(e)}finally{i.f()}}else a.push(n)},n=ce(this.selectedIds);try{for(n.s();!(e=n.n()).done;)t(e.value)}catch(e){n.e(e)}finally{n.f()}for(var r=null,i=0,s=a;i<s.length;i++){var l=s[i];if(null===r)r=l.opacity;else if(r!==l.opacity)return{type:"mixed"}}if(null!==r)return{type:"shared",value:r}}return{type:"shared",value:this.instanceState.opacityForNextShape}}},{key:"_arrowBindingsIndex",get:function(){return function(L){var e=L.store,z=e.query.filterHistory("shape"),u=e.query.records("shape",function(){return{type:{eq:"arrow"}}});function R(){var e,t={},n=ce(u.value);try{for(n.s();!(e=n.n()).done;){var r=e.value,i=r.props,o=i.start,a=i.end;if("binding"===o.type){var s=t[o.boundShapeId];s?s.push({arrowId:r.id,handleId:"start"}):t[o.boundShapeId]=[{arrowId:r.id,handleId:"start"}]}if("binding"===a.type){var l=t[a.boundShapeId];l?l.push({arrowId:r.id,handleId:"end"}):t[a.boundShapeId]=[{arrowId:r.id,handleId:"end"}]}}}catch(e){n.e(e)}finally{n.f()}return t}return zt("arrowBindingsIndex",function(e,t){var n;if(Mt(e))return R();var r=e,i=z.getDiffSince(t);if(i===bt)return R();var o=void 0;function a(e){o||(o=Pe({},r)),o[e]?o[e]===r[e]&&(o[e]=de(o[e])):o[e]=[]}function s(e,t,n){a(e),o[e]=o[e].filter(function(e){return e.arrowId!==t||e.handleId!==n}),0===o[e].length&&delete o[e]}function l(e,t,n){a(e),o[e].push({arrowId:t,handleId:n})}var u,c=ce(i);try{for(c.s();!(u=c.n()).done;){for(var d=u.value,f=0,p=Object.values(d.added);f<p.length;f++){var h=p[f];if(L.isShapeOfType(h,id)){var v=h.props,g=v.start,m=v.end;"binding"===g.type&&l(g.boundShapeId,h.id,"start"),"binding"===m.type&&l(m.boundShapeId,h.id,"end")}}for(var y=0,b=Object.values(d.updated);y<b.length;y++){var w=Ce(b[y],2),x=w[0],k=w[1];if(L.isShapeOfType(x,id)&&L.isShapeOfType(k,id))for(var S=0,_=["start","end"];S<_.length;S++){var E=_[S],P=x.props[E],C=k.props[E];"binding"===P.type&&"point"===C.type?s(P.boundShapeId,x.id,E):"point"===P.type&&"binding"===C.type?l(C.boundShapeId,k.id,E):"binding"===P.type&&"binding"===C.type&&P.boundShapeId!==C.boundShapeId&&(s(P.boundShapeId,x.id,E),l(C.boundShapeId,k.id,E))}}for(var I=0,T=Object.values(d.removed);I<T.length;I++){var M=T[I];if(L.isShapeOfType(M,id)){var A=M.props,j=A.start,O=A.end;"binding"===j.type&&s(j.boundShapeId,M.id,"start"),"binding"===O.type&&s(O.boundShapeId,M.id,"end")}}}}catch(e){c.e(e)}finally{c.f()}return null!==(n=o)&&void 0!==n?n:r})}(this)}},{key:"getArrowsBoundTo",value:function(e){return this._arrowBindingsIndex.value[e]||dt}},{key:"_reparentArrow",value:function(e){var t=this,n=this.getShapeById(e);if(n){var r=n.props,i=r.start,o=r.end,a="binding"===i.type?this.getShapeById(i.boundShapeId):void 0,s="binding"===o.type?this.getShapeById(o.boundShapeId):void 0,l=this.getAncestorPageId(n);if(l){var u;if(a&&s){var c;u=null!==(c=this.findCommonAncestor([a,s]))&&void 0!==c?c:l}else{if(!a&&!s)return;u=l}u&&u!==n.parentId&&this.reparentShapesById([e],u);var d=this.getShapeById(e);if(!d)throw Error("no reparented arrow");var f,p,h=this.getShapeNearestSibling(d,a),v=this.getShapeNearestSibling(d,s);if(h&&v)f=h.index>v.index?h:v;else if(h&&!v)f=h;else{if(!v||h)return;f=v}var g=this.getSortedChildIds(f.parentId).map(function(e){return t.getShapeById(e)}).filter(function(e){return e.index>f.index});if(g.length){var m=g.find(function(e){return"arrow"!==e.type});if(d.index>f.index&&(!m||d.index<m.index))return;p=L(f.index,g[0].index)}else p=ee(f.index);p!==d.index&&this.updateShapes([{id:e,type:"arrow",index:p}])}}}},{key:"_unbindArrowTerminal",value:function(e,t){var n=Vc(this,e)[t],r=n.x,i=n.y;this.store.put([Pe(Pe({},e),{},{props:Pe(Pe({},e.props),{},Ee({},t,{type:"point",x:r,y:i}))})])}},{key:"_allPageStates",get:function(){return this.store.query.records("instance_page_state")}},{key:"_shapeWillBeDeleted",value:function(e){var t=this;e.parentId&&zr(e.parentId)&&this._invalidParents.add(e.parentId);var n=this._arrowBindingsIndex.value[e.id];if(null!=n&&n.length){var r,i=ce(n);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.arrowId,s=o.handleId,l=this.getShapeById(a);l&&this._unbindArrowTerminal(l,s)}}catch(e){i.e(e)}finally{i.f()}}var u=this._allPageStates.value,c=new Set([e.id]),d=U(u.map(function(e){return t._cleanupInstancePageState(e,c)}));d.length&&this.store.put(d)}},{key:"_arrowDidUpdate",value:function(e){for(var t=0,n=["start","end"];t<n.length;t++){var r=n[t],i=e.props[r];if("binding"===i.type){var o=this.getShapeById(i.boundShapeId),a=this.getAncestorPageId(e)===this.getAncestorPageId(o);o&&a||this._unbindArrowTerminal(e,r)}}this._reparentArrow(e.id)}},{key:"_complete",value:function(){var e,t=ce(this._invalidParents);try{for(t.s();!(e=t.n()).done;){var n,r=e.value;this._invalidParents.delete(r);var i=this.getShapeById(r);if(i){var o=this.getShapeUtil(i),a=null===(n=o.onChildrenChange)||void 0===n?void 0:n.call(o,i);null!=a&&a.length&&this.updateShapes(a,!0)}}}catch(e){t.e(e)}finally{t.f()}this.emit("update")}},{key:"_cleanupInstancePageState",value:function(e,t){var n=null,r=e.selectedIds.filter(function(e){return!t.has(e)});r.length!==e.selectedIds.length&&(n||(n=Pe({},e)),n.selectedIds=r);var i=e.erasingIds.filter(function(e){return!t.has(e)});i.length!==e.erasingIds.length&&(n||(n=Pe({},e)),n.erasingIds=i),e.hoveredId&&t.has(e.hoveredId)&&(n||(n=Pe({},e)),n.hoveredId=null),e.editingId&&t.has(e.editingId)&&(n||(n=Pe({},e)),n.editingId=null);var o=e.hintingIds.filter(function(e){return!t.has(e)});return o.length!==e.hintingIds.length&&(n||(n=Pe({},e)),n.hintingIds=o),e.focusLayerId&&t.has(e.focusLayerId)&&(n||(n=Pe({},e)),n.focusLayerId=null),n}},{key:"_shapeDidChange",value:function(e,t){var o=this;if(this.isShapeOfType(t,id)&&this._arrowDidUpdate(t),e.parentId!==t.parentId){var n=function(e){var t=o._arrowBindingsIndex.value[e];if(null!=t&&t.length){var n,r=ce(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;o._reparentArrow(i.arrowId)}}catch(e){r.e(e)}finally{r.f()}}};n(t.id),this.visitDescendants(t.id,n)}if(e.parentId!==t.parentId&&yn(t.parentId)){var r=new Set([e.id]);this.visitDescendants(e.id,function(e){r.add(e)});var i,a=ce(this._allPageStates.value);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(s.pageId!==t.parentId){var l=this._cleanupInstancePageState(s,r);l&&this.store.put([l])}}}catch(e){a.e(e)}finally{a.f()}}e.parentId&&zr(e.parentId)&&this._invalidParents.add(e.parentId),t.parentId!==e.parentId&&zr(t.parentId)&&this._invalidParents.add(t.parentId)}},{key:"_pageStateDidChange",value:function(e,i){var o=this;if((null==e?void 0:e.selectedIds)!==(null==i?void 0:i.selectedIds)){var t=i.selectedIds.filter(function(e){for(var t,n=null===(t=o.getShapeById(e))||void 0===t?void 0:t.parentId;zr(n);){var r;if(i.selectedIds.includes(n))return!1;n=null===(r=o.getShapeById(n))||void 0===r?void 0:r.parentId}return!0}),n=0===t.length?null==i?void 0:i.focusLayerId:this.findCommonAncestor(U(t.map(function(e){return o.getShapeById(e)})),function(e){return o.isShapeOfType(e,Hd)});t.length===i.selectedIds.length&&n==i.focusLayerId||this.store.put([Pe(Pe({},i),{},{selectedIds:t,focusLayerId:null!=n?n:null})])}}},{key:"_pageWillBeDeleted",value:function(t){var e;if(this.instanceState.currentPageId===t.id){var n=null===(e=this.pages.find(function(e){return e.id!==t.id}))||void 0===e?void 0:e.id;if(n){this.store.put([Pe(Pe({},this.instanceState),{},{currentPageId:n})]);var r=sn.createId(t.id),i=Xn.createId(t.id);this.store.remove([r,i])}}}},{key:"annotateError",value:function(e,t){var n=t.origin,r=t.willCrashApp,i=t.tags,o=t.extras,a=this.createErrorAnnotations(n,r);q(e,{tags:Pe(Pe({},a.tags),i),extras:Pe(Pe({},a.extras),o)}),r&&this.store.markAsPossiblyCorrupted()}},{key:"createErrorAnnotations",value:function(t,n){try{return{tags:{origin:t,willCrashApp:n},extras:{activeStateNode:this.root.path.value,selectedShapes:this.selectedShapes,editingShape:this.editingId?this.getShapeById(this.editingId):void 0,inputs:this.inputs}}}catch(e){return{tags:{origin:t,willCrashApp:n},extras:{}}}}},{key:"crashingError",get:function(){return this._crashingError}},{key:"crash",value:function(e){this._crashingError=e,this.store.markAsPossiblyCorrupted(),this.emit("crash",{error:e})}},{key:"canMoveCamera",get:function(){return this._canMoveCamera.value},set:function(e){this._canMoveCamera.set(e)}},{key:"isFocused",get:function(){return this._isFocused.value}},{key:"devicePixelRatio",get:function(){return this._dprManager.dpr.value}},{key:"isCoarsePointer",get:function(){return this._isCoarsePointer.value},set:function(e){this._isCoarsePointer.set(e)}},{key:"openMenus",get:function(){return this._openMenus.value}},{key:"addOpenMenu",value:function(e){var t=new Set(this.openMenus);return t.has(e)||(t.add(e),this._openMenus.set(de(t))),this}},{key:"deleteOpenMenu",value:function(e){var t=new Set(this.openMenus);return t.has(e)&&(t.delete(e),this._openMenus.set(de(t))),this}},{key:"isMenuOpen",get:function(){return 0<this.openMenus.length}},{key:"isChangingStyle",get:function(){return this._isChangingStyle.value},set:function(e){var t=this;this._isChangingStyle.set(e),clearTimeout(this._isChangingStyleTimeout),e&&(this._isChangingStyleTimeout=setTimeout(function(){return t.isChangingStyle=!1},2e3))}},{key:"isPenMode",get:function(){return this._isPenMode.value}},{key:"setPenMode",value:function(e){return e&&(this._touchEventsRemainingBeforeExitingPenMode=3),e!==this.isPenMode&&this._isPenMode.set(e),this}},{key:"setReadOnly",value:function(e){return this._isReadOnly.set(e),e&&this.setSelectedTool("hand"),this}},{key:"isReadOnly",get:function(){return this._isReadOnly.value}},{key:"documentSettings",get:function(){return this.store.get(ir)}},{key:"updateDocumentSettings",value:function(e){this.store.put([Pe(Pe({},this.documentSettings),e)])}},{key:"gridSize",get:function(){return this.documentSettings.gridSize}},{key:"projectName",get:function(){return this.documentSettings.name}},{key:"setProjectName",value:function(e){this.updateDocumentSettings({name:e})}},{key:"isSnapMode",get:function(){return this.user.isSnapMode}},{key:"setSnapMode",value:function(e){return e!==this.isSnapMode&&this.user.updateUserPreferences({isSnapMode:e}),this}},{key:"isDarkMode",get:function(){return this.user.isDarkMode}},{key:"setDarkMode",value:function(e){return e!==this.isDarkMode&&this.user.updateUserPreferences({isDarkMode:e}),this}},{key:"animationSpeed",get:function(){return this.user.animationSpeed}},{key:"setAnimationSpeed",value:function(e){return e!==this.animationSpeed&&this.user.updateUserPreferences({animationSpeed:e}),this}},{key:"instanceState",get:function(){return this.store.get(Un)}},{key:"cursor",get:function(){return this.instanceState.cursor}},{key:"brush",get:function(){return this.instanceState.brush}},{key:"zoomBrush",get:function(){return this.instanceState.zoomBrush}},{key:"scribble",get:function(){return this.instanceState.scribble}},{key:"isFocusMode",get:function(){return this.instanceState.isFocusMode}},{key:"setFocusMode",value:function(e){return e!==this.isFocusMode&&this.updateInstanceState({isFocusMode:e},!0),this}},{key:"isToolLocked",get:function(){return this.instanceState.isToolLocked}},{key:"setToolLocked",value:function(e){return e!==this.isToolLocked&&this.updateInstanceState({isToolLocked:e},!0),this}},{key:"isGridMode",get:function(){return this.instanceState.isGridMode}},{key:"setGridMode",value:function(e){return e!==this.isGridMode&&this.updateInstanceState({isGridMode:e},!0),this}},{key:"_pages",get:function(){return this.store.query.records("page")}},{key:"pages",get:function(){return this._pages.value.sort(I)}},{key:"currentPage",get:function(){var e=this.getPageById(this.currentPageId);if(!e)throw Error("No current page (id ".concat(this.currentPageId,", ").concat(this.pages.length," pages))"));return e}},{key:"currentPageId",get:function(){return this.instanceState.currentPageId}},{key:"getPageById",value:function(e){return this.store.get(e)}},{key:"getPageInfoById",value:function(e){return this.store.get(e)}},{key:"currentPageShapeIds",get:function(){return this._currentPageShapeIds.value}},{key:"getShapeIdsInPage",value:function(e){var t=this.store.query.exec("shape",{parentId:{eq:e}});return this.getShapeAndDescendantIds(t.map(function(e){return e.id}))}},{key:"_pageStates",get:function(){return this.store.query.records("instance_page_state")}},{key:"getPageStateByPageId",value:function(t){return this._pageStates.value.find(function(e){return e.pageId===t})}},{key:"pageStateId",get:function(){return Xn.createId(this.currentPageId)}},{key:"pageState",get:function(){return this.store.get(this.pageStateId)}},{key:"setInstancePageState",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];this._setInstancePageState(e,t)}},{key:"selectedIds",get:function(){return this.pageState.selectedIds}},{key:"selectedIdsSet",get:function(){return new Set(this.selectedIds)}},{key:"setSelectedIds",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this._setSelectedIds(e,t),this}},{key:"isSelected",value:function(e){return this.selectedIdsSet.has(e)}},{key:"isWithinSelection",value:function(e){var t=this,n=this.getShapeById(e);return!(!n||!this.isSelected(e)&&!this.findAncestor(n,function(e){return t.isSelected(e.id)}))}},{key:"select",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.setSelectedIds(t),this}},{key:"deselect",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=this.selectedIds;return 0<r.length&&0<t.length&&this.setSelectedIds(r.filter(function(e){return!t.includes(e)})),this}},{key:"selectAll",value:function(){var e=this.getSortedChildIds(this.currentPageId);return e.length<=0||this.setSelectedIds(this._getUnlockedShapeIds(e)),this}},{key:"selectNone",value:function(){return 0<this.selectedIds.length&&this.setSelectedIds([]),this}},{key:"focusLayerId",get:function(){var e;return null!==(e=this.pageState.focusLayerId)&&void 0!==e?e:this.currentPageId}},{key:"focusLayerShape",get:function(){var e=this.pageState.focusLayerId;if(e)return this.getShapeById(e)}},{key:"popFocusLayer",value:function(){var t=this,e=this.pageState.focusLayerId,n=e&&this.getShapeById(e);if(n){var r,i=this.findAncestor(n,function(e){return t.isShapeOfType(e,Hd)});this.setFocusLayer(null!==(r=null==i?void 0:i.id)&&void 0!==r?r:null),this.select(n.id)}else this.setFocusLayer(null),this.selectNone();return this}},{key:"setFocusLayer",value:function(e){return this._setFocusLayer(e),this}},{key:"editingId",get:function(){return this.pageState.editingId}},{key:"setEditingId",value:function(e){if(e){if(e!==this.editingId){var t=this.getShapeById(e),n=this.getShapeUtil(t);if(t&&n.canEdit(t)){this.setInstancePageState({editingId:e,hoveredId:null},!1);var r=this.viewportPageBounds,i=n.getEditingBounds(t),o=this.getPageTransformById(e),a=$o.FromPoints(na.applyToPoints(o,i.corners));r.contains(a)||(a.width>r.width||a.height>r.height?this.zoomToBounds(a.minX,a.minY,a.width,a.height):this.centerOnPoint(a.midX,a.midY))}}}else this.setInstancePageState({editingId:null});return this}},{key:"editingShape",get:function(){var e;return this.editingId&&null!==(e=this.getShapeById(this.editingId))&&void 0!==e?e:null}},{key:"hoveredId",get:function(){return this.pageState.hoveredId}},{key:"setHoveredId",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return e===this.pageState.hoveredId||this.setInstancePageState({hoveredId:e},!0),this}},{key:"hoveredShape",get:function(){var e;return this.hoveredId&&null!==(e=this.getShapeById(this.hoveredId))&&void 0!==e?e:null}},{key:"hintingIds",get:function(){return this.pageState.hintingIds}},{key:"setHintingIds",value:function(t){return this.store.update(this.pageState.id,function(e){return Pe(Pe({},e),{},{hintingIds:B(t)})}),this}},{key:"erasingIds",get:function(){return this.pageState.erasingIds}},{key:"erasingIdsSet",get:function(){return new Set(this.erasingIds)}},{key:"setErasingIds",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this.erasingIdsSet;return e.length===t.size&&e.every(function(e){return t.has(e)})||this.setInstancePageState({erasingIds:e},!0),this}},{key:"croppingId",get:function(){return this.pageState.croppingId}},{key:"setCroppingId",value:function(e){if(e!==this.croppingId)if(e){var t=this.getShapeById(e),n=this.getShapeUtil(t);t&&n.canCrop(t)&&this.setInstancePageState({croppingId:e,hoveredId:null})}else this.setInstancePageState({croppingId:null}),this.isInAny("select.crop","select.pointing_crop_handle","select.cropping")&&this.setSelectedTool("select.idle");return this}},{key:"cameraId",get:function(){return sn.createId(this.currentPageId)}},{key:"camera",get:function(){return this.store.get(this.cameraId)}},{key:"zoomLevel",get:function(){return this.camera.z}},{key:"updateViewportScreenBounds",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.getContainer();if(!t)return this;var n=t.getBoundingClientRect(),r=new $o(0,0,Math.max(n.width,1),Math.max(n.height,1)),i=r.equals(this.viewportScreenBounds),o=this._willSetInitialBounds;if(i)this._willSetInitialBounds=!1;else if(o)this._willSetInitialBounds=!1,this.updateInstanceState({screenBounds:r.toJson()},!0,!0);else{var a=this.zoomLevel;if(e){var s=this.viewportPageCenter;this.updateInstanceState({screenBounds:r.toJson()},!0,!0);var l=this.viewportPageCenter;this.instanceState.followingUserId||this.pan((l.x-s.x)*a,(l.y-s.y)*a)}else{var u=this.screenToPage(0,0);this.updateInstanceState({screenBounds:r.toJson()},!0,!0);var c=this.screenToPage(0,0);this.instanceState.followingUserId||this.pan((c.x-u.x)*a,(c.y-u.y)*a)}}this._tickCameraState(),this.updateRenderingBounds();var d=this.editingId;return d&&this.panZoomIntoView([d]),this}},{key:"viewportScreenBounds",get:function(){var e=this.instanceState.screenBounds,t=e.x,n=e.y,r=e.w,i=e.h;return new $o(t,n,r,i)}},{key:"viewportScreenCenter",get:function(){return this.viewportScreenBounds.center}},{key:"viewportPageBounds",get:function(){var e=this.viewportScreenBounds,t=e.x,n=e.y,r=e.w,i=e.h,o=this.screenToPage(t,n),a=this.screenToPage(t+r,n+i);return new $o(o.x,o.y,a.x-o.x,a.y-o.y)}},{key:"viewportPageCenter",get:function(){return this.viewportPageBounds.center}},{key:"screenToPage",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.5,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.camera,i=this.store.unsafeGetWithoutCapture(Un).screenBounds,o=r.x,a=r.y,s=r.z,l=void 0===s?1:s;return{x:(e-i.x)/l-o,y:(t-i.y)/l-a,z:n}}},{key:"pageToScreen",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.5,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this.camera,i=r.x,o=r.y,a=r.z,s=void 0===a?1:a;return{x:e+i*s,y:t+o*s,z:n}}},{key:"cameraState",get:function(){return this._cameraState.value}},{key:"computeUnorderedRenderingShapes",value:function(e){var t,y=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},b=n.renderingBounds,w=n.renderingBoundsExpanded,x=n.erasingIdsSet,k=n.editingId,S=[],_=ns,E=0,r=function e(t,n,r){var i,o;if(mn.isId(t)){var a,s=ce(y.getSortedChildIds(t));try{for(s.s();!(a=s.n()).done;)e(a.value,n,r)}catch(e){s.e(e)}finally{s.f()}}else{var l=y.getShapeById(t);if(l){var u=l.opacity*n,c=!1;!r&&null!=x&&x.has(t)&&(c=!0,u*=.32);var d=y.getMaskedPageBoundsById(t),f=!!d&&(null===(i=null==b?void 0:b.includes(d))||void 0===i||i),p=!d||null===(o=k!==t&&!(null!=w&&w.includes(d)))||void 0===o||o;S.push({id:t,index:_,backgroundIndex:E,opacity:u,isCulled:p,isInViewport:f,maskedPageBounds:d}),_+=1,E+=1;var h=y.getSortedChildIds(t);if(h.length){var v=null;y.getShapeUtil(l).providesBackgroundForChildren(l)&&(v=E,E=_,_+=ns);var g,m=ce(h);try{for(m.s();!(g=m.n()).done;)e(g.value,u,r||c)}catch(e){m.e(e)}finally{m.f()}null!==v&&(E=v)}}}},i=ce(e);try{for(i.s();!(t=i.n()).done;)r(t.value,1,!1)}catch(e){i.e(e)}finally{i.f()}return S}},{key:"renderingShapes",get:function(){return this.computeUnorderedRenderingShapes([this.currentPageId],{renderingBounds:this.renderingBounds,renderingBoundsExpanded:this.renderingBoundsExpanded,erasingIdsSet:this.erasingIdsSet,editingId:this.editingId}).sort(me)}},{key:"renderingBounds",get:function(){return this._renderingBounds.value}},{key:"renderingBoundsExpanded",get:function(){return this._renderingBoundsExpanded.value}},{key:"updateRenderingBounds",value:function(){var e=this.viewportPageBounds;return e.equals(this._renderingBounds.__unsafe__getWithoutCapture())||(this._renderingBounds.set(e.clone()),this._renderingBoundsExpanded.set(e.clone().expandBy(100/this.zoomLevel))),this}},{key:"getTransform",value:function(e){return na.Compose(na.Translate(e.x,e.y),na.Rotate(e.rotation))}},{key:"getParentTransform",value:function(e){var t;return yn(e.parentId)?na.Identity():null!==(t=this._pageTransformCache.get(e.parentId))&&void 0!==t?t:na.Identity()}},{key:"getPageTransform",value:function(e){return this.getPageTransformById(e.id)}},{key:"getPageTransformById",value:function(e){return this._pageTransformCache.get(e)}},{key:"getPagePointById",value:function(e){var t=this.getPageTransformById(e);if(t)return na.applyToPoint(t,new xo)}},{key:"getPageCenter",value:function(e){var t=this.getPageTransformById(e.id);if(!t)return null;var n=this.getShapeUtil(e).center(e);return na.applyToPoint(t,n)}},{key:"getPageCenterById",value:function(e){var t=this.getShapeById(e);return this.getPageCenter(t)}},{key:"getPageRotation",value:function(e){return this.getPageRotationById(e.id)}},{key:"getPageRotationById",value:function(e){var t=this.getPageTransformById(e);return t?na.Decompose(t).rotation:0}},{key:"getBounds",value:function(e){return this.getShapeUtil(e).bounds(e)}},{key:"getBoundsById",value:function(e){var t=this.getShapeById(e);if(t)return this.getBounds(t)}},{key:"getPageBounds",value:function(e){return this.getPageBoundsById(e.id)}},{key:"getPageBoundsById",value:function(e){return this._pageBoundsCache.get(e)}},{key:"_clipPathCache",get:function(){var i=this;return this.store.createComputedCache("clipPathCache",function(e){var t=i._pageMaskCache.get(e.id);if(t){var n=i._pageTransformCache.get(e.id);if(n){if(0===t.length)return"polygon(0px 0px, 0px 0px, 0px 0px)";var r=na.applyToPoints(na.Inverse(n),t);return"polygon(".concat(r.map(function(e){return"".concat(e.x,"px ").concat(e.y,"px")}).join(","),")")}}})}},{key:"getClipPathById",value:function(e){return this._clipPathCache.get(e)}},{key:"_pageMaskCache",get:function(){var n=this;return this.store.createComputedCache("pageMaskCache",function(e){if(!yn(e.parentId)){var t=n.getAncestorsById(e.id).filter(function(e){return n.isShapeOfType(e,qd)});if(0!==t.length)return t.map(function(e){return na.applyToPoints(n._pageTransformCache.get(e.id),n.getOutline(e))}).reduce(function(e,t){var n;return t&&e&&null!==(n=ba(e,t))&&void 0!==n?n:void 0})}})}},{key:"getPageMaskById",value:function(e){return this._pageMaskCache.get(e)}},{key:"getMaskedPageBounds",value:function(e){return this.getMaskedPageBoundsById(e.id)}},{key:"getMaskedPageBoundsById",value:function(e){var t=this._pageBoundsCache.get(e);if(t){var n=this._pageMaskCache.get(e);if(n){var r=ba(n,t.corners);if(!r)return;return $o.FromPoints(r)}return t}}},{key:"getOutline",value:function(e){return this.getShapeUtil(e).outline(e)}},{key:"getOutlineById",value:function(e){return this.getOutline(this.getShapeById(e))}},{key:"getAncestors",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=e.parentId;if(yn(n))return t.reverse(),t;var r=this.store.get(n);return r?(t.push(r),this.getAncestors(r,t)):t}},{key:"getAncestorsById",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=this.getShapeById(e);return n?this.getAncestors(n,t):t}},{key:"findAncestor",value:function(e,t){var n=e.parentId;if(!yn(n)){var r=this.getShapeById(n);return r?t(r)?r:this.findAncestor(r,t):void 0}}},{key:"hasAncestor",value:function(e,t){return!!e&&(e.parentId===t||this.hasAncestor(this.getParentShape(e),t))}},{key:"findCommonAncestor",value:function(e,t){var n=this;if(0!==e.length){if(1===e.length){var r,i=e[0].parentId;if(yn(i))return;return t?null===(r=this.findAncestor(e[0],t))||void 0===r?void 0:r.id:i}for(var o=p(e),a=o[0],s=o.slice(1),l=this.getParentShape(a);l;)if(!t||t(l)){if(s.every(function(e){return n.hasAncestor(e,l.id)}))return l.id;l=this.getParentShape(l)}else l=this.getParentShape(l)}}},{key:"isShapeOrAncestorLocked",value:function(e){return void 0!==e&&(!!e.isLocked||this.isShapeOrAncestorLocked(this.getParentShape(e)))}},{key:"allShapesCommonBounds",get:function(){var n=this,r=null;return this.currentPageShapeIds.forEach(function(e){var t=n.getMaskedPageBoundsById(e);t&&(r?r.expand(t):r=t.clone())}),r}},{key:"getPageCorners",value:function(e){var t=this.getAncestors(e),n=this.getBounds(e).corners,r=na.Compose.apply(na,de(t.flatMap(function(e){return[na.Translate(e.x,e.y),na.Rotate(e.rotation)]})).concat([na.Translate(e.x,e.y),na.Rotate(e.rotation,0,0)]));return na.applyToPoints(r,n)}},{key:"isPointInShape",value:function(e,t){var n=this.getShapeUtil(t),r=this._pageMaskCache.get(t.id);return!(r&&!Ho(e,r))&&n.hitTestPoint(t,this.getPointInShapeSpace(t,e))}},{key:"getShapesAtPoint",value:function(n){var r=this;return this.shapesArray.filter(function(e){var t=r._pageMaskCache.get(e.id);return t?Ho(n,t):r.getShapeUtil(e).hitTestPoint(e,r.getPointInShapeSpace(e,n))})}},{key:"getPointInShapeSpace",value:function(e,t){return na.applyToPoint(na.Inverse(this.getPageTransform(e)),t)}},{key:"getPointInParentSpace",value:function(e,t){var n=this.getShapeById(e);if(!n)return new xo(0,0);if(yn(n.parentId))return xo.From(t);var r=this.getPageTransformById(n.parentId);return r?na.applyToPoint(na.Inverse(r),t):xo.From(t)}},{key:"getDeltaInShapeSpace",value:function(e,t){var n=this.getPageTransform(e);return n?xo.Rot(t,-na.Decompose(n).rotation):xo.From(t)}},{key:"getDeltaInParentSpace",value:function(e,t){if(yn(e.parentId))return xo.From(t);var n=this.getShapeById(e.parentId);return n?this.getDeltaInShapeSpace(n,t):xo.From(t)}},{key:"getParentsMappedToChildren",value:function(e){var t=this,n=e.map(function(e){return t.store.get(e)}),r=new Map;return n.forEach(function(e){var t;r.has(e.parentId)||r.set(e.parentId,new Set),null===(t=r.get(e.parentId))||void 0===t||t.add(e)}),r}},{key:"selectedPageBounds",get:function(){var t=this,e=this.pageState.selectedIds;return 0===e.length?null:$o.Common(U(e.map(function(e){return t.getPageBoundsById(e)})))}},{key:"selectionRotation",get:function(){var t=this,e=this.selectedIds;if(0===e.length)return 0;if(1===e.length)return this.getPageRotationById(this.selectedIds[0]);var n=e.map(function(e){return t.getPageRotationById(e)%(Math.PI/2)});return n.every(function(e){return Math.abs(e-n[0])<Math.PI/180})?this.getPageRotationById(e[0]):0}},{key:"selectionBounds",get:function(){var n=this,e=this.selectedIds;if(0!==e.length){var t=this.selectionRotation;if(0===t)return this.selectedPageBounds;if(1===e.length){var r=this.getBounds(this.getShapeById(e[0])).clone();return r.point=na.applyToPoint(this.getPageTransformById(e[0]),r.point),r}var i=this.selectedIds.flatMap(function(e){var t=n.getPageTransformById(e);return t?n.getOutlineById(e).map(function(e){return na.applyToPoint(t,e)}):[]}).map(function(e){return xo.Rot(e,-t)}),o=$o.FromPoints(i);return o.point=o.point.rot(t),o}}},{key:"selectionPageCenter",get:function(){var e=this.selectionBounds,t=this.selectionRotation;return e?xo.RotWith(e.center,e.point,t):null}},{key:"currentToolId",get:function(){var e,t=this.root.current.value,n=null==t?void 0:t.id;if("select"===n||"zoom"===n){var r,i,o=null==t?void 0:t.current.value;n=null!==(r=null==o||null===(i=o.info)||void 0===i?void 0:i.onInteractionEnd)&&void 0!==r?r:"select"}return null!==(e=n)&&void 0!==e?e:"select"}},{key:"setSelectedTool",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return this.root.transition(e,t),this}},{key:"getStateDescendant",value:function(e){for(var t=e.split(".").reverse(),n=this.root;0<t.length;){var r,i=t.pop();if(!i)return n;var o=null===(r=n.children)||void 0===r?void 0:r[i];if(!o)return;n=o}return n}},{key:"isIn",value:function(e){for(var t=e.split(".").reverse(),n=this.root;0<t.length;){var r=t.pop();if(!r)return!0;var i=n.current.value;if((null==i?void 0:i.id)!==r)return!1;if(0===t.length)return!0;n=i}return!1}},{key:"isInAny",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.some(function(e){return t.isIn(e)})}},{key:"_updateInputsFromEvent",value:function(e){var t,n,r=this.inputs,i=r.previousScreenPoint,o=r.previousPagePoint,a=r.currentScreenPoint,s=r.currentPagePoint,l=this.store.unsafeGetWithoutCapture(Un).screenBounds,u=e.point,c=u.x,d=u.y,f=u.z,p=this.camera,h=p.x,v=p.y,g=p.z;i.setTo(a),o.setTo(s),a.set(c,d),s.set((c-l.x)/g-h,(d-l.y)/g-v,null!=f?f:.5),this.inputs.isPen="pointer"===e.type&&e.isPen,"pointer_down"===e.name&&this.inputs.pointerVelocity.set(0,0),this.store.put([{id:$n,typeName:"pointer",x:s.x,y:s.y,lastActivityTimestamp:"pointer"===e.type&&-10===e.pointerId&&null!==(t=null===(n=this.store.get($n))||void 0===n?void 0:n.lastActivityTimestamp)&&void 0!==t?t:Date.now()}])}},{key:"cancelDoubleClick",value:function(){this._clickManager.cancelDoubleClickTimeout()}},{key:"dispatch",value:function(K){var V=this;if(this.crashingError)return this;var W=this.inputs,H=K.type;return this.batch(function(){if("misc"===K.type)return"cancel"!==K.name&&"complete"!==K.name||(V.inputs.isDragging=!1,V.inputs.isPanning&&(V.inputs.isPanning=!1,V.setCursor({type:V._prevCursor}))),void V.root.handleEvent(K);K.shiftKey?(clearInterval(V._shiftKeyTimeout),V._shiftKeyTimeout=-1,W.shiftKey=!0):!K.shiftKey&&W.shiftKey&&-1===V._shiftKeyTimeout&&(V._shiftKeyTimeout=setTimeout(V._setShiftKeyTimeout,150)),K.altKey?(clearInterval(V._altKeyTimeout),V._altKeyTimeout=-1,W.altKey=!0):!K.altKey&&W.altKey&&-1===V._altKeyTimeout&&(V._altKeyTimeout=setTimeout(V._setAltKeyTimeout,150)),K.ctrlKey?(clearInterval(V._ctrlKeyTimeout),V._ctrlKeyTimeout=-1,W.ctrlKey=!0):!K.ctrlKey&&W.ctrlKey&&-1===V._ctrlKeyTimeout&&(V._ctrlKeyTimeout=setTimeout(V._setCtrlKeyTimeout,150));var e=W.originPagePoint,t=W.originScreenPoint,n=W.currentPagePoint,r=W.currentScreenPoint;switch(W.isPointing||(W.isDragging=!1),H){case"pinch":if(!V.canMoveCamera)return;switch(V._updateInputsFromEvent(K),K.name){case"pinch_start":if(W.isPinching)return;return void(W.isEditing||(V._pinchStart=V.camera.z,V._selectedIdsAtPointerDown.length||(V._selectedIdsAtPointerDown=V.selectedIds.slice()),V._didPinch=!0,W.isPinching=!0,V.interrupt()));case"pinch":if(!W.isPinching)return;var i=K.point,o=i.x,a=i.y,s=i.z,l=void 0===s?1:s,u=K.delta,c=u.x,d=u.y,f=V.camera,p=f.x,h=f.y,v=f.z,g=Math.min(8,Math.max(.1,l));return void V.setCamera(p+c/v-o/v+o/g,h+d/v-a/v+a/g,g);case"pinch_end":if(!W.isPinching)return V;W.isPinching=!1;var m=V._selectedIdsAtPointerDown;V.setSelectedIds(V._selectedIdsAtPointerDown,!0),V._selectedIdsAtPointerDown=[];var y,b=V.camera,w=b.x,x=b.y,k=b.z;if(.9<k&&k<1.05?y=1:.49<k&&k<.505&&(y=.5),k>V._pinchStart-.1&&k<V._pinchStart+.05&&(y=V._pinchStart),void 0!==y){var S=V.viewportScreenCenter,_=S.x,E=S.y;V.animateCamera(w+(_/y-_)-(_/k-_),x+(E/y-E)-(E/k-E),y,{duration:100})}return void(V._didPinch&&(V._didPinch=!1,requestAnimationFrame(function(){V._didPinch||V.setSelectedIds(m,!0)})))}case"wheel":if(!V.canMoveCamera)return;if(V.isMenuOpen);else{if(W.ctrlKey){var P,C=V.inputs.currentScreenPoint,I=C.x,T=C.y,M=V.camera,A=M.x,j=M.y,O=M.z,L=Math.min(8,Math.max(.1,O+(null!==(P=K.delta.z)&&void 0!==P?P:0)*O));return void V.setCamera(A+(I/L-I)-(I/O-I),j+(T/L-T)-(T/O-T),L)}V.pan(K.delta.x,K.delta.y),!W.isDragging&&W.isPointing&&e.dist(n)>(V.isCoarsePointer?6:4)/V.zoomLevel&&(W.isDragging=!0)}break;case"pointer":if(W.isPinching)return;V._updateInputsFromEvent(K);var z=K.isPen;switch(K.name){case"pointer_down":if(V._selectedIdsAtPointerDown=V.selectedIds.slice(),0===K.button&&(V.capturedPointerId=K.pointerId),W.buttons.add(K.button),W.isPointing=!0,W.isDragging=!1,V.isPenMode)if(z)V._touchEventsRemainingBeforeExitingPenMode=3;else{if(V._touchEventsRemainingBeforeExitingPenMode--,0!==V._touchEventsRemainingBeforeExitingPenMode)return;V.setPenMode(!1)}else z&&V.setPenMode(!0);if(5===K.button?(V._restoreToolId=V.currentToolId,V.complete(),V.setSelectedTool("eraser")):1===K.button&&(V.inputs.isPanning||(V._prevCursor=V.instanceState.cursor.type),V.inputs.isPanning=!0),V.inputs.isPanning)return V.stopCameraAnimation(),V.setCursor({type:"grabbing"}),V;t.setTo(r),e.setTo(n);break;case"pointer_move":if(!z&&V.isPenMode)return;if(V.inputs.isPanning&&V.inputs.isPointing){var R=V.inputs,N=R.currentScreenPoint,D=R.previousScreenPoint,B=xo.Sub(N,D);return void V.pan(B.x,B.y)}!W.isDragging&&W.isPointing&&e.dist(n)>(V.isCoarsePointer?6:4)/V.zoomLevel&&(W.isDragging=!0);break;case"pointer_up":if(W.buttons.delete(K.button),W.isPointing=!1,W.isDragging=!1,V.isMenuOpen)return;if(!z&&V.isPenMode)return;V.capturedPointerId===K.pointerId&&(V.capturedPointerId=null,K.button=0),W.isPanning?1===K.button?V.inputs.keys.has(" ")?(V.slideCamera({speed:Math.min(2,V.inputs.pointerVelocity.len()),direction:V.inputs.pointerVelocity,friction:.09}),V.setCursor({type:"grab"})):(W.isPanning=!1,V.slideCamera({speed:Math.min(2,V.inputs.pointerVelocity.len()),direction:V.inputs.pointerVelocity,friction:.09}),V.setCursor({type:V._prevCursor})):0===K.button&&(V.slideCamera({speed:Math.min(2,V.inputs.pointerVelocity.len()),direction:V.inputs.pointerVelocity,friction:.09}),V.setCursor({type:"grab"})):5===K.button&&(V.complete(),V.setSelectedTool(V._restoreToolId))}break;case"keyboard":switch("ShiftRight"===K.key&&(K.key="ShiftLeft"),"AltRight"===K.key&&(K.key="AltLeft"),"ControlRight"===K.code&&(K.code="ControlLeft"),K.name){case"key_down":W.keys.add(K.code),K.ctrlKey||"Space"!==K.code||(V.inputs.isPanning||(V._prevCursor=V.instanceState.cursor.type),V.inputs.isPanning=!0,V.setCursor({type:V.inputs.isPointing?"grabbing":"grab"}));break;case"key_up":W.keys.delete(K.code),"Space"!==K.code||V.inputs.buttons.has(1)||(V.inputs.isPanning=!1,V.setCursor({type:V._prevCursor}))}}if("pointer"===K.type&&(1===K.button?K.name="middle_click":2===K.button&&(K.name="right_click"),K.isPen===V.isPenMode))switch(K.name){case"pointer_down":var F=V._clickManager.transformPointerDownEvent(K);if(K.name!==F.name)return V.root.handleEvent(K),V.emit("event",K),V.root.handleEvent(F),void V.emit("event",F);break;case"pointer_up":var U=V._clickManager.transformPointerUpEvent(K);if(K.name!==U.name)return V.root.handleEvent(K),V.emit("event",K),V.root.handleEvent(U),void V.emit("event",U);break;case"pointer_move":V._clickManager.handleMove()}V.root.handleEvent(K),V.emit("event",K)}),this}},{key:"replaceStoreContentsWithRecordsForOtherDocument",value:function(s){var i=this;Pt(function(){i.store.clear();var e=Ce(function(e,t){var n,r=[],i=[],o=ce(s);try{for(o.s();!(n=o.n()).done;){var a=n.value;"shape"===a.typeName?r.push(a):i.push(a)}}catch(e){o.e(e)}finally{o.f()}return[r,i]}(),2),t=e[0],n=e[1];i.store.put(n,"initialize"),i.store.ensureStoreIsUsable(),i.store.put(t,"initialize"),i.history.clear(),i.updateViewportScreenBounds(),i.updateRenderingBounds();var r=i.allShapesCommonBounds;r&&i.zoomToBounds(r.minX,r.minY,r.width,r.height,1)})}},{key:"getContent",value:function(){var g=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(e&&0!==e.length){var m={},y=B(e.map(function(e){return g.getShapeById(e)}).sort(I).flatMap(function(e){var t=[e];return g.visitDescendants(e.id,function(e){t.push(g.getShapeById(e))}),t}));y=y.map(function(e){if(m[e.id]=g.getPageTransformById(e.id),e=be(e),g.isShapeOfType(e,id)){var t="binding"===e.props.start.type?e.props.start.boundShapeId:void 0,n="binding"===e.props.end.type?e.props.end.boundShapeId:void 0,r=g.getShapeUtil(id).getArrowInfo(e);if("binding"===e.props.start.type&&!y.some(function(e){return e.id===t}))if(null!=r&&r.isValid){var i=r.start.point,o=i.x,a=i.y;e.props.start={type:"point",x:o,y:a}}else{var s=Vc(g,e).start;e.props.start={type:"point",x:s.x,y:s.y}}if("binding"===e.props.end.type&&!y.some(function(e){return e.id===n}))if(null!=r&&r.isValid){var l=r.end.point,u=l.x,c=l.y;e.props.end={type:"point",x:u,y:c}}else{var d=Vc(g,e).end;e.props.end={type:"point",x:d.x,y:d.y}}var f=Fc(e)?Yc(g,e):Gc(g,e);if(null!=r&&r.isValid&&null!=f&&f.isValid&&!Fc(e)){var p=xo.Med(r.start.handle,r.end.handle),h=xo.Dist(r.middle,p),v=xo.Dist(f.middle,p);e.props.bend<0?e.props.bend+=v-h:e.props.bend-=v-h}return e}return e});var r=[];y.forEach(function(t){if(void 0===y.find(function(e){return e.id===t.parentId})){var e=g.getPagePointById(t.id),n=g.getPageRotationById(t.id);t.x=e.x,t.y=e.y,t.rotation=n,t.parentId=g.currentPageId,r.push(t.id)}});var t=new Set;return y.forEach(function(e){"assetId"in e.props&&null!==e.props.assetId&&t.add(e.props.assetId)}),{shapes:y,rootShapeIds:r,schema:this.store.schema.serialize(),assets:U(Array.from(t).map(function(e){return g.getAssetById(e)}))}}}},{key:"putContent",value:function(e){var a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.isReadOnly)return this;if(!e.schema)throw Error("Could not put content: content is missing a schema.");var n,r=t.select,s=void 0!==r&&r,i=t.preserveIds,o=void 0!==i&&i,l=t.preservePosition,u=void 0!==l&&l,c=t.point,d=void 0===c?void 0:c,f=this.currentPageId,p=e.assets,h=e.shapes,v=e.rootShapeIds,g=new Map(h.map(function(e){return[e.id,Rr()]})),m=this.currentPageId,y=1/0,b=[],w=ce(this.selectedShapes);try{for(w.s();!(n=w.n()).done;){var x=n.value;if(0===y)break;var k=this.isShapeOfType(x,qd),S=this.getAncestors(x);k&&S.push(x);var _=k?S.length+1:S.length;if(_<y)y=_,b=S,m=k?x.id:x.parentId;else if(_===y){if(b.length!==S.length)throw Error("Ancestors: ".concat(b.length," !== ").concat(S.length));if(0===b.length){m=f;break}m=f;for(var E=0;E<b.length&&S[E]===b[E];E++)m=S[E].id}}}catch(e){w.e(e)}finally{w.f()}var P=!1;if(!yn(m)){var C=this.getShapeById(m);if(C)if(this.viewportPageBounds.includes(this.getPageBounds(C))){if(1===v.length){var I=h.find(function(e){return e.id===v[0]});this.isShapeOfType(C,qd)&&this.isShapeOfType(I,qd)&&I.props.w===(null==C?void 0:C.props.w)&&I.props.h===(null==C?void 0:C.props.h)&&(P=!0)}}else m=f;else m=f}P||(P=g.has(m)),P&&(m=this.getShapeById(m).parentId);var T=this.getHighestIndexForParent(m),M=[],A=h.map(function(e){var t;if(o)t=ne(e),g.set(e.id,e.id);else{var n=g.get(e.id);t=ne(Pe(Pe({},e),{},{id:n}))}if(v.includes(e.id)&&(t.parentId=f,M.push(t)),g.has(t.parentId)?t.parentId=g.get(e.parentId):(v.push(t.id),T=ee(t.index=T)),a.isShapeOfType(t,id)){if("binding"===t.props.start.type){var r=g.get(t.props.start.boundShapeId);t.props.start=r?Pe(Pe({},t.props.start),{},{boundShapeId:r}):{type:"point",x:0,y:0}}if("binding"===t.props.end.type){var i=g.get(t.props.end.boundShapeId);t.props.end=i?Pe(Pe({},t.props.end),{},{boundShapeId:i}):{type:"point",x:0,y:0}}}return t});if(A.length+this.currentPageShapeIds.size>ns)return tv(this),this;var j,O=[];if(p){for(var L=0;L<p.length;L++){var z=p[L],R=this.store.schema.migratePersistedRecord(z,e.schema);if("success"!==R.type)throw Error("Could not put content: could not migrate content for asset:\n".concat(JSON.stringify(z,null,2)));p[L]=R.value}var N=[];O=p.filter(function(e){return!a.store.has(e.id)}).map(function(e){var t;return"image"!==e.type&&"video"!==e.type||(e.props.src&&null!==(t=e.props.src)&&void 0!==t&&t.startsWith("data:image")?(N.push(be(e)),e.props.src=null):N.push(be(e))),e}),Promise.allSettled(N.map((j=ao(io().mark(function e(t){var n,r,i;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fp(t.props.src,t.props.name,null!==(n=t.props.mimeType)&&void 0!==n?n:"image/png");case 2:return r=e.sent,e.next=5,a.externalContentManager.createAssetFromFile(a,r);case 5:return i=e.sent,e.abrupt("return",[t,i]);case 7:case"end":return e.stop()}},e)})),function(e){return j.apply(this,arguments)}))).then(function(e){a.updateAssets(U(e.map(function(e){return"fulfilled"===e.status?Pe(Pe({},e.value[1]),{},{id:e.value[0].id}):void 0})))})}for(var D=0;D<A.length;D++){var B=A[D],F=this.store.schema.migratePersistedRecord(B,e.schema);if("success"!==F.type)throw Error("Could not put content: could not migrate content for shape:\n".concat(JSON.stringify(B,null,2)));A[D]=F.value}return this.batch(function(){0<O.length&&a.createAssets(O),a.createShapes(A,s),m!==f&&a.reparentShapesById(M.map(function(e){return e.id}),m);var e=A.map(function(e){return a.getShapeById(e.id)}),o=$o.Common(e.map(function(e){return a.getPageBounds(e)}));if(void 0===d)if(yn(m)){var t=a.viewportPageBounds;d=u||t.includes($o.From(o))?o.center:t.center}else{var n=a.getShapeById(m),r=a.getShapeUtil(n);d=r.center(n)}if(1===M.length){var i=M[0];if(a.isShapeOfType(i,qd))for(;a.getShapesAtPoint(d).some(function(e){return a.isShapeOfType(e,qd)&&e.props.w===i.props.w&&e.props.h===i.props.h});)d.x+=o.w+16}a.updateShapes(M.map(function(e){var t,n,r=(null!==(t=e.x)&&void 0!==t?t:0)-(o.x+o.w/2),i=(null!==(n=e.y)&&void 0!==n?n:0)-(o.y+o.h/2);return{id:e.id,type:e.type,x:d.x+r,y:d.y+i}}))}),this}},{key:"createShapes",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this._createShapes(e,t),this}},{key:"animateShapes",value:function(s){var l,u,c=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=e.duration,d=void 0===t?500:t,n=e.ease,f=void 0===n?wo.linear:n,p=ac(),h=d,v=[];return s.forEach(function(e){if(e){var t={partial:e,values:[]},n=c.getShapeById(e.id);if(n){for(var r=0,i=["x","y","rotation"];r<i.length;r++){var o=i[r];void 0!==e[o]&&n[o]!==e[o]&&t.values.push({prop:o,from:n[o],to:e[o]})}v.push(t),c.animatingShapes.set(n.id,p)}}}),this.addListener("tick",function e(t){if((h-=t)<0){var n=c.animatingShapes,r=s.filter(function(e){return e&&n.get(e.id)===p});return r.length&&c.updateShapes(r,!1),void c.removeListener("tick",e)}l=f(1-h/d);var i=c.animatingShapes;try{for(var o=[],a=0;a<v.length;a++)u=v[a],i.get(u.partial.id)===p&&o.push(Pe({id:u.partial.id,type:u.partial.type},u.values.reduce(function(e,t){var n=t.prop,r=t.from,i=t.to;return e[n]=r+(i-r)*l,e},{})));c._updateShapes(o,!0)}catch(e){}}),this}},{key:"updateShapes",value:function(e){var n=this,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=U(e);return 0<this.animatingShapes.size&&r.forEach(function(e){return n.animatingShapes.delete(e.id)}),r=r.filter(function(e){var t=n.getShapeById(e.id);return!(!t||n.isShapeOrAncestorLocked(t)&&!Object.hasOwn(e,"isLocked"))}),this._updateShapes(r,t),this}},{key:"_getUnlockedShapeIds",value:function(e){var n=this;return e.filter(function(e){var t;return!(null!==(t=n.getShapeById(e))&&void 0!==t&&t.isLocked)})}},{key:"deleteShapes",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selectedIds;return this._deleteShapes(this._getUnlockedShapeIds(e)),this}},{key:"locale",get:function(){return this.user.locale}},{key:"setLocale",value:function(e){this.user.updateUserPreferences({locale:e})}},{key:"updatePage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this._updatePage(e,t),this}},{key:"createPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:mn.createId(),n=2<arguments.length?arguments[2]:void 0;return this._createPage(e,t,n),this}},{key:"duplicatePage",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.currentPageId,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:mn.createId();if(40<=this.pages.length)return this;var r=this.getPageById(t);if(!r)return this;var i=Pe({},this.camera),o=this.getContent(this.getSortedChildIds(r.id));return this.batch(function(){if(e.createPage(r.name+" Copy",n,r.index),e.setCurrentPageId(n),e.setCamera(i.x,i.y,i.z),o)return e.putContent(o)}),this}},{key:"deletePage",value:function(e){this._deletePage(e)}},{key:"_assets",get:function(){return this.store.query.records("asset")}},{key:"assets",get:function(){return this._assets.value}},{key:"createAssets",value:function(e){return this._createAssets(e),this}},{key:"deleteAssets",value:function(e){return this._deleteAssets(e),this}},{key:"updateAssets",value:function(e){return this._updateAssets(e),this}},{key:"getAssetBySrc",value:function(t){return this.assets.find(function(e){return e.props.src===t})}},{key:"getAssetById",value:function(e){return this.store.get(e)}},{key:"renamePage",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return this.isReadOnly||this.updatePage({id:e,name:t},n),this}},{key:"moveShapesToPage",value:function(r,i){var o=this;if(0===r.length)return this;if(this.isReadOnly)return this;var e=this.currentPageId;if(i===e)return this;if(!this.store.has(i))return this;var a=this.getContent(r);if(!a)return this;if(this.getShapeIdsInPage(i).size+a.shapes.length>ns)return tv(this,i),this;var s=this.camera.z;return this.history.batch(function(){o.deleteShapes(r),o.setCurrentPageId(i),o.setFocusLayer(null),o.selectNone(),o.putContent(a,{select:!0,preserveIds:!0,preservePosition:!0});var e=o.selectionBounds.center,t=e.x,n=e.y;o.setCamera(o.camera.x,o.camera.y,s),o.centerOnPoint(t,n)}),this}},{key:"toggleLock",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(this.isReadOnly||0===e.length)return this;var t,n=!0,r=!0,i=[],o=ce(e);try{for(o.s();!(t=o.n()).done;){var a=t.value,s=this.getShapeById(a);s&&(i.push(s),s.isLocked?r=!1:n=!1)}}catch(e){o.e(e)}finally{o.f()}return r?(this.updateShapes(i.map(function(e){return{id:e.id,type:e.type,isLocked:!0}})),this.setSelectedIds([])):n?this.updateShapes(i.map(function(e){return{id:e.id,type:e.type,isLocked:!1}})):this.updateShapes(i.map(function(e){return{id:e.id,type:e.type,isLocked:!0}})),this}},{key:"reorderShapes",value:function(e,t){var h=this;if(this.isReadOnly)return this;if(0===t.length)return this;var n=this.getParentsMappedToChildren(t),v=[];switch(e){case"toBack":n.forEach(function(e,t){var n=U(h.getSortedChildIds(t).map(function(e){return h.getShapeById(e)}));if(e.size!==n.length){var r,i,o,a=ce(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(!e.has(s)){i=s.index;break}e.delete(s),r=s.index}}catch(e){a.e(e)}finally{a.f()}if(0!==e.size){var l=S(r,i,e.size);Array.from(e.values()).sort(I).forEach(function(e,t){return v.push({id:e.id,type:e.type,index:l[t]})})}}});break;case"toFront":n.forEach(function(e,t){var n=U(h.getSortedChildIds(t).map(function(e){return h.getShapeById(e)})),r=n.length;if(e.size!==r){for(var i,o,a=r-1;-1<a;a--){var s=n[a];if(!e.has(s)){i=s.index;break}e.delete(s),o=s.index}if(0!==e.size){var l=S(i,o,e.size);Array.from(e.values()).sort(I).forEach(function(e,t){return v.push({id:e.id,type:e.type,index:l[t]})})}}});break;case"forward":n.forEach(function(e,t){var n=U(h.getSortedChildIds(t).map(function(e){return h.getShapeById(e)})),r=n.length;if(e.size!==r)for(var i,o=new Set(Array.from(e).map(function(e){return n.indexOf(e)})),a=-1,s=!1,l=0;l<r;l++){var u=o.has(l);if(!s&&u)s=!0,a=l;else if(s&&!u){var c;s=!1,i=l-a;for(var d=S(n[l].index,null===(c=n[l+1])||void 0===c?void 0:c.index,i),f=0;f<i;f++){var p=n[a+f];v.push({id:p.id,type:p.type,index:d[f]})}}}});break;case"backward":n.forEach(function(e,t){var n=U(h.getSortedChildIds(t).map(function(e){return h.getShapeById(e)})),r=n.length;if(e.size!==r)for(var i,o=new Set(Array.from(e).map(function(e){return n.indexOf(e)})),a=-1,s=!1,l=r-1;-1<l;l--){var u=o.has(l);if(!s&&u)s=!0,a=l;else if(s&&!u){var c;s=!1,i=a-l;for(var d=S(null===(c=n[l-1])||void 0===c?void 0:c.index,n[l].index,i),f=0;f<i;f++){var p=n[l+f+1];v.push({id:p.id,type:p.type,index:d[f]})}}}})}return this.updateShapes(v),this}},{key:"sendToBack",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("toBack",e),this}},{key:"sendBackward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("backward",e),this}},{key:"bringForward",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("forward",e),this}},{key:"bringToFront",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds;return this.reorderShapes("toFront",e),this}},{key:"flipShapes",value:function(o){var a=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selectedIds;if(this.isReadOnly)return this;var s=U(e.map(function(e){return a.getShapeById(e)}));if(!s.length)return this;s=U(s.map(function(e){return a.isShapeOfType(e,Hd)?a.getSortedChildIds(e.id).map(function(e){return a.getShapeById(e)}):e}).flat());var l=$o.Common(U(s.map(function(e){return a.getPageBounds(e)}))).center;return this.batch(function(){var e,t=ce(s);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=a.getShapeUtil(n).bounds(n),i=a.getPageTransformById(n.id);i&&a.resizeShape(n.id,{x:"horizontal"===o?-1:1,y:"vertical"===o?-1:1},{initialBounds:r,initialPageTransform:i,initialShape:n,mode:"scale_shape",scaleOrigin:l,scaleAxisRotation:0})}}catch(e){t.e(e)}finally{t.f()}}),this}},{key:"stackShapes",value:function(e){var l=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds,n=2<arguments.length?arguments[2]:void 0;if(this.isReadOnly)return this;var o=U(t.map(function(e){return l.getShapeById(e)})).filter(function(e){return!!e&&(!l.isShapeOfType(e,id)||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)}),r=o.length;if(void 0===n&&r<3||r<2)return this;var u,a,s,c,d,f=Object.fromEntries(o.map(function(e){return[e.id,l.getPageBounds(e)]}));if(c="horizontal"===e?(u="x",a="minX",s="maxX","width"):(u="y",a="minY",s="maxY","height"),void 0===n){var p=[];o.sort(function(e,t){return f[e.id][a]-f[t.id][a]});for(var i=function(){var e=o[h],t=o[h+1],n=f[e.id],r=f[t.id][a]-n[s],i=p.find(function(e){return e.gap===r});i?i.count++:p.push({gap:r,count:1})},h=0;h<r-1;h++)i();var v=0;p.forEach(function(e){e.count>v&&(v=e.count,d=e.gap)}),1===v&&(d=Math.max(0,p.reduce(function(e,t){return e+t.gap*t.count},0)/(r-1)))}else d=n;var g=[],m=f[o[0].id][s];return o.forEach(function(e,t){var n,r;if(0!==t){var i={x:0,y:0};i[u]=m+d-f[e.id][u];var o=l.getParentShape(e),a=o?xo.Rot(i,-l.getPageRotation(o)):i,s=null===(n=(r=l.getShapeUtil(e)).onTranslateStart)||void 0===n?void 0:n.call(r,e);g.push(s?Pe(Pe({},s),{},Ee({},u,e[u]+a[u])):Ee({id:e.id,type:e.type},u,e[u]+a[u])),m+=f[e.id][c]+d}}),this.updateShapes(g),this}},{key:"packShapes",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.pageState.selectedIds,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:16;if(this.isReadOnly)return this;if(e.length<2)return this;for(var r,i,o=U(e.map(function(e){return t.getShapeById(e)}).filter(function(e){return!!e&&(!t.isShapeOfType(e,id)||"binding"!==e.props.start.type&&"binding"!==e.props.end.type)})),a={},s={},l=0,u=0;u<o.length;u++)r=o[u],i=this.getPageBounds(r),a[r.id]=i,s[r.id]=i.clone(),l+=i.width*i.height;var c=$o.Common(U(Object.values(a))),d=c.width;o.sort(function(e,t){return a[t.id].height-a[e.id].height});for(var f,p,h=Math.max(Math.ceil(Math.sqrt(l/.95)),d),v=[new $o(c.x,c.y,h,1/0)],g=0,m=0,y=0;y<o.length;y++){i=s[(r=o[y]).id];for(var b=v.length-1;0<=b;b--)if(f=v[b],!(i.width>f.width||i.height>f.height)){i.x=f.x,i.y=f.y,m=Math.max(m,i.maxY),g=Math.max(g,i.maxX),i.width===f.width&&i.height===f.height?(p=v.pop(),b<v.length&&(v[b]=p)):i.height===f.height?(f.x+=i.width+n,f.width-=i.width+n):(i.width===f.width||v.push(new $o(f.x+(i.width+n),f.y,f.width-(i.width+n),i.height)),f.y+=i.height+n,f.height-=i.height+n);break}}for(var w,x=$o.Common(Object.values(s)),k=xo.Sub(c.center,x.center),S=[],_=0;_<o.length;_++){var E,P;r=o[_],i=a[r.id],w=s[r.id];var C=this.getDeltaInParentSpace(r,xo.Sub(w.point,i.point).add(k)),I={id:r.id,type:r.type,x:r.x+C.x,y:r.y+C.y},T=null===(E=(P=this.getShapeUtil(r)).onTranslateStart)||void 0===E?void 0:E.call(P,Pe(Pe({},r),I));T?S.push(Pe(Pe({},I),T)):S.push(I)}return S.length&&this.updateShapes(S),this}},{key:"alignShapes",value:function(l){var u=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(e.length<2)return this;var t=U(e.map(function(e){return u.getShapeById(e)})),c=Object.fromEntries(t.map(function(e){return[e.id,u.getPageBounds(e)]})),d=$o.Common(U(Object.values(c))),f=[];return t.forEach(function(e){var t,n,r=c[e.id];if(r){var i={x:0,y:0};switch(l){case"top":i.y=d.minY-r.minY;break;case"center-vertical":i.y=d.midY-r.minY-r.height/2;break;case"bottom":i.y=d.maxY-r.minY-r.height;break;case"left":i.x=d.minX-r.minX;break;case"center-horizontal":i.x=d.midX-r.minX-r.width/2;break;case"right":i.x=d.maxX-r.minX-r.width}var o=u.getParentShape(e),a=o?xo.Rot(i,-u.getPageRotation(o)):i,s=null===(t=(n=u.getShapeUtil(e)).onTranslateStart)||void 0===t?void 0:t.call(n,e);f.push(s?Pe(Pe({},s),{},{x:e.x+a.x,y:e.y+a.y}):{id:e.id,type:e.type,x:e.x+a.x,y:e.y+a.y})}}),this.updateShapes(f),this}},{key:"distributeShapes",value:function(e){var l=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(t.length<3)return this;var u,n,r,i,c,o=t.length,a=U(t.map(function(e){return l.getShapeById(e)})),d=Object.fromEntries(a.map(function(e){return[e.id,l.getPageBounds(e)]}));c="horizontal"===e?(u="x",n="minX",r="maxX",i="midX","width"):(u="y",n="minY",r="maxY",i="midY","height");var f=[],s=a.sort(function(e,t){return d[e.id][n]-d[t.id][n]})[0],p=a.sort(function(e,t){return d[t.id][r]-d[e.id][r]})[0],h=d[s.id][i],v=(d[p.id][i]-h)/(o-1),g=h+v;return a.filter(function(e){return e!==s&&e!==p}).sort(function(e,t){return d[e.id][i]-d[t.id][i]}).forEach(function(e,t){var n,r,i={x:0,y:0};i[u]=g+v*t-d[e.id][c]/2-d[e.id][u];var o=l.getParentShape(e),a=o?xo.Rot(i,-l.getPageRotation(o)):i,s=null===(n=(r=l.getShapeUtil(e)).onTranslateStart)||void 0===n?void 0:n.call(r,e);f.push(s?Pe(Pe({},s),{},Ee({},u,e[u]+a[u])):Ee({id:e.id,type:e.type},u,e[u]+a[u]))}),this.updateShapes(f),this}},{key:"_resizeUnalignedShape",value:function(e,t,n){var r=n.initialShape.type,i=new xo(t.x,t.y);if(Math.abs(t.x)>Math.abs(t.y)?i.x=Math.sign(t.x)*Math.abs(t.y):i.y=Math.sign(t.y)*Math.abs(t.x),this.resizeShape(e,i,{initialShape:n.initialShape,initialBounds:n.initialBounds}),Math.sign(t.x)*Math.sign(t.y)<0){var o=na.Decompose(n.initialPageTransform).rotation;o-=2*o,this.updateShapes([{id:e,type:r,rotation:o}],!0)}var a=na.applyToPoint(n.initialPageTransform,n.initialBounds.center),s=this._scalePagePoint(a,n.scaleOrigin,t,n.scaleAxisRotation),l=this.getPageCenterById(e),u=this.getPagePointById(e);if(!l||!u)return this;var c=xo.Sub(s,l),d=xo.Add(u,c),f=this.getPointInParentSpace(e,d),p=f.x,h=f.y;return this.updateShapes([{id:e,type:r,x:p,y:h}],!0),this}},{key:"_scalePagePoint",value:function(e,t,n,r){var i=xo.RotWith(e,t,-r).sub(t),o=xo.MulV(i,n);return xo.Add(o,t).rotWith(t,r)}},{key:"resizeShape",value:function(e,t){var n,r,i,o,a,s,l=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(this.isReadOnly)return this;Number.isFinite(t.x)||(t=new xo(1,t.y)),Number.isFinite(t.y)||(t=new xo(t.x,1));var u=null!==(n=l.initialShape)&&void 0!==n?n:this.getShapeById(e);if(!u)return this;var c=null!==(r=l.scaleOrigin)&&void 0!==r?r:null===(i=this.getPageBoundsById(e))||void 0===i?void 0:i.center;if(!c)return this;var d=this.getPageRotationById(e);if(null==d)return this;var f=null!==(o=l.scaleAxisRotation)&&void 0!==o?o:d,p=null!==(a=l.initialPageTransform)&&void 0!==a?a:this.getPageTransformById(e);if(!p)return this;var h=null!==(s=l.initialBounds)&&void 0!==s?s:this.getBoundsById(e);if(!h)return this;if(!Do(d,f))return this._resizeUnalignedShape(e,t,Pe(Pe({},l),{},{initialBounds:h,scaleOrigin:c,scaleAxisRotation:f,initialPageTransform:p,initialShape:u}));var v=this.getShapeUtil(u);if(v.isAspectRatioLocked(u)&&(t=Math.abs(t.x)>Math.abs(t.y)?new xo(t.x,Math.sign(t.y)*Math.abs(t.x)):new xo(Math.sign(t.x)*Math.abs(t.y),t.y)),v.onResize&&v.canResize(u)){var g,m,y=this._scalePagePoint(na.applyToPoint(p,new xo(0,0)),c,t,f),b=this.getPointInParentSpace(u.id,y),w=new xo(t.x,t.y),x=Mo((d-f)%Math.PI,0);w.x=x?t.x:t.y,w.y=x?t.y:t.x;var k=na.applyToPoint(p,new xo),S=this.getPointInParentSpace(u.id,k),_=S.x,E=S.y;this.updateShapes([Pe({id:e,type:u.type,x:b.x,y:b.y},v.onResize(Pe(Pe({},u),{},{x:_,y:E}),{newPoint:b,handle:null!==(g=l.dragHandle)&&void 0!==g?g:"bottom_right",mode:null!==(m=l.mode)&&void 0!==m?m:"scale_shape",scaleX:w.x,scaleY:w.y,initialBounds:h,initialShape:u}))],!0)}else{var P=na.applyToPoint(p,h.center),C=this._scalePagePoint(P,c,t,f),I=this.getPointInParentSpace(u.id,P),T=this.getPointInParentSpace(u.id,C),M=xo.Sub(T,I);this.updateShapes([{id:e,type:u.type,x:u.x+M.x,y:u.y+M.y}],!0)}return this}},{key:"stretchShapes",value:function(e){var c=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.pageState.selectedIds;if(this.isReadOnly)return this;if(t.length<2)return this;var d=U(t.map(function(e){return c.getShapeById(e)})),f=Object.fromEntries(d.map(function(e){return[e.id,c.getBounds(e)]})),p=Object.fromEntries(d.map(function(e){return[e.id,c.getPageBounds(e)]})),h=$o.Common(U(Object.values(p)));switch(e){case"vertical":this.batch(function(){var e,t=ce(d);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!(c.getPageRotation(n)%Eo)){var r=f[n.id],i=p[n.id],o=c.getDeltaInParentSpace(n,new xo(0,h.minY-i.minY)),a=xo.Add(o,n),s=a.x,l=a.y;c.updateShapes([{id:n.id,type:n.type,x:s,y:l}],!0);var u=new xo(1,h.height/i.height);c.resizeShape(n.id,u,{initialBounds:r,scaleOrigin:new xo(i.center.x,h.minY),scaleAxisRotation:0})}}}catch(e){t.e(e)}finally{t.f()}});break;case"horizontal":this.batch(function(){var e,t=ce(d);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=f[n.id],i=p[n.id];if(!(c.getPageRotation(n)%Eo)){var o=c.getDeltaInParentSpace(n,new xo(h.minX-i.minX,0)),a=xo.Add(o,n),s=a.x,l=a.y;c.updateShapes([{id:n.id,type:n.type,x:s,y:l}],!0);var u=new xo(h.width/i.width,1);c.resizeShape(n.id,u,{initialBounds:r,scaleOrigin:new xo(h.minX,i.center.y),scaleAxisRotation:0})}}}catch(e){t.e(e)}finally{t.f()}})}return this.updateShapes([]),this}},{key:"shapesArray",get:function(){var t=this;return Array.from(this.currentPageShapeIds,function(e){return t.store.get(e)})}},{key:"sortedShapesArray",get:function(){var t=this,r=new Set(this.shapesArray.sort(I)),i=[];return r.forEach(function(e){Lr(t.getShapeById(e.parentId))||function t(n){i.push(n),r.delete(n),r.forEach(function(e){e.parentId===n.id&&t(e)})}(e)}),i}},{key:"selectedShapes",get:function(){var t=this;return U(this.pageState.selectedIds.map(function(e){return t.store.get(e)}))}},{key:"onlySelectedShape",get:function(){var e=this.selectedShapes;return 1===e.length?e[0]:null}},{key:"isShapeOfType",value:function(e,t){return e.type===t.type}},{key:"getShapeById",value:function(e){if(zr(e))return this.store.get(e)}},{key:"getParentShape",value:function(e){if(void 0!==e&&zr(e.parentId))return this.store.get(e.parentId)}},{key:"getShapeNearestSibling",value:function(t,e){if(e)return e.parentId===t.parentId?e:this.findAncestor(e,function(e){return e.parentId===t.parentId})}},{key:"isShapeInPage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.currentPageId,n=!1;if(e.parentId===t)n=!0;else{var r=this.getShapeById(e.parentId);e:for(;r;){if(r.parentId===t){n=!0;break e}r=this.getShapeById(r.parentId)}}return n}},{key:"getAncestorPageId",value:function(e){if(void 0!==e)return yn(e.parentId)?e.parentId:this.getAncestorPageId(this.getShapeById(e.parentId))}},{key:"reparentShapesById",value:function(e,t,n){var r,i=this,o=[],a=yn(t)?na.Identity():this.getPageTransformById(t),s=a.decompose().rotation,l=[],u=U(this.getSortedChildIds(t).map(function(e){return i.getShapeById(e)}));if(n){var c=u.find(function(e){return e.index===n});if(c){var d=u[u.indexOf(c)+1];l=d?S(n,d.index,e.length):_(n,e.length)}else{var f=u.sort(I).find(function(e){return e.index>n});l=f?S(n,f.index,e.length):_(n,e.length)}}else{var p=u.length&&u[u.length-1];l=p?_(p.index,e.length):te(e.length)}for(var h=0;h<e.length;h++){r=e[h];var v=this.getShapeById(r),g=this.getPagePointById(r);if(v&&g){var m=na.applyToPoint(na.Inverse(a),g),y=this.getPageRotation(v)-s;o.push({id:v.id,type:v.type,parentId:t,x:m.x,y:m.y,rotation:y,index:l[h]})}}return this.updateShapes(o),this}},{key:"getHighestIndexForParent",value:function(e){var t=this._parentIdsToChildIds.value[e];return t&&0!==t.length?ee(t[t.length-1][1]):"a1"}},{key:"getSortedChildIds",value:function(e){var t=this._parentIdsToChildIds.value[e];return t?this._childIdsCache.get(t,function(){return t.map(function(e){return Ce(e,1)[0]})}):dt}},{key:"visitDescendants",value:function(e,t){var n,r=ce(this.getSortedChildIds(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;!1!==t(i)&&this.visitDescendants(i,t)}}catch(e){r.e(e)}finally{r.f()}}},{key:"getShapeAndDescendantIds",value:function(e){for(var t=new Set,n=de(e);0<n.length;){var r=n.pop();if(!r)break;t.has(r)||(t.add(r),this.getSortedChildIds(r).forEach(function(e){n.push(e)}))}return t}},{key:"getParentIdForNewShapeAtPoint",value:function(e,t){for(var n=this.sortedShapesArray,r=n.length-1;0<=r;r--){var i=n[r],o=this.getShapeUtil(i);if(o.canReceiveNewChildrenOfType(i,t)){var a=this.getMaskedPageBoundsById(i.id);if(a&&a.containsPoint(e)&&o.hitTestPoint(i,this.getPointInShapeSpace(i,e)))return i.id}}return this.focusLayerId}},{key:"getDroppingShape",value:function(r){for(var i=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=this.sortedShapesArray,e=function(){var t=a[s];if(o.find(function(e){return e.id===t.id||i.hasAncestor(t,e.id)}))return"continue";var e=i.getShapeUtil(t);if(!e.canDropShapes(t,o))return"continue";var n=i.getMaskedPageBoundsById(t.id);return n&&n.containsPoint(r)&&e.hitTestPoint(t,i.getPointInShapeSpace(t,r))?{v:t}:void 0},s=a.length-1;0<=s;s--){var t=e();if("continue"!==t&&"object"==typeof t)return t.v}}},{key:"getOutermostSelectableShape",value:function(e,t){for(var n=e,r=e;r;){var i;if(!this.isShapeOfType(r,Hd)||this.focusLayerId===r.id||this.hasAncestor(this.focusLayerShape,r.id)||null!==(i=null==t?void 0:t(r))&&void 0!==i&&!i){if(this.focusLayerId===r.id)break}else n=r;r=this.getParentShape(r)}return n}},{key:"setCurrentPageId",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).stopFollowing,n=void 0===t||t;return this._setCurrentPageId(e,{stopFollowing:n}),this}},{key:"updateInstanceState",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return this._updateInstanceState(e,t,n),this}},{key:"setCursor",value:function(e){var t=this.cursor,n=Pe(Pe({},t),{},{rotation:0},e);return t.type===n.type&&t.rotation===n.rotation&&t.color===n.color||this.updateInstanceState({cursor:n},!0),this}},{key:"setScribble",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return this.updateInstanceState({scribble:e},!0),this}},{key:"setBrush",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return(e||this.brush)&&this.updateInstanceState({brush:e},!0),this}},{key:"setZoomBrush",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return(e||this.zoomBrush)&&this.updateInstanceState({zoomBrush:e},!0),this}},{key:"rotateShapesBy",value:function(e,t){return e.length<=0||Kp({delta:t,snapshot:Up({editor:this}),editor:this,stage:"one-off"}),this}},{key:"nudgeShapes",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(e.length<=0)return this;var i,o=this.isGridMode?n?5*this.gridSize:this.gridSize:n?10:1,a=xo.Mul(t,o),s=[],l=ce(e);try{for(l.s();!(i=l.n()).done;){var u,c,d=i.value,f=this.getShapeById(d);if(!f)throw Error("Could not find a shape with the id ".concat(d,"."));var p=this.getDeltaInParentSpace(f,a),h=null===(u=(c=this.getShapeUtil(f)).onTranslateStart)||void 0===u?void 0:u.call(c,f);s.push(h?Pe(Pe({},h),{},{x:f.x+p.x,y:f.y+p.y}):{id:d,x:f.x+p.x,y:f.y+p.y,type:f.type})}}catch(e){l.e(e)}finally{l.f()}return this.updateShapes(s,r),this}},{key:"duplicateShapes",value:function(){var M=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selectedIds,A=1<arguments.length?arguments[1]:void 0;if(e.length<=0)return this;for(var j=new Set(e),t=[],n=de(e);0<n.length;){var r=n.pop();if(!r)break;t.push(r),this.getSortedChildIds(r).forEach(function(e){return n.push(e)})}t.reverse();var O=new Map(t.map(function(e){return[e,Rr()]})),o=U(t.map(function(e){var t,n=M.getShapeById(e);if(!n)return null;var r=O.get(e),i=0,o=0;if(A&&j.has(e)){var a=M.getParentTransform(n),s=new xo(A.x,A.y).rot(-na.Decompose(a).rotation);i=s.x,o=s.y}var l=null!==(t=n.parentId)&&void 0!==t?t:M.currentPageId,u=M.getSortedChildIds(l),c=u.indexOf(n.id),d=u[c+1],f=d?M.getShapeById(d):null,p=f?L(n.index,f.index):ee(n.index),h=ne(n);if(M.isShapeOfType(n,id)&&M.isShapeOfType(h,id)){var v=M.getShapeUtil(id).getArrowInfo(n),g=void 0,m=void 0;if("binding"===n.props.start.type&&!(g=O.get(n.props.start.boundShapeId)))if(null!=v&&v.isValid){var y=v.start.point,b=y.x,w=y.y;h.props.start={type:"point",x:b,y:w}}else{var x=Vc(M,n).start;h.props.start={type:"point",x:x.x,y:x.y}}if("binding"===n.props.end.type&&!(m=O.get(n.props.end.boundShapeId)))if(null!=v&&v.isValid){var k=v.end.point,S=k.x,_=k.y;h.props.end={type:"point",x:S,y:_}}else{var E=Vc(M,n).end;h.props.start={type:"point",x:E.x,y:E.y}}var P=Fc(h)?Yc(M,h):Gc(M,h);if(null!=v&&v.isValid&&null!=P&&P.isValid&&!Fc(n)){var C=xo.Med(v.start.handle,v.end.handle),I=xo.Dist(v.middle,C),T=xo.Dist(P.middle,C);h.props.bend<0?h.props.bend+=T-I:h.props.bend-=T-I}"binding"===h.props.start.type&&g&&(h.props.start.boundShapeId=g),"binding"===h.props.end.type&&m&&(h.props.end.boundShapeId=m)}return Pe(Pe({},h),{},{id:r,x:n.x+i,y:n.y+o,index:p})}));return o.forEach(function(e){zr(e.parentId)&&O.has(e.parentId)&&(e.parentId=O.get(e.parentId))}),this.history.batch(function(){var e=o.length+M.currentPageShapeIds.size>ns;e&&tv(M);var t=e?o.slice(0,ns-M.currentPageShapeIds.size):o,n=t.map(function(e){return e.id});if(M.createShapes(t),M.setSelectedIds(n),void 0!==A){var r=M.viewportPageBounds,i=M.selectedPageBounds;i&&!r.contains(i)&&M.centerOnPoint(i.center.x,i.center.y,{duration:rs})}}),this}},{key:"setOpacity",value:function(i){var a=this,s=1<arguments.length&&void 0!==arguments[1]&&arguments[1],l=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return this.history.batch(function(){if(a.isIn("select")){var e=a.pageState.selectedIds,o=[],t=function e(t){var n=a.getShapeById(t);if(n)if(a.isShapeOfType(n,Hd)){var r,i=ce(a.getSortedChildIds(t));try{for(i.s();!(r=i.n()).done;)e(r.value)}catch(e){i.e(e)}finally{i.f()}}else o.push(n)};if(0<e.length){var n,r=ce(e);try{for(r.s();!(n=r.n()).done;)t(n.value)}catch(e){r.e(e)}finally{r.f()}a.updateShapes(o.map(function(e){return{id:e.id,type:e.type,opacity:i}}),s)}}a.updateInstanceState({opacityForNextShape:i},s,l)}),this}},{key:"setStyle",value:function(v,g){var m=this,y=2<arguments.length&&void 0!==arguments[2]&&arguments[2],b=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return this.history.batch(function(){if(m.isIn("select")){var e=m.pageState.selectedIds;if(0<e.length){var t,s=[],n=function e(t){var n=m.getShapeById(t);if(n)if(m.isShapeOfType(n,Hd)){var r,i=ce(m.getSortedChildIds(t));try{for(i.s();!(r=i.n()).done;)e(r.value)}catch(e){i.e(e)}finally{i.f()}}else{var o=m.getShapeUtil(n);if(o.hasStyle(v)){var a={id:n.id,type:n.type,props:{}};s.push({originalShape:n,updatePartial:o.setStyleInPartial(v,a,g)})}}},r=ce(e);try{for(r.s();!(t=r.n()).done;)n(t.value)}catch(e){r.e(e)}finally{r.f()}m.updateShapes(s.map(function(e){return e.updatePartial}),y);for(var i=[],o=0,a=s;o<a.length;o++){var l=a[o].originalShape,u=m.getShapeById(l.id);if(u){var c=m.getShapeUtil(u),d=c.bounds(l),f=c.bounds(u),p={id:l.id,type:l.type},h=!1;if(d.width!==f.width)if(h=!0,m.isShapeOfType(l,bu))switch(l.props.align){case"middle":p.x=u.x+(d.width-f.width)/2;break;case"end":p.x=u.x+d.width-f.width}else p.x=u.x+(d.width-f.width)/2;d.height!==f.height&&(h=!0,p.y=u.y+(d.height-f.height)/2),h&&i.push(p)}}i.length&&m.updateShapes(i,y)}}m.updateInstanceState({stylesForNextShape:Pe(Pe({},m._stylesForNextShape),{},Ee({},v.id,g))},y,b)}),this}},{key:"_setCamera",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.camera.z,i=this.camera;if(i.x===e&&i.y===t&&i.z===r)return this;var o=Pe(Pe({},i),{},{x:e,y:t,z:r});return this.batch(function(){var e;n.store.put([o]);var t=n.inputs.currentScreenPoint;n.dispatch({type:"pointer",target:"canvas",name:"pointer_move",point:t,pointerId:-10,ctrlKey:n.inputs.ctrlKey,altKey:n.inputs.altKey,shiftKey:n.inputs.shiftKey,button:0,isPen:null!==(e=n.isPenMode)&&void 0!==e&&e}),n._tickCameraState()}),this}},{key:"setCamera",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.camera.z,r=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).stopFollowing,i=void 0===r||r;return this.stopCameraAnimation(),i&&this.instanceState.followingUserId&&this.stopFollowingUser(),e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,n=Number.isNaN(n)?1:n,this._setCamera(e,t,n),this}},{key:"animateCamera",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.camera.z,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:ss;e=Number.isNaN(e)?0:e,t=Number.isNaN(t)?0:t,n=Number.isNaN(n)?1:n;var i=this.viewportScreenBounds,o=i.width,a=i.height,s=new $o(-e,-t,o/n,a/n);return this._animateToViewport(s,r)}},{key:"centerOnPoint",value:function(e,t,n){if(!this.canMoveCamera)return this;var r=this.viewportPageBounds,i=r.width,o=r.height,a=this.camera;return null!=n&&n.duration?this.animateCamera(-(e-i/2),-(t-o/2),a.z,n):this.setCamera(-(e-i/2),-(t-o/2),a.z),this}},{key:"zoomToContent",value:function(){var e,t=null!==(e=this.selectedPageBounds)&&void 0!==e?e:this.allShapesCommonBounds;return t&&this.zoomToBounds(t.minX,t.minY,t.width,t.height,Math.min(1,this.zoomLevel),{duration:220}),this}},{key:"zoomToFit",value:function(e){var t=this;if(!this.canMoveCamera)return this;var n=de(this.currentPageShapeIds);if(n.length<=0)return this;var r=$o.Common(U(n.map(function(e){return t.getPageBoundsById(e)})));return this.zoomToBounds(r.minX,r.minY,r.width,r.height,void 0,e),this}},{key:"resetZoom",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=1<arguments.length?arguments[1]:void 0;if(!this.canMoveCamera)return this;var n=this.camera,r=n.x,i=n.y,o=n.z,a=e.x,s=e.y;return null!=t&&t.duration?this.animateCamera(r+(a/1-a)-(a/o-a),i+(s/1-s)-(s/o-s),1,t):this.setCamera(r+(a/1-a)-(a/o-a),i+(s/1-s)-(s/o-s),1),this}},{key:"zoomIn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=1<arguments.length?arguments[1]:void 0;if(!this.canMoveCamera)return this;for(var n=this.camera,r=n.x,i=n.y,o=n.z,a=8,s=1;s<is.length;s++){var l=is[s];if(!(l-o<=(l-is[s-1])/2)){a=l;break}}var u=e.x,c=e.y;return null!=t&&t.duration?this.animateCamera(r+(u/a-u)-(u/o-u),i+(c/a-c)-(c/o-c),a,t):this.setCamera(r+(u/a-u)-(u/o-u),i+(c/a-c)-(c/o-c),a),this}},{key:"zoomOut",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.viewportScreenCenter,t=1<arguments.length?arguments[1]:void 0;if(!this.canMoveCamera)return this;for(var n=this.camera,r=n.x,i=n.y,o=n.z,a=.1,s=is.length-1;0<s;s--){var l=is[s-1],u=is[s];if(!((u-l)/2<=u-o)){a=l;break}}var c=e.x,d=e.y;return null!=t&&t.duration?this.animateCamera(r+(c/a-c)-(c/o-c),i+(d/a-d)-(d/o-d),a,t):this.setCamera(r+(c/a-c)-(c/o-c),i+(d/a-d)-(d/o-d),a),this}},{key:"zoomToSelection",value:function(e){var t=this;if(!this.canMoveCamera)return this;var n=this.selectedIds;if(n.length<=0)return this;var r=$o.Common(U(n.map(function(e){return t.getPageBoundsById(e)})));return this.zoomToBounds(r.minX,r.minY,r.width,r.height,Math.max(1,this.camera.z),e),this}},{key:"panZoomIntoView",value:function(e,t){var n=this;if(!this.canMoveCamera)return this;if(e.length<=0)return this;var r=$o.Common(U(e.map(function(e){return n.getPageBoundsById(e)}))),i=this.viewportPageBounds;if(i.h<r.h||i.w<r.w)return this.zoomToBounds(r.minX,r.minY,r.width,r.height,this.camera.z,t),this;var o=this._activeAreaManager.offsets.value,a=i.y+o.top,s=i.maxY-o.right,l=i.maxY-o.bottom,u=i.x+o.left,c=r.y,d=r.maxX,f=r.maxY,p=r.x,h=0,v=0;l<f?v=l-f:c<a&&(v=a-c),s<d?h=s-d:p<u&&(h=u-p);var g=this.camera;return null!=t&&t.duration?this.animateCamera(g.x+h,g.y+v,g.z,t):this.setCamera(g.x+h,g.y+v,g.z),this}},{key:"zoomToBounds",value:function(e,t,n,r,i,o){if(!this.canMoveCamera)return this;var a=this.viewportScreenBounds,s=Math.min(256,.28*a.width),l=Io(Math.min((a.width-s)/n,(a.height-s)/r),.1,8);return void 0!==i&&(l=Math.min(i,l)),null!=o&&o.duration?this.animateCamera(-e+(a.width-n*l)/2/l,-t+(a.height-r*l)/2/l,l,o):this.setCamera(-e+(a.width-n*l)/2/l,-t+(a.height-r*l)/2/l,l),this}},{key:"pan",value:function(e,t,n){var r;if(!this.canMoveCamera)return this;var i=this.camera,o=i.x,a=i.y,s=i.z,l=new xo(e,t).div(s);return null!==(r=null==n?void 0:n.duration)&&void 0!==r&&r?this.animateCamera(o+l.x,a+l.y,s,n):(this.setCamera(o+l.x,a+l.y,s),this)}},{key:"stopCameraAnimation",value:function(){return this.emit("stop-camera-animation"),this}},{key:"_animateViewport",value:function(e){var t=this;if(this._viewportAnimation){var n=function e(){t.removeListener("tick",t._animateViewport),t.removeListener("stop-camera-animation",e),t._viewportAnimation=null};this.once("stop-camera-animation",n),this._viewportAnimation.elapsed+=e;var r=this._viewportAnimation,i=r.elapsed,o=r.easing,a=r.duration,s=r.start,l=r.end;if(a<i){var u=this.viewportScreenBounds.width/l.width,c=-l.x,d=-l.y;return this._setCamera(c,d,u),void n()}var f=o(1-(a-i)/a),p=s.minX+(l.minX-s.minX)*f,h=s.minY+(l.minY-s.minY)*f,v=s.maxX+(l.maxX-s.maxX)*f,g=s.maxY+(l.maxY-s.maxY)*f,m=new $o(p,h,v-p,g-h),y=this.viewportScreenBounds.width/m.width,b=-m.x,w=-m.y;this._setCamera(b,w,y)}}},{key:"_animateToViewport",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?0:n,i=t.easing,o=void 0===i?wo.easeInOutCubic:i,a=this.animationSpeed,s=this.viewportPageBounds;return this.stopCameraAnimation(),this.instanceState.followingUserId&&this.stopFollowingUser(),0===r||0===a?this._setCamera(-e.x,-e.y,this.viewportScreenBounds.width/e.width):(this._viewportAnimation={elapsed:0,duration:r/a,easing:o,start:s.clone(),end:e},this.addListener("tick",this._animateViewport),this)}},{key:"slideCamera",value:function(){var a=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!this.canMoveCamera)return this;if(this.stopCameraAnimation(),0!==this.animationSpeed){var t=e.speed,s=e.friction,l=e.direction,n=e.speedThreshold,u=void 0===n?.01:n,c=Math.min(t,1),d=function e(){a.removeListener("tick",r),a.removeListener("stop-camera-animation",e)};this.once("stop-camera-animation",d);var r=function(e){var t=a.camera,n=t.x,r=t.y,i=t.z,o=l.clone().mul(c*e/i);(c*=1-s)<u?d():a._setCamera(n+o.x,r+o.y,i)};return this.addListener("tick",r),this}}},{key:"animateToUser",value:function(i){var o=this,a=de(this.store.query.records("instance_presence",function(){return{userId:{eq:i}}}).value).sort(function(e,t){return e.lastActivityTimestamp-t.lastActivityTimestamp}).pop();a&&this.batch(function(){null!==o.instanceState.followingUserId&&o.stopFollowingUser();var e=a.currentPageId===o.currentPageId;e||o.setCurrentPageId(a.currentPageId);var t=e?{duration:500}:void 0,n=a.cursor;o.centerOnPoint(n.x,n.y,t);var r=o.instanceState.highlightedUserIds;o.updateInstanceState({highlightedUserIds:[].concat(de(r),[i])}),setTimeout(function(){var e=de(o.instanceState.highlightedUserIds),t=e.indexOf(i);t<0||(e.splice(t,1),o.updateInstanceState({highlightedUserIds:e}))},3e3)})}},{key:"startFollowingUser",value:function(e){var x=this,k=this.store.query.records("instance_presence",function(){return{userId:{eq:e}}}),S=this.user.id;if(S||console.warn("You should set the userId for the current instance before following a user"),!k.value.some(function(e){return e.followingUserId===S})){Pt(function(){x.stopFollowingUser(),x.updateInstanceState({followingUserId:e},!0)});var _=!1,t=function(){var e=de(k.value).sort(function(e,t){return e.lastActivityTimestamp-t.lastActivityTimestamp}).pop();if(e){var t=e.currentPageId===x.currentPageId,n=t?.5:1;t||x.setCurrentPageId(e.currentPageId,{stopFollowing:!1});var r=x.viewportPageBounds,i=r.center,o=r.width,a=r.height,s=$o.From(e.screenBounds),l=s.width/e.camera.z,u=s.height/e.camera.z,c=new xo(l/2-e.camera.x,u/2-e.camera.y),d=o+(l-o)*n,f=a+(u-a)*n,p=e.followingUserId===S?a/f:Math.min(o/d,a/f),h=Io(x.camera.z*p,.1,8),v=x.viewportScreenBounds.w/h,g=x.viewportScreenBounds.h/h,m=c.sub(i),y=xo.Add(i,xo.Mul(m,n)),b=xo.Sub(y,i).len(),w=Math.abs(h-x.camera.z);b<.1&&w<.005?_=!0:_&&b<.2&&w<.05||(_=!1,x.stopCameraAnimation(),x.setCamera(-(y.x-v/2),-(y.y-g/2),h,{stopFollowing:!1}))}else x.stopFollowingUser()};return this.once("stop-following",function e(){x.removeListener("frame",t),x.removeListener("stop-following",e)}),this.addListener("frame",t),this}}},{key:"stopFollowingUser",value:function(){return this.updateInstanceState({followingUserId:null},!0),this.emit("stop-following"),this}},{key:"animateToShape",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:ss;if(!this.canMoveCamera)return this;var n=Hp(this),r=n.width/n.height,i=this.getPageBoundsById(e);if(!i)return this;var o=i.width/i.height,a=i.clone(),s=i.width/n.width;return a.width+=(n.left+n.right)*s,a.height+=(n.top+n.bottom)*s,a.x-=n.left*s,a.y-=n.top*s,r<o?(a.height=i.width/r,a.y-=(a.height-i.height)/2):(a.width=i.height*r,a.x-=(a.width-i.width)/2),this._animateToViewport(a,t)}},{key:"blur",value:function(){return this.complete(),this.getContainer().blur(),this._isFocused.set(!1),this}},{key:"focus",value:function(){return this.getContainer().focus(),this._isFocused.set(!0),this}},{key:"cancel",value:function(){return this.dispatch({type:"misc",name:"cancel"}),this}},{key:"interrupt",value:function(){return this.dispatch({type:"misc",name:"interrupt"}),this}},{key:"complete",value:function(){return this.dispatch({type:"misc",name:"complete"}),this}},{key:"putExternalContent",value:(n=ao(io().mark(function e(t){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.externalContentManager.handleContent(t);case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"groupShapes",value:function(){var e,t,n=this,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selectedIds,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Rr();if(this.isReadOnly)return this;if(r.length<=1)return this;var o=U(this._getUnlockedShapeIds(r).map(function(e){return n.getShapeById(e)})),a=o.sort(I).map(function(e){return e.id}),s=$o.Common(U(o.map(function(e){return n.getPageBounds(e)}))).point,l=s.x,u=s.y,c=null!==(e=this.findCommonAncestor(o))&&void 0!==e?e:this.currentPageId;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();var d=o.filter(function(e){return e.parentId===c}).sort(I),f=null===(t=d[d.length-1])||void 0===t?void 0:t.index;return this.batch(function(){n.createShapes([{id:i,type:"group",parentId:c,index:f,x:l,y:u,opacity:1,props:{}}]),n.reparentShapesById(a,i),n.select(i)}),this}},{key:"ungroupShapes",value:function(){var a=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.selectedIds;if(this.isReadOnly)return this;if(0===e.length)return this;if("select"!==this.currentToolId)return this;this.isIn("select.idle")||this.cancel();var s=new Set,t=U(e.map(function(e){return a.getShapeById(e)})),l=[];return t.forEach(function(e){a.isShapeOfType(e,Hd)?l.push(e):s.add(e.id)}),0===l.length||this.batch(function(){for(var e,t=0,n=l.length;t<n;t++){e=l[t];for(var r=a.getSortedChildIds(e.id),i=0,o=r.length;i<o;i++)s.add(r[i]);a.reparentShapesById(r,e.parentId,e.index)}a.deleteShapes(l.map(function(e){return e.id})),a.select.apply(a,de(s))}),this}},{key:"getSvg",value:(t=ao(io().mark(function e(){var r,i,o,a,s,l,u,c,d,f,p,h,v,M,g,m,A,j,y,b,w,x,k,S,O,_,E,P,L,C,I,T,z,R,N,D,B,F,U,K,V,W=this,H=arguments;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0<H.length&&void 0!==H[0]?H[0]:this.selectedIds.length?this.selectedIds:Object.keys(this.currentPageShapeIds),i=1<H.length&&void 0!==H[1]?H[1]:{},0===r.length)return e.abrupt("return");e.next=4;break;case 4:if(window.document){e.next=6;break}throw Error("No document");case 6:o=i.scale,a=void 0===o?1:o,s=i.background,l=void 0!==s&&s,u=i.padding,c=void 0===u?32:u,d=i.darkMode,f=void 0===d?this.isDarkMode:d,p=i.preserveAspectRatio,h=void 0!==p&&p,v=this.getContainer(),M=getComputedStyle(v),(g=document.createElement("div")).className="tl-container tl-theme__".concat(f?"dark":"light"," tl-theme__force-sRGB"),document.body.appendChild(g),m=getComputedStyle(g),A=new Map,j={fill:se(Hr.values.map(function(e){return[e,m.getPropertyValue("--palette-".concat(e))]})),pattern:se(Hr.values.map(function(e){return[e,m.getPropertyValue("--palette-".concat(e,"-pattern"))]})),semi:se(Hr.values.map(function(e){return[e,m.getPropertyValue("--palette-".concat(e,"-semi"))]})),highlight:se(Hr.values.map(function(e){return[e,m.getPropertyValue("--palette-".concat(e,"-highlight"))]})),text:m.getPropertyValue("--color-text"),background:m.getPropertyValue("--color-background"),solid:m.getPropertyValue("--palette-solid")},document.body.removeChild(g),y=this.getShapeAndDescendantIds(r),b=this.computeUnorderedRenderingShapes([this.currentPageId]).filter(function(e){var t=e.id;return y.has(t)}),w=null,x=ce(b),e.prev=20,x.s();case 22:if((k=x.n()).done){e.next=29;break}if(S=k.value.maskedPageBounds){e.next=26;break}return e.abrupt("continue",27);case 26:w?w.union(S):w=S.clone();case 27:e.next=22;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(20),x.e(e.t0);case 34:return e.prev=34,x.f(),e.finish(34);case 37:if(w){e.next=39;break}return e.abrupt("return");case 39:for((O=1===r.length&&this.isShapeOfType(this.getShapeById(r[0]),qd)?r[0]:null)||w.expandBy(c),_=w.width*a,E=w.height*a,P=window.document.createElementNS("http://www.w3.org/2000/svg","svg"),h&&P.setAttribute("preserveAspectRatio",h),P.setAttribute("direction","ltr"),P.setAttribute("width",_+""),P.setAttribute("height",E+""),P.setAttribute("viewBox","".concat(w.minX," ").concat(w.minY," ").concat(w.width," ").concat(w.height)),P.setAttribute("stroke-linecap","round"),P.setAttribute("stroke-linejoin","round"),l?O?P.style.setProperty("background",j.solid):P.style.setProperty("background-color",j.background):P.style.setProperty("background-color","transparent"),L=window.document.createElementNS("http://www.w3.org/2000/svg","defs"),C=0,I=Array.from((t=j.solid,n=void 0,(n=document.createElement("div")).innerHTML='\n\t\t<svg>\n\t\t\t<defs>\n\t\t\t\t<mask id="hash_pattern_mask">\n\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="white" />\n\t\t\t\t\t<g\n\t\t\t\t\t\tstrokeLinecap="round"\n\t\t\t\t\t\tstroke="black"\n\t\t\t\t\t>\n\t\t\t\t\t\t<line x1="'.concat(1*Dl,'" y1="').concat(2,'" x2="').concat(2,'" y2="').concat(1*Dl,'" />\n\t\t\t\t\t\t<line x1="').concat(5*Dl,'" y1="').concat(7*Dl,'" x2="').concat(7*Dl,'" y2="').concat(5*Dl,'" />\n\t\t\t\t\t\t<line x1="').concat(6,'" y1="').concat(11*Dl,'" x2="').concat(11*Dl,'" y2="').concat(6,'" />\n\t\t\t\t\t</g>\n\t\t\t\t</mask>\n\t\t\t\t<pattern\n\t\t\t\t\tid="hash_pattern"\n\t\t\t\t\twidth="8"\n\t\t\t\t\theight="8"\n\t\t\t\t\tpatternUnits="userSpaceOnUse"\n\t\t\t\t>\n\t\t\t\t\t<rect x="0" y="0" width="8" height="8" fill="').concat(t,'" mask="url(#hash_pattern_mask)" />\n\t\t\t\t</pattern>\n\t\t\t</defs>\n\t\t</svg>\n\t'),n.querySelectorAll("defs > *")));C<I.length;C++)T=I[C],L.appendChild(T);try{null===(z=(R=document.body).focus)||void 0===z||z.call(R)}catch(e){}return P.append(L),e.next=58,Promise.all(b.map(function(){var t=ao(io().mark(function e(t){var n,r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.id,u=t.opacity,c=t.index,d=t.backgroundIndex,l===O)return e.abrupt("return",[]);e.next=3;break;case 3:if(f=W.getShapeById(l),W.isShapeOfType(f,Hd))return e.abrupt("return",[]);e.next=6;break;case 6:return p=W.getShapeUtil(f),(v=p.getStyleIfExists($r,f))&&(A.has(v)?h=A.get(v):(h=M.getPropertyValue("--tl-font-".concat(v)),A.set(v,h))),e.next=11,null===(n=p.toSvg)||void 0===n?void 0:n.call(p,f,h,j);case 11:return g=e.sent,e.next=14,null===(r=p.toBackgroundSvg)||void 0===r?void 0:r.call(p,f,h,j);case 14:return m=e.sent,g&&((y=document.createElementNS("http://www.w3.org/2000/svg","g")).appendChild(g),g=y),m&&((b=document.createElementNS("http://www.w3.org/2000/svg","g")).appendChild(m),m=b),g||m||(w=W.getPageBounds(f),(x=window.document.createElementNS("http://www.w3.org/2000/svg","rect")).setAttribute("width",w.width+""),x.setAttribute("height",w.height+""),x.setAttribute("fill",j.solid),x.setAttribute("stroke",j.pattern.grey),x.setAttribute("stroke-width","1"),g=x),k=W.getPageTransform(f).toCssString(),"scale"in f.props&&1!==f.props.scale&&(k="".concat(k," scale(").concat(f.props.scale,", ").concat(f.props.scale,")")),null===(i=g)||void 0===i||i.setAttribute("transform",k),null===(o=m)||void 0===o||o.setAttribute("transform",k),null===(a=g)||void 0===a||a.setAttribute("opacity",u+""),null===(s=m)||void 0===s||s.setAttribute("opacity",u+""),(S=W.getPageMaskById(f.id))&&(_=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),L.appendChild(_),E=Bt(),_.id=E,(P=document.createElementNS("http://www.w3.org/2000/svg","path")).setAttribute("d","M".concat(S.map(function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)}).join("L"),"Z")),_.appendChild(P),g&&((C=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("clip-path","url(#".concat(E,")")),C.appendChild(g),g=C),m&&((I=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("clip-path","url(#".concat(E,")")),I.appendChild(m),m=I)),T=[],g&&T.push({zIndex:c,element:g}),m&&T.push({zIndex:d,element:m}),e.abrupt("return",T);case 30:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()));case 58:N=e.sent.flat(),D=ce(N.sort(function(e,t){return e.zIndex-t.zIndex}));try{for(D.s();!(B=D.n()).done;)F=B.value.element,P.appendChild(F)}catch(e){D.e(e)}finally{D.f()}return U="",K=window.document.createElementNS("http://www.w3.org/2000/svg","style"),V=[],"fonts"in document&&document.fonts.forEach(function(e){return V.push(e)}),e.next=67,Promise.all(V.map(function(){var t=ao(io().mark(function e(t){var n,r,i,o,a,s,l;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new FileReader,r=!1,A.forEach(function(e){e.includes(t.family)&&(r=!0)}),r){e.next=5;break}return e.abrupt("return");case 5:if(i=t.$$_url,o=t.$$_fontface,i)return e.next=10,fetch(i);e.next=18;break;case 10:return e.next=12,e.sent.blob();case 12:return a=e.sent,e.next=15,new Promise(function(e,t){n.onload=function(){return e(n.result)},n.onerror=function(){return t(n.error)},n.readAsDataURL(a)});case 15:s=e.sent,l="\n"+o.replaceAll(i,s),U+=l;case 18:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()));case 67:return K.textContent=U,L.append(K),e.abrupt("return",P);case 70:case"end":return e.stop()}var t,n},e,this,[[20,31,34,37]])})),function(){return t.apply(this,arguments)})}]),O}();function tv(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.currentPageId,n=e.getPageById(t).name;e.emit("max-shapes",{name:n,pageId:t,count:ns})}Jh([zt],ev.prototype,"_pageTransformCache",1),Jh([zt],ev.prototype,"_pageBoundsCache",1),Jh([zt],ev.prototype,"canUndo",1),Jh([zt],ev.prototype,"canRedo",1),Jh([zt],ev.prototype,"_stylesForNextShape",1),Jh([zt({isEqual:function(e,t){return e.equals(t)}})],ev.prototype,"sharedStyles",1),Jh([zt],ev.prototype,"sharedOpacity",1),Jh([zt],ev.prototype,"_arrowBindingsIndex",1),Jh([zt],ev.prototype,"_allPageStates",1),Jh([zt],ev.prototype,"openMenus",1),Jh([zt],ev.prototype,"isMenuOpen",1),Jh([zt],ev.prototype,"documentSettings",1),Jh([zt],ev.prototype,"_pages",1),Jh([zt],ev.prototype,"pages",1),Jh([zt],ev.prototype,"_pageStates",1),Jh([zt],ev.prototype,"pageStateId",1),Jh([zt],ev.prototype,"pageState",1),Jh([zt],ev.prototype,"selectedIds",1),Jh([zt],ev.prototype,"selectedIdsSet",1),Jh([zt],ev.prototype,"editingShape",1),Jh([zt],ev.prototype,"hoveredId",1),Jh([zt],ev.prototype,"hoveredShape",1),Jh([zt],ev.prototype,"hintingIds",1),Jh([zt],ev.prototype,"erasingIds",1),Jh([zt],ev.prototype,"erasingIdsSet",1),Jh([zt],ev.prototype,"cameraId",1),Jh([zt],ev.prototype,"camera",1),Jh([zt],ev.prototype,"zoomLevel",1),Jh([zt],ev.prototype,"viewportScreenBounds",1),Jh([zt],ev.prototype,"viewportScreenCenter",1),Jh([zt],ev.prototype,"viewportPageBounds",1),Jh([zt],ev.prototype,"viewportPageCenter",1),Jh([zt],ev.prototype,"cameraState",1),Jh([zt],ev.prototype,"renderingShapes",1),Jh([zt],ev.prototype,"renderingBounds",1),Jh([zt],ev.prototype,"renderingBoundsExpanded",1),Jh([zt],ev.prototype,"_clipPathCache",1),Jh([zt],ev.prototype,"_pageMaskCache",1),Jh([zt],ev.prototype,"allShapesCommonBounds",1),Jh([zt],ev.prototype,"selectedPageBounds",1),Jh([zt],ev.prototype,"selectionRotation",1),Jh([zt],ev.prototype,"selectionBounds",1),Jh([zt],ev.prototype,"selectionPageCenter",1),Jh([zt],ev.prototype,"_assets",1),Jh([zt],ev.prototype,"shapesArray",1),Jh([zt],ev.prototype,"sortedShapesArray",1),Jh([zt],ev.prototype,"selectedShapes",1),Jh([zt],ev.prototype,"onlySelectedShape",1);var nv="TLDRAW_TAB_ID_v2",rv=globalThis.window,iv=null!==($h=null!==(Gh=null==rv?void 0:rv[nv])&&void 0!==Gh?Gh:null==rv?void 0:rv.sessionStorage[nv])&&void 0!==$h?$h:"TLDRAW_INSTANCE_STATE_V1_"+ac();rv&&(rv[nv]=iv,rv&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(rv.navigator.platform)||rv.navigator.userAgent.includes("Mac")&&"ontouchend"in document)?rv.sessionStorage[nv]=iv:delete rv.sessionStorage[nv]),null==rv||rv.addEventListener("beforeunload",function(){rv.sessionStorage[nv]=iv});var ov=0,av=qe({version:Re,currentPageId:gn,isFocusMode:Ke,exportBackground:Ke,isDebugMode:Ke,isToolLocked:Ke,isGridMode:Ke,pageStates:Ye(qe({pageId:gn,camera:qe({x:Re,y:Re,z:Re}),selectedIds:Ye(Vn),focusLayerId:Vn.nullable()}))}),sv=Zt({currentVersion:ov});function lv(e,t){var n=function(e){if(!e||"object"!=typeof e)return console.warn("Invalid instance state"),null;if(!("version"in e)||"number"!=typeof e.version)return console.warn("No version in instance state"),null;var t=nn({value:e,fromVersion:e.version,toVersion:ov,migrations:sv});if("error"===t.type)return console.warn(t.reason),null;var n=Pe(Pe({},t.value),{},{version:ov});try{av.validate(n)}catch(e){return console.warn(e),null}return n}(t);if(n){var r={added:{},updated:{},removed:Pe({},se(e.allRecords().filter(function(e){return"instance_page_state"===e.typeName||"camera"===e.typeName}).map(function(e){return[e.id,e]})))};e.has(Un)&&(r.removed[Un]=e.get(Un));var i,o={removed:{},updated:{},added:Ee({},Un,e.schema.types.instance.create({id:Un,currentPageId:n.currentPageId,isDebugMode:n.isDebugMode,isFocusMode:n.isFocusMode,isToolLocked:n.isToolLocked,isGridMode:n.isGridMode,exportBackground:n.exportBackground}))},a=ce(n.pageStates);try{for(a.s();!(i=a.n()).done;){var s=i.value,l=sn.createId(s.pageId),u=Xn.createId(s.pageId);o.added[l]=sn.create({id:sn.createId(s.pageId),x:s.camera.x,y:s.camera.y,z:s.camera.z}),o.added[u]=Xn.create({id:Xn.createId(s.pageId),pageId:s.pageId,selectedIds:s.selectedIds,focusLayerId:s.focusLayerId})}}catch(e){a.e(e)}finally{a.f()}Pt(function(){e.applyDiff(qt([r,o])),e.ensureStoreIsUsable()})}}function uv(r){for(var e=[],t=0,n=Object.values(r);t<n.length;t++){var i,o=n[t];null!==(i=o.typeName)&&void 0!==i&&i.match(/^(instance.*|pointer|camera)$/)&&e.push(o)}var a=e.filter(function(e){return"instance"===e.typeName&&e.id!==Un})[0];if(!a)return null;var s={version:ov,currentPageId:a.currentPageId,exportBackground:!!a.exportBackground,isFocusMode:!!a.isFocusMode,isDebugMode:!!a.isDebugMode,isToolLocked:!!a.isToolLocked,isGridMode:!1,pageStates:e.filter(function(e){return"instance_page_state"===e.typeName&&e.instanceId===a.id}).map(function(e){var t,n=null!==(t=r[e.cameraId])&&void 0!==t?t:{x:0,y:0,z:1};return{pageId:e.pageId,camera:{x:n.x,y:n.y,z:n.z},selectedIds:e.selectedIds,focusLayerId:e.focusLayerId}})};try{return av.validate(s),s}catch(e){return null}}var cv,dv,fv=function(t,e){return e.some(function(e){return t instanceof e})},pv=new WeakMap,hv=new WeakMap,vv=new WeakMap,gv=new WeakMap,mv=new WeakMap,yv={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return hv.get(e);if("objectStoreNames"===t)return e.objectStoreNames||vv.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wv(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function bv(e){return"function"==typeof e?function(o){return o!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(dv||(dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(o)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(xv(this),t),wv(pv.get(this))}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return wv(o.apply(xv(this),t))}:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=o.call.apply(o,[xv(this),e].concat(n));return vv.set(i,e.sort?e.sort():[e]),wv(i)}}(e):(e instanceof IDBTransaction&&function(o){if(!hv.has(o)){var e=new Promise(function(e,t){var n=function(){o.removeEventListener("complete",r),o.removeEventListener("error",i),o.removeEventListener("abort",i)},r=function(){e(),n()},i=function(){t(o.error||new DOMException("AbortError","AbortError")),n()};o.addEventListener("complete",r),o.addEventListener("error",i),o.addEventListener("abort",i)});hv.set(o,e)}}(e),fv(e,cv||(cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,yv):e)}function wv(e){if(e instanceof IDBRequest)return o=e,(t=new Promise(function(e,t){var n=function(){o.removeEventListener("success",r),o.removeEventListener("error",i)},r=function(){e(wv(o.result)),n()},i=function(){t(o.error),n()};o.addEventListener("success",r),o.addEventListener("error",i)})).then(function(e){e instanceof IDBCursor&&pv.set(e,o)}).catch(function(){}),mv.set(t,o),t;var o,t;if(gv.has(e))return gv.get(e);var n=bv(e);return n!==e&&(gv.set(e,n),mv.set(n,e)),n}var xv=function(e){return mv.get(e)};function kv(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(e,t),l=wv(s);return i&&s.addEventListener("upgradeneeded",function(e){i(wv(s.result),e.oldVersion,e.newVersion,wv(s.transaction),e)}),r&&s.addEventListener("blocked",function(e){return r(e.oldVersion,e.newVersion,e)}),l.then(function(e){a&&e.addEventListener("close",function(){return a()}),o&&e.addEventListener("versionchange",function(e){return o(e.oldVersion,e.newVersion,e)})}).catch(function(){}),l}function Sv(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).blocked,n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",function(e){return t(e.oldVersion,e)}),wv(n).then(function(){})}var _v,Ev=["get","getKey","getAll","getAllKeys","count"],Pv=["put","add","delete","clear"],Cv=new Map;function Iv(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(Cv.get(t))return Cv.get(t);var u=t.replace(/FromIndex$/,""),c=t!==u,d=Pv.includes(u);if(u in(c?IDBIndex:IDBObjectStore).prototype&&(d||Ev.includes(u))){var n=(r=ao(io().mark(function e(t){var n,r,i,o,a,s,l=arguments;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r=this.transaction(t,d?"readwrite":"readonly"),i=r.store,o=l.length,a=new Array(1<o?o-1:0),s=1;s<o;s++)a[s-1]=l[s];return c&&(i=i.index(a.shift())),e.next=6,Promise.all([(n=i)[u].apply(n,a),d&&r.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)});return Cv.set(t,n),n}}var r}yv=Pe(Pe({},_v=yv),{},{get:function(e,t,n){return Iv(e,t)||_v.get(e,t,n)},has:function(e,t){return!!Iv(e,t)||_v.has(e,t)}});var Tv="TLDRAW_DOCUMENT_v2",Mv="TLDRAW_DB_NAME_INDEX_v2",Av={Records:"records",Schema:"schema",SessionState:"session_state"};function jv(e,t){return Ov.apply(this,arguments)}function Ov(){return(Ov=ao(io().mark(function e(i,o){var a;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i,r=n=void 0,(r=new Set(Kv())).add(t),null===(n=window)||void 0===n||n.localStorage.setItem(Mv,JSON.stringify(de(r))),e.next=3,kv(i,3,{upgrade:function(e){e.objectStoreNames.contains(Av.Records)||e.createObjectStore(Av.Records),e.objectStoreNames.contains(Av.Schema)||e.createObjectStore(Av.Schema),e.objectStoreNames.contains(Av.SessionState)||e.createObjectStore(Av.SessionState)}});case 3:return a=e.sent,e.prev=4,e.next=7,o(a);case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,a.close(),e.finish(8);case 11:case"end":return e.stop()}var t,n,r},e,null,[[4,,8,11]])}))).apply(this,arguments)}function Lv(e){return zv.apply(this,arguments)}function zv(){return(zv=ao(io().mark(function e(t){var n,d,f,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.persistenceKey,d=t.sessionId,f=t.didCancel,r=Tv+n,Kv().includes(r)){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.next=6,Fv({persistenceKey:n,didCancel:f});case 6:return e.next=8,jv(r,function(){var t=ao(io().mark(function e(t){var n,r,i,o,a,s,l,u,c;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=f&&f())return e.abrupt("return",void 0);e.next=2;break;case 2:if(r=t.transaction([Av.Records,Av.Schema,Av.SessionState],"readonly"),i=r.objectStore(Av.Records),o=r.objectStore(Av.Schema),a=r.objectStore(Av.SessionState),d)return e.next=9,a.get(d);e.next=21;break;case 9:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=13;break}e.t1=void 0===n;case 13:if(!e.t1){e.next=17;break}e.t3=void 0,e.next=18;break;case 17:e.t3=n.snapshot;case 18:e.t0=e.t3,e.next=22;break;case 21:e.t0=null;case 22:if(s=e.t0){e.next=28;break}return e.next=26,a.getAll();case 26:u=e.sent,s=null===(l=u.sort(function(e,t){return e.updatedAt-t.updatedAt}).pop())||void 0===l?void 0:l.snapshot;case 28:return e.next=30,i.getAll();case 30:return e.t4=e.sent,e.next=33,o.get(Av.Schema);case 33:if(e.t5=e.sent,e.t6=s,c={records:e.t4,schema:e.t5,sessionStateSnapshot:e.t6},null!=f&&f())return r.abort(),e.abrupt("return",void 0);e.next=39;break;case 39:return e.next=41,r.done;case 41:return e.abrupt("return",c);case 42:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rv(e){return Nv.apply(this,arguments)}function Nv(){return(Nv=ao(io().mark(function e(t){var n,y,b,w,x,k,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,y=t.schema,b=t.changes,w=t.sessionId,x=t.sessionStateSnapshot,k=t.didCancel,r=Tv+n,e.next=4,jv(r,function(){var t=ao(io().mark(function e(t){var n,r,i,o,a,s,l,u,c,d,f,p,h,v,g,m;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.transaction([Av.Records,Av.Schema,Av.SessionState],"readwrite"),r=n.objectStore(Av.Records),i=n.objectStore(Av.Schema),o=n.objectStore(Av.SessionState),a=0,s=Object.entries(b.added);case 5:if(a<s.length)return l=Ce(s[a],2),u=l[0],c=l[1],e.next=9,r.put(c,u);e.next=12;break;case 9:a++,e.next=5;break;case 12:d=0,f=Object.values(b.updated);case 13:if(d<f.length)return(p=Ce(f[d],2))[0],h=p[1],e.next=17,r.put(h,h.id);e.next=20;break;case 17:d++,e.next=13;break;case 20:v=0,g=Object.keys(b.removed);case 21:if(v<g.length)return m=g[v],e.next=25,r.delete(m);e.next=28;break;case 25:v++,e.next=21;break;case 28:if(i.put(y.serialize(),Av.Schema),x&&w?o.put({snapshot:x,updatedAt:Date.now(),id:w},w):(x||w)&&console.error("sessionStateSnapshot and instanceId must be provided together"),null!=k&&k())return e.abrupt("return",n.abort());e.next=32;break;case 32:return e.next=34,n.done;case 34:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dv(e){return Bv.apply(this,arguments)}function Bv(){return(Bv=ao(io().mark(function e(t){var n,d,f,p,h,v,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,d=t.schema,f=t.snapshot,p=t.sessionId,h=t.sessionStateSnapshot,v=t.didCancel,r=Tv+n,e.next=4,jv(r,function(){var t=ao(io().mark(function e(t){var n,r,i,o,a,s,l,u,c;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction([Av.Records,Av.Schema,Av.SessionState],"readwrite"),r=n.objectStore(Av.Records),i=n.objectStore(Av.Schema),o=n.objectStore(Av.SessionState),e.next=6,r.clear();case 6:a=0,s=Object.entries(f);case 7:if(a<s.length)return l=Ce(s[a],2),u=l[0],c=l[1],e.next=11,r.put(c,u);e.next=14;break;case 11:a++,e.next=7;break;case 14:if(i.put(d.serialize(),Av.Schema),h&&p?o.put({snapshot:h,updatedAt:Date.now(),id:p},p):(h||p)&&console.error("sessionStateSnapshot and instanceId must be provided together"),null!=v&&v())return e.abrupt("return",n.abort());e.next=18;break;case 18:return e.next=20,n.done;case 20:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fv(e){return Uv.apply(this,arguments)}function Uv(){return(Uv=ao(io().mark(function e(t){var n,u;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.persistenceKey,u=t.didCancel,e.next=3,jv(Tv+n,function(){var t=ao(io().mark(function e(t){var n,r,i,o,a,s,l;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction([Av.SessionState],"readwrite"),r=n.objectStore(Av.SessionState),e.next=4,r.getAll();case 4:if((i=e.sent.sort(function(e,t){return e.updatedAt-t.updatedAt})).length<10)return e.next=8,n.done;e.next=9;break;case 8:return e.abrupt("return");case 9:o=i.slice(0,i.length-10),a=ce(o),e.prev=11,a.s();case 13:if((s=a.n()).done){e.next=19;break}return l=s.value.id,e.next=17,r.delete(l);case 17:e.next=13;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(11),a.e(e.t0);case 24:return e.prev=24,a.f(),e.finish(24);case 27:if(null!=u&&u())return e.abrupt("return",n.abort());e.next=29;break;case 29:return e.next=31,n.done;case 31:case"end":return e.stop()}},e,null,[[11,21,24,27]])}));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kv(){var e,t,n=null!==(e=JSON.parse((null===(t=window)||void 0===t?void 0:t.localStorage.getItem(Mv))||"[]"))&&void 0!==e?e:[];return Array.isArray(n)?n:[]}var Vv=Symbol("UPDATE_INSTANCE_STATE"),Wv="undefined"==typeof BroadcastChannel?function(){function t(e){z(this,t),Ee(this,"onmessage",void 0)}return P(t,[{key:"postMessage",value:function(e){}},{key:"close",value:function(){}}]),t}():BroadcastChannel,Hv=function(){function d(e,t){var l,n,r=this,i=t.persistenceKey,o=t.sessionId,a=void 0===o?iv:o,s=t.onLoad,u=t.onLoadError,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new Wv("tldraw-tab-sync-".concat(i));z(this,d),Ee(this,"disposables",new Set),Ee(this,"diffQueue",[]),Ee(this,"didDispose",!1),Ee(this,"shouldDoFullDBWrite",!0),Ee(this,"isReloading",!1),Ee(this,"persistenceKey",void 0),Ee(this,"sessionId",void 0),Ee(this,"serializedSchema",void 0),Ee(this,"isDebugging",!1),Ee(this,"documentTypes",void 0),Ee(this,"$sessionStateSnapshot",void 0),Ee(this,"initTime",Date.now()),Ee(this,"isPersisting",!1),Ee(this,"didLastWriteError",!1),Ee(this,"scheduledPersistTimeout",null),this.store=e,this.channel=c,"undefined"!=typeof window&&(window.tlsync=this),this.persistenceKey=i,this.sessionId=a,this.serializedSchema=this.store.schema.serialize(),this.$sessionStateSnapshot=(l=this.store,n=l.query.ids("page"),zt("sessionStateSnapshot",function(){var e=l.get(Un);if(!e)return null;var t=de(n.value);return{version:ov,currentPageId:e.currentPageId,exportBackground:e.exportBackground,isFocusMode:e.isFocusMode,isDebugMode:e.isDebugMode,isToolLocked:e.isToolLocked,isGridMode:e.isGridMode,pageStates:t.map(function(e){var t,n,r,i,o,a=l.get(Xn.createId(e)),s=l.get(sn.createId(e));return{pageId:e,camera:{x:null!==(t=null==s?void 0:s.x)&&void 0!==t?t:0,y:null!==(n=null==s?void 0:s.y)&&void 0!==n?n:0,z:null!==(r=null==s?void 0:s.z)&&void 0!==r?r:1},selectedIds:null!==(i=null==a?void 0:a.selectedIds)&&void 0!==i?i:[],focusLayerId:null!==(o=null==a?void 0:a.focusLayerId)&&void 0!==o?o:null}})}})),this.disposables.add(e.listen(function(e){var t=e.changes;r.diffQueue.push(t),r.channel.postMessage({type:"diff",storeId:r.store.id,changes:t,schema:r.serializedSchema}),r.schedulePersist()},{source:"user",scope:"document"})),this.disposables.add(e.listen(function(){r.diffQueue.push(Vv),r.schedulePersist()},{scope:"session"})),this.connect(s,u),this.documentTypes=new Set(Object.values(this.store.schema.types).filter(function(e){return"document"===e.scope}).map(function(e){return e.typeName}))}return P(d,[{key:"debug",value:function(){var e;this.isDebugging&&(e=console).debug.apply(e,arguments)}},{key:"connect",value:(n=ao(io().mark(function e(t,l){var n,r,i,o,a,s,u=this;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.debug("connecting"),e.prev=1,e.next=4,Lv({persistenceKey:this.persistenceKey,sessionId:this.sessionId,didCancel:function(){return u.didDispose}});case 4:n=e.sent,e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(1),l(e.t0),window.alert("Oops! We could not access your browser's storage—and the app won't work correctly without that. We now need to reload the page and try again.\n\nKeep seeing this message?\n• If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser."),"undefined"!=typeof window&&window.location.reload(),e.abrupt("return");case 13:if(this.debug("loaded data from store",n,"didDispose",this.didDispose),this.didDispose)return e.abrupt("return");e.next=16;break;case 16:if(e.prev=16,!n){e.next=27;break}if(o=Object.fromEntries(n.records.map(function(e){return[e.id,e]})),a=null!==(r=n.sessionStateSnapshot)&&void 0!==r?r:uv(o),"error"===(s=this.store.schema.migrateStoreSnapshot(o,null!==(i=n.schema)&&void 0!==i?i:this.store.schema.serializeEarliestVersion())).type)return console.error("failed to migrate store",s),l(new Error("Failed to migrate store: ".concat(s.reason))),e.abrupt("return");e.next=25;break;case 25:this.store.mergeRemoteChanges(function(){u.store.put(Object.values(s.value).filter(function(e){return u.documentTypes.has(e.typeName)}),"initialize")}),a&&lv(this.store,a);case 27:this.channel.onmessage=function(e){var t,n=e.data;u.debug("got message",n);var r,i,o,a=n,s=an(u.serializedSchema,null!==(t=a.schema)&&void 0!==t?t:u.store.schema.serializeEarliestVersion());return-1===s?Date.now()-u.initTime<5e3?void l(new Error("Schema mismatch, please close other tabs and reload the page")):(u.debug("reloading"),u.isReloading=!0,void(null===(r=window)||void 0===r||null===(i=r.location)||void 0===i||null===(o=i.reload)||void 0===o||o.call(i))):1===s?(u.debug("telling them to reload"),u.channel.postMessage({type:"announce",schema:u.serializedSchema}),u.shouldDoFullDBWrite=!0,void u.persistIfNeeded()):void("diff"===a.type&&(u.debug("applying diff"),Pt(function(){u.store.mergeRemoteChanges(function(){u.store.applyDiff(a.changes),u.store.ensureStoreIsUsable()})})))},this.channel.postMessage({type:"announce",schema:this.serializedSchema}),this.disposables.add(function(){u.channel.close()}),t(this),e.next=40;break;case 33:if(e.prev=33,e.t1=e.catch(16),this.debug("error loading data from store",e.t1),this.didDispose)return e.abrupt("return");e.next=38;break;case 38:return l(e.t1),e.abrupt("return");case 40:case"end":return e.stop()}},e,this,[[1,7],[16,33]])})),function(e,t){return n.apply(this,arguments)})},{key:"close",value:function(){this.debug("closing"),this.didDispose=!0,this.disposables.forEach(function(e){return e()})}},{key:"schedulePersist",value:function(){var e=this;this.debug("schedulePersist",this.scheduledPersistTimeout),this.scheduledPersistTimeout||(this.scheduledPersistTimeout=setTimeout(function(){e.scheduledPersistTimeout=null,e.persistIfNeeded()},this.didLastWriteError?1e4:350))}},{key:"persistIfNeeded",value:function(){this.debug("persistIfNeeded",{isPersisting:this.isPersisting,isReloading:this.isReloading,shouldDoFullDBWrite:this.shouldDoFullDBWrite,diffQueueLength:this.diffQueue.length,storeIsPossiblyCorrupt:this.store.isPossiblyCorrupted()}),this.scheduledPersistTimeout&&(clearTimeout(this.scheduledPersistTimeout),this.scheduledPersistTimeout=null),this.isPersisting||this.isReloading||this.store.isPossiblyCorrupted()||(this.shouldDoFullDBWrite||0<this.diffQueue.length)&&this.doPersist()}},{key:"doPersist",value:(e=ao(io().mark(function e(){var t,n,r=this;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(W(!this.isPersisting,"persist already in progress"),this.isPersisting=!0,this.debug("doPersist start"),t=this.diffQueue,this.diffQueue=[],e.prev=5,this.shouldDoFullDBWrite)return this.shouldDoFullDBWrite=!1,e.next=10,Dv({persistenceKey:this.persistenceKey,schema:this.store.schema,snapshot:this.store.serialize(),didCancel:function(){return r.didDispose},sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value});e.next=12;break;case 10:e.next=15;break;case 12:return n=qt(t.filter(function(e){return e!==Vv})),e.next=15,Rv({persistenceKey:this.persistenceKey,changes:n,schema:this.store.schema,didCancel:function(){return r.didDispose},sessionId:this.sessionId,sessionStateSnapshot:this.$sessionStateSnapshot.value});case 15:this.didLastWriteError=!1,e.next=25;break;case 18:e.prev=18,e.t0=e.catch(5),this.shouldDoFullDBWrite=!0,this.didLastWriteError=!0,console.error("failed to store changes in indexed db",e.t0),window.alert("Oops! We could not save changes to your browser's storage. We now need to reload the page and try again.\n\nKeep seeing this message?\n• If you're using tldraw in a private or \"incognito\" window, try loading tldraw in a regular window or in a different browser.\n• If your hard disk is full, try clearing up some space and then reload the page."),"undefined"!=typeof window&&window.location.reload();case 25:this.isPersisting=!1,this.debug("doPersist end"),this.schedulePersist();case 28:case"end":return e.stop()}},e,this,[[5,18]])})),function(){return e.apply(this,arguments)})}]),d;var e,n}(),Yv=["initialData","defaultName"];function Xv(e){var t,n=e.initialData,r=e.defaultName,i=void 0===r?"":r,o=Gt(e,Yv),a="schema"in o?o.schema:Br({shapes:(t=cp(o.shapes),Object.fromEntries(t.map(function(e){return[e.type,e]})))});return new Xt({schema:a,initialData:n,props:{defaultName:i}})}var qv=["persistenceKey","sessionId"],$v=function(p,h){var e=Ce((0,_e.useState)(2),2),t=e[0],v=e[1];return(0,_e.useEffect)(function(){var e=h.url,t=h.style,n=void 0===t?"normal":t,r=h.weight,i=void 0===r?"500":r,o=h.display,a=h.featureSettings,s=h.stretch,l=h.unicodeRange,u=h.variant,c=!1;v(2);var d={style:n,weight:i,display:o,featureSettings:a,stretch:s,unicodeRange:l,variant:u},f=new FontFace(p,"url(".concat(e,")"),d);return f.load().then(function(){c||(document.fonts.add(f),v(0))}).catch(function(e){c||(console.error(e),v(1))}),f.$$_url=e,f.$$_fontface="\n@font-face {\n\tfont-family: ".concat(f.family,";\n\tfont-stretch: ").concat(f.stretch,";\n\tfont-weight: ").concat(f.weight,";\n\tfont-style: ").concat(f.style,';\n\tsrc: url("').concat(e,'") format("woff2")\n}'),function(){document.fonts.delete(f),c=!0}},[p,h]),t},Gv=!1;if("undefined"!=typeof window){var Qv=window.navigator.userAgent,Zv=!!Qv.match(/iPad/i)||!!Qv.match(/iPhone/i),Jv=!!Qv.match(/WebKit/i);Gv=Zv&&Jv&&!Qv.match(/CriOS/i)}var eg=["store","components"],tg=["store","user"],ng=[],rg=[],ig=(0,_e.memo)(function(e){var t,n,r=e.store,i=e.components,o=Gt(e,eg),a=Ce(_e.useState(null),2),s=a[0],l=a[1],u=(0,_e.useMemo)(function(){return Cc()},[]),c=void 0===(null==i?void 0:i.ErrorFallback)?oc:null==i?void 0:i.ErrorFallback,d=Pe(Pe({},o),{},{shapes:null!==(t=o.shapes)&&void 0!==t?t:ng,tools:null!==(n=o.tools)&&void 0!==n?n:rg});return(0,to.jsx)("div",{ref:l,draggable:!1,className:"tl-container tl-theme__light",tabIndex:0,children:(0,to.jsx)(ks,{fallback:c?function(e){return(0,to.jsx)(c,{error:e})}:null,onError:function(e){return q(e,{tags:{origin:"react.tldraw-before-app"}})},children:s&&(0,to.jsx)(Xa,{container:s,children:(0,to.jsx)(Is,{overrides:i,children:r?r instanceof Xt?(0,to.jsx)(sg,Pe(Pe({},d),{},{store:r,user:u})):(0,to.jsx)(ag,Pe(Pe({},d),{},{store:r,user:u})):(0,to.jsx)(og,Pe(Pe({},d),{},{store:r,user:u}))})})})})});function og(e){var t,n,r,i,o,a,s,l,u,c=e.defaultName,d=e.initialData,f=e.shapes,p=e.persistenceKey,h=e.sessionId,v=e.user,g=(r=(t={shapes:f,initialData:d,persistenceKey:p,sessionId:h,defaultName:c}).persistenceKey,i=t.sessionId,o=Gt(t,qv),a=Ce((0,_e.useState)(null),2),s=a[0],l=a[1],u=function(t){var e,n,r=Ce((0,_e.useState)(function(){return Xv(t)}),2),i=r[0],o=r[1],a=(e=t,n=(0,_e.useRef)(e),(0,_e.useEffect)(function(){n.current=e}),n.current);if(Object.keys(a).some(function(e){return a[e]!==t[e]})){var s=Xv(t);return o(s),s}return i}(o),(0,_e.useEffect)(function(){var n=ac();if(r){l({id:n,storeWithStatus:{status:"loading"}});var t=function(t){l(function(e){return(null==e?void 0:e.id)===n?{id:n,storeWithStatus:t}:e})},e=new Hv(u,{sessionId:i,persistenceKey:r,onLoad:function(){t({store:u,status:"synced-local"})},onLoadError:function(e){t({status:"error",error:e})}});return function(){l(function(e){return(null==e?void 0:e.id)===n?null:e}),e.close()}}l({id:n,storeWithStatus:{status:"not-synced",store:u}})},[r,u,i]),null!==(n=null==s?void 0:s.storeWithStatus)&&void 0!==n?n:{status:"loading"});return(0,to.jsx)(ag,Pe(Pe({},e),{},{store:g,user:v}))}var ag=(0,_e.memo)(function(e){var t=e.store,n=e.user,r=Gt(e,tg),i=qa();switch((0,_e.useLayoutEffect)(function(){n.userPreferences.value.isDarkMode&&(i.classList.remove("tl-theme__light"),i.classList.add("tl-theme__dark"))},[i,n.userPreferences.value.isDarkMode]),t.status){case"error":throw t.error;case"loading":return(0,to.jsx)(cg,{children:"Connecting..."})}return(0,to.jsx)(sg,Pe(Pe({},r),{},{store:t.store,user:n}))});function sg(e){var n=e.onMount,t=e.children,r=e.store,i=e.tools,o=e.shapes,a=e.autoFocus,s=e.user,l=e.assetUrls,u=Ts().ErrorFallback,c=qa(),d=Ce((0,_e.useState)(null),2),f=d[0],p=d[1];(0,_e.useLayoutEffect)(function(){var e=new ev({store:r,shapes:o,tools:i,getContainer:function(){return c},user:s});return window.app=e,window.editor=e,p(e),function(){e.dispose()}},[c,o,i,r,s]),_e.useLayoutEffect(function(){f&&a&&f.focus()},[f,a]);var h,v,g=(h=function(e){var t=null==n?void 0:n(e);return e.emit("mount"),window.tldrawReady=!0,t},v=(0,_e.useRef)(),(0,_e.useLayoutEffect)(function(){v.current=h}),(0,_e.useDebugValue)(h),(0,_e.useCallback)(function(){var e=v.current;return W(e,"fn does not exist"),e.apply(void 0,arguments)},[]));_e.useLayoutEffect(function(){if(f)return null==g?void 0:g(f)},[f,g]);var m,y,b,w,x=(0,_e.useSyncExternalStore)((0,_e.useCallback)(function(e){return f?(f.on("crash",e),function(){return f.off("crash",e)}):function(){}},[f]),function(){var e;return null!==(e=null==f?void 0:f.crashingError)&&void 0!==e?e:null}),k=(m=l,y=(0,_e.useMemo)(function(){return m?{fonts:Object.assign(Pe({},ro.fonts),Pe({},null==m?void 0:m.fonts))}:ro},[m]),b=(0,_e.useMemo)(function(){return{draw:{url:(e=y).fonts.draw},serif:{url:e.fonts.serif},sansSerif:{url:e.fonts.sansSerif},monospace:{url:e.fonts.monospace}};var e},[y]),{error:(w=[$v("tldraw_draw",b.draw),$v("tldraw_serif",b.serif),$v("tldraw_sans",b.sansSerif),$v("tldraw_mono",b.monospace)]).some(function(e){return 1===e}),done:!w.some(function(e){return 2===e})}),S=k.done;return k.error?(0,to.jsx)(dg,{children:"Could not load assets. Please refresh the page."}):S?f?(0,to.jsx)(ks,{fallback:u?function(e){return(0,to.jsx)(u,{error:e,editor:f})}:null,onError:function(e){return f.annotateError(e,{origin:"react.tldraw",willCrashApp:!0})},children:x?(0,to.jsx)(ug,{crashingError:x}):(0,to.jsx)(go.Provider,{value:f,children:(0,to.jsx)(lg,{children:t})})}):null:(0,to.jsx)(cg,{children:"Loading assets..."})}function lg(e){var t,n,r,i,o,a,s,l,u,c,d,f=e.children;return c=mo(),d=qa(),_e.useEffect(function(){var e=function(e){return d.style.setProperty("--tl-zoom",e.toString())},t=Y(e,100),n=new Rt("useZoomCss",function(){c.currentPageShapeIds.size<300?e(c.zoomLevel):t(c.zoomLevel)});return n.attach(),n.execute(),function(){n.detach()}},[c,d]),l=mo(),u=qa(),Bl("useCursor",function(){var e=l.cursor,t=e.type,n=e.rotation,r=e.color;Cu.includes(t)?u.style.setProperty("--tl-cursor","var(--tl-cursor-".concat(t,")")):u.style.setProperty("--tl-cursor",Pu(t,n,r))},[l,u]),i=mo(),o=qa(),a=ho("isDarkMode",function(){return i.isDarkMode},[i]),s=ho(Pa.forceSrgb),_e.useEffect(function(){a?(o.setAttribute("data-color-mode","dark"),o.classList.remove("tl-theme__light"),o.classList.add("tl-theme__dark"),i.setCursor({color:"white"})):(o.setAttribute("data-color-mode","light"),o.classList.remove("tl-theme__dark"),o.classList.add("tl-theme__light"),i.setCursor({color:"black"})),s?o.classList.add("tl-theme__force-sRGB"):o.classList.remove("tl-theme__force-sRGB")},[i,o,s,a]),r=mo(),_e.useEffect(function(){if(Gv)return document.addEventListener("focusout",e),function(){return document.removeEventListener("focusout",e)};function e(e){(e.target instanceof HTMLInputElement&&"text"===e.target.type||e.target instanceof HTMLTextAreaElement)&&r.complete()}},[r]),(t=Ce((0,_e.useState)(0),2))[0],n=t[1],(0,_e.useEffect)(function(){return n(function(e){return e+1})},[]),f}function ug(e){throw e.crashingError}function cg(e){var t=e.children,n=Ts().Spinner;return(0,to.jsxs)("div",{className:"tl-loading",children:[n?(0,to.jsx)(n,{}):null,t]})}function dg(e){var t=e.children;return(0,to.jsx)("div",{className:"tl-loading",children:t})}var fg=function(e){M(o,Ac);var i=N(o);function o(){var r;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(r=i.call.apply(i,[this].concat(t))),"info",{}),Ee(R(r),"scribble",{}),Ee(R(r),"markId",""),Ee(R(r),"excludedShapeIds",new Set),Ee(R(r),"onEnter",function(e){r.markId=r.editor.mark("erase scribble begin"),r.info=e;var t=r.editor.inputs.originPagePoint;r.excludedShapeIds=new Set(r.editor.shapesArray.filter(function(e){return r.editor.isShapeOrAncestorLocked(e)||(r.editor.isShapeOfType(e,Hd)||r.editor.isShapeOfType(e,qd))&&r.editor.isPointInShape(t,e)}).map(function(e){return e.id})),r.startScribble(),r.update()}),Ee(R(r),"startScribble",function(){var e;r.scribble.tick&&r.editor.off("tick",null===(e=r.scribble)||void 0===e?void 0:e.tick),r.scribble=new Dh({onUpdate:r.onScribbleUpdate,onComplete:r.onScribbleComplete,color:"muted-1",size:12}),r.editor.on("tick",r.scribble.tick)}),Ee(R(r),"pushPointToScribble",function(){var e=r.editor.inputs.currentPagePoint,t=e.x,n=e.y;r.scribble.addPoint(t,n)}),Ee(R(r),"onScribbleUpdate",function(e){r.editor.setScribble(e)}),Ee(R(r),"onScribbleComplete",function(){r.editor.off("tick",r.scribble.tick),r.editor.setScribble(null)}),Ee(R(r),"onExit",function(){r.scribble.stop()}),Ee(R(r),"onPointerMove",function(){r.update()}),Ee(R(r),"onPointerUp",function(){r.complete()}),Ee(R(r),"onCancel",function(){r.cancel()}),Ee(R(r),"onComplete",function(){r.complete()}),r}return P(o,[{key:"update",value:function(){var e=this.editor,t=e.shapesArray,n=e.erasingIdsSet,r=e.inputs,i=r.currentPagePoint,o=r.previousPagePoint,a=this.excludedShapeIds;this.pushPointToScribble();var s,l=new Set(n),u=ce(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(!this.editor.isShapeOfType(c,Hd)){var d=this.editor.getPageMaskById(c.id);if(!d||Ho(i,d)){var f=this.editor.getShapeUtil(c),p=this.editor.getPointInShapeSpace(c,o),h=this.editor.getPointInShapeSpace(c,i);f.hitTestLineSegment(c,p,h)&&l.add(this.editor.getOutermostSelectableShape(c).id)}}}}catch(e){u.e(e)}finally{u.f()}this.editor.setErasingIds(de(l).filter(function(e){return!a.has(e)}))}},{key:"complete",value:function(){this.editor.deleteShapes(this.editor.pageState.erasingIds),this.editor.setErasingIds([]),this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setErasingIds([]),this.editor.bailToMark(this.markId),this.parent.transition("idle",this.info)}}]),o}();Ee(fg,"id","erasing");var pg=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onPointerDown",function(e){t.parent.transition("pointing",e)}),t}return P(o)}();Ee(pg,"id","idle");var hg=function(e){M(i,Ac);var r=N(i);function i(){var s;z(this,i);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(s=r.call.apply(r,[this].concat(t))),"onEnter",function(){var e,t=s.editor.inputs,n=new Set,r=n.size,i=ce(de(s.editor.sortedShapesArray).reverse());try{for(i.s();!(e=i.n()).done;){var o=e.value;if(s.editor.isPointInShape(t.currentPagePoint,o)){if(s.editor.isShapeOfType(o,Hd))continue;var a=s.editor.getOutermostSelectableShape(o);if(s.editor.isShapeOfType(a,qd)&&n.size>r)break;n.add(a.id)}}}catch(e){i.e(e)}finally{i.f()}s.editor.setErasingIds(de(n))}),Ee(R(s),"onPointerMove",function(e){s.editor.inputs.isDragging&&s.parent.transition("erasing",e)}),Ee(R(s),"onPointerUp",function(){s.complete()}),Ee(R(s),"onCancel",function(){s.cancel()}),Ee(R(s),"onComplete",function(){s.complete()}),Ee(R(s),"onInterrupt",function(){s.cancel()}),s}return P(i,[{key:"complete",value:function(){var e=this.editor.erasingIds;e.length&&(this.editor.mark("erase end"),this.editor.deleteShapes(e)),this.editor.setErasingIds([]),this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.editor.setErasingIds([]),this.parent.transition("idle",{})}}]),i}();Ee(hg,"id","pointing");var vg=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"onEnter",function(){e.editor.setCursor({type:"cross"})}),e}return P(o)}();Ee(vg,"id","eraser"),Ee(vg,"initial","idle"),Ee(vg,"children",function(){return[pg,hg,fg]});var gg=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"onEnter",function(){e.update()}),Ee(R(e),"onPointerMove",function(){e.update()}),Ee(R(e),"onPointerUp",function(){e.complete()}),Ee(R(e),"onCancel",function(){e.complete()}),Ee(R(e),"onComplete",function(){e.complete()}),e}return P(o,[{key:"update",value:function(){var e=this.editor.inputs,t=e.currentScreenPoint,n=e.previousScreenPoint,r=xo.Sub(t,n);(0<Math.abs(r.x)||0<Math.abs(r.y))&&this.editor.pan(r.x,r.y)}},{key:"complete",value:function(){this.editor.slideCamera({speed:Math.min(2,this.editor.inputs.pointerVelocity.len()),direction:this.editor.inputs.pointerVelocity,friction:.09}),this.parent.transition("idle",{})}}]),o}();Ee(gg,"id","dragging");var mg=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onEnter",function(){t.editor.setCursor({type:"grab"})}),Ee(R(t),"onPointerDown",function(e){t.parent.transition("pointing",e)}),Ee(R(t),"onCancel",function(){t.editor.setSelectedTool("select")}),t}return P(o)}();Ee(mg,"id","idle");var yg=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onEnter",function(){t.editor.stopCameraAnimation(),t.editor.setCursor({type:"grabbing"})}),Ee(R(t),"onPointerMove",function(e){t.editor.inputs.isDragging&&t.parent.transition("dragging",e)}),Ee(R(t),"onPointerUp",function(){t.complete()}),Ee(R(t),"onCancel",function(){t.complete()}),Ee(R(t),"onComplete",function(){t.complete()}),Ee(R(t),"onInterrupt",function(){t.complete()}),t}return P(o,[{key:"complete",value:function(){this.parent.transition("idle",{})}}]),o}();Ee(yg,"id","pointing");var bg=function(e){M(o,Ac);var r=N(o);function o(){var i;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(i=r.call.apply(r,[this].concat(t))),"onDoubleClick",function(e){if("settle"===e.phase){var t=i.editor.inputs.currentScreenPoint;i.editor.zoomIn(t,{duration:220,easing:wo.easeOutQuint})}}),Ee(R(i),"onTripleClick",function(e){if("settle"===e.phase){var t=i.editor.inputs.currentScreenPoint;i.editor.zoomOut(t,{duration:320,easing:wo.easeOutQuint})}}),Ee(R(i),"onQuadrupleClick",function(e){if("settle"===e.phase){var t=i.editor,n=t.zoomLevel,r=t.inputs.currentScreenPoint;1===n?i.editor.zoomToFit({duration:400,easing:wo.easeOutQuint}):i.editor.resetZoom(r,{duration:320,easing:wo.easeOutQuint})}}),i}return P(o)}();Ee(bg,"id","hand"),Ee(bg,"initial","idle"),Ee(bg,"children",function(){return[mg,yg,gg]});var wg=function(e){M(o,Ac);var i=N(o);function o(){var t;z(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Ee(R(t=i.call.apply(i,[this].concat(n))),"onPointerDown",function(e){t.parent.transition("lasering",e)}),t}return P(o)}();Ee(wg,"id","idle");var xg=function(e){M(o,Ac);var i=N(o);function o(){var r;z(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ee(R(r=i.call.apply(i,[this].concat(t))),"scribble",{}),Ee(R(r),"onEnter",function(){r.startScribble(),r.pushPointToScribble()}),Ee(R(r),"onExit",function(){r.editor.setErasingIds([]),r.scribble.stop()}),Ee(R(r),"onPointerMove",function(){r.pushPointToScribble()}),Ee(R(r),"onPointerUp",function(){r.complete()}),Ee(R(r),"startScribble",function(){var e;r.scribble.tick&&r.editor.off("tick",null===(e=r.scribble)||void 0===e?void 0:e.tick),r.scribble=new Dh({onUpdate:r.onScribbleUpdate,onComplete:r.onScribbleComplete,color:"laser",opacity:.7,size:4,delay:1200}),r.editor.on("tick",r.scribble.tick)}),Ee(R(r),"pushPointToScribble",function(){var e=r.editor.inputs.currentPagePoint,t=e.x,n=e.y;r.scribble.addPoint(t,n)}),Ee(R(r),"onScribbleUpdate",function(e){r.editor.setScribble(e)}),Ee(R(r),"onScribbleComplete",function(){r.editor.off("tick",r.scribble.tick),r.editor.setScribble(null)}),Ee(R(r),"onCancel",function(){r.cancel()}),Ee(R(r),"onComplete",function(){r.complete()}),r}return P(o,[{key:"complete",value:function(){this.parent.transition("idle",{})}},{key:"cancel",value:function(){this.parent.transition("idle",{})}}]),o}();Ee(xg,"id","lasering");var kg=function(e){M(o,Ac);var i=N(o);function o(){var e;z(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ee(R(e=i.call.apply(i,[this].concat(n))),"onEnter",function(){e.editor.setCursor({type:"cross"})}),e}return P(o)}();Ee(kg,"id","laser"),Ee(kg,"initial","idle"),Ee(kg,"children",function(){return[wg,xg]});var Sg=[bg,vg,kg];function _g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Eg(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?_g(Object(o),!0).forEach(function(e){var t,n,r;t=i,r=o[n=e],(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return String(e);var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}(e);return"symbol"==typeof t?t:String(t)}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):_g(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function Pg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||Ig(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cg(e){return function(e){if(Array.isArray(e))return Tg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ig(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ig(e,t){if(e){if("string"==typeof e)return Tg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tg(e,t):void 0}}function Tg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mg(e){var t,n,r=e.sizes.shift(),i=Math.max(Math.ceil(r[0]),1),o=Math.max(Math.ceil(r[1]),1),a=[i-1,o-1,1,1],s=Date.now(),l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;l?(t=new OffscreenCanvas(1,1),n=new OffscreenCanvas(i,o)):((t=document.createElement("canvas")).width=1,t.height=1,(n=document.createElement("canvas")).width=i,n.height=o);var u=t.getContext("2d"),c=n.getContext("2d");c&&(c.fillRect.apply(c,a),u.drawImage(n,i-1,o-1,1,1,0,0,1,1));var d=u&&0!==u.getImageData(0,0,1,1).data[3],f=Date.now()-s;return[t,n].forEach(function(e){e.height=0,e.width=0}),l?(postMessage({width:i,height:o,benchmark:f,isTestPass:d}),!d&&e.sizes.length&&Mg(e)):d?e.onSuccess(i,o,f):(e.onError(i,o,f),e.sizes.length&&Mg(e)),d}var Ag=[16384,14188,11402,11180,10836,8192,4096,1],jg=[8388607,65535,32767,16384,8192,4096,1],Og=[4194303,65535,32767,16384,8192,4096,1],Lg=["onError","onSuccess"],zg={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},Rg={};function Ng(e){var r=e.width===e.height,i=1===e.height,o=1===e.width,a=[];if(e.width&&e.height)for(var t=e.min||zg.min,n=e.step||zg.step,s=Math.max(e.width,e.height);t<=s;){var l=r||i?s:1,u=r||o?s:1;a.push([l,u]),s-=n}else e.sizes.forEach(function(e){var t=r||i?e:1,n=r||o?e:1;a.push([t,n])});return a}function Dg(l){var e=window&&"HTMLCanvasElement"in window,t=window&&"OffscreenCanvas"in window,o=Date.now(),u=l.onError,i=l.onSuccess,a=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(l,Lg),c=null;if(!e)return!1;if(l.useWorker&&t){var n="\n            var canvasTest = ".concat(Mg.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),r=new Blob([n],{type:"application/javascript"}),s=URL.createObjectURL(r);c=new Worker(s),URL.revokeObjectURL(s),c.onmessage=function(e){var t=e.data,n=t.width,r=t.height,i=t.benchmark;t.isTestPass?(Rg[o].onSuccess(n,r,i),delete Rg[o]):Rg[o].onError(n,r,i)}}return l.usePromise?new Promise(function(r,s){var e=Eg(Eg({},l),{},{onError:function(e,t,n){var r;if(0===l.sizes.length)r=!0;else{var i=Pg(Pg(l.sizes.slice(-1),1)[0],2),o=i[0],a=i[1];r=e===o&&t===a}u(e,t,n),r&&s({width:e,height:t,benchmark:n})},onSuccess:function(e,t,n){i(e,t,n),r({width:e,height:t,benchmark:n})}});if(c){var t=e.onError,n=e.onSuccess;Rg[o]={onError:t,onSuccess:n},c.postMessage(a)}else Mg(e)}):c?(Rg[o]={onError:u,onSuccess:i},void c.postMessage(a)):Mg(l)}var Bg={maxArea:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Ng({width:e.max,height:e.max,min:e.min,step:e.step,sizes:Cg(Ag)});return Dg(Eg(Eg(Eg({},zg),e),{},{sizes:t}))},maxHeight:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Ng({width:1,height:e.max,min:e.min,step:e.step,sizes:Cg(jg)});return Dg(Eg(Eg(Eg({},zg),e),{},{sizes:t}))},maxWidth:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Ng({width:e.max,height:1,min:e.min,step:e.step,sizes:Cg(Og)});return Dg(Eg(Eg(Eg({},zg),e),{},{sizes:t}))},test:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=Eg(Eg({},zg),e);return t.sizes=Cg(t.sizes),t.width&&t.height&&(t.sizes=[[t.width,t.height]]),Dg(t)}},Fg=null;function Ug(){return(Ug=ao(io().mark(function e(){var t,n,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bg.maxWidth({usePromise:!0});case 2:return t=e.sent,e.next=5,Bg.maxHeight({usePromise:!0});case 5:return n=e.sent,e.next=8,Bg.maxArea({usePromise:!0});case 8:return r=e.sent,e.abrupt("return",{maxWidth:t.width,maxHeight:n.height,maxArea:r.width*r.height});case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kg(e){var t=e.cloneNode(!0);return e.setAttribute("width",+e.getAttribute("width")+""),e.setAttribute("height",+e.getAttribute("height")+""),(new XMLSerializer).serializeToString(t).replaceAll("&#10;      ","").replaceAll(/((\s|")[0-9]*\.[0-9]{2})([0-9]*)(\b|"|\))/g,"$1")}function Vg(e,t){return Wg.apply(this,arguments)}function Wg(){return(Wg=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u,c,d,f,p,h,v,g;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.type,i=n.quality,o=n.scale,a=+t.getAttribute("width"),s=+t.getAttribute("height"),l=a*o,u=s*o,e.next=7,Hg(t);case 7:return c=e.sent,e.next=10,Fg||(Fg=function(){return Ug.apply(this,arguments)}()),Fg;case 10:return d=e.sent,a>d.maxWidth&&(l=d.maxWidth,u=l/a*s),s>d.maxHeight&&(u=d.maxHeight,l=u/s*a),l*u>d.maxArea&&(f=Math.sqrt(d.maxArea/(l*u)),l*=f,u*=f),l=Math.floor(l),u=Math.floor(u),p=l/a,e.next=19,new Promise(function(r){var i=new Image;i.crossOrigin="anonymous",i.onload=ao(io().mark(function e(){var t,n;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){return setTimeout(e,250)});case 2:t=document.createElement("canvas"),n=t.getContext("2d"),t.width=l,t.height=u,n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(i,0,0,l,u),URL.revokeObjectURL(c),r(t);case 11:case"end":return e.stop()}},e)})),i.onerror=function(){r(null)},i.src=c});case 19:if(h=e.sent){e.next=22;break}return e.abrupt("return",null);case 22:return e.next=24,new Promise(function(t){return h.toBlob(function(e){e&&!Pa.throwToBlob.value||t(null),t(e)},"image/"+r,i)});case 24:if(v=e.sent){e.next=27;break}return e.abrupt("return",null);case 27:return e.t0=DataView,e.next=30,v.arrayBuffer();case 30:return e.t1=e.sent,g=new e.t0(e.t1),e.abrupt("return",Ep(g,p,{type:"image/"+r}));case 33:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hg(e){return Yg.apply(this,arguments)}function Yg(){return(Yg=ao(io().mark(function e(i){var o,a,s,l,u,c;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(o=i.cloneNode(!0)).setAttribute("encoding",'UTF-8"'),a=new FileReader,s=Array.from(o.querySelectorAll("image")),l=io().mark(function e(){var t,n,r,i;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c[u],!(n=t.getAttribute("xlink:href"))){e.next=13;break}if(n.startsWith("data:")){e.next=13;break}return e.next=6,fetch(n);case 6:return e.next=8,e.sent.blob();case 8:return r=e.sent,e.next=11,new Promise(function(e,t){a.onload=function(){return e(a.result)},a.onerror=function(){return t(a.error)},a.readAsDataURL(r)});case 11:i=e.sent,t.setAttribute("xlink:href",i);case 13:case"end":return e.stop()}},e)}),u=0,c=s;case 6:if(u<c.length)return e.delegateYield(l(),"t0",8);e.next=11;break;case 8:u++,e.next=6;break;case 11:return e.abrupt("return",(t=o,void 0,n=(new XMLSerializer).serializeToString(t),r=window.btoa(unescape(encodeURIComponent(n))),"data:image/svg+xml;base64,".concat(r)));case 12:case"end":return e.stop()}var t,n,r},e)}))).apply(this,arguments)}function Xg(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}function qg(){return(qg=ao(io().mark(function e(){var t,n,r=arguments;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0<r.length&&void 0!==r[0]?r[0]:{}).shouldReload,n=void 0===t||t,sessionStorage.clear(),e.next=4,Promise.all(Kv().map(function(e){return Sv(e)}));case 4:localStorage.clear(),n&&window.location.reload();case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $g(){return($g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gg(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===e||e;return function(e){if(null==t||t(e),!1===r||!e.defaultPrevented)return null==n?void 0:n(e)}}function Qg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.forEach(function(e){return n=r,void("function"==typeof(t=e)?t(n):null!=t&&(t.current=n));var t,n})}}function Zg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,_e.useCallback)(Qg.apply(void 0,t),t)}"undefined"!=typeof window&&(window.__tldraw__hardReset=function(){return qg.apply(this,arguments)});var Jg=["children"],em=["scope","children"];function tm(l){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t=[],n=function(){var n=t.map(function(e){return(0,_e.createContext)(e)});return function(e){var t=(null==e?void 0:e[l])||n;return(0,_e.useMemo)(function(){return Ee({},"__scope".concat(l),Pe(Pe({},e),{},Ee({},l,t)))},[e,t])}};return n.scopeName=l,[function(i,o){var a=(0,_e.createContext)(o),s=t.length;function e(e){var t=e.scope,n=e.children,r=Gt(e,em),i=(null==t?void 0:t[l][s])||a,o=(0,_e.useMemo)(function(){return r},Object.values(r));return(0,_e.createElement)(i.Provider,{value:o},n)}return t=[].concat(de(t),[o]),e.displayName=i+"Provider",[e,function(e,t){var n=(null==t?void 0:t[l][s])||a,r=(0,_e.useContext)(n);if(r)return r;if(void 0!==o)return o;throw new Error("`".concat(e,"` must be used within `").concat(i,"`"))}]},function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n[0];if(1===n.length)return r;var i=function(){var t=n.map(function(e){return{useScope:e(),scopeName:e.scopeName}});return function(o){var e=t.reduce(function(e,t){var n=t.useScope,r=t.scopeName,i=n(o)["__scope".concat(r)];return Pe(Pe({},e),i)},{});return(0,_e.useMemo)(function(){return Ee({},"__scope".concat(r.scopeName),e)},[e])}};return i.scopeName=r.scopeName,i}.apply(void 0,[n].concat(de(e)))]}var nm=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?_e.useLayoutEffect:function(){},rm=e["useId".toString()]||function(){},im=0;function om(e){var t=Ce(_e.useState(rm()),2),n=t[0],r=t[1];return nm(function(){e||r(function(e){return null!=e?e:String(im++)})},[e]),e||(n?"radix-".concat(n):"")}function am(e){var o=(0,_e.useRef)(e);return(0,_e.useEffect)(function(){o.current=e}),(0,_e.useMemo)(function(){return function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=o.current)||void 0===t?void 0:(e=t).call.apply(e,[o].concat(r))}},[])}function sm(e){var t,n,r,i,o,a,s,l=e.prop,u=e.defaultProp,c=e.onChange,d=void 0===c?function(){}:c,f=Ce((n=(t={defaultProp:u,onChange:d}).defaultProp,r=t.onChange,i=(0,_e.useState)(n),o=Ce(i,1)[0],a=(0,_e.useRef)(o),s=am(r),(0,_e.useEffect)(function(){a.current!==o&&(s(o),a.current=o)},[o,a,s]),i),2),p=f[0],h=f[1],v=void 0!==l,g=v?l:p,m=am(d);return[g,(0,_e.useCallback)(function(e){if(v){var t="function"==typeof e?e(l):e;t!==l&&m(t)}else h(e)},[v,l,h,m])]}var lm=Rj(1168),um=["children"],cm=["children"],dm=(0,_e.forwardRef)(function(e,t){var n=e.children,r=Gt(e,um),i=_e.Children.toArray(n),o=i.find(hm);if(o){var a=o.props.children,s=i.map(function(e){return e===o?1<_e.Children.count(a)?_e.Children.only(null):(0,_e.isValidElement)(a)?a.props.children:null:e});return(0,_e.createElement)(fm,$g({},r,{ref:t}),(0,_e.isValidElement)(a)?(0,_e.cloneElement)(a,void 0,s):null)}return(0,_e.createElement)(fm,$g({},r,{ref:t}),n)});dm.displayName="Slot";var fm=(0,_e.forwardRef)(function(e,t){var n=e.children,r=Gt(e,cm);return(0,_e.isValidElement)(n)?(0,_e.cloneElement)(n,Pe(Pe({},function(n,r){var i=Pe({},r),e=function(){var e=n[o],t=r[o];/^on[A-Z]/.test(o)?e&&t?i[o]=function(){t.apply(void 0,arguments),e.apply(void 0,arguments)}:e&&(i[o]=e):"style"===o?i[o]=Pe(Pe({},e),t):"className"===o&&(i[o]=[e,t].filter(Boolean).join(" "))};for(var o in r)e();return Pe(Pe({},n),i)}(r,n.props)),{},{ref:t?Qg(t,n.ref):n.ref})):1<_e.Children.count(n)?_e.Children.only(null):null});fm.displayName="SlotClone";var pm=function(e){var t=e.children;return(0,_e.createElement)(_e.Fragment,null,t)};function hm(e){return(0,_e.isValidElement)(e)&&e.type===pm}var vm=["asChild"],gm=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(function(e,o){var t=(0,_e.forwardRef)(function(e,t){var n=e.asChild,r=Gt(e,vm),i=n?dm:o;return(0,_e.useEffect)(function(){window[Symbol.for("radix-ui")]=!0},[]),(0,_e.createElement)(i,$g({},r,{ref:t}))});return t.displayName="Primitive.".concat(o),Pe(Pe({},e),{},Ee({},o,t))},{});function mm(e,t){e&&(0,lm.flushSync)(function(){return e.dispatchEvent(t)})}var ym,bm=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],wm="dismissableLayer.update",xm=(0,_e.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),km=(0,_e.forwardRef)(function(e,t){var n,r=e.disableOutsidePointerEvents,i=void 0!==r&&r,o=e.onEscapeKeyDown,s=e.onPointerDownOutside,a=e.onFocusOutside,l=e.onInteractOutside,u=e.onDismiss,c=Gt(e,bm),d=(0,_e.useContext)(xm),f=Ce((0,_e.useState)(null),2),p=f[0],h=f[1],v=null!==(n=null==p?void 0:p.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,g=Ce((0,_e.useState)({}),2)[1],m=Zg(t,function(e){return h(e)}),y=Array.from(d.layers),b=Ce(de(d.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],w=y.indexOf(b),x=p?y.indexOf(p):-1,k=0<d.layersWithOutsidePointerEventsDisabled.size,S=w<=x,_=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,i=am(function(e){var t=e.target,n=de(d.branches).some(function(e){return e.contains(t)});S&&!n&&(null==s||s(e),null==l||l(e),e.defaultPrevented||null==u||u())}),o=(0,_e.useRef)(!1),a=(0,_e.useRef)(function(){});return(0,_e.useEffect)(function(){var e=function(e){if(e.target&&!o.current){var t=function(){Em("dismissableLayer.pointerDownOutside",i,n,{discrete:!0})},n={originalEvent:e};"touch"===e.pointerType?(r.removeEventListener("click",a.current),a.current=t,r.addEventListener("click",a.current,{once:!0})):t()}o.current=!1},t=window.setTimeout(function(){r.addEventListener("pointerdown",e)},0);return function(){window.clearTimeout(t),r.removeEventListener("pointerdown",e),r.removeEventListener("click",a.current)}},[r,i]),{onPointerDownCapture:function(){return o.current=!0}}}(function(e){var t=e.target,n=de(d.branches).some(function(e){return e.contains(t)});S&&!n&&(null===s||void 0===s||s(e),null===l||void 0===l||l(e),e.defaultPrevented||null===u||void 0===u||u())},v),E=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=am(function(e){var t=e.target;de(d.branches).some(function(e){return e.contains(t)})||(null==a||a(e),null==l||l(e),e.defaultPrevented||null==u||u())}),r=(0,_e.useRef)(!1);return(0,_e.useEffect)(function(){var e=function(e){e.target&&!r.current&&Em("dismissableLayer.focusOutside",n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),function(){return t.removeEventListener("focusin",e)}},[t,n]),{onFocusCapture:function(){return r.current=!0},onBlurCapture:function(){return r.current=!1}}}(function(e){var t=e.target;de(d.branches).some(function(e){return e.contains(t)})||(null===a||void 0===a||a(e),null===l||void 0===l||l(e),e.defaultPrevented||null===u||void 0===u||u())},v);return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=am(function(e){x===d.layers.size-1&&(null==o||o(e),!e.defaultPrevented&&u&&(e.preventDefault(),u()))});(0,_e.useEffect)(function(){var e=function(e){"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e),function(){return t.removeEventListener("keydown",e)}},[n,t])}(function(e){x===d.layers.size-1&&(null===o||void 0===o||o(e),!e.defaultPrevented&&u&&(e.preventDefault(),u()))},v),(0,_e.useEffect)(function(){if(p)return i&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(ym=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),_m(),function(){i&&1===d.layersWithOutsidePointerEventsDisabled.size&&(v.body.style.pointerEvents=ym)}},[p,v,i,d]),(0,_e.useEffect)(function(){return function(){p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),_m())}},[p,d]),(0,_e.useEffect)(function(){var e=function(){return g({})};return document.addEventListener(wm,e),function(){return document.removeEventListener(wm,e)}},[]),(0,_e.createElement)(gm.div,$g({},c,{ref:m,style:Pe({pointerEvents:k?S?"auto":"none":void 0},e.style),onFocusCapture:Gg(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Gg(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Gg(e.onPointerDownCapture,_.onPointerDownCapture)}))}),Sm=(0,_e.forwardRef)(function(e,t){var n=(0,_e.useContext)(xm),r=(0,_e.useRef)(null),i=Zg(t,r);return(0,_e.useEffect)(function(){var e=r.current;if(e)return n.branches.add(e),function(){n.branches.delete(e)}},[n.branches]),(0,_e.createElement)(gm.div,$g({},e,{ref:i}))});function _m(){var e=new CustomEvent(wm);document.dispatchEvent(e)}function Em(e,t,n,r){var i=r.discrete,o=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?mm(o,a):o.dispatchEvent(a)}var Pm=km,Cm=Sm,Im=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"],Tm="focusScope.autoFocusOnMount",Mm="focusScope.autoFocusOnUnmount",Am={bubbles:!1,cancelable:!0},jm=(0,_e.forwardRef)(function(e,t){var n=e.loop,u=void 0!==n&&n,r=e.trapped,c=void 0!==r&&r,i=e.onMountAutoFocus,o=e.onUnmountAutoFocus,a=Gt(e,Im),s=Ce((0,_e.useState)(null),2),l=s[0],d=s[1],f=am(i),p=am(o),h=(0,_e.useRef)(null),v=Zg(t,function(e){return d(e)}),g=(0,_e.useRef)({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;(0,_e.useEffect)(function(){if(c){var e=function(e){if(!g.paused&&l){var t=e.target;l.contains(t)?h.current=t:Rm(h.current,{select:!0})}},t=function(e){if(!g.paused&&l){var t=e.relatedTarget;null!==t&&(l.contains(t)||Rm(h.current,{select:!0}))}};document.addEventListener("focusin",e),document.addEventListener("focusout",t);var n=new MutationObserver(function(e){var t,n=document.activeElement,r=ce(e);try{for(r.s();!(t=r.n()).done;)0<t.value.removedNodes.length&&(null!=l&&l.contains(n)||Rm(l))}catch(e){r.e(e)}finally{r.f()}});return l&&n.observe(l,{childList:!0,subtree:!0}),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[c,l,g.paused]),(0,_e.useEffect)(function(){if(l){Dm.add(g);var t=document.activeElement;if(!l.contains(t)){var e=new CustomEvent(Tm,Am);l.addEventListener(Tm,f),l.dispatchEvent(e),e.defaultPrevented||(function(e){var t,n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).select,r=void 0!==n&&n,i=document.activeElement,o=ce(e);try{for(o.s();!(t=o.n()).done;)if(Rm(t.value,{select:r}),document.activeElement!==i)return}catch(e){o.e(e)}finally{o.f()}}(Om(l).filter(function(e){return"A"!==e.tagName}),{select:!0}),document.activeElement===t&&Rm(l))}return function(){l.removeEventListener(Tm,f),setTimeout(function(){var e=new CustomEvent(Mm,Am);l.addEventListener(Mm,p),l.dispatchEvent(e),e.defaultPrevented||Rm(null!=t?t:document.body,{select:!0}),l.removeEventListener(Mm,p),Dm.remove(g)},0)}}},[l,f,p,g]);var m=(0,_e.useCallback)(function(e){if((u||c)&&!g.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var r=e.currentTarget,i=Ce([Lm(l=Om(s=r),s),Lm(l.reverse(),s)],2),o=i[0],a=i[1];o&&a?e.shiftKey||n!==a?e.shiftKey&&n===o&&(e.preventDefault(),u&&Rm(a,{select:!0})):(e.preventDefault(),u&&Rm(o,{select:!0})):n===r&&e.preventDefault()}}var s,l},[u,c,g.paused]);return(0,_e.createElement)(gm.div,$g({tabIndex:-1},a,{ref:v,onKeyDown:m}))});function Om(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:0<=e.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function Lm(e,t){var n,r=ce(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!zm(i,{upTo:t}))return i}}catch(e){r.e(e)}finally{r.f()}}function zm(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Rm(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).select,n=void 0!==t&&t;if(e&&e.focus){var r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&e instanceof HTMLInputElement&&"select"in e&&n&&e.select()}}var Nm,Dm=(Nm=[],{add:function(e){var t=Nm[0];e!==t&&(null==t||t.pause()),(Nm=Bm(Nm,e)).unshift(e)},remove:function(e){var t;null===(t=(Nm=Bm(Nm,e))[0])||void 0===t||t.resume()}});function Bm(e,t){var n=de(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var Fm=["container"],Um=(0,_e.forwardRef)(function(e,t){var n,r=e.container,i=void 0===r?null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body:r,o=Gt(e,Fm);return i?lm.createPortal((0,_e.createElement)(gm.div,$g({},o,{ref:t})),i):null}),Km=function(e){var i,t,r,n,o,a,s,l,u,c,d,f,p=e.present,h=e.children,v=(i=p,n=Ce((0,_e.useState)(),2),o=n[0],a=n[1],s=(0,_e.useRef)({}),l=(0,_e.useRef)(i),u=(0,_e.useRef)("none"),c=Ce((t=i?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},(0,_e.useReducer)(function(e,t){var n=r[e][t];return null!=n?n:e},t)),2),d=c[0],f=c[1],(0,_e.useEffect)(function(){var e=Vm(s.current);u.current="mounted"===d?e:"none"},[d]),nm(function(){var e=s.current,t=l.current;if(t!==i){var n=u.current,r=Vm(e);i?f("MOUNT"):"none"===r||"none"===(null==e?void 0:e.display)?f("UNMOUNT"):f(t&&n!==r?"ANIMATION_OUT":"UNMOUNT"),l.current=i}},[i,f]),nm(function(){if(o){var e=function(e){var t=Vm(s.current).includes(e.animationName);e.target===o&&t&&(0,lm.flushSync)(function(){return f("ANIMATION_END")})},t=function(e){e.target===o&&(u.current=Vm(s.current))};return o.addEventListener("animationstart",t),o.addEventListener("animationcancel",e),o.addEventListener("animationend",e),function(){o.removeEventListener("animationstart",t),o.removeEventListener("animationcancel",e),o.removeEventListener("animationend",e)}}f("ANIMATION_END")},[o,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:(0,_e.useCallback)(function(e){e&&(s.current=getComputedStyle(e)),a(e)},[])}),g="function"==typeof h?h({present:v.isPresent}):_e.Children.only(h),m=Zg(v.ref,g.ref);return"function"==typeof h||v.isPresent?(0,_e.cloneElement)(g,{ref:m}):null};function Vm(e){return(null==e?void 0:e.animationName)||"none"}Km.displayName="Presence";var Wm=0;function Hm(){(0,_e.useEffect)(function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:Ym()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:Ym()),Wm++,function(){1===Wm&&document.querySelectorAll("[data-radix-focus-guard]").forEach(function(e){return e.remove()}),Wm--}},[])}function Ym(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Xm=function(){return(Xm=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function qm(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create,Object.create;var $m="right-scroll-bar-position",Gm="width-before-scroll-bar";function Qm(e){return e}var Zm=function(e){void 0===e&&(e={});var t=function(e,n){void 0===n&&(n=Qm);var o=[],a=!1;return{read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:e},useMedium:function(e){var t=n(e,a);return o.push(t),function(){o=o.filter(function(e){return e!==t})}},assignSyncMedium:function(t){for(a=!0;o.length;){var e=o;o=[],e.forEach(t)}o={push:function(e){return t(e)},filter:function(){return o}}},assignMedium:function(t){a=!0;var n=[];if(o.length){var e=o;o=[],e.forEach(t),n=o}var r=function(){var e=n;n=[],e.forEach(t)},i=function(){return Promise.resolve().then(r)};i(),o={push:function(e){n.push(e),i()},filter:function(e){return n=n.filter(e),o}}}}}(null);return t.options=Xm({async:!0,ssr:!1},e),t}(),Jm=function(){},ey=_e.forwardRef(function(e,t){var n=_e.useRef(null),r=_e.useState({onScrollCapture:Jm,onWheelCapture:Jm,onTouchMoveCapture:Jm}),i=r[0],o=r[1],a=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,p=e.noIsolation,h=e.inert,v=e.allowPinchZoom,g=e.as,m=void 0===g?"div":g,y=qm(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=f,w=function(e,t){return n=t||null,r=function(r){return e.forEach(function(e){return n=r,"function"==typeof(t=e)?t(n):t&&(t.current=n),t;var t,n})},(i=(0,_e.useState)(function(){return{value:n,callback:r,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}})[0]).callback=r,i.facade;var n,r,i}([n,t]),x=Xm(Xm({},y),i);return _e.createElement(_e.Fragment,null,c&&_e.createElement(b,{sideCar:Zm,removeScrollBar:u,shards:d,noIsolation:p,inert:h,setCallbacks:o,allowPinchZoom:!!v,lockRef:n}),a?_e.cloneElement(_e.Children.only(s),Xm(Xm({},x),{ref:w})):_e.createElement(m,Xm({},x,{className:l,ref:w}),s))});ey.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},ey.classNames={fullWidth:Gm,zeroRight:$m};var ty=function(e){var t=e.sideCar,n=qm(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return _e.createElement(r,Xm({},n))};ty.isSideCarExport=!0;var ny=function(){var i=0,o=null;return{add:function(e){var t,n,r;0==i&&(o=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Rj.nc;return t&&e.setAttribute("nonce",t),e}())&&(n=e,(t=o).styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),r=o,(document.head||document.getElementsByTagName("head")[0]).appendChild(r)),i++},remove:function(){!--i&&o&&(o.parentNode&&o.parentNode.removeChild(o),o=null)}}},ry=function(){var n,r=(n=ny(),function(e,t){_e.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])});return function(e){var t=e.styles,n=e.dynamic;return r(t,n),null}},iy={left:0,top:0,right:0,gap:0},oy=function(e){return parseInt(e||"",10)||0},ay=ry(),sy=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r,o=_e.useMemo(function(){return function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return iy;var t,n,r,i,o,a=(t=e,n=window.getComputedStyle(document.body),r=n["padding"===t?"paddingLeft":"marginLeft"],i=n["padding"===t?"paddingTop":"marginTop"],o=n["padding"===t?"paddingRight":"marginRight"],[oy(r),oy(i),oy(o)]),s=document.documentElement.clientWidth,l=window.innerWidth;return{left:a[0],top:a[1],right:a[2],gap:Math.max(0,l-s+a[2]-a[0])}}(i)},[i]);return _e.createElement(ay,{styles:function(e,t,n,r){var i=e.left,o=e.top,a=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat($m," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Gm," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat($m," .").concat($m," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Gm," .").concat(Gm," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")}(o,!t,i,n?"":"!important")})},ly=!1;if("undefined"!=typeof window)try{var uy=Object.defineProperty({},"passive",{get:function(){return ly=!0}});window.addEventListener("test",uy,uy),window.removeEventListener("test",uy,uy)}catch(e){ly=!1}var cy,dy=!!ly&&{passive:!1},fy=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===n[t])},py=function(e,t){var n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),hy(e,n)){var r=vy(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},hy=function(e,t){return fy(t,"v"===e?"overflowY":"overflowX")},vy=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:[(n=t).scrollLeft,n.scrollWidth,n.clientWidth];var n,r},gy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},my=function(e){return[e.deltaX,e.deltaY]},yy=function(e){return e&&"current"in e?e.current:e},by=0,wy=[],xy=(cy=function(t){var o=_e.useRef([]),d=_e.useRef([0,0]),f=_e.useRef(),n=_e.useState(by++)[0],a=_e.useState(function(){return ry()})[0],p=_e.useRef(t);_e.useEffect(function(){p.current=t},[t]),_e.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(n));var e=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([t.lockRef.current],(t.shards||[]).map(yy),!0).filter(Boolean);return e.forEach(function(e){return e.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),e.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(n))})}}},[t.inert,t.lockRef.current,t.shards]);var s=_e.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!p.current.allowPinchZoom;var n,r=gy(e),i=d.current,o="deltaX"in e?e.deltaX:i[0]-r[0],a="deltaY"in e?e.deltaY:i[1]-r[1],s=e.target,l=Math.abs(o)>Math.abs(a)?"h":"v";if("touches"in e&&"h"==l&&"range"===s.type)return!1;var u=py(l,s);if(!u)return!0;if(u?n=l:(n="v"==l?"h":"v",u=py(l,s)),!u)return!1;if(!f.current&&"changedTouches"in e&&(o||a)&&(f.current=n),!n)return!0;var c=f.current||n;return function(e,t,n,r,i){var o,a,s=(o=e,a=window.getComputedStyle(t).direction,"h"===o&&"rtl"===a?-1:1),l=s*r,u=n.target,c=t.contains(u),d=!1,f=0<l,p=0,h=0;do{var v=vy(e,u),g=v[0],m=v[1]-v[2]-s*g;(g||m)&&hy(e,u)&&(p+=m,h+=g),u=u.parentNode}while(!c&&u!==document.body||c&&(t.contains(u)||t===u));return(f&&(0===p||!1)||!f&&(0===h||!1))&&(d=!0),d}(c,t,e,"h"===c?o:a)},[]),e=_e.useCallback(function(e){var r=e;if(wy.length&&wy[wy.length-1]===a){var i="deltaY"in r?my(r):gy(r),t=o.current.filter(function(e){return e.name===r.type&&e.target===r.target&&(t=e.delta,n=i,t[0]===n[0]&&t[1]===n[1]);var t,n})[0];if(t&&t.should)r.cancelable&&r.preventDefault();else if(!t){var n=(p.current.shards||[]).map(yy).filter(Boolean).filter(function(e){return e.contains(r.target)});(0<n.length?s(r,n[0]):!p.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),r=_e.useCallback(function(e,t,n,r){var i={name:e,delta:t,target:n,should:r};o.current.push(i),setTimeout(function(){o.current=o.current.filter(function(e){return e!==i})},1)},[]),i=_e.useCallback(function(e){d.current=gy(e),f.current=void 0},[]),l=_e.useCallback(function(e){r(e.type,my(e),e.target,s(e,t.lockRef.current))},[]),u=_e.useCallback(function(e){r(e.type,gy(e),e.target,s(e,t.lockRef.current))},[]);_e.useEffect(function(){return wy.push(a),t.setCallbacks({onScrollCapture:l,onWheelCapture:l,onTouchMoveCapture:u}),document.addEventListener("wheel",e,dy),document.addEventListener("touchmove",e,dy),document.addEventListener("touchstart",i,dy),function(){wy=wy.filter(function(e){return e!==a}),document.removeEventListener("wheel",e,dy),document.removeEventListener("touchmove",e,dy),document.removeEventListener("touchstart",i,dy)}},[]);var c=t.removeScrollBar,h=t.inert;return _e.createElement(_e.Fragment,null,h?_e.createElement(a,{styles:function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")}(n)}):null,c?_e.createElement(sy,{gapMode:"margin"}):null)},Zm.useMedium(cy),ty),ky=_e.forwardRef(function(e,t){return _e.createElement(ey,Xm({},e,{ref:t,sideCar:xy}))});ky.classNames=ey.classNames;var Sy=ky,_y=new WeakMap,Ey=new WeakMap,Py={},Cy=0,Iy=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=t||function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),function(e,t,a,s){var n,r=(n=t,(Array.isArray(e)?e:[e]).map(function(e){if(n.contains(e))return e;var t=function e(t){return t&&(t.host||e(t.parentNode))}(e);return t&&n.contains(t)?t:(console.error("aria-hidden",e,"in not contained inside",n,". Doing nothing"),null)}).filter(function(e){return Boolean(e)}));Py[a]||(Py[a]=new WeakMap);var l=Py[a],u=[],c=new Set,i=new Set(r);return r.forEach(function e(t){t&&!c.has(t)&&(c.add(t),e(t.parentNode))}),function o(e){e&&!i.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(c.has(e))o(e);else{var t=e.getAttribute(s),n=null!==t&&"false"!==t,r=(_y.get(e)||0)+1,i=(l.get(e)||0)+1;_y.set(e,r),l.set(e,i),u.push(e),1===r&&n&&Ey.set(e,!0),1===i&&e.setAttribute(a,"true"),n||e.setAttribute(s,"true")}})}(t),c.clear(),Cy++,function(){u.forEach(function(e){var t=_y.get(e)-1,n=l.get(e)-1;_y.set(e,t),l.set(e,n),t||(Ey.has(e)||e.removeAttribute(s),Ey.delete(e)),n||e.removeAttribute(a)}),--Cy||(_y=new WeakMap,_y=new WeakMap,Ey=new WeakMap,Py={})}}(r,i,n,"aria-hidden")):function(){return null}},Ty=["forceMount"],My=["__scopeDialog"],Ay=["forceMount"],jy=["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"],Oy=["__scopeDialog"],Ly=["__scopeDialog"],zy=Ce(tm("Dialog"),2),Ry=zy[0],Ny=(zy[1],Ce(Ry("Dialog"),2)),Dy=Ny[0],By=Ny[1],Fy="DialogPortal",Uy=Ce(Ry(Fy,{forceMount:void 0}),2),Ky=Uy[0],Vy=Uy[1],Wy="DialogOverlay",Hy=(0,_e.forwardRef)(function(e,t){var n=Vy(Wy,e.__scopeDialog),r=e.forceMount,i=void 0===r?n.forceMount:r,o=Gt(e,Ty),a=By(Wy,e.__scopeDialog);return a.modal?(0,_e.createElement)(Km,{present:i||a.open},(0,_e.createElement)(Yy,$g({},o,{ref:t}))):null}),Yy=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDialog,r=Gt(e,My),i=By(Wy,n);return(0,_e.createElement)(Sy,{as:dm,allowPinchZoom:!0,shards:[i.contentRef]},(0,_e.createElement)(gm.div,$g({"data-state":tb(i.open)},r,{ref:t,style:Pe({pointerEvents:"auto"},r.style)})))}),Xy="DialogContent",qy=(0,_e.forwardRef)(function(e,t){var n=Vy(Xy,e.__scopeDialog),r=e.forceMount,i=void 0===r?n.forceMount:r,o=Gt(e,Ay),a=By(Xy,e.__scopeDialog);return(0,_e.createElement)(Km,{present:i||a.open},a.modal?(0,_e.createElement)($y,$g({},o,{ref:t})):(0,_e.createElement)(Gy,$g({},o,{ref:t})))}),$y=(0,_e.forwardRef)(function(e,t){var n=By(Xy,e.__scopeDialog),r=(0,_e.useRef)(null),i=Zg(t,n.contentRef,r);return(0,_e.useEffect)(function(){var e=r.current;if(e)return Iy(e)},[]),(0,_e.createElement)(Qy,$g({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gg(e.onCloseAutoFocus,function(e){var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:Gg(e.onPointerDownOutside,function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Gg(e.onFocusOutside,function(e){return e.preventDefault()})}))}),Gy=(0,_e.forwardRef)(function(i,e){var o=By(Xy,i.__scopeDialog),a=(0,_e.useRef)(!1),s=(0,_e.useRef)(!1);return(0,_e.createElement)(Qy,$g({},i,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(e){var t,n;null===(t=i.onCloseAutoFocus)||void 0===t||t.call(i,e),e.defaultPrevented||(a.current||null===(n=o.triggerRef.current)||void 0===n||n.focus(),e.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:function(e){var t,n;null===(t=i.onInteractOutside)||void 0===t||t.call(i,e),e.defaultPrevented||(a.current=!0,"pointerdown"===e.detail.originalEvent.type&&(s.current=!0));var r=e.target;(null===(n=o.triggerRef.current)||void 0===n?void 0:n.contains(r))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&s.current&&e.preventDefault()}}))}),Qy=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDialog,r=e.trapFocus,i=e.onOpenAutoFocus,o=e.onCloseAutoFocus,a=Gt(e,jy),s=By(Xy,n),l=Zg(t,(0,_e.useRef)(null));return Hm(),(0,_e.createElement)(_e.Fragment,null,(0,_e.createElement)(jm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},(0,_e.createElement)(km,$g({role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":tb(s.open)},a,{ref:l,onDismiss:function(){return s.onOpenChange(!1)}}))),!1)}),Zy="DialogTitle",Jy=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDialog,r=Gt(e,Oy),i=By(Zy,n);return(0,_e.createElement)(gm.h2,$g({id:i.titleId},r,{ref:t}))}),eb=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDialog,r=Gt(e,Ly),i=By("DialogClose",n);return(0,_e.createElement)(gm.button,$g({type:"button"},r,{ref:t,onClick:Gg(e.onClick,function(){return i.onOpenChange(!1)})}))});function tb(e){return e?"open":"closed"}var nb=Ce(function(n,r){var i=(0,_e.createContext)(r);function e(e){var t=e.children,n=Gt(e,Jg),r=(0,_e.useMemo)(function(){return n},Object.values(n));return(0,_e.createElement)(i.Provider,{value:r},t)}return e.displayName=n+"Provider",[e,function(e){var t=(0,_e.useContext)(i);if(t)return t;if(void 0!==r)return r;throw new Error("`".concat(e,"` must be used within `").concat(n,"`"))}]}("DialogTitleWarning",{contentName:Xy,titleName:Zy,docsSlug:"dialog"}),2),rb=(nb[0],nb[1],function(e){var t=e.__scopeDialog,n=e.children,r=e.open,i=e.defaultOpen,o=e.onOpenChange,a=e.modal,s=void 0===a||a,l=(0,_e.useRef)(null),u=(0,_e.useRef)(null),c=Ce(sm({prop:r,defaultProp:i,onChange:o}),2),d=c[0],f=void 0!==d&&d,p=c[1];return(0,_e.createElement)(Dy,{scope:t,triggerRef:l,contentRef:u,contentId:om(),titleId:om(),descriptionId:om(),open:f,onOpenChange:p,onOpenToggle:(0,_e.useCallback)(function(){return p(function(e){return!e})},[p]),modal:s},n)}),ib=function(e){var t=e.__scopeDialog,n=e.forceMount,r=e.children,i=e.container,o=By(Fy,t);return(0,_e.createElement)(Ky,{scope:t,forceMount:n},_e.Children.map(r,function(e){return(0,_e.createElement)(Km,{present:n||o.open},(0,_e.createElement)(Um,{asChild:!0,container:i},e))}))},ob=Hy,ab=qy,sb=(0,_e.createContext)(null);function lb(e){var t=e.assetUrls,n=e.children;return(0,to.jsx)(sb.Provider,{value:t,children:n})}function ub(){var e=(0,_e.useContext)(sb);if(!e)throw new Error("useAssetUrls must be used within an AssetUrlsProvider");return e}var cb={"action.convert-to-bookmark":"Convert to Bookmark","action.convert-to-embed":"Convert to Embed","action.open-embed-link":"Open link","action.align-bottom":"Align bottom","action.align-center-horizontal":"Align horizontally","action.align-center-vertical":"Align vertically","action.align-center-horizontal.short":"Align H","action.align-center-vertical.short":"Align V","action.align-left":"Align left","action.align-right":"Align right","action.align-top":"Align top","action.back-to-content":"Back to content","action.bring-forward":"Bring forward","action.bring-to-front":"Bring to front","action.copy-as-json.short":"JSON","action.copy-as-json":"Copy as JSON","action.copy-as-png.short":"PNG","action.copy-as-png":"Copy as PNG","action.copy-as-svg.short":"SVG","action.copy-as-svg":"Copy as SVG","action.copy":"Copy","action.cut":"Cut","action.delete":"Delete","action.distribute-horizontal":"Distribute horizontally","action.distribute-vertical":"Distribute vertically","action.distribute-horizontal.short":"Distribute H","action.distribute-vertical.short":"Distribute V","action.duplicate":"Duplicate","action.edit-link":"Edit link","action.exit-pen-mode":"Exit pen mode","action.export-as-json.short":"JSON","action.export-as-json":"Export as JSON","action.export-as-png.short":"PNG","action.export-as-png":"Export as PNG","action.export-as-svg.short":"SVG","action.export-as-svg":"Export as SVG","action.flip-horizontal":"Flip horizontally","action.flip-vertical":"Flip vertically","action.flip-horizontal.short":"Flip H","action.flip-vertical.short":"Flip V","action.fork-project":"Fork this project","action.group":"Group","action.insert-embed":"Insert embed","action.insert-media":"Upload media","action.leave-shared-project":"Leave shared project","action.new-project":"New project","action.new-shared-project":"New shared project","action.open-cursor-chat":"Cursor chat","action.open-file":"Open file","action.pack":"Pack","action.paste":"Paste","action.print":"Print","action.redo":"Redo","action.rotate-ccw":"Rotate counterclockwise","action.rotate-cw":"Rotate clockwise","action.save-copy":"Save a copy","action.select-all":"Select all","action.select-none":"Select none","action.send-backward":"Send backward","action.send-to-back":"Send to back","action.share-project":"Share this project","action.stack-horizontal":"Stack horizontally","action.stack-vertical":"Stack vertically","action.stack-horizontal.short":"Stack H","action.stack-vertical.short":"Stack V","action.stop-following":"Stop following","action.stretch-horizontal":"Stretch horizontally","action.stretch-vertical":"Stretch vertically","action.stretch-horizontal.short":"Stretch H","action.stretch-vertical.short":"Stretch V","action.toggle-auto-size":"Toggle auto size","action.toggle-dark-mode.menu":"Dark mode","action.toggle-dark-mode":"Toggle dark mode","action.toggle-reduce-motion.menu":"Reduce motion","action.toggle-reduce-motion":"Toggle reduce motion","action.toggle-debug-mode.menu":"Debug mode","action.toggle-debug-mode":"Toggle debug mode","action.toggle-focus-mode.menu":"Focus mode","action.toggle-focus-mode":"Toggle focus mode","action.toggle-grid.menu":"Show grid","action.toggle-grid":"Toggle grid","action.toggle-lock":"Toggle locked","action.toggle-snap-mode.menu":"Always snap","action.toggle-snap-mode":"Toggle always snap","action.toggle-tool-lock.menu":"Tool lock","action.toggle-tool-lock":"Toggle tool lock","action.toggle-transparent.context-menu":"Transparent","action.toggle-transparent.menu":"Transparent","action.toggle-transparent":"Toggle transparent background","action.undo":"Undo","action.ungroup":"Ungroup","action.zoom-in":"Zoom in","action.zoom-out":"Zoom out","action.zoom-to-100":"Zoom to 100%","action.zoom-to-fit":"Zoom to fit","action.zoom-to-selection":"Zoom to selection","color-style.black":"Black","color-style.blue":"Blue","color-style.green":"Green","color-style.grey":"Grey","color-style.light-blue":"Light blue","color-style.light-green":"Light green","color-style.light-red":"Light red","color-style.light-violet":"Light violet","color-style.orange":"Orange","color-style.red":"Red","color-style.violet":"Violet","color-style.yellow":"Yellow","fill-style.none":"None","fill-style.semi":"Semi","fill-style.solid":"Solid","fill-style.pattern":"Pattern","dash-style.dashed":"Dashed","dash-style.dotted":"Dotted","dash-style.draw":"Draw","dash-style.solid":"Solid","size-style.s":"Small","size-style.m":"Medium","size-style.l":"Large","size-style.xl":"Extra large","opacity-style.0.1":"10%","opacity-style.0.25":"25%","opacity-style.0.5":"50%","opacity-style.0.75":"75%","opacity-style.1":"100%","font-style.draw":"Draw","font-style.sans":"Sans","font-style.serif":"Serif","font-style.mono":"Mono","align-style.start":"Start","align-style.middle":"Middle","align-style.end":"End","align-style.justify":"Justify","geo-style.arrow-down":"Arrow down","geo-style.arrow-left":"Arrow left","geo-style.arrow-right":"Arrow right","geo-style.arrow-up":"Arrow up","geo-style.diamond":"Diamond","geo-style.ellipse":"Ellipse","geo-style.hexagon":"Hexagon","geo-style.octagon":"Octagon","geo-style.oval":"Oval","geo-style.pentagon":"Pentagon","geo-style.rectangle":"Rectangle","geo-style.rhombus-2":"Rhombus 2","geo-style.rhombus":"Rhombus","geo-style.star":"Star","geo-style.trapezoid":"Trapezoid","geo-style.triangle":"Triangle","geo-style.x-box":"X box","geo-style.check-box":"Check box","arrowheadStart-style.none":"None","arrowheadStart-style.arrow":"Arrow","arrowheadStart-style.bar":"Bar","arrowheadStart-style.diamond":"Diamond","arrowheadStart-style.dot":"Dot","arrowheadStart-style.inverted":"Inverted","arrowheadStart-style.pipe":"Pipe","arrowheadStart-style.square":"Square","arrowheadStart-style.triangle":"Triangle","arrowheadEnd-style.none":"None","arrowheadEnd-style.arrow":"Arrow","arrowheadEnd-style.bar":"Bar","arrowheadEnd-style.diamond":"Diamond","arrowheadEnd-style.dot":"Dot","arrowheadEnd-style.inverted":"Inverted","arrowheadEnd-style.pipe":"Pipe","arrowheadEnd-style.square":"Square","arrowheadEnd-style.triangle":"Triangle","spline-style.line":"Line","spline-style.cubic":"Cubic","tool.select":"Select","tool.hand":"Hand","tool.draw":"Draw","tool.eraser":"Eraser","tool.arrow-down":"Arrow down","tool.arrow-left":"Arrow left","tool.arrow-right":"Arrow right","tool.arrow-up":"Arrow up","tool.arrow":"Arrow","tool.diamond":"Diamond","tool.ellipse":"Ellipse","tool.hexagon":"Hexagon","tool.highlight":"Highlight","tool.line":"Line","tool.octagon":"Octagon","tool.oval":"Oval","tool.pentagon":"Pentagon","tool.rectangle":"Rectangle","tool.rhombus":"Rhombus","tool.star":"Star","tool.trapezoid":"Trapezoid","tool.triangle":"Triangle","tool.x-box":"X box","tool.check-box":"Check box","tool.asset":"Asset","tool.frame":"Frame","tool.note":"Note","tool.laser":"Laser","tool.embed":"Embed","tool.text":"Text","menu.title":"Menu","menu.copy-as":"Copy as","menu.edit":"Edit","menu.export-as":"Export as","menu.file":"File","menu.language":"Language","menu.preferences":"Preferences","menu.view":"View","context-menu.arrange":"Arrange","context-menu.copy-as":"Copy as","context-menu.export-as":"Export as","context-menu.move-to-page":"Move to page","context-menu.reorder":"Reorder","page-menu.title":"Pages","page-menu.create-new-page":"Create new page","page-menu.max-page-count-reached":"Max pages reached","page-menu.new-page-initial-name":"Page 1","page-menu.edit-start":"Edit","page-menu.edit-done":"Done","page-menu.go-to-page":"Go to page","page-menu.submenu.rename":"Rename","page-menu.submenu.duplicate-page":"Duplicate","page-menu.submenu.title":"Menu","page-menu.submenu.move-down":"Move down","page-menu.submenu.move-up":"Move up","page-menu.submenu.delete":"Delete","share-menu.title":"Share","share-menu.save-note":"Download this project to your computer as a .tldr file.","share-menu.fork-note":"Create a new shared project based on this snapshot.","share-menu.share-project":"Share this project","share-menu.default-project-name":"Shared Project","share-menu.copy-link":"Copy share link","share-menu.readonly-link":"Read-only","share-menu.create-snapshot-link":"Copy snapshot link","share-menu.snapshot-link-note":"Capture and share this project as a read-only snapshot link.","share-menu.copy-readonly-link":"Copy read-only link","share-menu.offline-note":"Create a new shared project based on your current project.","share-menu.copy-link-note":"Anyone with the link will be able to view and edit this project.","share-menu.copy-readonly-link-note":"Anyone with the link will be able to view (but not edit) this project.","share-menu.project-too-large":"Sorry, this project can't be shared because it's too large. We're working on it!","share-menu.upload-failed":"Sorry, we couldn't upload your project at the moment. Please try again or let us know if the problem persists.","people-menu.title":"People","people-menu.change-name":"Change name","people-menu.change-color":"Change color","people-menu.follow":"Following","people-menu.following":"Following","people-menu.leading":"Following You","people-menu.user":"(You)","people-menu.invite":"Invite others","help-menu.title":"Help and resources","help-menu.about":"About","help-menu.discord":"Discord","help-menu.github":"GitHub","help-menu.keyboard-shortcuts":"Keyboard shortcuts","help-menu.twitter":"Twitter","actions-menu.title":"Actions","edit-link-dialog.title":"Edit link","edit-link-dialog.invalid-url":"A link must be a valid URL.","edit-link-dialog.detail":"Links will open in a new tab.","edit-link-dialog.url":"URL","edit-link-dialog.clear":"Clear","edit-link-dialog.save":"Continue","edit-link-dialog.cancel":"Cancel","embed-dialog.title":"Insert embed","embed-dialog.back":"Back","embed-dialog.create":"Create","embed-dialog.cancel":"Cancel","embed-dialog.url":"URL","embed-dialog.instruction":"Paste in the site's URL to create the embed.","embed-dialog.invalid-url":"We could not create an embed from that URL.","edit-pages-dialog.move-down":"Move down","edit-pages-dialog.move-up":"Move up","shortcuts-dialog.title":"Keyboard shortcuts","shortcuts-dialog.edit":"Edit","shortcuts-dialog.file":"File","shortcuts-dialog.preferences":"Preferences","shortcuts-dialog.tools":"Tools","shortcuts-dialog.transform":"Transform","shortcuts-dialog.view":"View","shortcuts-dialog.collaboration":"Collaboration","home-project-dialog.title":"Home project","home-project-dialog.description":"This is your local home project. It's just for you!","rename-project-dialog.title":"Rename project","rename-project-dialog.cancel":"Cancel","rename-project-dialog.rename":"Rename","home-project-dialog.ok":"Ok","style-panel.title":"Styles","style-panel.align":"Align","style-panel.vertical-align":"Vertical align","style-panel.position":"Position","style-panel.arrowheads":"Arrowheads","style-panel.arrowhead-start":"Start","style-panel.arrowhead-end":"End","style-panel.color":"Color","style-panel.dash":"Dash","style-panel.fill":"Fill","style-panel.font":"Font","style-panel.geo":"Shape","style-panel.mixed":"Mixed","style-panel.opacity":"Opacity","style-panel.size":"Size","style-panel.spline":"Spline","tool-panel.drawing":"Drawing","tool-panel.shapes":"Shapes","tool-panel.more":"More","debug-panel.more":"More","navigation-zone.toggle-minimap":"Toggle minimap","navigation-zone.zoom":"Zoom","focus-mode.toggle-focus-mode":"Toggle focus mode","toast.close":"Close","file-system.file-open-error.title":"Could not open file","file-system.file-open-error.not-a-tldraw-file":"The file you tried to open doesn't look like a tldraw file.","file-system.file-open-error.file-format-version-too-new":"The file you tried to open is from a newer version of tldraw. Please reload the page and try again.","file-system.file-open-error.generic-corrupted-file":"The file you tried to open is corrupted.","file-system.confirm-open.title":"Overwrite current project?","file-system.confirm-open.description":"Opening a file will replace your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-open.cancel":"Cancel","file-system.confirm-open.open":"Open file","file-system.confirm-open.dont-show-again":"Don't ask again","file-system.confirm-clear.title":"Clear current project?","file-system.confirm-clear.description":"Creating a new project will clear your current project and any unsaved changes will be lost. Are you sure you want to continue?","file-system.confirm-clear.cancel":"Cancel","file-system.confirm-clear.continue":"Continue","file-system.confirm-clear.dont-show-again":"Don't ask again","file-system.shared-document-file-open-error.title":"Could not open file","file-system.shared-document-file-open-error.description":"Opening files from shared projects is not supported.","sharing.confirm-leave.title":"Leave current project?","sharing.confirm-leave.description":"Are you sure you want to leave this shared project? You can return to it by navigating to its URL.","sharing.confirm-leave.cancel":"Cancel","sharing.confirm-leave.leave":"Leave","sharing.confirm-leave.dont-show-again":"Don't ask again","toast.error.export-fail.title":"Failed export","toast.error.export-fail.desc":"Failed to export image","toast.error.copy-fail.title":"Failed copy","toast.error.copy-fail.desc":"Failed to copy image","context.pages.new-page":"New page","vscode.file-open.desc":"We've updated this document to work with the current version of tldraw. If you'd like to keep the original version (which will work on old.tldraw.com), click below to create a backup.","vscode.file-open.open":"Continue","vscode.file-open.backup":"Backup","vscode.file-open.backup-saved":"Backup saved","vscode.file-open.backup-failed":"Backup failed: this is not a .tldr file.","vscode.file-open.dont-show-again":"Don't ask again","cursor-chat.type-to-chat":"Type to chat..."},db={locale:"en",label:"English",messages:cb};function fb(e,t){return pb.apply(this,arguments)}function pb(){return(pb=ao(io().mark(function e(t,n){var r,i,o,a,s;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n.translations.en);case 2:if(e.sent.ok){e.next=6;break}return console.warn("No main translations found."),e.abrupt("return",db);case 6:if("en"===t)return e.abrupt("return",db);e.next=8;break;case 8:if(r=Zi.find(function(e){return e.locale===t})){e.next=12;break}return console.warn("No translation found for locale ".concat(t)),e.abrupt("return",db);case 12:return e.next=14,fetch(n.translations[r.locale]);case 14:return i=e.sent,e.next=17,i.json();case 17:if(o=e.sent){e.next=21;break}return console.warn("No messages found for locale ".concat(t)),e.abrupt("return",db);case 21:for(s in a=[],db)o[s]||a.push(s);return a.length,e.abrupt("return",{locale:t,label:r.label,messages:Pe(Pe({},db.messages),o)});case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}var hb=_e.createContext({}),vb=function(){return _e.useContext(hb)},gb=po(function(e){var r=e.overrides,t=e.children,i=mo().locale,o=ub(),n=Ce(_e.useState(function(){return r&&r.en?{locale:"en",label:"English",messages:Pe(Pe({},cb),r.en)}:{locale:"en",label:"English",messages:cb}}),2),a=n[0],s=n[1];return _e.useEffect(function(){var n=!1;function e(){return(e=ao(io().mark(function e(){var t;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fb(i,o);case 2:(t=e.sent)&&!n&&(r&&r[i]?s(Pe(Pe({},t),{},{messages:Pe(Pe({},t.messages),r[i])})):s(t));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){n=!0}},[o,i,r]),(0,to.jsx)(hb.Provider,{value:a,children:t})});function mb(){var n=vb();return _e.useCallback(function(e){var t;return null!==(t=n.messages[e])&&void 0!==t?t:e},[n])}function yb(e){return(0,to.jsx)("svg",Pe(Pe({width:16,height:16,viewBox:"0 0 16 16"},e),{},{children:(0,to.jsxs)("g",{strokeWidth:2,fill:"none",fillRule:"evenodd",children:[(0,to.jsx)("circle",{strokeOpacity:.25,cx:8,cy:8,r:7,stroke:"currentColor"}),(0,to.jsx)("path",{strokeLinecap:"round",d:"M15 8c0-4.5-4.5-7-7-7",stroke:"currentColor",children:(0,to.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 8 8",to:"360 8 8",dur:"1s",repeatCount:"indefinite"})})]})}))}var bb=["small","invertIcon","icon","color","className"],wb=(0,_e.memo)(function(e){var t=e.small,n=e.invertIcon,r=e.icon,i=e.color,o=e.className,a=Gt(e,bb),s=ub().icons[r],l=(0,_e.useRef)(null);return(0,_e.useLayoutEffect)(function(){null!=l&&l.current&&(l.current.style.webkitMask="url(".concat(s,") center 100% / 100% no-repeat"))},[l,s]),(0,to.jsx)("div",Pe(Pe({},a),{},{ref:l,className:so("tlui-icon",{"tlui-icon__small":t},o),style:{color:i,mask:"url(".concat(s,") center 100% / 100% no-repeat"),transform:n?"scale(-1, 1)":void 0}}))}),xb="undefined"!=typeof window&&-1<window.navigator.userAgent.toLowerCase().indexOf("mac"),kb=xb?"⌘":"Ctrl",Sb=xb?"⌥":"Alt";function _b(e){return"— "+e.split(",")[0].split("").map(function(e){var t=e.replace(/\$/g,kb).replace(/\?/g,Sb).replace(/!/g,"⇧");return t[0].toUpperCase()+t.slice(1)}).join(" ")}function Eb(e){var t,n=e.children;return(0,to.jsx)("kbd",{className:"tlui-kbd",children:(t=n,t.split(",")[0].split("").map(function(e){var t=e.replace(/\$/g,kb).replace(/\?/g,Sb).replace(/!/g,"⇧");return t[0].toUpperCase()+t.slice(1)})).map(function(e,t){return(0,to.jsx)("span",{children:e},t)})})}var Pb=["label","icon","invertIcon","iconLeft","smallIcon","kbd","isChecked","type","children","spinner"],Cb=_e.forwardRef(function(e,t){var n,r=e.label,i=e.icon,o=e.invertIcon,a=e.iconLeft,s=e.smallIcon,l=e.kbd,u=e.isChecked,c=void 0!==u&&u,d=e.type,f=void 0===d?"normal":d,p=e.children,h=e.spinner,v=Gt(e,Pb),g=mb(),m=r?g(r):"";return(0,to.jsxs)("button",Pe(Pe({ref:t,draggable:!1,type:"button"},v),{},{title:null!==(n=v.title)&&void 0!==n?n:m,className:so("tlui-button","tlui-button__".concat(f),v.className),children:[a&&(0,to.jsx)(wb,{icon:a,className:"tlui-icon-left",small:!0}),p,r&&(0,to.jsxs)("span",{draggable:!1,children:[m,c&&(0,to.jsx)(wb,{icon:"check"})]}),l&&(0,to.jsx)(Eb,{children:l}),i&&!h&&(0,to.jsx)(wb,{icon:i,small:!!r||s,invertIcon:o}),h&&(0,to.jsx)(yb,{})]}))});function Ib(e){var t=e.className,n=e.children;return(0,to.jsx)("div",{className:so("tlui-dialog__header",t),children:n})}function Tb(e){var t=e.className,n=e.children;return(0,to.jsx)(Jy,{dir:"ltr",className:so("tlui-dialog__header__title",t),children:n})}function Mb(){return(0,to.jsx)("div",{className:"tlui-dialog__header__close",children:(0,to.jsx)(eb,{"data-testid":"dialog.close",dir:"ltr",asChild:!0,children:(0,to.jsx)(Cb,{"aria-label":"Close",onTouchEnd:function(e){return e.target.click()},children:(0,to.jsx)(wb,{small:!0,icon:"cross-2"})})})})}function Ab(e){var t=e.className,n=e.children,r=e.style;return(0,to.jsx)("div",{className:so("tlui-dialog__body",t),style:r,children:n})}function jb(e){var t=e.className,n=e.children;return(0,to.jsx)("div",{className:so("tlui-dialog__footer",t),children:n})}var Ob=["scope","children"];function Lb(n){var e=n+"CollectionProvider",t=Ce(tm(e),2),r=t[0],i=t[1],o=Ce(r(e,{collectionRef:{current:null},itemMap:new Map}),2),a=o[0],u=o[1],s=n+"CollectionSlot",l=_e.forwardRef(function(e,t){var n=e.scope,r=e.children,i=Zg(t,u(s,n).collectionRef);return _e.createElement(dm,{ref:i},r)}),c=n+"CollectionItemSlot",d="data-radix-collection-item";return[{Provider:function(e){var t=e.scope,n=e.children,r=_e.useRef(null),i=_e.useRef(new Map).current;return _e.createElement(a,{scope:t,itemMap:i,collectionRef:r},n)},Slot:l,ItemSlot:_e.forwardRef(function(e,t){var n,r=e.scope,i=e.children,o=Gt(e,Ob),a=_e.useRef(null),s=Zg(t,a),l=u(c,r);return _e.useEffect(function(){return l.itemMap.set(a,Pe({ref:a},o)),function(){l.itemMap.delete(a)}}),_e.createElement(dm,(Ee(n={},d,""),Ee(n,"ref",s),n),i)})},function(e){var t=u(n+"CollectionConsumer",e);return _e.useCallback(function(){var e=t.collectionRef.current;if(!e)return[];var n=Array.from(e.querySelectorAll("[".concat(d,"]")));return Array.from(t.itemMap.values()).sort(function(e,t){return n.indexOf(e.ref.current)-n.indexOf(t.ref.current)})},[t.collectionRef,t.itemMap])},i]}var zb=(0,_e.createContext)(void 0);function Rb(e){var t=(0,_e.useContext)(zb);return e||t||"ltr"}var Nb=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"],Db=["strategy"],Bb=["mainAxis","crossAxis","limiter"],Fb=["apply"];function Ub(e){return e.split("-")[1]}function Kb(e){return"y"===e?"height":"width"}function Vb(e){return e.split("-")[0]}function Wb(e){return["top","bottom"].includes(Vb(e))?"x":"y"}function Hb(e,t,n){var r,i=e.reference,o=e.floating,a=i.x+i.width/2-o.width/2,s=i.y+i.height/2-o.height/2,l=Wb(t),u=Kb(l),c=i[u]/2-o[u]/2,d="x"===l;switch(Vb(t)){case"top":r={x:a,y:i.y-o.height};break;case"bottom":r={x:a,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:s};break;case"left":r={x:i.x-o.width,y:s};break;default:r={x:i.x,y:i.y}}switch(Ub(t)){case"start":r[l]-=c*(n&&d?-1:1);break;case"end":r[l]+=c*(n&&d?-1:1)}return r}var Yb,Xb=(Yb=ao(io().mark(function e(t,n,r){var i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,a=r.strategy,s=void 0===a?"absolute":a,l=r.middleware,u=void 0===l?[]:l,c=r.platform,d=u.filter(Boolean),e.next=10,null==c.isRTL?void 0:c.isRTL(n);case 10:return f=e.sent,e.next=13,c.getElementRects({reference:t,floating:n,strategy:s});case 13:p=e.sent,h=Hb(p,o,f),v=h.x,g=h.y,m=o,y={},w=b=0;case 21:if(w<d.length)return k=d[w],S=k.name,_=k.fn,e.next=27,_({x:v,y:g,initialPlacement:o,placement:m,strategy:s,middlewareData:y,rects:p,platform:c,elements:{reference:t,floating:n}});e.next=56;break;case 27:if(E=e.sent,P=E.x,C=E.y,I=E.data,T=E.reset,v=null!=P?P:v,g=null!=C?C:g,y=Pe(Pe({},y),{},Ee({},S,Pe(Pe({},y[S]),I))),e.t0=T&&b<=50,!e.t0){e.next=53;break}if(b++,e.t1="object"==typeof T,!e.t1){e.next=52;break}if(T.placement&&(m=T.placement),e.t2=T.rects,!e.t2){e.next=51;break}if(!0===T.rects)return e.next=46,c.getElementRects({reference:t,floating:n,strategy:s});e.next=49;break;case 46:e.t3=e.sent,e.next=50;break;case 49:e.t3=T.rects;case 50:p=e.t3;case 51:x=Hb(p,m,f),v=x.x,g=x.y;case 52:w=-1;case 53:w++,e.next=21;break;case 56:return e.abrupt("return",{x:v,y:g,placement:m,strategy:s,middlewareData:y});case 57:case"end":return e.stop()}},e)})),function(e,t,n){return Yb.apply(this,arguments)});function qb(e,t){return"function"==typeof e?e(t):e}function $b(e){return"number"!=typeof e?Pe({top:0,right:0,bottom:0,left:0},e):{top:e,right:e,bottom:e,left:e}}function Gb(e){return Pe(Pe({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function Qb(e,t){return Zb.apply(this,arguments)}function Zb(){return(Zb=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,a=t.platform,s=t.rects,l=t.elements,u=t.strategy,c=qb(n,t),d=c.boundary,f=void 0===d?"clippingAncestors":d,p=c.rootBoundary,h=void 0===p?"viewport":p,v=c.elementContext,g=void 0===v?"floating":v,m=c.altBoundary,y=void 0!==m&&m,b=c.padding,w=$b(void 0===b?0:b),x=l[y?"floating"===g?"reference":"floating":g],e.t0=Gb,e.t1=a,e.next=24,null==a.isElement?void 0:a.isElement(x);case 24:if(e.t3=r=e.sent,e.t2=null==e.t3,e.t2){e.next=28;break}e.t2=r;case 28:if(!e.t2){e.next=32;break}e.t4=x,e.next=38;break;case 32:if(e.t5=x.contextElement,e.t5){e.next=37;break}return e.next=36,null==a.getDocumentElement?void 0:a.getDocumentElement(l.floating);case 36:e.t5=e.sent;case 37:e.t4=e.t5;case 38:return e.t6=e.t4,e.t7=f,e.t8=h,e.t9=u,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=45,e.t1.getClippingRect.call(e.t1,e.t10);case 45:return e.t11=e.sent,k=(0,e.t0)(e.t11),S="floating"===g?Pe(Pe({},s.floating),{},{x:i,y:o}):s.reference,e.next=50,null==a.getOffsetParent?void 0:a.getOffsetParent(l.floating);case 50:return _=e.sent,e.next=53,null==a.isElement?void 0:a.isElement(_);case 53:if(e.t13=e.sent,e.t13)return e.next=57,null==a.getScale?void 0:a.getScale(_);e.next=58;break;case 57:e.t13=e.sent;case 58:if(e.t12=e.t13,e.t12){e.next=61;break}e.t12={x:1,y:1};case 61:if(E=e.t12,e.t14=Gb,a.convertOffsetParentRelativeRectToViewportRelativeRect)return e.next=66,a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:S,offsetParent:_,strategy:u});e.next=69;break;case 66:e.t15=e.sent,e.next=70;break;case 69:e.t15=S;case 70:return e.t16=e.t15,P=(0,e.t14)(e.t16),e.abrupt("return",{top:(k.top-P.top+w.top)/E.y,bottom:(P.bottom-k.bottom+w.bottom)/E.y,left:(k.left-P.left+w.left)/E.x,right:(P.right-k.right+w.right)/E.x});case 73:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Jb=Math.min,ew=Math.max;function tw(e,t,n){return ew(e,Jb(t,n))}var nw=function(R){return{name:"arrow",options:R,fn:function(z){return ao(io().mark(function e(){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T,M,A,j,O,L;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=z.x,i=z.y,o=z.placement,a=z.rects,s=z.platform,l=z.elements,u=qb(R,z)||{},c=u.element,d=u.padding,f=void 0===d?0:d,null==c)return e.abrupt("return",{});e.next=3;break;case 3:return p=$b(f),h={x:r,y:i},v=Wb(o),g=Kb(v),e.next=9,s.getDimensions(c);case 9:return m=e.sent,b=(y="y"===v)?"top":"left",w=y?"bottom":"right",x=y?"clientHeight":"clientWidth",k=a.reference[g]+a.reference[v]-h[v]-a.floating[g],S=h[v]-a.reference[v],e.next=18,null==s.getOffsetParent?void 0:s.getOffsetParent(c);case 18:if(_=e.sent,E=_?_[x]:0,e.t0=E,e.t0)return e.next=24,null==s.isElement?void 0:s.isElement(_);e.next=25;break;case 24:e.t0=e.sent;case 25:if(e.t1=e.t0,e.t1){e.next=28;break}E=l.floating[x]||a.floating[g];case 28:return P=k/2-S/2,C=E/2-m[g]/2-1,I=Jb(p[b],C),T=Jb(p[w],C),M=I,A=E-m[g]-T,j=E/2-m[g]/2+P,O=tw(M,j,A),L=null!=Ub(o)&&j!=O&&a.reference[g]/2-(j<M?I:T)-m[g]/2<0,e.abrupt("return",(Ee(n={},v,h[v]-(L?j<M?M-j:A-j:0)),Ee(n,"data",(Ee(t={},v,O),Ee(t,"centerOffset",j-O),t)),n));case 30:case"end":return e.stop()}},e)}))()}}},rw=["top","right","bottom","left"],iw=(rw.reduce(function(e,t){return e.concat(t,t+"-start",t+"-end")},[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function ow(e){return e.replace(/left|right|bottom|top/g,function(e){return iw[e]})}function aw(e,t,n){void 0===n&&(n=!1);var r=Ub(e),i=Wb(e),o=Kb(i),a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=ow(a)),{main:a,cross:ow(a)}}var sw={start:"end",end:"start"};function lw(e){return e.replace(/start|end/g,function(e){return sw[e]})}function uw(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function cw(t){return rw.some(function(e){return 0<=t[e]})}function dw(e){return"x"===e?"y":"x"}function fw(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function pw(e){return fw(e).getComputedStyle(e)}function hw(e){return e instanceof fw(e).Node}function vw(e){return hw(e)?(e.nodeName||"").toLowerCase():""}function gw(e){return e instanceof fw(e).HTMLElement}function mw(e){return e instanceof fw(e).Element}function yw(e){return"undefined"!=typeof ShadowRoot&&(e instanceof fw(e).ShadowRoot||e instanceof ShadowRoot)}function bw(e){var t=pw(e),n=t.overflow,r=t.overflowX,i=t.overflowY,o=t.display;return/auto|scroll|overlay|hidden|clip/.test(n+i+r)&&!["inline","contents"].includes(o)}function ww(e){var t=xw(),n=pw(e);return"none"!==n.transform||"none"!==n.perspective||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some(function(e){return(n.willChange||"").includes(e)})||["paint","layout","strict","content"].some(function(e){return(n.contain||"").includes(e)})}function xw(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function kw(e){return["html","body","#document"].includes(vw(e))}var Sw=Math.min,_w=Math.max,Ew=Math.round;function Pw(e){var t=pw(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=gw(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Ew(n)!==o||Ew(r)!==a;return s&&(n=o,r=a),{width:n,height:r,fallback:s}}function Cw(e){return mw(e)?e:e.contextElement}var Iw={x:1,y:1};function Tw(e){var t=Cw(e);if(!gw(t))return Iw;var n=t.getBoundingClientRect(),r=Pw(t),i=r.width,o=r.height,a=r.fallback,s=(a?Ew(n.width):n.width)/i,l=(a?Ew(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),l&&Number.isFinite(l)||(l=1),{x:s,y:l}}var Mw={x:0,y:0};function Aw(e,t,n){var r,i;if(void 0===t&&(t=!0),!xw())return Mw;var o=e?fw(e):window;return!n||t&&n!==o?Mw:{x:(null==(r=o.visualViewport)?void 0:r.offsetLeft)||0,y:(null==(i=o.visualViewport)?void 0:i.offsetTop)||0}}function jw(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),o=Cw(e),a=Iw;t&&(r?mw(r)&&(a=Tw(r)):a=Tw(e));var s=Aw(o,n,r),l=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(o)for(var f=fw(o),p=r&&mw(r)?fw(r):r,h=f.frameElement;h&&r&&p!==f;){var v=Tw(h),g=h.getBoundingClientRect(),m=getComputedStyle(h);g.x+=(h.clientLeft+parseFloat(m.paddingLeft))*v.x,g.y+=(h.clientTop+parseFloat(m.paddingTop))*v.y,l*=v.x,u*=v.y,c*=v.x,d*=v.y,l+=g.x,u+=g.y,h=fw(h).frameElement}return Gb({width:c,height:d,x:l,y:u})}function Ow(e){return((hw(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lw(e){return mw(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function zw(e){return jw(Ow(e)).left+Lw(e).scrollLeft}function Rw(e){if("html"===vw(e))return e;var t=e.assignedSlot||e.parentNode||yw(e)&&e.host||Ow(e);return yw(t)?t.host:t}function Nw(e,t){var n;void 0===t&&(t=[]);var r=function e(t){var n=Rw(t);return kw(n)?n.ownerDocument.body:gw(n)&&bw(n)?n:e(n)}(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=fw(r);return i?t.concat(o,o.visualViewport||[],bw(r)?r:[]):t.concat(r,Nw(r))}function Dw(e,t,n){var r,i,o,a,s,l,u,c,d,f,p,h,v,g;if("viewport"===t)r=function(e,t){var n=fw(e),r=Ow(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var u=xw();(!u||u&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s,y:l}}(e,n);else if("document"===t)u=Ow(e),c=Ow(u),d=Lw(u),f=u.ownerDocument.body,p=_w(c.scrollWidth,c.clientWidth,f.scrollWidth,f.clientWidth),h=_w(c.scrollHeight,c.clientHeight,f.scrollHeight,f.clientHeight),v=-d.scrollLeft+zw(u),g=-d.scrollTop,"rtl"===pw(f).direction&&(v+=_w(c.clientWidth,f.clientWidth)-p),r={width:p,height:h,x:v,y:g};else if(mw(t))o=jw(i=t,!0,"fixed"===n),a=o.top+i.clientTop,s=o.left+i.clientLeft,l=gw(i)?Tw(i):{x:1,y:1},r={width:i.clientWidth*l.x,height:i.clientHeight*l.y,x:s*l.x,y:a*l.y};else{var m=Aw(e);r=Pe(Pe({},t),{},{x:t.x-m.x,y:t.y-m.y})}return Gb(r)}function Bw(e,t){var n=Rw(e);return!(n===t||!mw(n)||kw(n))&&("fixed"===pw(n).position||Bw(n,t))}function Fw(e,t){return gw(e)&&"fixed"!==pw(e).position?t?t(e):e.offsetParent:null}function Uw(n,e){var t=fw(n);if(!gw(n))return t;for(var r=Fw(n,e);r&&["table","td","th"].includes(vw(r))&&"static"===pw(r).position;)r=Fw(r,e);return r&&("html"===vw(r)||"body"===vw(r)&&"static"===pw(r).position&&!ww(r))?t:r||function(e){for(var t=Rw(n);gw(t)&&!kw(t);){if(ww(t))return t;t=Rw(t)}return null}()||t}function Kw(e,t,n){var r=gw(t),i=Ow(t),o="fixed"===n,a=jw(e,!0,o,t),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};if(r||!r&&!o)if(("body"!==vw(t)||bw(i))&&(s=Lw(t)),gw(t)){var u=jw(t,!0,o,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else i&&(l.x=zw(i));return{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}var Vw={getClippingRect:function(e){var r=e.element,t=e.boundary,n=e.rootBoundary,i=e.strategy,o="clippingAncestors"===t?function(e,t){var n=t.get(e);if(n)return n;for(var r=Nw(e).filter(function(e){return mw(e)&&"body"!==vw(e)}),i=null,o="fixed"===pw(e).position,a=o?Rw(e):e;mw(a)&&!kw(a);){var s=pw(a),l=ww(a);l||"fixed"!==s.position||(i=null),(o?!l&&!i:!l&&"static"===s.position&&i&&["absolute","fixed"].includes(i.position)||bw(a)&&!l&&Bw(e,a))?r=r.filter(function(e){return e!==a}):i=s,a=Rw(a)}return t.set(e,r),r}(r,this._c):[].concat(t),a=[].concat(de(o),[n]),s=a[0],l=a.reduce(function(e,t){var n=Dw(r,t,i);return e.top=_w(n.top,e.top),e.right=Sw(n.right,e.right),e.bottom=Sw(n.bottom,e.bottom),e.left=_w(n.left,e.left),e},Dw(r,s,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=gw(n),o=Ow(n);if(n===o)return t;var a={scrollLeft:0,scrollTop:0},s={x:1,y:1},l={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==vw(n)||bw(o))&&(a=Lw(n)),gw(n))){var u=jw(n);s=Tw(n),l.x=u.x+n.clientLeft,l.y=u.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-a.scrollLeft*s.x+l.x,y:t.y*s.y-a.scrollTop*s.y+l.y}},isElement:mw,getDimensions:function(e){return Pw(e)},getOffsetParent:Uw,getDocumentElement:Ow,getScale:Tw,getElementRects:function(a){var s=this;return ao(io().mark(function e(){var t,n,r,i,o;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.reference,n=a.floating,r=a.strategy,i=s.getOffsetParent||Uw,o=s.getDimensions,e.t0=Kw,e.t1=t,e.next=6,i(n);case 6:return e.t2=e.sent,e.t3=r,e.t4=(0,e.t0)(e.t1,e.t2,e.t3),e.t5=Pe,e.t6={x:0,y:0},e.next=13,o(n);case 13:return e.t7=e.sent,e.t8=(0,e.t5)(e.t6,e.t7),e.abrupt("return",{reference:e.t4,floating:e.t8});case 16:case"end":return e.stop()}},e)}))()},getClientRects:function(e){return Array.from(e.getClientRects())},isRTL:function(e){return"rtl"===pw(e).direction}};function Ww(n,e,r,t){void 0===t&&(t={});var i=t,o=i.ancestorScroll,a=void 0===o||o,s=i.ancestorResize,l=void 0===s||s,u=i.elementResize,c=void 0===u||u,d=i.animationFrame,f=void 0!==d&&d,p=a||l?[].concat(de(mw(n)?Nw(n):n.contextElement?Nw(n.contextElement):[]),de(Nw(e))):[];p.forEach(function(e){var t=!mw(e)&&e.toString().includes("V");!a||f&&!t||e.addEventListener("scroll",r,{passive:!0}),l&&e.addEventListener("resize",r)});var h,v=null;c&&(v=new ResizeObserver(function(){r()}),mw(n)&&!f&&v.observe(n),mw(n)||!n.contextElement||f||v.observe(n.contextElement),v.observe(e));var g=f?jw(n):null;return f&&function e(){var t=jw(n);!g||t.x===g.x&&t.y===g.y&&t.width===g.width&&t.height===g.height||r(),g=t,h=requestAnimationFrame(e)}(),r(),function(){var e;p.forEach(function(e){a&&e.removeEventListener("scroll",r),l&&e.removeEventListener("resize",r)}),null==(e=v)||e.disconnect(),v=null,f&&cancelAnimationFrame(h)}}var Hw="undefined"!=typeof document?_e.useLayoutEffect:_e.useEffect;function Yw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;var n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!=t.length)return!1;for(r=n;0!=r--;)if(!Yw(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){var o=i[r];if(!("_owner"===o&&e.$$typeof||Yw(e[o],t[o])))return!1}return!0}return e!=e&&t!=t}function Xw(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qw(e,t){var n=Xw(e);return Math.round(t*n)/n}function $w(e){var t=_e.useRef(e);return Hw(function(){t.current=e}),t}function Gw(a){var e=Ce((0,_e.useState)(void 0),2),t=e[0],s=e[1];return nm(function(){if(a){s({width:a.offsetWidth,height:a.offsetHeight});var e=new ResizeObserver(function(e){if(Array.isArray(e)&&e.length){var t,n,r=e[0];if("borderBoxSize"in r){var i=r.borderBoxSize,o=Array.isArray(i)?i[0]:i;t=o.inlineSize,n=o.blockSize}else t=a.offsetWidth,n=a.offsetHeight;s({width:t,height:n})}});return e.observe(a,{box:"border-box"}),function(){return e.unobserve(a)}}s(void 0)},[a]),t}var Qw=["__scopePopper","virtualRef"],Zw=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],Jw=Ce(tm("Popper"),2),ex=Jw[0],tx=Jw[1],nx=Ce(ex("Popper"),2),rx=nx[0],ix=nx[1],ox=(0,_e.forwardRef)(function(e,t){var n=e.__scopePopper,r=e.virtualRef,i=Gt(e,Qw),o=ix("PopperAnchor",n),a=(0,_e.useRef)(null),s=Zg(t,a);return(0,_e.useEffect)(function(){o.onAnchorChange((null==r?void 0:r.current)||a.current)}),r?null:(0,_e.createElement)(gm.div,$g({},i,{ref:s}))}),ax="PopperContent",sx=Ce(ex(ax),2),lx=sx[0],ux=(sx[1],(0,_e.forwardRef)(function(e,t){var n,r,i,o,a,s,l,u,c=e.__scopePopper,d=e.side,f=void 0===d?"bottom":d,p=e.sideOffset,h=void 0===p?0:p,v=e.align,g=void 0===v?"center":v,m=e.alignOffset,y=void 0===m?0:m,b=e.arrowPadding,w=void 0===b?0:b,x=e.collisionBoundary,k=void 0===x?[]:x,S=e.collisionPadding,_=void 0===S?0:S,E=e.sticky,P=void 0===E?"partial":E,C=e.hideWhenDetached,I=void 0!==C&&C,T=e.avoidCollisions,M=void 0===T||T,A=e.onPlaced,j=Gt(e,Zw),O=ix(ax,c),L=Ce((0,_e.useState)(null),2),z=L[0],R=L[1],N=Zg(t,function(e){return R(e)}),D=Ce((0,_e.useState)(null),2),B=D[0],F=D[1],U=Gw(B),K=null!==(n=null==U?void 0:U.width)&&void 0!==n?n:0,V=null!==(r=null==U?void 0:U.height)&&void 0!==r?r:0,W=f+("center"!==g?"-"+g:""),H="number"==typeof _?_:Pe({top:0,right:0,bottom:0,left:0},_),Y=Array.isArray(k)?k:[k],X=0<Y.length,q={padding:H,boundary:Y.filter(cx),altBoundary:X},$=function(e){void 0===e&&(e={});var t=e,n=t.placement,s=void 0===n?"bottom":n,r=t.strategy,l=void 0===r?"absolute":r,i=t.middleware,o=void 0===i?[]:i,a=t.platform,u=t.elements,c=void 0===u?{}:u,d=c.reference,f=c.floating,p=t.transform,h=void 0===p||p,v=t.whileElementsMounted,g=t.open,m=Ce(_e.useState({x:0,y:0,strategy:l,placement:s,middlewareData:{},isPositioned:!1}),2),y=m[0],b=m[1],w=Ce(_e.useState(o),2),x=w[0],k=w[1];Yw(x,o)||k(o);var S=Ce(_e.useState(null),2),_=S[0],E=S[1],P=Ce(_e.useState(null),2),C=P[0],I=P[1],T=_e.useCallback(function(e){e!=O.current&&(O.current=e,E(e))},[E]),M=_e.useCallback(function(e){e!==L.current&&(L.current=e,I(e))},[I]),A=d||_,j=f||C,O=_e.useRef(null),L=_e.useRef(null),z=_e.useRef(y),R=$w(v),N=$w(a),D=_e.useCallback(function(){if(O.current&&L.current){var e={placement:s,strategy:l,middleware:x};N.current&&(e.platform=N.current),(t=O.current,n=L.current,r=e,i=new Map,o=Pe({platform:Vw},r),a=Pe(Pe({},o.platform),{},{_c:i}),Xb(t,n,Pe(Pe({},o),{},{platform:a}))).then(function(e){var t=Pe(Pe({},e),{},{isPositioned:!0});B.current&&!Yw(z.current,t)&&(z.current=t,lm.flushSync(function(){b(t)}))})}var t,n,r,i,o,a},[x,s,l,N]);Hw(function(){!1===g&&z.current.isPositioned&&(z.current.isPositioned=!1,b(function(e){return Pe(Pe({},e),{},{isPositioned:!1})}))},[g]);var B=_e.useRef(!1);Hw(function(){return B.current=!0,function(){B.current=!1}},[]),Hw(function(){if(A&&(O.current=A),j&&(L.current=j),A&&j){if(R.current)return R.current(A,j,D);D()}},[A,j,D,R]);var F=_e.useMemo(function(){return{reference:O,floating:L,setReference:T,setFloating:M}},[T,M]),U=_e.useMemo(function(){return{reference:A,floating:j}},[A,j]),K=_e.useMemo(function(){var e={position:l,left:0,top:0};if(!U.floating)return e;var t=qw(U.floating,y.x),n=qw(U.floating,y.y);return h?Pe(Pe({},e),{},{transform:"translate("+t+"px, "+n+"px)"},1.5<=Xw(U.floating)&&{willChange:"transform"}):{position:l,left:t,top:n}},[l,h,U.floating,y.x,y.y]);return _e.useMemo(function(){return Pe(Pe({},y),{},{update:D,refs:F,elements:U,floatingStyles:K})},[y,D,F,U,K])}({strategy:"fixed",placement:W,whileElementsMounted:Ww,elements:{reference:O.anchor},middleware:[function(o){return void 0===o&&(o=0),{name:"offset",options:o,fn:function(i){return ao(io().mark(function e(){var t,n,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.x,n=i.y,e.next=4,function(){var n=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u,c,d,f,p,h,v,g;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=5,null==i.isRTL?void 0:i.isRTL(o.floating);case 5:return a=e.sent,s=Vb(r),l=Ub(r),u="x"===Wb(r),c=["left","top"].includes(s)?-1:1,d=a&&u?-1:1,f=qb(n,t),p="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:Pe({mainAxis:0,crossAxis:0,alignmentAxis:null},f),h=p.mainAxis,v=p.crossAxis,g=p.alignmentAxis,e.abrupt("return",(l&&"number"==typeof g&&(v="end"===l?-1*g:g),u?{x:v*d,y:h*c}:{x:h*c,y:v*d}));case 14:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}()(i,o);case 4:return r=e.sent,e.abrupt("return",{x:t+r.x,y:n+r.y,data:r});case 6:case"end":return e.stop()}},e)}))()}}}({mainAxis:h+V,alignmentAxis:y}),M&&function(S){return void 0===S&&(S={}),{name:"shift",options:S,fn:function(k){return ao(io().mark(function e(){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.x,r=k.y,i=k.placement,o=qb(S,k),a=o.mainAxis,s=void 0===a||a,l=o.crossAxis,u=void 0!==l&&l,c=o.limiter,d=void 0===c?{fn:function(e){return{x:e.x,y:e.y}}}:c,f=Gt(o,Bb),p={x:n,y:r},e.next=14,Qb(k,f);case 14:return h=e.sent,v=Wb(Vb(i)),g=dw(v),m=p[v],y=p[g],s&&(b="y"===v?"bottom":"right",m=tw(m+h["y"===v?"top":"left"],m,m-h[b])),u&&(w="y"===g?"bottom":"right",y=tw(y+h["y"===g?"top":"left"],y,y-h[w])),x=d.fn(Pe(Pe({},k),{},(Ee(t={},v,m),Ee(t,g,y),t))),e.abrupt("return",Pe(Pe({},x),{},{data:{x:x.x-n,y:x.y-r}}));case 22:case"end":return e.stop()}},e)}))()}}}(Pe({mainAxis:!0,crossAxis:!1,limiter:"partial"===P?function(M){return void 0===M&&(M={}),{options:M,fn:function(e){var t,n=e.x,r=e.y,i=e.placement,o=e.rects,a=e.middlewareData,s=qb(M,e),l=s.offset,u=void 0===l?0:l,c=s.mainAxis,d=void 0===c||c,f=s.crossAxis,p=void 0===f||f,h={x:n,y:r},v=Wb(i),g=dw(v),m=h[v],y=h[g],b=qb(u,e),w="number"==typeof b?{mainAxis:b,crossAxis:0}:Pe({mainAxis:0,crossAxis:0},b);if(d){var x="y"===v?"height":"width",k=o.reference[v]-o.floating[x]+w.mainAxis,S=o.reference[v]+o.reference[x]-w.mainAxis;m<k?m=k:S<m&&(m=S)}if(p){var _,E,P="y"===v?"width":"height",C=["top","left"].includes(Vb(i)),I=o.reference[g]-o.floating[P]+(C&&(null==(_=a.offset)?void 0:_[g])||0)+(C?0:w.crossAxis),T=o.reference[g]+o.reference[P]+(C?0:(null==(E=a.offset)?void 0:E[g])||0)-(C?w.crossAxis:0);y<I?y=I:T<y&&(y=T)}return Ee(t={},v,m),Ee(t,g,y),t}}}():void 0},q)),M&&function(K){return void 0===K&&(K={}),{name:"flip",options:K,fn:function(U){return ao(io().mark(function e(){var r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T,M,A,j,O,L,z,R,N,D,B,F;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=U.placement,o=U.middlewareData,a=U.rects,s=U.initialPlacement,l=U.platform,u=U.elements,c=qb(K,U),d=c.mainAxis,f=void 0===d||d,p=c.crossAxis,h=void 0===p||p,v=c.fallbackPlacements,g=c.fallbackStrategy,m=void 0===g?"bestFit":g,y=c.fallbackAxisSideDirection,b=void 0===y?"none":y,w=c.flipAlignment,x=void 0===w||w,k=Gt(c,Nb),S=Vb(i),_=Vb(s)===s,e.next=23,null==l.isRTL?void 0:l.isRTL(u.floating);case 23:return E=e.sent,P=v||(_||!x?[ow(s)]:(n=ow(t=s),[lw(t),n,lw(n)])),v||"none"===b||P.push.apply(P,de(function(e,t,n,r){var i=Ub(e),o=function(e,t,n){var r=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(Vb(e),"start"===n,r);return i&&(o=o.map(function(e){return e+"-"+i}),t&&(o=o.concat(o.map(lw)))),o}(s,x,b,E))),C=[s].concat(de(P)),e.next=29,Qb(U,k);case 29:if(I=e.sent,T=[],M=(null==(r=o.flip)?void 0:r.overflows)||[],f&&T.push(I[S]),h&&(A=aw(i,a,E),j=A.main,O=A.cross,T.push(I[j],I[O])),M=[].concat(de(M),[{placement:i,overflows:T}]),T.every(function(e){return e<=0})){e.next=48;break}if(R=((null==(L=o.flip)?void 0:L.index)||0)+1,N=C[R])return e.abrupt("return",{data:{index:R,overflows:M},reset:{placement:N}});e.next=37;break;case 37:if(D=null==(z=M.filter(function(e){return e.overflows[0]<=0}).sort(function(e,t){return e.overflows[1]-t.overflows[1]})[0])?void 0:z.placement){e.next=46;break}e.t0=m,e.next="bestFit"===e.t0?42:"initialPlacement"===e.t0?45:46;break;case 42:return(F=null==(B=M.map(function(e){return[e.placement,e.overflows.filter(function(e){return 0<e}).reduce(function(e,t){return e+t},0)]}).sort(function(e,t){return e[1]-t[1]})[0])?void 0:B[0])&&(D=F),e.abrupt("break",46);case 45:D=s;case 46:if(i!==D)return e.abrupt("return",{reset:{placement:D}});e.next=48;break;case 48:return e.abrupt("return",{});case 49:case"end":return e.stop()}var t,n},e)}))()}}}(Pe({},q)),function(A){return void 0===A&&(A={}),{name:"size",options:A,fn:function(M){return ao(io().mark(function e(){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.placement,n=M.rects,r=M.platform,i=M.elements,o=qb(A,M),a=o.apply,s=void 0===a?function(){}:a,l=Gt(o,Fb),e.next=10,Qb(M,l);case 10:if(u=e.sent,c=Vb(t),d=Ub(t),f="x"===Wb(t),p=n.floating,h=p.width,v=p.height,"top"===c||"bottom"===c)return g=c,e.t0=d,e.next=22,null==r.isRTL?void 0:r.isRTL(i.floating);e.next=36;break;case 22:if(!e.sent){e.next=26;break}e.t1="start",e.next=27;break;case 26:e.t1="end";case 27:if(e.t2=e.t1,e.t0!==e.t2){e.next=32;break}e.t3="left",e.next=33;break;case 32:e.t3="right";case 33:m=e.t3,e.next=37;break;case 36:m=c,g="end"===d?"top":"bottom";case 37:return y=v-u[g],b=h-u[m],w=!M.middlewareData.shift,x=y,k=b,f?(S=h-u.left-u.right,k=d||w?Jb(b,S):S):(_=v-u.top-u.bottom,x=d||w?Jb(y,_):_),w&&!d&&(E=ew(u.left,0),P=ew(u.right,0),C=ew(u.top,0),I=ew(u.bottom,0),f?k=h-2*(0!==E||0!==P?E+P:ew(u.left,u.right)):x=v-2*(0!==C||0!==I?C+I:ew(u.top,u.bottom))),e.next=43,s(Pe(Pe({},M),{},{availableWidth:k,availableHeight:x}));case 43:return e.next=45,r.getDimensions(i.floating);case 45:return T=e.sent,e.abrupt("return",h!==T.width||v!==T.height?{reset:{rects:!0}}:{});case 47:case"end":return e.stop()}},e)}))()}}}(Pe(Pe({},q),{},{apply:function(e){var t=e.elements,n=e.rects,r=e.availableWidth,i=e.availableHeight,o=n.reference,a=o.width,s=o.height,l=t.floating.style;l.setProperty("--radix-popper-available-width","".concat(r,"px")),l.setProperty("--radix-popper-available-height","".concat(i,"px")),l.setProperty("--radix-popper-anchor-width","".concat(a,"px")),l.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),B&&function(o){return{name:"arrow",options:o,fn:function(e){var t,n="function"==typeof o?o(e):o,r=n.element,i=n.padding;return r&&(t=r,{}.hasOwnProperty.call(t,"current"))?null!=r.current?nw({element:r.current,padding:i}).fn(e):{}:r?nw({element:r,padding:i}).fn(e):{}}}}({element:B,padding:w}),dx({arrowWidth:K,arrowHeight:V}),I&&function(u){return void 0===u&&(u={}),{name:"hide",options:u,fn:function(l){return ao(io().mark(function e(){var t,n,r,i,o,a,s;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=l.rects,n=qb(u,l),r=n.strategy,i=void 0===r?"referenceHidden":r,o=Gt(n,Db),e.t0=i,e.next="referenceHidden"===e.t0?4:"escaped"===e.t0?11:18;break;case 4:return e.t1=uw,e.next=7,Qb(l,Pe(Pe({},o),{},{elementContext:"reference"}));case 7:return e.t2=e.sent,e.t3=t.reference,a=(0,e.t1)(e.t2,e.t3),e.abrupt("return",{data:{referenceHiddenOffsets:a,referenceHidden:cw(a)}});case 11:return e.t4=uw,e.next=14,Qb(l,Pe(Pe({},o),{},{altBoundary:!0}));case 14:return e.t5=e.sent,e.t6=t.floating,s=(0,e.t4)(e.t5,e.t6),e.abrupt("return",{data:{escapedOffsets:s,escaped:cw(s)}});case 18:return e.abrupt("return",{});case 19:case"end":return e.stop()}},e)}))()}}}({strategy:"referenceHidden"})]}),G=$.refs,Q=$.floatingStyles,Z=$.placement,J=$.isPositioned,ee=$.middlewareData,te=Ce(fx(Z),2),ne=te[0],re=te[1],ie=am(A);nm(function(){J&&(null==ie||ie())},[J,ie]);var oe=null===(i=ee.arrow)||void 0===i?void 0:i.x,ae=null===(o=ee.arrow)||void 0===o?void 0:o.y,se=0!==(null===(a=ee.arrow)||void 0===a?void 0:a.centerOffset),le=Ce((0,_e.useState)(),2),ue=le[0],ce=le[1];return nm(function(){z&&ce(window.getComputedStyle(z).zIndex)},[z]),(0,_e.createElement)("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:Pe(Pe({},Q),{},Ee({transform:J?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ue},"--radix-popper-transform-origin",[null===(s=ee.transformOrigin)||void 0===s?void 0:s.x,null===(l=ee.transformOrigin)||void 0===l?void 0:l.y].join(" "))),dir:e.dir},(0,_e.createElement)(lx,{scope:c,placedSide:ne,onArrowChange:F,arrowX:oe,arrowY:ae,shouldHideArrow:se},(0,_e.createElement)(gm.div,$g({"data-side":ne,"data-align":re},j,{ref:N,style:Pe(Pe({},j.style),{},{animation:J?void 0:"none",opacity:null!==(u=ee.hide)&&void 0!==u&&u.referenceHidden?0:void 0})}))))}));function cx(e){return null!==e}var dx=function(b){return{name:"transformOrigin",options:b,fn:function(e){var t,n,r,i,o,a=e.placement,s=e.rects,l=e.middlewareData,u=0!==(null===(t=l.arrow)||void 0===t?void 0:t.centerOffset),c=u?0:b.arrowWidth,d=u?0:b.arrowHeight,f=Ce(fx(a),2),p=f[0],h={start:"0%",center:"50%",end:"100%"}[f[1]],v=(null!==(n=null===(r=l.arrow)||void 0===r?void 0:r.x)&&void 0!==n?n:0)+c/2,g=(null!==(i=null===(o=l.arrow)||void 0===o?void 0:o.y)&&void 0!==i?i:0)+d/2,m="",y="";return"bottom"===p?(m=u?h:"".concat(v,"px"),y="".concat(-d,"px")):"top"===p?(m=u?h:"".concat(v,"px"),y="".concat(s.floating.height+d,"px")):"right"===p?(m="".concat(-d,"px"),y=u?h:"".concat(g,"px")):"left"===p&&(m="".concat(s.floating.width+d,"px"),y=u?h:"".concat(g,"px")),{data:{x:m,y:y}}}}};function fx(e){var t=Ce(e.split("-"),2),n=t[0],r=t[1];return[n,void 0===r?"center":r]}var px=function(e){var t=e.__scopePopper,n=e.children,r=Ce((0,_e.useState)(null),2),i=r[0],o=r[1];return(0,_e.createElement)(rx,{scope:t,anchor:i,onAnchorChange:o},n)},hx=ox,vx=ux,gx=["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus"],mx=["__scopeRovingFocusGroup","focusable","active","tabStopId"],yx="rovingFocusGroup.onEntryFocus",bx={bubbles:!1,cancelable:!0},wx="RovingFocusGroup",xx=Ce(Lb(wx),3),kx=xx[0],Sx=xx[1],_x=Ce(tm(wx,[xx[2]]),2),Ex=_x[0],Px=_x[1],Cx=Ce(Ex(wx),2),Ix=Cx[0],Tx=Cx[1],Mx=(0,_e.forwardRef)(function(e,t){return(0,_e.createElement)(kx.Provider,{scope:e.__scopeRovingFocusGroup},(0,_e.createElement)(kx.Slot,{scope:e.__scopeRovingFocusGroup},(0,_e.createElement)(Ax,$g({},e,{ref:t}))))}),Ax=(0,_e.forwardRef)(function(e,t){var n=e.__scopeRovingFocusGroup,r=e.orientation,i=e.loop,o=void 0!==i&&i,a=e.dir,s=e.currentTabStopId,l=e.defaultCurrentTabStopId,u=e.onCurrentTabStopIdChange,c=e.onEntryFocus,d=Gt(e,gx),f=(0,_e.useRef)(null),p=Zg(t,f),h=Rb(a),v=Ce(sm({prop:s,defaultProp:l,onChange:u}),2),g=v[0],m=void 0===g?null:g,y=v[1],b=Ce((0,_e.useState)(!1),2),w=b[0],x=b[1],k=am(c),S=Sx(n),_=(0,_e.useRef)(!1),E=Ce((0,_e.useState)(0),2),P=E[0],C=E[1];return(0,_e.useEffect)(function(){var e=f.current;if(e)return e.addEventListener(yx,k),function(){return e.removeEventListener(yx,k)}},[k]),(0,_e.createElement)(Ix,{scope:n,orientation:r,dir:h,loop:o,currentTabStopId:m,onItemFocus:(0,_e.useCallback)(function(e){return y(e)},[y]),onItemShiftTab:(0,_e.useCallback)(function(){return x(!0)},[]),onFocusableItemAdd:(0,_e.useCallback)(function(){return C(function(e){return e+1})},[]),onFocusableItemRemove:(0,_e.useCallback)(function(){return C(function(e){return e-1})},[])},(0,_e.createElement)(gm.div,$g({tabIndex:w||0===P?-1:0,"data-orientation":r},d,{ref:p,style:Pe({outline:"none"},e.style),onMouseDown:Gg(e.onMouseDown,function(){_.current=!0}),onFocus:Gg(e.onFocus,function(e){var t=!_.current;if(e.target===e.currentTarget&&t&&!w){var n=new CustomEvent(yx,bx);if(e.currentTarget.dispatchEvent(n),!n.defaultPrevented){var r=S().filter(function(e){return e.focusable});Lx([r.find(function(e){return e.active}),r.find(function(e){return e.id===m})].concat(de(r)).filter(Boolean).map(function(e){return e.ref.current}))}}_.current=!1}),onBlur:Gg(e.onBlur,function(){return x(!1)})})))}),jx=(0,_e.forwardRef)(function(e,t){var n=e.__scopeRovingFocusGroup,r=e.focusable,i=void 0===r||r,o=e.active,a=void 0!==o&&o,s=e.tabStopId,l=Gt(e,mx),u=om(),c=s||u,d=Tx("RovingFocusGroupItem",n),f=d.currentTabStopId===c,p=Sx(n),h=d.onFocusableItemAdd,v=d.onFocusableItemRemove;return(0,_e.useEffect)(function(){if(i)return h(),function(){return v()}},[i,h,v]),(0,_e.createElement)(kx.ItemSlot,{scope:n,id:c,focusable:i,active:a},(0,_e.createElement)(gm.span,$g({tabIndex:f?0:-1,"data-orientation":d.orientation},l,{ref:t,onMouseDown:Gg(e.onMouseDown,function(e){i?d.onItemFocus(c):e.preventDefault()}),onFocus:Gg(e.onFocus,function(){return d.onItemFocus(c)}),onKeyDown:Gg(e.onKeyDown,function(e){if("Tab"===e.key&&e.shiftKey)d.onItemShiftTab();else if(e.target===e.currentTarget){var t=(a=e,s=d.orientation,l=d.dir,u=a.key,c="rtl"!==l?u:"ArrowLeft"===u?"ArrowRight":"ArrowRight"===u?"ArrowLeft":u,"vertical"===s&&["ArrowLeft","ArrowRight"].includes(c)||"horizontal"===s&&["ArrowUp","ArrowDown"].includes(c)?void 0:Ox[c]);if(void 0!==t){e.preventDefault();var n=p().filter(function(e){return e.focusable}).map(function(e){return e.ref.current});if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();var r=n.indexOf(e.currentTarget);n=d.loop?(o=r+1,(i=n).map(function(e,t){return i[(o+t)%i.length]})):n.slice(r+1)}setTimeout(function(){return Lx(n)})}}var i,o,a,s,l,u,c})})))}),Ox={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Lx(e){var t,n=document.activeElement,r=ce(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i===n)return;if(i.focus(),document.activeElement!==n)return}}catch(e){r.e(e)}finally{r.f()}}var zx=Mx,Rx=jx,Nx=["__scopeMenu"],Dx=["forceMount"],Bx=["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"],Fx=["__scopeMenu"],Ux=["disabled","onSelect"],Kx=["__scopeMenu","disabled","textValue"],Vx=["checked","onCheckedChange"],Wx=["__scopeMenu","forceMount"],Hx=["forceMount"],Yx=["Enter"," "],Xx=["ArrowUp","PageDown","End"],qx=[].concat(["ArrowDown","PageUp","Home"],Xx),$x={ltr:[].concat(Yx,["ArrowRight"]),rtl:[].concat(Yx,["ArrowLeft"])},Gx={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Qx="Menu",Zx=Ce(Lb(Qx),3),Jx=Zx[0],ek=Zx[1],tk=Ce(tm(Qx,[Zx[2],tx,Px]),2),nk=tk[0],rk=tk[1],ik=tx(),ok=Px(),ak=Ce(nk(Qx),2),sk=ak[0],lk=ak[1],uk=Ce(nk(Qx),2),ck=uk[0],dk=uk[1],fk=(0,_e.forwardRef)(function(e,t){var n=e.__scopeMenu,r=Gt(e,Nx),i=ik(n);return(0,_e.createElement)(hx,$g({},i,r,{ref:t}))}),pk="MenuPortal",hk=Ce(nk(pk,{forceMount:void 0}),2),vk=hk[0],gk=hk[1],mk="MenuContent",yk=Ce(nk(mk),2),bk=yk[0],wk=yk[1],xk=(0,_e.forwardRef)(function(e,t){var n=gk(mk,e.__scopeMenu),r=e.forceMount,i=void 0===r?n.forceMount:r,o=Gt(e,Dx),a=lk(mk,e.__scopeMenu),s=dk(mk,e.__scopeMenu);return(0,_e.createElement)(Jx.Provider,{scope:e.__scopeMenu},(0,_e.createElement)(Km,{present:i||a.open},(0,_e.createElement)(Jx.Slot,{scope:e.__scopeMenu},s.modal?(0,_e.createElement)(kk,$g({},o,{ref:t})):(0,_e.createElement)(Sk,$g({},o,{ref:t})))))}),kk=(0,_e.forwardRef)(function(e,t){var n=lk(mk,e.__scopeMenu),r=(0,_e.useRef)(null),i=Zg(t,r);return(0,_e.useEffect)(function(){var e=r.current;if(e)return Iy(e)},[]),(0,_e.createElement)(_k,$g({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Gg(e.onFocusOutside,function(e){return e.preventDefault()},{checkForDefaultPrevented:!1}),onDismiss:function(){return n.onOpenChange(!1)}}))}),Sk=(0,_e.forwardRef)(function(e,t){var n=lk(mk,e.__scopeMenu);return(0,_e.createElement)(_k,$g({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:function(){return n.onOpenChange(!1)}}))}),_k=(0,_e.forwardRef)(function(e,t){var n=e.__scopeMenu,r=e.loop,i=void 0!==r&&r,o=e.trapFocus,a=e.onOpenAutoFocus,s=e.onCloseAutoFocus,l=e.disableOutsidePointerEvents,u=e.onEntryFocus,c=e.onEscapeKeyDown,d=e.onPointerDownOutside,f=e.onFocusOutside,p=e.onInteractOutside,h=e.onDismiss,v=e.disableOutsideScroll,g=Gt(e,Bx),m=lk(mk,n),y=dk(mk,n),b=ik(n),w=ok(n),x=ek(n),k=Ce((0,_e.useState)(null),2),S=k[0],_=k[1],E=(0,_e.useRef)(null),P=Zg(t,E,m.onContentChange),C=(0,_e.useRef)(0),I=(0,_e.useRef)(""),T=(0,_e.useRef)(0),M=(0,_e.useRef)(null),A=(0,_e.useRef)("right"),j=(0,_e.useRef)(0),O=v?Sy:_e.Fragment,L=v?{as:dm,allowPinchZoom:!0}:void 0;(0,_e.useEffect)(function(){return function(){return window.clearTimeout(C.current)}},[]),Hm();var z=(0,_e.useCallback)(function(e){var t,n;return A.current===(null===(t=M.current)||void 0===t?void 0:t.side)&&function(e,t){if(!t)return!1;var d={x:e.clientX,y:e.clientY};return function(e,t){for(var n=d.x,r=d.y,i=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o].x,l=t[o].y,u=t[a].x,c=t[a].y;r<l!=r<c&&n<(u-s)*(r-l)/(c-l)+s&&(i=!i)}return i}(0,t)}(e,null===(n=M.current)||void 0===n?void 0:n.area)},[]);return(0,_e.createElement)(bk,{scope:n,searchRef:I,onItemEnter:(0,_e.useCallback)(function(e){z(e)&&e.preventDefault()},[z]),onItemLeave:(0,_e.useCallback)(function(e){var t;z(e)||(null===(t=E.current)||void 0===t||t.focus(),_(null))},[z]),onTriggerLeave:(0,_e.useCallback)(function(e){z(e)&&e.preventDefault()},[z]),pointerGraceTimerRef:T,onPointerGraceIntentChange:(0,_e.useCallback)(function(e){M.current=e},[])},(0,_e.createElement)(O,L,(0,_e.createElement)(jm,{asChild:!0,trapped:o,onMountAutoFocus:Gg(a,function(e){var t;e.preventDefault(),null===(t=E.current)||void 0===t||t.focus()}),onUnmountAutoFocus:s},(0,_e.createElement)(km,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:h},(0,_e.createElement)(zx,$g({asChild:!0},w,{dir:y.dir,orientation:"vertical",loop:i,currentTabStopId:S,onCurrentTabStopIdChange:_,onEntryFocus:Gg(u,function(e){y.isUsingKeyboardRef.current||e.preventDefault()})}),(0,_e.createElement)(vx,$g({role:"menu","aria-orientation":"vertical","data-state":Vk(m.open),"data-radix-menu-content":"",dir:y.dir},b,g,{ref:P,style:Pe({outline:"none"},g.style),onKeyDown:Gg(g.onKeyDown,function(e){var t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&function(e){var t,n,r=I.current+e,i=x().filter(function(e){return!e.disabled}),o=document.activeElement,a=null===(t=i.find(function(e){return e.ref.current===o}))||void 0===t?void 0:t.textValue,s=function(e,t,n){var r,i,o=1<t.length&&Array.from(t).every(function(e){return e===t[0]})?t[0]:t,a=n?e.indexOf(n):-1,s=(r=e,i=Math.max(a,0),r.map(function(e,t){return r[(i+t)%r.length]}));1===o.length&&(s=s.filter(function(e){return e!==n}));var l=s.find(function(e){return e.toLowerCase().startsWith(o.toLowerCase())});return l!==n?l:void 0}(i.map(function(e){return e.textValue}),r,a),l=null===(n=i.find(function(e){return e.textValue===s}))||void 0===n?void 0:n.ref.current;!function e(t){I.current=t,window.clearTimeout(C.current),""!==t&&(C.current=window.setTimeout(function(){return e("")},1e3))}(r),l&&setTimeout(function(){return l.focus()})}(e.key));var i=E.current;if(e.target===i&&qx.includes(e.key)){e.preventDefault();var o=x().filter(function(e){return!e.disabled}).map(function(e){return e.ref.current});Xx.includes(e.key)&&o.reverse(),function(e){var t,n=document.activeElement,r=ce(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i===n)return;if(i.focus(),document.activeElement!==n)return}}catch(e){r.e(e)}finally{r.f()}}(o)}}),onBlur:Gg(e.onBlur,function(e){e.currentTarget.contains(e.target)||(window.clearTimeout(C.current),I.current="")}),onPointerMove:Gg(e.onPointerMove,Yk(function(e){var t=e.target,n=j.current!==e.clientX;if(e.currentTarget.contains(t)&&n){var r=e.clientX>j.current?"right":"left";A.current=r,j.current=e.clientX}}))})))))))}),Ek=(0,_e.forwardRef)(function(e,t){e.__scopeMenu;var n=Gt(e,Fx);return(0,_e.createElement)(gm.div,$g({role:"group"},n,{ref:t}))}),Pk="MenuItem",Ck="menu.itemSelect",Ik=(0,_e.forwardRef)(function(n,e){var t=n.disabled,r=void 0!==t&&t,i=n.onSelect,o=Gt(n,Ux),a=(0,_e.useRef)(null),s=dk(Pk,n.__scopeMenu),l=wk(Pk,n.__scopeMenu),u=Zg(e,a),c=(0,_e.useRef)(!1);return(0,_e.createElement)(Tk,$g({},o,{ref:u,disabled:r,onClick:Gg(n.onClick,function(){var e=a.current;if(!r&&e){var t=new CustomEvent(Ck,{bubbles:!0,cancelable:!0});e.addEventListener(Ck,function(e){return null==i?void 0:i(e)},{once:!0}),mm(e,t),t.defaultPrevented?c.current=!1:s.onClose()}}),onPointerDown:function(e){var t;null===(t=n.onPointerDown)||void 0===t||t.call(n,e),c.current=!0},onPointerUp:Gg(n.onPointerUp,function(e){var t;c.current||null===(t=e.currentTarget)||void 0===t||t.click()}),onKeyDown:Gg(n.onKeyDown,function(e){var t=""!==l.searchRef.current;r||t&&" "===e.key||Yx.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))}),Tk=(0,_e.forwardRef)(function(e,t){var n=e.__scopeMenu,r=e.disabled,i=void 0!==r&&r,o=e.textValue,a=Gt(e,Kx),s=wk(Pk,n),l=ok(n),u=(0,_e.useRef)(null),c=Zg(t,u),d=Ce((0,_e.useState)(!1),2),f=d[0],p=d[1],h=Ce((0,_e.useState)(""),2),v=h[0],g=h[1];return(0,_e.useEffect)(function(){var e,t=u.current;t&&g((null!==(e=t.textContent)&&void 0!==e?e:"").trim())},[a.children]),(0,_e.createElement)(Jx.ItemSlot,{scope:n,disabled:i,textValue:null!=o?o:v},(0,_e.createElement)(Rx,$g({asChild:!0},l,{focusable:!i}),(0,_e.createElement)(gm.div,$g({role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0},a,{ref:c,onPointerMove:Gg(e.onPointerMove,Yk(function(e){i?s.onItemLeave(e):(s.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus())})),onPointerLeave:Gg(e.onPointerLeave,Yk(function(e){return s.onItemLeave(e)})),onFocus:Gg(e.onFocus,function(){return p(!0)}),onBlur:Gg(e.onBlur,function(){return p(!1)})}))))}),Mk=(0,_e.forwardRef)(function(e,t){var n=e.checked,r=void 0!==n&&n,i=e.onCheckedChange,o=Gt(e,Vx);return(0,_e.createElement)(Lk,{scope:e.__scopeMenu,checked:r},(0,_e.createElement)(Ik,$g({role:"menuitemcheckbox","aria-checked":Wk(r)?"mixed":r},o,{ref:t,"data-state":Hk(r),onSelect:Gg(o.onSelect,function(){return null==i?void 0:i(!!Wk(r)||!r)},{checkForDefaultPrevented:!1})})))}),Ak=Ce(nk("MenuRadioGroup",{value:void 0,onValueChange:function(){}}),2),jk=(Ak[0],Ak[1],"MenuItemIndicator"),Ok=Ce(nk(jk,{checked:!1}),2),Lk=Ok[0],zk=Ok[1],Rk=(0,_e.forwardRef)(function(e,t){var n=e.__scopeMenu,r=e.forceMount,i=Gt(e,Wx),o=zk(jk,n);return(0,_e.createElement)(Km,{present:r||Wk(o.checked)||!0===o.checked},(0,_e.createElement)(gm.span,$g({},i,{ref:t,"data-state":Hk(o.checked)})))}),Nk=Ce(nk("MenuSub"),2),Dk=Nk[0],Bk=Nk[1],Fk="MenuSubTrigger",Uk=(0,_e.forwardRef)(function(r,e){var u=lk(Fk,r.__scopeMenu),i=dk(Fk,r.__scopeMenu),t=Bk(Fk,r.__scopeMenu),c=wk(Fk,r.__scopeMenu),n=(0,_e.useRef)(null),d=c.pointerGraceTimerRef,o=c.onPointerGraceIntentChange,a={__scopeMenu:r.__scopeMenu},f=(0,_e.useCallback)(function(){n.current&&window.clearTimeout(n.current),n.current=null},[]);return(0,_e.useEffect)(function(){return f},[f]),(0,_e.useEffect)(function(){var e=d.current;return function(){window.clearTimeout(e),o(null)}},[d,o]),(0,_e.createElement)(fk,$g({asChild:!0},a),(0,_e.createElement)(Tk,$g({id:t.triggerId,"aria-haspopup":"menu","aria-expanded":u.open,"aria-controls":t.contentId,"data-state":Vk(u.open)},r,{ref:Qg(e,t.onTriggerChange),onClick:function(e){var t;null===(t=r.onClick)||void 0===t||t.call(r,e),r.disabled||e.defaultPrevented||(e.currentTarget.focus(),u.open||u.onOpenChange(!0))},onPointerMove:Gg(r.onPointerMove,Yk(function(e){c.onItemEnter(e),e.defaultPrevented||r.disabled||u.open||n.current||(c.onPointerGraceIntentChange(null),n.current=window.setTimeout(function(){u.onOpenChange(!0),f()},100))})),onPointerLeave:Gg(r.onPointerLeave,Yk(function(e){var t;f();var n=null===(t=u.content)||void 0===t?void 0:t.getBoundingClientRect();if(n){var r,i=null===(r=u.content)||void 0===r?void 0:r.dataset.side,o="right"===i,a=o?-5:5,s=n[o?"left":"right"],l=n[o?"right":"left"];c.onPointerGraceIntentChange({area:[{x:e.clientX+a,y:e.clientY},{x:s,y:n.top},{x:l,y:n.top},{x:l,y:n.bottom},{x:s,y:n.bottom}],side:i}),window.clearTimeout(d.current),d.current=window.setTimeout(function(){return c.onPointerGraceIntentChange(null)},300)}else{if(c.onTriggerLeave(e),e.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:Gg(r.onKeyDown,function(e){var t,n=""!==c.searchRef.current;r.disabled||n&&" "===e.key||$x[i.dir].includes(e.key)&&(u.onOpenChange(!0),null===(t=u.content)||void 0===t||t.focus(),e.preventDefault())})})))}),Kk=(0,_e.forwardRef)(function(e,t){var n=gk(mk,e.__scopeMenu),r=e.forceMount,i=void 0===r?n.forceMount:r,o=Gt(e,Hx),a=lk(mk,e.__scopeMenu),s=dk(mk,e.__scopeMenu),l=Bk("MenuSubContent",e.__scopeMenu),u=(0,_e.useRef)(null),c=Zg(t,u);return(0,_e.createElement)(Jx.Provider,{scope:e.__scopeMenu},(0,_e.createElement)(Km,{present:i||a.open},(0,_e.createElement)(Jx.Slot,{scope:e.__scopeMenu},(0,_e.createElement)(_k,$g({id:l.contentId,"aria-labelledby":l.triggerId},o,{ref:c,align:"start",side:"rtl"===s.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:function(e){var t;s.isUsingKeyboardRef.current&&(null===(t=u.current)||void 0===t||t.focus()),e.preventDefault()},onCloseAutoFocus:function(e){return e.preventDefault()},onFocusOutside:Gg(e.onFocusOutside,function(e){e.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Gg(e.onEscapeKeyDown,function(e){s.onClose(),e.preventDefault()}),onKeyDown:Gg(e.onKeyDown,function(e){var t,n=e.currentTarget.contains(e.target),r=Gx[s.dir].includes(e.key);n&&r&&(a.onOpenChange(!1),null===(t=l.trigger)||void 0===t||t.focus(),e.preventDefault())})})))))});function Vk(e){return e?"open":"closed"}function Wk(e){return"indeterminate"===e}function Hk(e){return Wk(e)?"indeterminate":e?"checked":"unchecked"}function Yk(t){return function(e){return"mouse"===e.pointerType?t(e):void 0}}var Xk=function(e){var t=e.__scopeMenu,n=e.open,r=void 0!==n&&n,i=e.children,o=e.dir,a=e.onOpenChange,s=e.modal,l=void 0===s||s,u=ik(t),c=Ce((0,_e.useState)(null),2),d=c[0],f=c[1],p=(0,_e.useRef)(!1),h=am(a),v=Rb(o);return(0,_e.useEffect)(function(){var e=function(){p.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=function(){return p.current=!1};return document.addEventListener("keydown",e,{capture:!0}),function(){document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,_e.createElement)(px,u,(0,_e.createElement)(sk,{scope:t,open:r,onOpenChange:h,content:d,onContentChange:f},(0,_e.createElement)(ck,{scope:t,onClose:(0,_e.useCallback)(function(){return h(!1)},[h]),isUsingKeyboardRef:p,dir:v,modal:l},i)))},qk=fk,$k=function(e){var t=e.__scopeMenu,n=e.forceMount,r=e.children,i=e.container,o=lk(pk,t);return(0,_e.createElement)(vk,{scope:t,forceMount:n},(0,_e.createElement)(Km,{present:n||o.open},(0,_e.createElement)(Um,{asChild:!0,container:i},r)))},Gk=xk,Qk=Ek,Zk=Ik,Jk=Mk,eS=Rk,tS=function(e){var t=e.__scopeMenu,n=e.children,r=e.open,i=void 0!==r&&r,o=e.onOpenChange,a=lk("MenuSub",t),s=ik(t),l=Ce((0,_e.useState)(null),2),u=l[0],c=l[1],d=Ce((0,_e.useState)(null),2),f=d[0],p=d[1],h=am(o);return(0,_e.useEffect)(function(){return!1===a.open&&h(!1),function(){return h(!1)}},[a.open,h]),(0,_e.createElement)(px,s,(0,_e.createElement)(sk,{scope:t,open:i,onOpenChange:h,content:f,onContentChange:p},(0,_e.createElement)(Dk,{scope:t,contentId:om(),triggerId:om(),trigger:u,onTriggerChange:c},n)))},nS=Uk,rS=Kk,iS=["__scopeDropdownMenu","disabled"],oS=["__scopeDropdownMenu"],aS=["__scopeDropdownMenu"],sS=["__scopeDropdownMenu"],lS=["__scopeDropdownMenu"],uS=["__scopeDropdownMenu"],cS=["__scopeDropdownMenu"],dS=["__scopeDropdownMenu"],fS=["__scopeDropdownMenu"],pS="DropdownMenu",hS=Ce(tm(pS,[rk]),2),vS=hS[0],gS=(hS[1],rk()),mS=Ce(vS(pS),2),yS=mS[0],bS=mS[1],wS=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDropdownMenu,r=e.disabled,i=void 0!==r&&r,o=Gt(e,iS),a=bS("DropdownMenuTrigger",n),s=gS(n);return(0,_e.createElement)(qk,$g({asChild:!0},s),(0,_e.createElement)(gm.button,$g({type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":i?"":void 0,disabled:i},o,{ref:Qg(t,a.triggerRef),onPointerDown:Gg(e.onPointerDown,function(e){i||0!==e.button||!1!==e.ctrlKey||(a.onOpenToggle(),a.open||e.preventDefault())}),onKeyDown:Gg(e.onKeyDown,function(e){i||(["Enter"," "].includes(e.key)&&a.onOpenToggle(),"ArrowDown"===e.key&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})))}),xS=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDropdownMenu,r=Gt(e,aS),i=bS("DropdownMenuContent",n),o=gS(n),a=(0,_e.useRef)(!1);return(0,_e.createElement)(Gk,$g({id:i.contentId,"aria-labelledby":i.triggerId},o,r,{ref:t,onCloseAutoFocus:Gg(e.onCloseAutoFocus,function(e){var t;a.current||null===(t=i.triggerRef.current)||void 0===t||t.focus(),a.current=!1,e.preventDefault()}),onInteractOutside:Gg(e.onInteractOutside,function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;i.modal&&!r||(a.current=!0)}),style:Pe(Pe({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}),kS=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDropdownMenu,r=Gt(e,sS),i=gS(n);return(0,_e.createElement)(Qk,$g({},i,r,{ref:t}))}),SS=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDropdownMenu,r=Gt(e,lS),i=gS(n);return(0,_e.createElement)(Zk,$g({},i,r,{ref:t}))}),_S=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDropdownMenu,r=Gt(e,uS),i=gS(n);return(0,_e.createElement)(Jk,$g({},i,r,{ref:t}))}),ES=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDropdownMenu,r=Gt(e,cS),i=gS(n);return(0,_e.createElement)(eS,$g({},i,r,{ref:t}))}),PS=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDropdownMenu,r=Gt(e,dS),i=gS(n);return(0,_e.createElement)(nS,$g({},i,r,{ref:t}))}),CS=(0,_e.forwardRef)(function(e,t){var n=e.__scopeDropdownMenu,r=Gt(e,fS),i=gS(n);return(0,_e.createElement)(rS,$g({},i,r,{ref:t,style:Pe(Pe({},e.style),{},{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}),IS=function(e){var t=e.__scopeDropdownMenu,n=e.children,r=e.dir,i=e.open,o=e.defaultOpen,a=e.onOpenChange,s=e.modal,l=void 0===s||s,u=gS(t),c=(0,_e.useRef)(null),d=Ce(sm({prop:i,defaultProp:o,onChange:a}),2),f=d[0],p=void 0!==f&&f,h=d[1];return(0,_e.createElement)(yS,{scope:t,triggerId:om(),triggerRef:c,contentId:om(),open:p,onOpenChange:h,onOpenToggle:(0,_e.useCallback)(function(){return h(function(e){return!e})},[h]),modal:l},(0,_e.createElement)(Xk,$g({},u,{open:p,onOpenChange:h,dir:r,modal:l}),n))},TS=wS,MS=function(e){var t=e.__scopeDropdownMenu,n=Gt(e,oS),r=gS(t);return(0,_e.createElement)($k,$g({},r,n))},AS=xS,jS=kS,OS=SS,LS=_S,zS=ES,RS=function(e){var t=e.__scopeDropdownMenu,n=e.children,r=e.open,i=e.onOpenChange,o=e.defaultOpen,a=gS(t),s=Ce(sm({prop:r,defaultProp:o,onChange:i}),2),l=s[0],u=void 0!==l&&l,c=s[1];return(0,_e.createElement)(tS,$g({},a,{open:u,onOpenChange:c}),n)},NS=PS,DS=CS,BS=function(){},FS=_e.createContext({});function US(e){var t=e.onEvent,n=e.children;return(0,to.jsx)(FS.Provider,{value:null!=t?t:BS,children:n})}function KS(){return _e.useContext(FS)}function VS(t,n){var r=mo(),i=(0,_e.useRef)(!1),o=KS(),e=(0,_e.useCallback)(function(e){i.current=e,r.batch(function(){e?(r.complete(),r.addOpenMenu(t)):(r.deleteOpenMenu(t),r.openMenus.forEach(function(e){e.startsWith(t)&&r.deleteOpenMenu(e)})),null==n||n(e)})},[r,t,n]);return(0,_e.useEffect)(function(){return i.current&&(o("open-menu",{source:"unknown",id:t}),r.addOpenMenu(t)),function(){i.current&&(r.deleteOpenMenu(t),r.openMenus.forEach(function(e){e.startsWith(t)&&(o("close-menu",{source:"unknown",id:t}),r.deleteOpenMenu(e))}),i.current=!1)}},[r,t,o]),[ho("is menu open",function(){return r.openMenus.includes(t)},[r,t]),e]}var WS=["noClose"],HS=["children","onSelect"],YS=["children","onSelect"];function XS(e){var t=e.id,n=e.children,r=e.modal,i=void 0!==r&&r,o=Ce(VS(t),2),a=o[0],s=o[1];return(0,to.jsx)(IS,{open:a,dir:"ltr",modal:i,onOpenChange:s,children:n})}function qS(e){var t=e.children,n=e["data-testid"];return(0,to.jsx)(TS,{dir:"ltr","data-testid":n,asChild:!0,children:t})}function $S(e){var t=e.side,n=void 0===t?"bottom":t,r=e.align,i=void 0===r?"start":r,o=e.sideOffset,a=void 0===o?8:o,s=e.alignOffset,l=void 0===s?8:s,u=e.children,c=qa();return(0,to.jsx)(MS,{dir:"ltr",container:c,children:(0,to.jsx)(AS,{className:"tlui-menu",align:i,sideOffset:a,side:n,alignOffset:l,collisionPadding:4,children:u})})}function GS(e){var t=e.id,n=e.children,r=Ce(VS(t),2),i=r[0],o=r[1];return(0,to.jsx)(RS,{open:i,onOpenChange:o,children:n})}function QS(e){var t=e.label,n=e["data-testid"],r=e["data-direction"];return(0,to.jsx)(NS,{dir:"ltr","data-direction":r,"data-testid":n,asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button tlui-menu__submenu__trigger",label:t,icon:"chevron-right"})})}function ZS(e){var t=e.alignOffset,n=void 0===t?0:t,r=e.sideOffset,i=void 0===r?5:r,o=e.children,a=qa();return(0,to.jsx)(MS,{container:a,dir:"ltr",children:(0,to.jsx)(DS,{className:"tlui-menu tlui-menu__submenu__content",alignOffset:n,sideOffset:i,collisionPadding:4,children:o})})}function JS(e){var t=e.children,n=e.size,r=void 0===n?"medium":n;return(0,to.jsx)(jS,{dir:"ltr",className:"tlui-menu__group","data-size":r,children:t})}function e_(e){var t=e.noClose,n=Gt(e,WS);return(0,to.jsx)(OS,{dir:"ltr",asChild:!0,onClick:t||void 0!==n.isChecked?Oa:void 0,children:(0,to.jsx)(Cb,Pe({className:"tlui-menu__button"},n))})}function t_(e){var t=e.children,n=e.onSelect,r=Gt(e,HS);return(0,to.jsxs)(LS,Pe(Pe({dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:function(e){null==n||n(e),Oa(e)}},r),{},{children:[(0,to.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:"scale(".concat(r.checked?1:.5,")"),opacity:r.checked?1:.5},children:(0,to.jsx)(wb,{small:!0,icon:r.checked?"check":"checkbox-empty"})}),t]}))}function n_(e){var t=e.children,n=e.onSelect,r=Gt(e,YS);return(0,to.jsxs)(LS,Pe(Pe({dir:"ltr",className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",onSelect:function(e){null==n||n(e),Oa(e)}},r),{},{children:[(0,to.jsx)(zS,{dir:"ltr",className:"tlui-menu__checkbox-item__check",children:(0,to.jsx)(wb,{icon:"check"})}),t]}))}var r_=(0,_e.forwardRef)(function(e,t){return(0,_e.createElement)(gm.span,$g({},e,{ref:t,style:Pe({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)}))}),i_=["__scopeToast","hotkey","label"],o_=["__scopeToast","onFocusFromOutsideViewport"],a_=["forceMount","open","defaultOpen","onOpenChange"],s_=["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"],l_=["__scopeToast","children"],u_=["__scopeToast"],c_=["__scopeToast"],d_=["altText"],f_=["__scopeToast"],p_=["__scopeToast","altText"],h_="ToastProvider",v_=Ce(Lb("Toast"),3),g_=v_[0],m_=v_[1],y_=Ce(tm("Toast",[v_[2]]),2),b_=y_[0],w_=(y_[1],Ce(b_(h_),2)),x_=w_[0],k_=w_[1],S_=function(e){var t=e.__scopeToast,n=e.label,r=void 0===n?"Notification":n,i=e.duration,o=void 0===i?5e3:i,a=e.swipeDirection,s=void 0===a?"right":a,l=e.swipeThreshold,u=void 0===l?50:l,c=e.children,d=Ce((0,_e.useState)(null),2),f=d[0],p=d[1],h=Ce((0,_e.useState)(0),2),v=h[0],g=h[1],m=(0,_e.useRef)(!1),y=(0,_e.useRef)(!1);return(0,_e.createElement)(g_.Provider,{scope:t},(0,_e.createElement)(x_,{scope:t,label:r,duration:o,swipeDirection:s,swipeThreshold:u,toastCount:v,viewport:f,onViewportChange:p,onToastAdd:(0,_e.useCallback)(function(){return g(function(e){return e+1})},[]),onToastRemove:(0,_e.useCallback)(function(){return g(function(e){return e-1})},[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:y},c))};S_.propTypes={label:function(e){if(!e.label||"string"!=typeof e.label||e.label.trim())return null;var t="Invalid prop `label` supplied to `".concat(h_,"`. Expected non-empty `string`.");return new Error(t)}};var __=["F8"],E_="toast.viewportPause",P_="toast.viewportResume",C_=(0,_e.forwardRef)(function(e,t){var n=e.__scopeToast,r=e.hotkey,i=void 0===r?__:r,o=e.label,a=void 0===o?"Notifications ({hotkey})":o,s=Gt(e,i_),l=k_("ToastViewport",n),u=m_(n),c=(0,_e.useRef)(null),d=(0,_e.useRef)(null),f=(0,_e.useRef)(null),p=(0,_e.useRef)(null),h=Zg(t,p,l.onViewportChange),v=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=0<l.toastCount;(0,_e.useEffect)(function(){var e=function(t){var e;i.every(function(e){return t[e]||t.code===e})&&(null===(e=p.current)||void 0===e||e.focus())};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[i]),(0,_e.useEffect)(function(){var t=c.current,n=p.current;if(g&&t&&n){var e=function(){if(!l.isClosePausedRef.current){var e=new CustomEvent(E_);n.dispatchEvent(e),l.isClosePausedRef.current=!0}},r=function(){if(l.isClosePausedRef.current){var e=new CustomEvent(P_);n.dispatchEvent(e),l.isClosePausedRef.current=!1}},i=function(e){!t.contains(e.relatedTarget)&&r()},o=function(){t.contains(document.activeElement)||r()};return t.addEventListener("focusin",e),t.addEventListener("focusout",i),t.addEventListener("pointermove",e),t.addEventListener("pointerleave",o),window.addEventListener("blur",e),window.addEventListener("focus",r),function(){t.removeEventListener("focusin",e),t.removeEventListener("focusout",i),t.removeEventListener("pointermove",e),t.removeEventListener("pointerleave",o),window.removeEventListener("blur",e),window.removeEventListener("focus",r)}}},[g,l.isClosePausedRef]);var m=(0,_e.useCallback)(function(e){var r=e.tabbingDirection,t=u().map(function(e){var t=e.ref.current,n=[t].concat(de(function(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:0<=e.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}(t)));return"forwards"===r?n:n.reverse()});return("forwards"===r?t.reverse():t).flat()},[u]);return(0,_e.useEffect)(function(){var u=p.current;if(u){var e=function(e){var t=e.altKey||e.ctrlKey||e.metaKey;if("Tab"===e.key&&!t){var n,r=document.activeElement,i=e.shiftKey;if(e.target===u&&i)return void(null===(n=d.current)||void 0===n||n.focus());var o,a,s=m({tabbingDirection:i?"backwards":"forwards"}),l=s.findIndex(function(e){return e===r});V_(s.slice(l+1))?e.preventDefault():i?null===(o=d.current)||void 0===o||o.focus():null===(a=f.current)||void 0===a||a.focus()}};return u.addEventListener("keydown",e),function(){return u.removeEventListener("keydown",e)}}},[u,m]),(0,_e.createElement)(Cm,{ref:c,role:"region","aria-label":a.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:g?void 0:"none"}},g&&(0,_e.createElement)(I_,{ref:d,onFocusFromOutsideViewport:function(){V_(m({tabbingDirection:"forwards"}))}}),(0,_e.createElement)(g_.Slot,{scope:n},(0,_e.createElement)(gm.ol,$g({tabIndex:-1},s,{ref:h}))),g&&(0,_e.createElement)(I_,{ref:f,onFocusFromOutsideViewport:function(){V_(m({tabbingDirection:"backwards"}))}}))}),I_=(0,_e.forwardRef)(function(e,t){var n=e.__scopeToast,r=e.onFocusFromOutsideViewport,i=Gt(e,o_),o=k_("ToastFocusProxy",n);return(0,_e.createElement)(r_,$g({"aria-hidden":!0,tabIndex:0},i,{ref:t,style:{position:"fixed"},onFocus:function(e){var t,n=e.relatedTarget;(null===(t=o.viewport)||void 0===t||!t.contains(n))&&r()}}))}),T_="Toast",M_=(0,_e.forwardRef)(function(e,t){var n=e.forceMount,r=e.open,i=e.defaultOpen,o=e.onOpenChange,a=Gt(e,a_),s=Ce(sm({prop:r,defaultProp:i,onChange:o}),2),l=s[0],u=void 0===l||l,c=s[1];return(0,_e.createElement)(Km,{present:n||u},(0,_e.createElement)(L_,$g({open:u},a,{ref:t,onClose:function(){return c(!1)},onPause:am(e.onPause),onResume:am(e.onResume),onSwipeStart:Gg(e.onSwipeStart,function(e){e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Gg(e.onSwipeMove,function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y","".concat(r,"px"))}),onSwipeCancel:Gg(e.onSwipeCancel,function(e){e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Gg(e.onSwipeEnd,function(e){var t=e.detail.delta,n=t.x,r=t.y;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x","".concat(n,"px")),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y","".concat(r,"px")),c(!1)})})))}),A_=Ce(b_(T_,{onClose:function(){}}),2),j_=A_[0],O_=A_[1],L_=(0,_e.forwardRef)(function(e,t){var n=e.__scopeToast,r=e.type,i=void 0===r?"foreground":r,o=e.duration,a=e.open,s=e.onClose,l=e.onEscapeKeyDown,u=e.onPause,c=e.onResume,d=e.onSwipeStart,f=e.onSwipeMove,p=e.onSwipeCancel,h=e.onSwipeEnd,v=Gt(e,s_),g=k_(T_,n),m=Ce((0,_e.useState)(null),2),y=m[0],b=m[1],w=Zg(t,function(e){return b(e)}),x=(0,_e.useRef)(null),k=(0,_e.useRef)(null),S=o||g.duration,_=(0,_e.useRef)(0),E=(0,_e.useRef)(S),P=(0,_e.useRef)(0),C=g.onToastAdd,I=g.onToastRemove,T=am(function(){var e;(null==y?void 0:y.contains(document.activeElement))&&(null===(e=g.viewport)||void 0===e||e.focus()),s()}),M=(0,_e.useCallback)(function(e){e&&e!==1/0&&(window.clearTimeout(P.current),_.current=(new Date).getTime(),P.current=window.setTimeout(T,e))},[T]);(0,_e.useEffect)(function(){var e=g.viewport;if(e){var t=function(){M(E.current),null==c||c()},n=function(){var e=(new Date).getTime()-_.current;E.current=E.current-e,window.clearTimeout(P.current),null==u||u()};return e.addEventListener(E_,n),e.addEventListener(P_,t),function(){e.removeEventListener(E_,n),e.removeEventListener(P_,t)}}},[g.viewport,S,u,c,M]),(0,_e.useEffect)(function(){a&&!g.isClosePausedRef.current&&M(S)},[a,S,g.isClosePausedRef,M]),(0,_e.useEffect)(function(){return C(),function(){return I()}},[C,I]);var A=(0,_e.useMemo)(function(){return y?function i(e){var o=[];return Array.from(e.childNodes).forEach(function(e){if(e.nodeType===e.TEXT_NODE&&e.textContent&&o.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){var t=e.ariaHidden||e.hidden||"none"===e.style.display,n=""===e.dataset.radixToastAnnounceExclude;if(!t)if(n){var r=e.dataset.radixToastAnnounceAlt;r&&o.push(r)}else o.push.apply(o,de(i(e)))}}),o}(y):null},[y]);return g.viewport?(0,_e.createElement)(_e.Fragment,null,A&&(0,_e.createElement)(z_,{__scopeToast:n,role:"status","aria-live":"foreground"===i?"assertive":"polite","aria-atomic":!0},A),(0,_e.createElement)(j_,{scope:n,onClose:T},(0,lm.createPortal)((0,_e.createElement)(g_.ItemSlot,{scope:n},(0,_e.createElement)(Pm,{asChild:!0,onEscapeKeyDown:Gg(l,function(){g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1})},(0,_e.createElement)(gm.li,$g({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection},v,{ref:w,style:Pe({userSelect:"none",touchAction:"none"},e.style),onKeyDown:Gg(e.onKeyDown,function(e){"Escape"===e.key&&(null==l||l(e.nativeEvent),e.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Gg(e.onPointerDown,function(e){0===e.button&&(x.current={x:e.clientX,y:e.clientY})}),onPointerMove:Gg(e.onPointerMove,function(e){if(x.current){var t=e.clientX-x.current.x,n=e.clientY-x.current.y,r=Boolean(k.current),i=["left","right"].includes(g.swipeDirection),o=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,a=i?o(0,t):0,s=i?0:o(0,n),l="touch"===e.pointerType?10:2,u={x:a,y:s},c={originalEvent:e,delta:u};r?(k.current=u,U_("toast.swipeMove",f,c,{discrete:!1})):K_(u,g.swipeDirection,l)?(k.current=u,U_("toast.swipeStart",d,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(x.current=null)}}),onPointerUp:Gg(e.onPointerUp,function(e){var t=k.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),k.current=null,x.current=null,t){var r=e.currentTarget,i={originalEvent:e,delta:t};K_(t,g.swipeDirection,g.swipeThreshold)?U_("toast.swipeEnd",h,i,{discrete:!0}):U_("toast.swipeCancel",p,i,{discrete:!0}),r.addEventListener("click",function(e){return e.preventDefault()},{once:!0})}})})))),g.viewport))):null});L_.propTypes={type:function(e){if(!e.type||["foreground","background"].includes(e.type))return null;var t="Invalid prop `type` supplied to `".concat(T_,"`. Expected `foreground | background`.");return new Error(t)}};var z_=function(e){var t=e.__scopeToast,n=e.children,r=Gt(e,l_),i=k_(T_,t),o=Ce((0,_e.useState)(!1),2),a=o[0],s=o[1],l=Ce((0,_e.useState)(!1),2),u=l[0],c=l[1];return function(){var n=am(0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){});nm(function(){var e,t=0;return e=window.requestAnimationFrame(function(){return t=window.requestAnimationFrame(n)}),function(){window.cancelAnimationFrame(e),window.cancelAnimationFrame(t)}},[n])}(function(){return s(!0)}),(0,_e.useEffect)(function(){var e=window.setTimeout(function(){return c(!0)},1e3);return function(){return window.clearTimeout(e)}},[]),u?null:(0,_e.createElement)(Um,{asChild:!0},(0,_e.createElement)(r_,r,a&&(0,_e.createElement)(_e.Fragment,null,i.label," ",n)))},R_=(0,_e.forwardRef)(function(e,t){e.__scopeToast;var n=Gt(e,u_);return(0,_e.createElement)(gm.div,$g({},n,{ref:t}))}),N_=(0,_e.forwardRef)(function(e,t){e.__scopeToast;var n=Gt(e,c_);return(0,_e.createElement)(gm.div,$g({},n,{ref:t}))}),D_=(0,_e.forwardRef)(function(e,t){var n=e.altText,r=Gt(e,d_);return n?(0,_e.createElement)(F_,{altText:n,asChild:!0},(0,_e.createElement)(B_,$g({},r,{ref:t}))):null});D_.propTypes={altText:function(e){return e.altText?null:new Error("Missing prop `altText` expected on `".concat("ToastAction","`"))}};var B_=(0,_e.forwardRef)(function(e,t){var n=e.__scopeToast,r=Gt(e,f_),i=O_("ToastClose",n);return(0,_e.createElement)(F_,{asChild:!0},(0,_e.createElement)(gm.button,$g({type:"button"},r,{ref:t,onClick:Gg(e.onClick,i.onClose)})))}),F_=(0,_e.forwardRef)(function(e,t){e.__scopeToast;var n=e.altText,r=Gt(e,p_);return(0,_e.createElement)(gm.div,$g({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},r,{ref:t}))});function U_(e,t,n,r){var i=r.discrete,o=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&o.addEventListener(e,t,{once:!0}),i?mm(o,a):o.dispatchEvent(a)}var K_=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=Math.abs(e.x),i=Math.abs(e.y),o=i<r;return"left"===t||"right"===t?o&&n<r:!o&&n<i};function V_(e){var t=document.activeElement;return e.some(function(e){return e===t||(e.focus(),document.activeElement!==t)})}var W_=M_,H_=R_,Y_=N_,X_=D_,q_=B_,$_="2.0.0-canary.b9c6bf2fe84a",G_=Pe(Pe({},ro),{},{icons:Object.fromEntries(["align-bottom-center","align-bottom-left","align-bottom-right","align-bottom","align-center-center","align-center-horizontal","align-center-left","align-center-right","align-center-vertical","align-left","align-right","align-top-center","align-top-left","align-top-right","align-top","arrow-left","arrowhead-arrow","arrowhead-bar","arrowhead-diamond","arrowhead-dot","arrowhead-none","arrowhead-square","arrowhead-triangle-inverted","arrowhead-triangle","aspect-ratio","avatar","blob","bring-forward","bring-to-front","check","checkbox-checked","checkbox-empty","chevron-down","chevron-left","chevron-right","chevron-up","chevrons-ne","chevrons-sw","clipboard-copied","clipboard-copy","code","collab","color","comment","cross-2","cross","dash-dashed","dash-dotted","dash-draw","dash-solid","discord","distribute-horizontal","distribute-vertical","dot","dots-horizontal","dots-vertical","drag-handle-dots","duplicate","edit","external-link","file","fill-none","fill-pattern","fill-semi","fill-solid","follow","following","font-draw","font-mono","font-sans","font-serif","geo-arrow-down","geo-arrow-left","geo-arrow-right","geo-arrow-up","geo-check-box","geo-diamond","geo-ellipse","geo-hexagon","geo-octagon","geo-oval","geo-pentagon","geo-rectangle","geo-rhombus-2","geo-rhombus","geo-star","geo-trapezoid","geo-triangle","geo-x-box","github","group","hidden","image","info-circle","leading","link","lock-small","lock","menu","minus","mixed","pack","page","plus","question-mark-circle","question-mark","redo","reset-zoom","rotate-ccw","rotate-cw","ruler","search","send-backward","send-to-back","settings-horizontal","settings-vertical-1","settings-vertical","share-1","share-2","size-extra-large","size-large","size-medium","size-small","spline-cubic","spline-line","stack-horizontal","stack-vertical","stretch-horizontal","stretch-vertical","text-align-center","text-align-justify","text-align-left","text-align-right","tool-arrow","tool-embed","tool-eraser","tool-frame","tool-hand","tool-highlight","tool-laser","tool-line","tool-media","tool-note","tool-pencil","tool-pointer","tool-text","trash","triangle-down","triangle-up","twitter","undo","ungroup","unlock-small","unlock","vertical-align-center","vertical-align-end","vertical-align-start","visible","warning-triangle","zoom-in","zoom-out"].map(function(e){return[e,"https://unpkg.com/@tldraw/assets@".concat($_,"/icons/icon/").concat(e,".svg")]})),translations:Object.fromEntries(Zi.map(function(e){return[e.locale,"https://unpkg.com/@tldraw/assets@".concat($_,"/translations/").concat(e.locale,".json")]})),embedIcons:Object.fromEntries(mi.map(function(e){return[e.type,"https://unpkg.com/@tldraw/assets@".concat($_,"/embed-icons/").concat(e.type,".png")]}))});var Q_=_e.forwardRef(function(e,t){var n=e.className,r=e.label,i=e.icon,o=e.iconLeft,a=e.autoselect,s=void 0!==a&&a,l=e.autofocus,u=void 0!==l&&l,c=e.defaultValue,d=e.placeholder,f=e.onComplete,p=e.onValueChange,h=e.onCancel,v=e.onBlur,g=e.shouldManuallyMaintainScrollPositionWhenFocused,m=void 0!==g&&g,y=e.children,b=e.value,w=_e.useRef(null);_e.useImperativeHandle(t,function(){return w.current});var x=mb(),k=_e.useRef(null!=c?c:""),S=_e.useRef(null!=c?c:""),_=Ce(_e.useState(!1),2),E=_[0],P=_[1],C=_e.useCallback(function(e){P(!0);var t=e.currentTarget;S.current=t.value,requestAnimationFrame(function(){s&&t.select()})},[s]),I=_e.useCallback(function(e){var t=e.currentTarget.value;S.current=t,null==p||p(t)},[p]),T=_e.useCallback(function(e){switch(e.key){case"Enter":e.currentTarget.blur(),e.stopPropagation(),null==f||f(e.currentTarget.value);break;case"Escape":e.currentTarget.value=k.current,e.currentTarget.blur(),e.stopPropagation(),null==h||h(e.currentTarget.value)}},[f,h]),M=_e.useCallback(function(e){P(!1);var t=e.currentTarget.value;null==v||v(t)},[v]);return _e.useEffect(function(){var e=window.visualViewport;if(E&&m&&e){var t=function(){var e;null===(e=w.current)||void 0===e||e.scrollIntoView({block:"center"})};return e.addEventListener("resize",t),e.addEventListener("scroll",t),requestAnimationFrame(function(){var e;null===(e=w.current)||void 0===e||e.scrollIntoView({block:"center"})}),function(){e.removeEventListener("resize",t),e.removeEventListener("scroll",t)}}},[E,m]),(0,to.jsxs)("div",{draggable:!1,className:"tlui-input__wrapper",children:[y,r&&(0,to.jsx)("label",{children:x(r)}),o&&(0,to.jsx)(wb,{icon:o,className:"tlui-icon-left",small:!0}),(0,to.jsx)("input",{ref:w,className:so("tlui-input",n),type:"text",defaultValue:c,onKeyUp:T,onChange:I,onFocus:C,onBlur:M,autoFocus:u,placeholder:d,value:b}),i&&(0,to.jsx)(wb,{icon:i,small:!!r})]})});function Z_(e){return uc(e)?{isValid:!0,hasProtocol:!0}:uc("https://"+e)?{isValid:!0,hasProtocol:!1}:{isValid:!1,hasProtocol:!1}}var J_=po(function(e){var t=e.onClose,n=mo().onlySelectedShape;return n&&"url"in n.props&&"string"==typeof n.props.url?(0,to.jsx)(eE,{onClose:t,selectedShape:n}):null}),eE=po(function(e){var t=e.onClose,n=e.selectedShape,r=mo(),i=mb(),o=(0,_e.useRef)(null);(0,_e.useEffect)(function(){requestAnimationFrame(function(){var e;return null===(e=o.current)||void 0===e?void 0:e.focus()})},[]);var a=(0,_e.useRef)(n.props.url),s=Ce((0,_e.useState)(function(){var e=Z_(n.props.url),t=!0===e.isValid?e.hasProtocol?n.props.url:"https://"+n.props.url:"https://";return{actual:t,safe:t,valid:!0}}),2),l=s[0],u=s[1],c=(0,_e.useCallback)(function(e){var t=e.replace(/https?:\/\/(https?:\/\/)/,function(e,t){return t}),n=Z_(t),r=!0===n.isValid?n.hasProtocol?t:"https://"+t:"https://";u({actual:t,safe:r,valid:n.isValid})},[]),d=(0,_e.useCallback)(function(){var e=r.onlySelectedShape;e&&(r.updateShapes([{id:e.id,type:e.type,props:{url:""}}]),t())},[r,t]),f=(0,_e.useCallback)(function(){var e=r.onlySelectedShape;e&&(e&&"url"in e.props&&e.props.url!==l.safe&&r.updateShapes([{id:e.id,type:e.type,props:{url:l.safe}}]),t())},[r,t,l]),p=(0,_e.useCallback)(function(){t()},[t]);if(!n)return t(),null;var h=a.current&&!l.valid;return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)(Ib,{children:[(0,to.jsx)(Tb,{children:i("edit-link-dialog.title")}),(0,to.jsx)(Mb,{})]}),(0,to.jsx)(Ab,{children:(0,to.jsxs)("div",{className:"tlui-edit-link-dialog",children:[(0,to.jsx)(Q_,{ref:o,className:"tlui-edit-link-dialog__input",label:"edit-link-dialog.url",autofocus:!0,value:l.actual,onValueChange:c,onComplete:f,onCancel:p}),(0,to.jsx)("div",{children:l.valid?i("edit-link-dialog.detail"):i("edit-link-dialog.invalid-url")})]})}),(0,to.jsxs)(jb,{className:"tlui-dialog__footer__actions",children:[(0,to.jsx)(Cb,{onClick:p,onTouchEnd:p,children:i("edit-link-dialog.cancel")}),h?(0,to.jsx)(Cb,{type:"danger",onTouchEnd:d,onClick:d,children:i("edit-link-dialog.clear")}):(0,to.jsx)(Cb,{type:"primary",disabled:!l.valid,onTouchEnd:f,onClick:f,children:i("edit-link-dialog.save")})]})]})}),tE=po(function(e){var t=e.onClose,n=mo(),r=mb(),i=ub(),o=Ce((0,_e.useState)(null),2),a=o[0],s=o[1],l=Ce((0,_e.useState)(""),2),u=l[0],c=l[1],d=Ce((0,_e.useState)(null),2),f=d[0],p=d[1],h=Ce((0,_e.useState)(!1),2),v=h[0],g=h[1],m=(0,_e.useRef)(-1);return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)(Ib,{children:[(0,to.jsx)(Tb,{children:a?"".concat(r("embed-dialog.title")," — ").concat(a.title):r("embed-dialog.title")}),(0,to.jsx)(Mb,{})]}),a?(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)(Ab,{className:"tlui-embed-dialog__enter",children:[(0,to.jsx)(Q_,{className:"tlui-embed-dialog__input",label:"embed-dialog.url",placeholder:"http://example.com",autofocus:!0,onValueChange:function(e){c(e);var t=Gl(e);p(t&&t.definition.type===a.type?t:null),g(!1),clearTimeout(m.current),m.current=setTimeout(function(){return g(!t)},320)}}),""===u?(0,to.jsxs)("div",{className:"tlui-embed-dialog__instruction",children:[(0,to.jsx)("span",{children:r("embed-dialog.instruction")})," ",a.instructionLink&&(0,to.jsxs)("a",{target:"_blank",rel:"noopener noreferrer",href:a.instructionLink,className:"tlui-embed-dialog__instruction__link",children:["Learn more.",(0,to.jsx)(wb,{icon:"external-link",small:!0})]})]}):(0,to.jsx)("div",{className:"tlui-embed-dialog__warning",children:v?r("embed-dialog.invalid-url"):" "})]}),(0,to.jsxs)(jb,{className:"tlui-dialog__footer__actions",children:[(0,to.jsx)(Cb,{onClick:function(){s(null),p(null),c("")},label:"embed-dialog.back"}),(0,to.jsx)("div",{className:"tlui-embed__spacer"}),(0,to.jsx)(Cb,{label:"embed-dialog.cancel",onClick:t}),(0,to.jsx)(Cb,{type:"primary",disabled:!f,label:"embed-dialog.create",onClick:function(){f&&(n.putExternalContent({type:"embed",url:u,point:n.viewportPageCenter,embed:f.definition}),t())}})]})]}):(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(Ab,{className:"tlui-embed-dialog__list",children:mi.map(function(e){return(0,to.jsxs)("button",{className:"tlui-embed-dialog__item",onClick:function(){return s(e)},children:[(0,to.jsx)("div",{className:"tlui-embed-dialog__item__image",children:(0,to.jsx)("div",{className:"tlui-embed-dialog__item__image__img",style:{backgroundImage:"url(".concat(i.embedIcons[e.type],")")}})}),(0,to.jsx)("div",{className:"tlui-embed-dialog__item__title",children:e.title})]},e.type)})}),(0,to.jsx)("div",{className:"tlui-dialog__scrim"})]})]})}),nE=Rj(4162);function rE(e,t,n){return iE.apply(this,arguments)}function iE(){return(iE=ao(io().mark(function e(t,n,r){var V,W,H,Y,X,q,$,G,Q,Z,i,J,o,a,s,l,u,c,d,f,p,h,v,g,m,y;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:V=n.elements,W=n.files,H={shapes:[],rootShapeIds:[],assets:[],schema:t.store.schema.serialize()},Y=new Map,X=new Map,q=t.currentPageId,$=new Map,G=[],Q=new Set,V.forEach(function(e){if($.set(e.id,Rr()),null!==e.boundElements){var t,n=ce(e.boundElements);try{for(n.s();!(t=n.n()).done;){var r=t.value;"text"===r.type&&Q.add(r.id)}}catch(e){n.e(e)}finally{n.f()}}}),Z="a1",i=ce(V),e.prev=11,o=io().mark(function e(){var r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T,M,A,j,O,L,z,R,N,D,B,F,U,K;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=J.value,Q.has(r.id))return e.abrupt("return","continue");e.next=3;break;case 3:i=$.get(r.id),o={id:i,typeName:"shape",parentId:q,index:Z,x:r.x,y:r.y,rotation:0,isLocked:r.locked,opacity:oE(r.opacity)},0!==r.angle&&X.set(i,r.angle),r.groupIds&&0<r.groupIds.length?Y.has(r.groupIds[0])?null===(a=Y.get(r.groupIds[0]))||void 0===a||a.push(i):Y.set(r.groupIds[0],[i]):G.push(i),e.t0=r.type,e.next="rectangle"===e.t0||"ellipse"===e.t0||"diamond"===e.t0?10:"freedraw"===e.t0?32:"line"===e.t0?34:"arrow"===e.t0?39:"text"===e.t0?63:"image"===e.t0?66:72;break;case 10:if(c="",d="middle",null===r.boundElements){e.next=29;break}f=ce(r.boundElements),e.prev=14,h=io().mark(function e(){var t,n;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=p.value).type&&(n=V.find(function(e){return e.id===t.id}))&&(c=n.text,d=fE[n.textAlign]);case 2:case"end":return e.stop()}},e)}),f.s();case 17:if((p=f.n()).done){e.next=21;break}return e.delegateYield(h(),"t1",19);case 19:e.next=17;break;case 21:e.next=26;break;case 23:e.prev=23,e.t2=e.catch(14),f.e(e.t2);case 26:return e.prev=26,f.f(),e.finish(26);case 29:return v="transparent"===r.backgroundColor?r.strokeColor:r.backgroundColor,H.shapes.push(Pe(Pe({},o),{},{type:"geo",props:{geo:r.type,url:null!==(s=r.link)&&void 0!==s?s:"",w:r.width,h:r.height,size:null!==(l=aE[r.strokeWidth])&&void 0!==l?l:"draw",color:null!==(u=uE[v])&&void 0!==u?u:"black",text:c,align:d,dash:vE(r),fill:gE(r)}})),e.abrupt("break",72);case 32:return H.shapes.push(Pe(Pe({},o),{},{type:"draw",props:{dash:vE(r),size:aE[r.strokeWidth],color:null!==(g=uE[r.strokeColor])&&void 0!==g?g:"black",segments:[{type:"free",points:r.points.map(function(e){var t=Ce(e,3),n=t[0],r=t[1],i=t[2];return{x:n,y:r,z:void 0===i?.5:i}})}]}})),e.abrupt("break",72);case 34:return y=r.points[0],b=r.points[r.points.length-1],w=te(r.points.length),H.shapes.push(Pe(Pe({},o),{},{type:"line",props:{dash:vE(r),size:aE[r.strokeWidth],color:null!==(m=uE[r.strokeColor])&&void 0!==m?m:"black",spline:r.roundness?"cubic":"line",handles:Pe({start:{id:"start",type:"vertex",index:w[0],x:y[0],y:y[1]},end:{id:"end",type:"vertex",index:w[w.length-1],x:b[0],y:b[1]}},Object.fromEntries(r.points.slice(1,-1).map(function(e,t){var n=Ce(e,2),r=n[0],i=n[1],o=ac();return[o,{id:o,type:"vertex",index:w[t+1],x:r,y:i}]})))}})),e.abrupt("break",72);case 39:if(C="",null===r.boundElements){e.next=57;break}I=ce(r.boundElements),e.prev=42,M=io().mark(function e(){var t,n;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"text"===(t=T.value).type&&(n=V.find(function(e){return e.id===t.id}))&&(C=n.text);case 2:case"end":return e.stop()}},e)}),I.s();case 45:if((T=I.n()).done){e.next=49;break}return e.delegateYield(M(),"t3",47);case 47:e.next=45;break;case 49:e.next=54;break;case 51:e.prev=51,e.t4=e.catch(42),I.e(e.t4);case 54:return e.prev=54,I.f(),e.finish(54);case 57:return A=r.points[0],j=r.points[r.points.length-1],O=$.get(null===(x=r.startBinding)||void 0===x?void 0:x.elementId),L=$.get(null===(k=r.endBinding)||void 0===k?void 0:k.elementId),H.shapes.push(Pe(Pe({},o),{},{type:"arrow",props:{text:C,bend:hE(r,A,j),dash:vE(r),size:null!==(S=aE[r.strokeWidth])&&void 0!==S?S:"m",color:null!==(_=uE[r.strokeColor])&&void 0!==_?_:"black",start:O?{type:"binding",boundShapeId:O,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:A[0],y:A[1]},end:L?{type:"binding",boundShapeId:L,normalizedAnchor:{x:.5,y:.5},isExact:!1}:{type:"point",x:j[0],y:j[1]},arrowheadEnd:null!==(E=pE[r.endArrowhead])&&void 0!==E?E:"none",arrowheadStart:null!==(P=pE[r.startArrowhead])&&void 0!==P?P:"none"}})),e.abrupt("break",72);case 63:return t=r.fontSize,void 0,n=sE[t],D=(N=n?{size:n,scale:1}:t<16?{size:"s",scale:t/16}:36<t?{size:"xl",scale:t/36}:{size:"m",scale:1}).size,B=N.scale,H.shapes.push(Pe(Pe({},o),{},{type:"text",props:{size:D,scale:B,font:null!==(z=lE[r.fontFamily])&&void 0!==z?z:"draw",color:null!==(R=uE[r.strokeColor])&&void 0!==R?R:"black",text:r.text,align:fE[r.textAlign]}})),e.abrupt("break",72);case 66:if(U=W[r.fileId]){e.next=69;break}return e.abrupt("break",72);case 69:K=Pr.createId(),H.assets.push({id:K,typeName:"asset",type:"image",props:{w:r.width,h:r.height,name:null!==(F=r.id)&&void 0!==F?F:"Untitled",isAnimated:!1,mimeType:U.mimeType,src:U.dataURL}}),H.shapes.push(Pe(Pe({},o),{},{type:"image",props:{w:r.width,h:r.height,assetId:K}}));case 72:Z=ee(Z);case 73:case"end":return e.stop()}var t,n},e,null,[[14,23,26,29],[42,51,54,57]])}),i.s();case 14:if((J=i.n()).done){e.next=21;break}return e.delegateYield(o(),"t0",16);case 16:if("continue"===e.t0)return e.abrupt("continue",19);e.next=19;break;case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t1=e.catch(11),i.e(e.t1);case 26:return e.prev=26,i.f(),e.finish(26);case 29:a=null!=r?r:t.inputs.shiftKey?t.inputs.currentPagePoint:void 0,t.mark("paste"),t.putContent(H,{point:a,select:!1,preserveIds:!0}),s=ce(Y.values());try{for(s.s();!(l=s.n()).done;)1<(u=l.value).length&&(t.groupShapes(u),null!==(c=t.getShapeById(u[0]))&&void 0!==c&&c.parentId&&zr(c.parentId)&&G.push(c.parentId))}catch(e){s.e(e)}finally{s.f()}d=ce(X);try{for(d.s();!(f=d.n()).done;)p=Ce(f.value,2),h=p[0],v=p[1],t.select(h),t.rotateShapesBy([h],v)}catch(e){d.e(e)}finally{d.f()}g=U(G.map(function(e){return t.getShapeById(e)})),m=$o.Common(g.map(function(e){return t.getPageBounds(e)})),y=t.viewportPageBounds.center,t.updateShapes(g.map(function(e){var t,n,r=(null!==(t=e.x)&&void 0!==t?t:0)-(m.x+m.w/2),i=(null!==(n=e.y)&&void 0!==n?n:0)-(m.y+m.h/2);return{id:e.id,type:e.type,x:y.x+r,y:y.y+i}})),t.setSelectedIds(G);case 41:case"end":return e.stop()}},e,null,[[11,23,26,29]])}))).apply(this,arguments)}var oE=function(e){var t=e/100;return t<.2?.1:t<.4?.25:t<.6?.5:t<.8?.75:1},aE={1:"s",2:"m",3:"l",4:"xl"},sE={16:"s",20:"m",28:"l",36:"xl"};var lE={1:"draw",2:"sans",3:"mono"},uE={"#ffffff":"grey","#000000":"black","#343a40":"black","#495057":"grey","#c92a2a":"red","#a61e4d":"light-red","#862e9c":"violet","#5f3dc4":"light-violet","#364fc7":"blue","#1864ab":"light-blue","#0b7285":"light-green","#087f5b":"light-green","#2b8a3e":"green","#5c940d":"light-green","#e67700":"yellow","#d9480f":"orange","#ced4da":"grey","#868e96":"grey","#fa5252":"light-red","#e64980":"red","#be4bdb":"light-violet","#7950f2":"violet","#4c6ef5":"blue","#228be6":"light-blue","#15aabf":"light-green","#12b886":"green","#40c057":"green","#82c91e":"light-green","#fab005":"yellow","#fd7e14":"orange","#212529":"grey"},cE={solid:"draw",dashed:"dashed",dotted:"dotted"},dE={"cross-hatch":"pattern",hachure:"pattern",solid:"solid"},fE={left:"start",center:"middle",right:"end"},pE={arrow:"arrow",dot:"dot",triangle:"triangle",bar:"pipe"};function hE(e,t,n){var r=0;if(2<e.points.length){var i=new xo(t[0],t[1]),o=new xo(n[0],n[1]),a=new xo(e.points[1][0],e.points[1][1]),s=xo.Sub(o,i),l=xo.Per(s),u=xo.Med(o,i),c=xo.Sub(u,l),d=xo.Add(u,l),f=xo.NearestPointOnLineSegment(c,d,a,!1);r=xo.Dist(f,u),xo.Clockwise(f,o,u)&&(r*=-1)}return r}var vE=function(e){var t,n=null!==(t=cE[e.strokeStyle])&&void 0!==t?t:"draw";return"draw"===n&&0===e.roughness&&(n="solid"),n},gE=function(e){var t;return"transparent"===e.backgroundColor?"none":null!==(t=dE[e.fillStyle])&&void 0!==t?t:"solid"};function mE(e,t,n){return yE.apply(this,arguments)}function yE(){return(yE=ao(io().mark(function e(t,n,r){var i,o;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(n.map(function(){var t=ao(io().mark(function e(t){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.blob();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()));case 2:return i=e.sent,o=i.map(function(e){return new File([e],"tldrawFile",{type:e.type})}),t.mark("paste"),e.next=7,t.putExternalContent({type:"files",files:o,point:r,ignoreParent:!1});case 7:n.forEach(function(e){return URL.revokeObjectURL(e)});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bE(e,t,n){return wE.apply(this,arguments)}function wE(){return(wE=ao(io().mark(function e(t,n,r){var i,o;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:if(o=e.sent,null!==(i=o.headers.get("content-type"))&&void 0!==i&&i.match(/^image\//))return t.mark("paste"),mE(t,[n]),e.abrupt("return");e.next=8;break;case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),"Failed to fetch"!==e.t0.message&&console.error(e.t0);case 13:return t.mark("paste"),e.next=16,t.putExternalContent({type:"url",point:r,url:n});case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function xE(){var e=mo();return ho("editor.isFocused",function(){return e.isFocused},[e])}var kE=["input","select","textarea"];function SE(e){var t=document.activeElement;return e.isMenuOpen||t&&(t.getAttribute("contenteditable")||-1<kE.indexOf(t.tagName.toLowerCase()))}function _E(e){return EE.apply(this,arguments)}function EE(){return(EE=ao(io().mark(function e(r){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(t,e){var n=new FileReader;n.addEventListener("loadend",function(){var e=n.result;t(e)}),n.addEventListener("error",function(){e(n.error)}),n.readAsText(r)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var PE,CE,IE=function(e,a,t){var n=function(e){var t,n=a.split(/[\n\s]/),r=ce(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;try{var o=new URL(i);if("http:"!==o.protocol&&"https:"!==o.protocol)return}catch(e){return}}}catch(e){r.e(e)}finally{r.f()}return Fl(n)}();if(n){var r,i=ce(n);try{for(i.s();!(r=i.n()).done;)bE(e,r.value,t)}catch(e){i.e(e)}finally{i.f()}}else!function(e){try{var t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}}(a)?/^<svg/.test(a)?(e.mark("paste"),e.putExternalContent({type:"svg-text",text:a,point:t})):(e.mark("paste"),e.putExternalContent({type:"text",text:a,point:t})):bE(e,a,t)},TE=(CE=ao(io().mark(function e(t,n,r){var i,o,a,s;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t.editingId)return e.abrupt("return");e.next=2;break;case 2:if(n){e.next=4;break}throw Error("No clipboard data");case 4:i=[],o=io().mark(function e(){var t;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=s[a],e.t0=t.kind,e.next="file"===e.t0?4:"string"===e.t0?6:8;break;case 4:return i.push({type:"file",source:new Promise(function(e){return e(t.getAsFile())})}),e.abrupt("break",8);case 6:return"text/html"===t.type?i.push({type:"html",source:new Promise(function(e){return t.getAsString(e)})}):"text/plain"===t.type?i.push({type:"text",source:new Promise(function(e){return t.getAsString(e)})}):i.push({type:t.type,source:new Promise(function(e){return t.getAsString(e)})}),e.abrupt("break",8);case 8:case"end":return e.stop()}},e)}),a=0,s=Object.values(n.items);case 7:if(a<s.length)return e.delegateYield(o(),"t0",9);e.next=12;break;case 9:a++,e.next=7;break;case 12:AE(t,i,r);case 13:case"end":return e.stop()}},e)})),function(e,t,n){return CE.apply(this,arguments)}),ME=(PE=ao(io().mark(function e(t,n,r){var o,i,a,s;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=ce(n),e.prev=2,s=io().mark(function e(){var n,t,r,i;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.value,n.types.find(function(e){return e.match(/^image\//)})){t=ce(n.types);try{for(t.s();!(r=t.n()).done;)(i=r.value).match(/^image\//)&&o.push({type:"blob",source:n.getType(i)})}catch(e){t.e(e)}finally{t.f()}}n.types.includes("text/html")&&o.push({type:"html",source:new Promise(function(t){return n.getType("text/html").then(function(e){return _E(e).then(t)})})}),n.types.includes("text/uri-list")&&o.push({type:"url",source:new Promise(function(t){return n.getType("text/uri-list").then(function(e){return _E(e).then(t)})})}),n.types.includes("text/plain")&&o.push({type:"text",source:new Promise(function(t){return n.getType("text/plain").then(function(e){return _E(e).then(t)})})});case 5:case"end":return e.stop()}},e)}),i.s();case 5:if((a=i.n()).done){e.next=9;break}return e.delegateYield(s(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),i.e(e.t1);case 14:return e.prev=14,i.f(),e.finish(14);case 17:return e.next=19,AE(t,o,r);case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}},e,null,[[2,11,14,17]])})),function(e,t,n){return PE.apply(this,arguments)});function AE(e,t,n){return jE.apply(this,arguments)}function jE(){return(jE=ao(io().mark(function e(s,l,u){var c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T,M,A;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((c=l.filter(function(e){return("file"===e.type||"blob"===e.type)&&null!==e.source})).length)return e.next=4,Promise.all(c.map(function(e){return e.source}));e.next=9;break;case 4:return d=e.sent,f=d.filter(Boolean).map(function(e){return URL.createObjectURL(e)}),e.next=8,mE(s,f,u);case 8:return e.abrupt("return",e.sent);case 9:return e.next=11,Promise.all(l.filter(function(e){return"file"!==e.type}).map(function(e){return new Promise(function(a){var s=e;"file"!==s.type?s.source.then(function(t){var e,n=null===(e=t.match(/<tldraw[^>]*>(.*)<\/tldraw>/))||void 0===e?void 0:e[1];if(n)try{var r=(0,nE.decompressFromBase64)(n);if(null===r)return void a({type:"error",data:r,reason:"found tldraw data comment but could not parse base64"});var i=JSON.parse(r);return"application/tldraw"!==i.type&&a({type:"error",data:i,reason:"found tldraw data comment but JSON was of a different type: ".concat(i.type)}),"string"==typeof i.data?void a({type:"error",data:i,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"}):void a({type:"tldraw",data:i.data})}catch(e){return void a({type:"error",data:n,reason:"found tldraw json but data was a string instead of a TLClipboardModel object"})}else{if("html"===s.type)return void a({type:"text",data:t,subtype:"html"});if("url"===s.type)return void a({type:"text",data:t,subtype:"url"});try{var o=JSON.parse(t);return"excalidraw/clipboard"===o.type?void a({type:"excalidraw",data:o}):void a({type:"text",data:t,subtype:"json"})}catch(e){return void a({type:"text",data:t,subtype:"text"})}}a({type:"error",data:t,reason:"unhandled case"})}):a({type:"error",data:null,reason:"unexpected file"})})}));case 11:p=e.sent,h=ce(p),e.prev=13,h.s();case 15:if((v=h.n()).done){e.next=22;break}if("tldraw"===(g=v.value).type)return r=s,i=g.data,void 0,a=null!=(o=u)?o:r.inputs.shiftKey?r.inputs.currentPagePoint:void 0,r.mark("paste"),r.putContent(i,{point:a,select:!0}),e.abrupt("return");e.next=20;break;case 20:e.next=15;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),h.e(e.t0);case 27:return e.prev=27,h.f(),e.finish(27);case 30:m=ce(p),e.prev=31,m.s();case 33:if((y=m.n()).done){e.next=40;break}if("excalidraw"===(b=y.value).type)return rE(s,b.data,u),e.abrupt("return");e.next=38;break;case 38:e.next=33;break;case 40:e.next=45;break;case 42:e.prev=42,e.t1=e.catch(31),m.e(e.t1);case 45:return e.prev=45,m.f(),e.finish(45);case 48:w=ce(p),e.prev=49,w.s();case 51:if((x=w.n()).done){e.next=66;break}if("text"!==(k=x.value).type||"html"!==k.subtype){e.next=64;break}if(S=(new DOMParser).parseFromString(k.data,"text/html"),(_=S.querySelector("body"))&&1===Array.from(_.children).filter(function(e){return 1===e.nodeType}).length&&_.firstElementChild&&"A"===_.firstElementChild.tagName&&_.firstElementChild.hasAttribute("href")&&""!==_.firstElementChild.getAttribute("href"))return E=_.firstElementChild.getAttribute("href"),IE(s,E,u),e.abrupt("return");e.next=61;break;case 61:if(!p.some(function(e){return"text"===e.type&&"html"!==e.subtype})&&k.data.trim())return IE(s,(t=k.data,n=void 0,(n=document.implementation.createHTMLDocument("")).documentElement.innerHTML=t.trim(),n.body.textContent||n.body.innerText||""),u),e.abrupt("return");e.next=64;break;case 64:e.next=51;break;case 66:e.next=71;break;case 68:e.prev=68,e.t2=e.catch(49),w.e(e.t2);case 71:return e.prev=71,w.f(),e.finish(71);case 74:P=ce(p),e.prev=75,P.s();case 77:if((C=P.n()).done){e.next=84;break}if("text"===(I=C.value).type&&"url"===I.subtype)return bE(s,I.data,u),e.abrupt("return");e.next=82;break;case 82:e.next=77;break;case 84:e.next=89;break;case 86:e.prev=86,e.t3=e.catch(75),P.e(e.t3);case 89:return e.prev=89,P.f(),e.finish(89);case 92:T=ce(p),e.prev=93,T.s();case 95:if((M=T.n()).done){e.next=102;break}if("text"===(A=M.value).type&&"text"===A.subtype&&A.data.trim())return IE(s,A.data,u),e.abrupt("return");e.next=100;break;case 100:e.next=95;break;case 102:e.next=107;break;case 104:e.prev=104,e.t4=e.catch(93),T.e(e.t4);case 107:return e.prev=107,T.f(),e.finish(107);case 110:case"end":return e.stop()}var t,n,r,i,o,a},e,null,[[13,24,27,30],[31,42,45,48],[49,68,71,74],[75,86,89,92],[93,104,107,110]])}))).apply(this,arguments)}var OE=function(t){var e=t.getContent();if(e){var n=(0,nE.compressToBase64)(JSON.stringify({type:"application/tldraw",kind:"content",data:e}));if("undefined"!=typeof navigator){var r,i=e.shapes.map(function(e){return t.isShapeOfType(e,bu)||t.isShapeOfType(e,hf)||t.isShapeOfType(e,id)?e.props.text:t.isShapeOfType(e,hd)||t.isShapeOfType(e,ru)?e.props.url:null}).filter(ye);if(null!==(r=navigator.clipboard)&&void 0!==r&&r.write){var o=new Blob(["<tldraw>".concat(n,"</tldraw>")],{type:"text/html"}),a=i.join(" ");""===a&&(a=" "),navigator.clipboard.write([new ClipboardItem({"text/html":o,"text/plain":new Blob([a],{type:"text/plain"})})])}else navigator.clipboard.writeText&&navigator.clipboard.writeText("<tldraw>".concat(n,"</tldraw>"))}}else navigator&&navigator.clipboard&&navigator.clipboard.writeText("")},LE=(0,_e.createContext)({});function zE(e){var t=e.children,n=Ce((0,_e.useState)([]),2),r=n[0],i=n[1],o=(0,_e.useCallback)(function(t){var e,n=null!==(e=t.id)&&void 0!==e?e:ac();return i(function(e){return[].concat(de(e.filter(function(e){return e.id!==t.id})),[Pe(Pe({},t),{},{id:n})])}),n},[]),a=(0,_e.useCallback)(function(t){return i(function(e){return e.filter(function(e){return e.id!==t})}),t},[]),s=(0,_e.useCallback)(function(){i(function(){return[]})},[]);return(0,to.jsx)(LE.Provider,{value:{toasts:r,addToast:o,removeToast:a,clearToasts:s},children:t})}function RE(){var e=(0,_e.useContext)(LE);if(!e)throw new Error("useToasts must be used within a ToastsProvider");return e}function NE(){var a=mo(),s=RE().addToast,l=mb();return(0,_e.useCallback)(function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:a.selectedIds,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"svg";if(0===t.length&&(t=de(a.currentPageShapeIds)),0!==t.length)switch(e){case"svg":window.navigator.clipboard&&(window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":function(e,t){return FE.apply(this,arguments)}(a,t)})]):KE(ao(io().mark(function e(){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Kg,e.next=3,DE(a,t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e)}))));break;case"jpeg":case"png":var n="jpeg"===e?"image/jpeg":"image/png",r=function(e,t,n){return UE.apply(this,arguments)}(a,t,e).then(function(e){if(e){if(window.navigator.clipboard)return e;throw new Error("Copy not supported")}throw s({id:"copy-fail",icon:"warning-triangle",title:l("toast.error.copy-fail.title"),description:l("toast.error.copy-fail.desc")}),new Error("Copy not possible")});window.navigator.clipboard.write([new ClipboardItem(Ee({},n,r))]).catch(function(e){e.toString().match(/^TypeError: DOMString not supported/)||console.error(e),r.then(function(e){window.navigator.clipboard.write([new ClipboardItem(Ee({},n,e))])})});break;case"json":var i=a.getContent(t);if(window.navigator.clipboard){var o=JSON.stringify(i);window.navigator.clipboard.write?window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([o],{type:"text/plain"})})]):KE(ao(io().mark(function e(){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o);case 1:case"end":return e.stop()}},e)})))}break;default:throw new Error("Copy type ".concat(e," not supported."))}},[a,s,l])}function DE(e,t){return BE.apply(this,arguments)}function BE(){return(BE=ao(io().mark(function e(t,n){var r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getSvg(n,{scale:1,background:t.instanceState.exportBackground});case 2:if(r=e.sent){e.next=5;break}throw new Error("Could not construct SVG.");case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function FE(){return(FE=ao(io().mark(function e(t,n){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Blob,e.t1=Kg,e.next=4,DE(t,n);case 4:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=[e.t3],e.t5={type:"text/plain"},e.abrupt("return",new e.t0(e.t4,e.t5));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function UE(){return(UE=ao(io().mark(function e(t,n,r){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Vg,e.next=3,DE(t,n);case 3:return e.t1=e.sent,e.t2={type:r,quality:1,scale:2},e.next=7,(0,e.t0)(e.t1,e.t2);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function KE(e){return VE.apply(this,arguments)}function VE(){return(VE=ao(io().mark(function e(t){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator&&navigator.clipboard){e.next=2;break}return e.abrupt("return");case 2:return e.t0=navigator.clipboard,e.next=5,t();case 5:e.t1=e.sent,e.t0.writeText.call(e.t0,e.t1);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var WE=(0,_e.createContext)({});function HE(e){var t=e.children,r=mo(),i=KS(),n=Ce((0,_e.useState)([]),2),o=n[0],a=n[1],s=(0,_e.useCallback)(function(t){var e,n=null!==(e=t.id)&&void 0!==e?e:ac();return a(function(e){return[].concat(de(e.filter(function(e){return e.id!==t.id})),[Pe(Pe({},t),{},{id:n})])}),i("open-menu",{source:"dialog",id:n}),r.addOpenMenu(n),n},[r,i]),l=(0,_e.useCallback)(function(t,n){return a(function(e){return e.map(function(e){return e.id===t?Pe(Pe({},e),n):e})}),i("open-menu",{source:"dialog",id:t}),r.addOpenMenu(t),t},[r,i]),u=(0,_e.useCallback)(function(n){return a(function(e){return e.filter(function(e){var t;return e.id!==n||(null===(t=e.onClose)||void 0===t||t.call(e),!1)})}),i("close-menu",{source:"dialog",id:n}),r.deleteOpenMenu(n),n},[r,i]),c=(0,_e.useCallback)(function(){a(function(e){return e.forEach(function(e){var t;null===(t=e.onClose)||void 0===t||t.call(e),i("close-menu",{source:"dialog",id:e.id}),r.deleteOpenMenu(e.id)}),[]})},[r,i]);return(0,to.jsx)(WE.Provider,{value:{dialogs:o,addDialog:s,removeDialog:u,clearDialogs:c,updateDialog:l},children:t})}function YE(){var e=(0,_e.useContext)(WE);if(!e)throw new Error("useDialogs must be used within a DialogsProvider");return e}function XE(){var i=mo(),n=(0,_e.useRef)();return(0,_e.useEffect)(function(){var r=window.document.createElement("input");function e(e){return t.apply(this,arguments)}function t(){return(t=ao(io().mark(function e(t){var n;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((n=t.target.files)&&0!==n.length){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,i.putExternalContent({type:"files",files:Array.from(n),point:i.viewportPageBounds.center,ignoreParent:!1});case 5:r.value="";case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.type="file",r.accept=Ip,r.multiple=!0,(n.current=r).addEventListener("change",e),function(){n.current=void 0,r.removeEventListener("change",e)}},[i]),(0,_e.useCallback)(function(){var e;null===(e=n.current)||void 0===e||e.click()},[n])}var qE=_e.createContext({});function $E(e){var t,f,p,h,r,i,o,n,a,s,l,x,k,S,u=e.overrides,c=e.children,v=mo(),d=YE(),g=d.addDialog,m=d.clearDialogs,y=RE().clearToasts,b=XE(),w=(x=mo(),k=(0,_e.useRef)(null),S=(0,_e.useRef)(null),(0,_e.useCallback)((l=ao(io().mark(function e(){var r,t,n,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(){x.isChromeForIos?(a(),window.print()):x.isSafari?(a(),document.execCommand("print",!1)):window.print()},l=function(e,t,n){try{r.innerHTML+='<div class="'.concat(i,'__item">\n        <div class="').concat(i,'__item__header">\n          ').concat(e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),'\n        </div>\n        <div class="').concat(i,'__item__main">\n          ').concat(n.outerHTML,'\n        </div>\n        <div class="').concat(i,"__item__footer ").concat(i,"__item__footer__").concat(t?"":"hide",'">\n          ').concat(null!=t?t:"","\n        </div>\n      </div>")}catch(e){console.error(e)}},r=document.createElement("div"),t=document.createElement("style"),(n=function(e,t){e&&(e.innerHTML=""),t&&document.head.contains(t)&&document.head.removeChild(t),e&&document.body.contains(e)&&document.body.removeChild(e)})(k.current,S.current),k.current=r,S.current=t,i="tl-print-surface-".concat(ac()),r.className=i,o=!1,t.innerHTML="\n\t\t\t.".concat(i," {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\n\t\t\t.").concat(i," svg {\n\t\t\t\tmax-width: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\t@media print {\t\t\t\t  \n\t\t\t\thtml, body {\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\n\t\t\t\tbody {\n\t\t\t\t\tposition: relative;\n\t\t\t\t}\n\n\t\t\t\tbody > * {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(i," {\n\t\t\t\t\tdisplay: block !important;\n\t\t\t\t\tbackground: white;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tmax-width: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(i,"__item {\n\t\t\t\t\tpadding: 10mm;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tmin-height: 100%;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tpage-break-after: always;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t\theight: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(i,"__item__main {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tmax-height: 100%;\n\t\t\t\t}\n\n\t\t\t\t.").concat(i,"__item__header {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t.").concat(i,"__item__footer {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t\ttext-align: right;\n\t\t\t\t}\n\n\t\t\t\t.").concat(i,"__item__footer__hide {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t").concat("","\n\t\t\t}\n\n\t\t"),a=function(){document.head.appendChild(t),document.body.appendChild(r)},s=function(){x.once("change-history",function(){n(r,t)})},window.addEventListener("beforeprint",a),window.addEventListener("afterprint",s),c=x.pages,d=x.currentPageId,f=x.selectedIds,p={scale:1,background:!1,darkMode:!1,preserveAspectRatio:"xMidYMid meet"},0<x.selectedIds.length)return e.next=23,x.getSvg(f,p);e.next=27;break;case 23:(h=e.sent)&&(v=c.find(function(e){return e.id===d}),l("tldraw — ".concat(null==v?void 0:v.name),null,h),u()),e.next=46;break;case 27:if(!o){e.next=41;break}g=0;case 29:if(g<c.length)return m=c[g],e.next=33,x.getSvg(x.getSortedChildIds(m.id),p);e.next=38;break;case 33:(y=e.sent)&&l("tldraw — ".concat(m.name),"".concat(g,"/").concat(c.length),y);case 35:g++,e.next=29;break;case 38:u(),e.next=46;break;case 41:return b=x.currentPage,e.next=44,x.getSvg(x.getSortedChildIds(b.id),p);case 44:(w=e.sent)&&(l("tldraw — ".concat(b.name),null,w),u());case 46:window.removeEventListener("beforeprint",a),window.removeEventListener("afterprint",s);case 48:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)}),[x])),_=(i=mo(),o=KS(),n=(0,_e.useCallback)(function(e){0!==i.selectedIds.length&&(OE(i),o("copy",{source:e}))},[i,o]),a=(0,_e.useCallback)(function(e){0!==i.selectedIds.length&&(OE(i),i.deleteShapes(),o("cut",{source:e}))},[i,o]),s=(0,_e.useCallback)((r=ao(io().mark(function e(t,n,r){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==i.editingId||SE(i))return e.abrupt("return");e.next=2;break;case 2:Array.isArray(t)&&t[0]instanceof ClipboardItem?(ME(i,t,r),o("paste",{source:"menu"})):navigator.clipboard.read().then(function(e){s(e,n,r)});case 3:case"end":return e.stop()}},e)})),function(e,t,n){return r.apply(this,arguments)}),[i,o]),{copy:n,cut:a,paste:s}),E=_.cut,P=_.copy,C=_.paste,I=NE(),T=(f=mo(),p=RE().addToast,h=mb(),(0,_e.useCallback)((t=ao(io().mark(function e(){var t,n,r,i,o,a,s,l,u,c,d=arguments;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0<d.length&&void 0!==d[0]?d[0]:f.selectedIds,n=1<d.length&&void 0!==d[1]?d[1]:"png",0===t.length&&(t=de(f.currentPageShapeIds)),0===t.length)return e.abrupt("return");e.next=5;break;case 5:return e.next=7,f.getSvg(t,{scale:1,background:f.instanceState.exportBackground});case 7:if(r=e.sent){e.next=10;break}throw new Error("Could not construct SVG.");case 10:i="shapes",1===t.length&&(o=f.getShapeById(t[0]),i=f.isShapeOfType(o,qd)?null!==(a=o.props.name)&&void 0!==a?a:"frame":o.id.replace(/:/,"_")),e.t0=n,e.next="svg"===e.t0?15:"webp"===e.t0||"png"===e.t0?20:"json"===e.t0?30:35;break;case 15:return e.next=17,Hg(r);case 17:return Xg(e.sent,"".concat(i||"shapes",".svg")),e.abrupt("return");case 20:return e.next=22,Vg(r,{type:n,quality:1,scale:2});case 22:if(s=e.sent){e.next=26;break}return p({id:"export-fail",title:h("toast.error.export-fail.title"),description:h("toast.error.export-fail.desc")}),e.abrupt("return");case 26:return Xg(l=URL.createObjectURL(s),"".concat(i||"shapes",".").concat(n)),URL.revokeObjectURL(l),e.abrupt("return");case 30:return u=f.getContent(t),Xg(c=URL.createObjectURL(new Blob([JSON.stringify(u,null,4)],{type:"application/json"})),"".concat(i||"shapes",".json")),URL.revokeObjectURL(c),e.abrupt("return");case 35:throw new Error("Export type ".concat(n," not supported."));case 36:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),[f,p,h])),M=KS(),A=_e.useMemo(function(){var e,t=(e=[{id:"edit-link",label:"action.edit-link",icon:"link",readonlyOk:!1,onSelect:function(e){M("edit-link",{source:e}),v.mark("edit-link"),g({component:J_})}},{id:"insert-embed",label:"action.insert-embed",readonlyOk:!1,kbd:"$i",onSelect:function(e){M("insert-embed",{source:e}),g({component:tE})}},{id:"insert-media",label:"action.insert-media",kbd:"$u",readonlyOk:!1,onSelect:function(e){M("insert-media",{source:e}),b()}},{id:"undo",label:"action.undo",icon:"undo",kbd:"$z",readonlyOk:!1,onSelect:function(e){M("undo",{source:e}),v.undo()}},{id:"redo",label:"action.redo",icon:"redo",kbd:"$!z",readonlyOk:!1,onSelect:function(e){M("redo",{source:e}),v.redo()}},{id:"export-as-svg",label:"action.export-as-svg",menuLabel:"action.export-as-svg.short",contextMenuLabel:"action.export-as-svg.short",readonlyOk:!0,onSelect:function(e){M("export-as",{format:"svg",source:e}),T(v.selectedIds,"svg")}},{id:"export-as-png",label:"action.export-as-png",menuLabel:"action.export-as-png.short",contextMenuLabel:"action.export-as-png.short",readonlyOk:!0,onSelect:function(e){M("export-as",{format:"png",source:e}),T(v.selectedIds,"png")}},{id:"export-as-json",label:"action.export-as-json",menuLabel:"action.export-as-json.short",contextMenuLabel:"action.export-as-json.short",readonlyOk:!0,onSelect:function(e){M("export-as",{format:"json",source:e}),T(v.selectedIds,"json")}},{id:"copy-as-svg",label:"action.copy-as-svg",menuLabel:"action.copy-as-svg.short",contextMenuLabel:"action.copy-as-svg.short",kbd:"$!c",readonlyOk:!0,onSelect:function(e){M("copy-as",{format:"svg",source:e}),I(v.selectedIds,"svg")}},{id:"copy-as-png",label:"action.copy-as-png",menuLabel:"action.copy-as-png.short",contextMenuLabel:"action.copy-as-png.short",readonlyOk:!0,onSelect:function(e){M("copy-as",{format:"png",source:e}),I(v.selectedIds,"png")}},{id:"copy-as-json",label:"action.copy-as-json",menuLabel:"action.copy-as-json.short",contextMenuLabel:"action.copy-as-json.short",readonlyOk:!0,onSelect:function(e){M("copy-as",{format:"json",source:e}),I(v.selectedIds,"json")}},{id:"toggle-auto-size",label:"action.toggle-auto-size",readonlyOk:!1,onSelect:function(e){M("toggle-auto-size",{source:e}),v.mark(),v.updateShapes(v.selectedShapes.filter(function(e){return v.isShapeOfType(e,bu)&&!1===e.props.autoSize}).map(function(e){return{id:e.id,type:e.type,props:Pe(Pe({},e.props),{},{w:8,autoSize:!0})}}))}},{id:"open-embed-link",label:"action.open-embed-link",readonlyOk:!0,onSelect:function(e){M("open-embed-link",{source:e});var t=v.selectedIds,n="No embed shapes selected";if(1===t.length){var r=v.getShapeById(t[0]);r&&v.isShapeOfType(r,ru)?function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"_blank";yo.openWindow(e,t)}(r.props.url,"_blank"):console.error(n)}else console.error(n)}},{id:"convert-to-bookmark",label:"action.convert-to-bookmark",readonlyOk:!1,onSelect:function(e){M("convert-to-bookmark",{source:e});var t,n=[],r=[],i=ce(v.selectedShapes);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o&&v.isShapeOfType(o,ru)&&o.props.url){var a=new xo(o.x,o.y);a.rot(-o.rotation),a.add(new xo(o.props.w/2-150,o.props.h/2-160)),a.rot(o.rotation),n.push({id:Rr(),type:"bookmark",rotation:o.rotation,x:a.x,y:a.y,props:{url:o.props.url,opacity:"1"}}),r.push(o.id)}}}catch(e){i.e(e)}finally{i.f()}v.mark("convert shapes to bookmark"),v.deleteShapes(r),v.createShapes(n)}},{id:"convert-to-embed",label:"action.convert-to-embed",readonlyOk:!1,onSelect:function(e){M("convert-to-embed",{source:e});var t,n=[],r=[],i=ce(U(v.selectedIds.map(function(e){return v.getShapeById(e)})));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(v.isShapeOfType(o,hd)){var a=o.props.url,s=Gl(o.props.url);if(s&&s.definition){var l=s.definition,u=l.width,c=l.height,d=new xo(o.x,o.y);d.rot(-o.rotation),d.add(new xo(o.props.w/2-u/2,o.props.h/2-c/2)),d.rot(o.rotation);var f={id:Rr(),type:"embed",x:d.x,y:d.y,rotation:o.rotation,props:{url:a,w:u,h:c}};n.push(f),r.push(o.id)}}}}catch(e){i.e(e)}finally{i.f()}v.mark("convert shapes to embed"),v.deleteShapes(r),v.createShapes(n)}},{id:"duplicate",kbd:"$d",label:"action.duplicate",icon:"duplicate",readonlyOk:!1,onSelect:function(e){if("select"===v.currentToolId){M("duplicate-shapes",{source:e});var t=v.selectedIds,n=$o.Common(U(t.map(function(e){return v.getPageBoundsById(e)}))),r=v.canMoveCamera?{x:n.width+10,y:0}:{x:16/v.zoomLevel,y:16/v.zoomLevel};v.mark("duplicate shapes"),v.duplicateShapes(t,r)}}},{id:"ungroup",label:"action.ungroup",kbd:"$!g",icon:"ungroup",readonlyOk:!1,onSelect:function(e){M("ungroup-shapes",{source:e}),v.mark("ungroup"),v.ungroupShapes(v.selectedIds)}},{id:"group",label:"action.group",kbd:"$g",icon:"group",readonlyOk:!1,onSelect:function(e){M("group-shapes",{source:e});var t=v.onlySelectedShape;t&&v.isShapeOfType(t,Hd)?(v.mark("ungroup"),v.ungroupShapes(v.selectedIds)):(v.mark("group"),v.groupShapes(v.selectedIds))}},{id:"align-left",label:"action.align-left",kbd:"?A",icon:"align-left",readonlyOk:!1,onSelect:function(e){M("align-shapes",{operation:"left",source:e}),v.mark("align left"),v.alignShapes("left",v.selectedIds)}},{id:"align-center-horizontal",label:"action.align-center-horizontal",contextMenuLabel:"action.align-center-horizontal.short",kbd:"?H",icon:"align-center-horizontal",readonlyOk:!1,onSelect:function(e){M("align-shapes",{operation:"center-horizontal",source:e}),v.mark("align center horizontal"),v.alignShapes("center-horizontal",v.selectedIds)}},{id:"align-right",label:"action.align-right",kbd:"?D",icon:"align-right",readonlyOk:!1,onSelect:function(e){M("align-shapes",{operation:"right",source:e}),v.mark("align right"),v.alignShapes("right",v.selectedIds)}},{id:"align-center-vertical",label:"action.align-center-vertical",contextMenuLabel:"action.align-center-vertical.short",kbd:"?V",icon:"align-center-vertical",readonlyOk:!1,onSelect:function(e){M("align-shapes",{operation:"center-vertical",source:e}),v.mark("align center vertical"),v.alignShapes("center-vertical",v.selectedIds)}},{id:"align-top",label:"action.align-top",icon:"align-top",kbd:"?W",readonlyOk:!1,onSelect:function(e){M("align-shapes",{operation:"top",source:e}),v.mark("align top"),v.alignShapes("top",v.selectedIds)}},{id:"align-bottom",label:"action.align-bottom",icon:"align-bottom",kbd:"?S",readonlyOk:!1,onSelect:function(e){M("align-shapes",{operation:"bottom",source:e}),v.mark("align bottom"),v.alignShapes("bottom",v.selectedIds)}},{id:"distribute-horizontal",label:"action.distribute-horizontal",contextMenuLabel:"action.distribute-horizontal.short",icon:"distribute-horizontal",kbd:"?!h",readonlyOk:!1,onSelect:function(e){M("distribute-shapes",{operation:"horizontal",source:e}),v.mark("distribute horizontal"),v.distributeShapes("horizontal",v.selectedIds)}},{id:"distribute-vertical",label:"action.distribute-vertical",contextMenuLabel:"action.distribute-vertical.short",icon:"distribute-vertical",kbd:"?!V",readonlyOk:!1,onSelect:function(e){M("distribute-shapes",{operation:"vertical",source:e}),v.mark("distribute vertical"),v.distributeShapes("vertical",v.selectedIds)}},{id:"stretch-horizontal",label:"action.stretch-horizontal",contextMenuLabel:"action.stretch-horizontal.short",icon:"stretch-horizontal",readonlyOk:!1,onSelect:function(e){M("stretch-shapes",{operation:"horizontal",source:e}),v.mark("stretch horizontal"),v.stretchShapes("horizontal",v.selectedIds)}},{id:"stretch-vertical",label:"action.stretch-vertical",contextMenuLabel:"action.stretch-vertical.short",icon:"stretch-vertical",readonlyOk:!1,onSelect:function(e){M("stretch-shapes",{operation:"vertical",source:e}),v.mark("stretch vertical"),v.stretchShapes("vertical",v.selectedIds)}},{id:"flip-horizontal",label:"action.flip-horizontal",contextMenuLabel:"action.flip-horizontal.short",kbd:"!h",readonlyOk:!1,onSelect:function(e){M("flip-shapes",{operation:"horizontal",source:e}),v.mark("flip horizontal"),v.flipShapes("horizontal",v.selectedIds)}},{id:"flip-vertical",label:"action.flip-vertical",contextMenuLabel:"action.flip-vertical.short",kbd:"!v",readonlyOk:!1,onSelect:function(e){M("flip-shapes",{operation:"vertical",source:e}),v.mark("flip vertical"),v.flipShapes("vertical",v.selectedIds)}},{id:"pack",label:"action.pack",icon:"pack",readonlyOk:!1,onSelect:function(e){M("pack-shapes",{source:e}),v.mark("pack"),v.packShapes(v.selectedIds)}},{id:"stack-vertical",label:"action.stack-vertical",contextMenuLabel:"action.stack-vertical.short",icon:"stack-vertical",readonlyOk:!1,onSelect:function(e){M("stack-shapes",{operation:"vertical",source:e}),v.mark("stack-vertical"),v.stackShapes("vertical",v.selectedIds)}},{id:"stack-horizontal",label:"action.stack-horizontal",contextMenuLabel:"action.stack-horizontal.short",icon:"stack-horizontal",readonlyOk:!1,onSelect:function(e){M("stack-shapes",{operation:"horizontal",source:e}),v.mark("stack-horizontal"),v.stackShapes("horizontal",v.selectedIds)}},{id:"bring-to-front",label:"action.bring-to-front",kbd:"]",icon:"bring-to-front",readonlyOk:!1,onSelect:function(e){M("reorder-shapes",{operation:"toFront",source:e}),v.mark("bring to front"),v.bringToFront()}},{id:"bring-forward",label:"action.bring-forward",icon:"bring-forward",kbd:"?]",readonlyOk:!1,onSelect:function(e){M("reorder-shapes",{operation:"forward",source:e}),v.mark("bring forward"),v.bringForward()}},{id:"send-backward",label:"action.send-backward",icon:"send-backward",kbd:"?[",readonlyOk:!1,onSelect:function(e){M("reorder-shapes",{operation:"backward",source:e}),v.mark("send backward"),v.sendBackward()}},{id:"send-to-back",label:"action.send-to-back",icon:"send-to-back",kbd:"[",readonlyOk:!1,onSelect:function(e){M("reorder-shapes",{operation:"toBack",source:e}),v.mark("send to back"),v.sendToBack()}},{id:"cut",label:"action.cut",kbd:"$x",readonlyOk:!1,onSelect:function(e){v.mark("cut"),E(e)}},{id:"copy",label:"action.copy",kbd:"$c",readonlyOk:!0,onSelect:function(e){P(e)}},{id:"paste",label:"action.paste",kbd:"$v",readonlyOk:!1,onSelect:function(t){var e;null===(e=navigator.clipboard)||void 0===e||e.read().then(function(e){C(e,t,"context-menu"===t?v.inputs.currentPagePoint:void 0)})}},{id:"select-all",label:"action.select-all",kbd:"$a",readonlyOk:!0,onSelect:function(e){M("select-all-shapes",{source:e}),"select"!==v.currentToolId&&(v.cancel(),v.setSelectedTool("select")),v.mark("select all kbd"),v.selectAll()}},{id:"select-none",label:"action.select-none",readonlyOk:!0,onSelect:function(e){M("select-none-shapes",{source:e}),v.mark("select none"),v.selectNone()}},{id:"delete",label:"action.delete",kbd:"⌫,del,backspace",icon:"trash",readonlyOk:!1,onSelect:function(e){"select"===v.currentToolId&&(M("delete-shapes",{source:e}),v.mark("delete"),v.deleteShapes())}},{id:"rotate-cw",label:"action.rotate-cw",icon:"rotate-cw",readonlyOk:!1,onSelect:function(e){if(0!==v.selectedIds.length){M("rotate-cw",{source:e}),v.mark("rotate-cw");var t=v.selectionRotation%(_o/2),n=Mo(t,0)||Mo(t,_o/2);v.rotateShapesBy(v.selectedIds,_o/2-(n?0:t))}}},{id:"rotate-ccw",label:"action.rotate-ccw",icon:"rotate-ccw",readonlyOk:!1,onSelect:function(e){if(0!==v.selectedIds.length){M("rotate-ccw",{source:e}),v.mark("rotate-ccw");var t=v.selectionRotation%(_o/2),n=Mo(t,0);v.rotateShapesBy(v.selectedIds,n?-_o/2:-t)}}},{id:"zoom-in",label:"action.zoom-in",kbd:"$=,=",readonlyOk:!0,onSelect:function(e){M("zoom-in",{source:e}),v.zoomIn(v.viewportScreenCenter,{duration:rs})}},{id:"zoom-out",label:"action.zoom-out",kbd:"$-,-",readonlyOk:!0,onSelect:function(e){M("zoom-out",{source:e}),v.zoomOut(v.viewportScreenCenter,{duration:rs})}},{id:"zoom-to-100",label:"action.zoom-to-100",icon:"reset-zoom",kbd:"!0",readonlyOk:!0,onSelect:function(e){M("reset-zoom",{source:e}),v.resetZoom(v.viewportScreenCenter,{duration:rs})}},{id:"zoom-to-fit",label:"action.zoom-to-fit",kbd:"!1",readonlyOk:!0,onSelect:function(e){M("zoom-to-fit",{source:e}),v.zoomToFit({duration:rs})}},{id:"zoom-to-selection",label:"action.zoom-to-selection",kbd:"!2",readonlyOk:!0,onSelect:function(e){M("zoom-to-selection",{source:e}),v.zoomToSelection({duration:rs})}},{id:"toggle-snap-mode",label:"action.toggle-snap-mode",menuLabel:"action.toggle-snap-mode.menu",readonlyOk:!1,onSelect:function(e){M("toggle-snap-mode",{source:e}),v.setSnapMode(!v.isSnapMode)},checkbox:!0},{id:"toggle-dark-mode",label:"action.toggle-dark-mode",menuLabel:"action.toggle-dark-mode.menu",kbd:"$/",readonlyOk:!0,onSelect:function(e){M("toggle-dark-mode",{source:e}),v.setDarkMode(!v.isDarkMode)},checkbox:!0},{id:"toggle-reduce-motion",label:"action.toggle-reduce-motion",menuLabel:"action.toggle-reduce-motion.menu",readonlyOk:!0,onSelect:function(e){M("toggle-reduce-motion",{source:e}),v.setAnimationSpeed(0===v.animationSpeed?1:0)},checkbox:!0},{id:"toggle-transparent",label:"action.toggle-transparent",menuLabel:"action.toggle-transparent.menu",contextMenuLabel:"action.toggle-transparent.context-menu",readonlyOk:!0,onSelect:function(e){M("toggle-transparent",{source:e}),v.updateInstanceState({exportBackground:!v.instanceState.exportBackground},!0)},checkbox:!0},{id:"toggle-tool-lock",label:"action.toggle-tool-lock",menuLabel:"action.toggle-tool-lock.menu",readonlyOk:!1,kbd:"q",onSelect:function(e){M("toggle-tool-lock",{source:e}),v.setToolLocked(!v.isToolLocked)},checkbox:!0},{id:"toggle-focus-mode",label:"action.toggle-focus-mode",menuLabel:"action.toggle-focus-mode.menu",readonlyOk:!0,kbd:"$.",checkbox:!0,onSelect:function(e){requestAnimationFrame(function(){v.batch(function(){M("toggle-focus-mode",{source:e}),m(),y(),v.setFocusMode(!v.isFocusMode)})})}},{id:"toggle-grid",label:"action.toggle-grid",menuLabel:"action.toggle-grid.menu",readonlyOk:!0,kbd:"$'",onSelect:function(e){M("toggle-grid-mode",{source:e}),v.setGridMode(!v.isGridMode)},checkbox:!0},{id:"toggle-debug-mode",label:"action.toggle-debug-mode",menuLabel:"action.toggle-debug-mode.menu",readonlyOk:!0,onSelect:function(e){M("toggle-debug-mode",{source:e}),v.updateInstanceState({isDebugMode:!v.instanceState.isDebugMode},!0)},checkbox:!0},{id:"print",label:"action.print",kbd:"$p",readonlyOk:!0,onSelect:function(e){M("print",{source:e}),w()}},{id:"exit-pen-mode",label:"action.exit-pen-mode",icon:"cross-2",readonlyOk:!0,onSelect:function(e){M("exit-pen-mode",{source:e}),v.setPenMode(!1)}},{id:"stop-following",label:"action.stop-following",icon:"cross-2",readonlyOk:!0,onSelect:function(e){M("stop-following",{source:e}),v.stopFollowingUser()}},{id:"back-to-content",label:"action.back-to-content",icon:"arrow-left",readonlyOk:!0,onSelect:function(e){M("zoom-to-content",{source:e}),v.zoomToContent()}},{id:"toggle-lock",label:"action.toggle-lock",readonlyOk:!1,kbd:"!$l",onSelect:function(e){M("toggle-lock",{source:e}),v.toggleLock()}}],Object.fromEntries(e.map(function(e){return[e.id,e]})));return u?u(v,t,void 0):t},[M,u,v,g,b,T,I,E,P,C,m,y,w]);return(0,to.jsx)(qE.Provider,{value:A,children:c})}function GE(){var e=_e.useContext(qE);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}function QE(e){return e.filter(function(e){return null!=e&&!1!==e})}function ZE(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=QE(n);return 0===i.length?null:{id:e,type:"group",checkbox:i.every(function(e){return"item"===e.type&&e.actionItem.checkbox}),disabled:i.every(function(e){return e.disabled}),readonlyOk:i.some(function(e){return e.readonlyOk}),children:i}}function JE(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=QE(r);return 0===o.length?null:{id:e,type:"submenu",label:t,children:o,disabled:o.every(function(e){return e.disabled}),readonlyOk:o.some(function(e){return e.readonlyOk})}}function eP(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.readonlyOk,r=void 0===n||n,i=t.disabled;return{id:e,type:"custom",disabled:void 0!==i&&i,readonlyOk:r}}function tP(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw Error("No action item provided to menuItem");if(!e.label)throw Error("Trying to create menu item for action item that doesn't have a label");var n=t.checked,r=void 0!==n&&n,i=t.disabled,o=void 0!==i&&i;return{id:e.id,type:"item",actionItem:e,disabled:o,checked:r,readonlyOk:e.readonlyOk}}function nP(t){return t.selectedIds.map(function(e){return t.getShapeById(e)}).filter(function(e){return!(!e||t.isShapeOfType(e,id)&&"binding"===e.props.start.type||t.isShapeOfType(e,id)&&"binding"===e.props.end.type)})}var rP=function(){var e=mo();return ho("threeStackableItems",function(){return 2<nP(e).length},[e])},iP=function(){var e=mo();return ho("allowGroup",function(){return 1<nP(e).length},[e])},oP=function(){var n=mo();return ho("allowUngroup",function(){return n.selectedIds.some(function(e){var t;return"group"===(null===(t=n.getShapeById(e))||void 0===t?void 0:t.type)})},[])},aP="undefined"!=typeof window&&"navigator"in window&&Boolean(navigator.clipboard)&&Boolean(navigator.clipboard.read),sP=[0,380,420,460,580,640,840,1023],lP=_e.createContext(0);function uP(e){var t=e.children,r=mo(),n=ho("breakpoint",function(){for(var e=r.viewportScreenBounds.width,t=sP,n=0;n<t.length-1;n++)if(e>t[n]&&e<=t[n+1])return n;return t.length},[r]);return(0,to.jsx)(lP.Provider,{value:n,children:t})}function cP(){var e=(0,_e.useContext)(lP),t=new URL(window.location.href).searchParams.get("layout");return"desktop"===t?e=7:"mobile"===t&&(e=1),e}function dP(){var t=mo();return ho("hasLinkShapeSelected",function(){var e=t.selectedShapes;return 1===e.length&&"url"in e[0].props&&"embed"!==e[0].type},[t])}var fP=_e.createContext({}),pP=po(function(e){var t=e.overrides,n=e.children,r=mo(),i=GE(),o=r.selectedIds.length,a=0<o,s=1<o,l=2<o,u=rP(),c=iP(),d=oP(),f=dP(),p=cP(),h=1===r.zoomLevel,v=(0,_e.useMemo)(function(){var e=[tP(i["align-left"],{disabled:!s}),tP(i["align-center-horizontal"],{disabled:!s}),tP(i["align-right"],{disabled:!s}),tP(i["stretch-horizontal"],{disabled:!s}),tP(i["align-top"],{disabled:!s}),tP(i["align-center-vertical"],{disabled:!s}),tP(i["align-bottom"],{disabled:!s}),tP(i["stretch-vertical"],{disabled:!s}),tP(i["distribute-horizontal"],{disabled:!l}),tP(i["distribute-vertical"],{disabled:!l}),tP(i["stack-horizontal"],{disabled:!u}),tP(i["stack-vertical"],{disabled:!u}),tP(i["send-to-back"],{disabled:!a}),tP(i["send-backward"],{disabled:!a}),tP(i["bring-forward"],{disabled:!a}),tP(i["bring-to-front"],{disabled:!a}),p<5?tP(i["zoom-to-100"],{disabled:!!h}):tP(i["rotate-ccw"],{disabled:!a}),tP(i["rotate-cw"],{disabled:!a}),tP(i["edit-link"],{disabled:!f}),c?tP(i.group,{disabled:!s}):d?tP(i.ungroup):tP(i.group,{disabled:!s})];return t?t(r,e,{actions:i,oneSelected:a,twoSelected:s,threeSelected:l}):e},[r,h,c,t,i,a,s,l,u,d,f,p]);return(0,to.jsx)(fP.Provider,{value:v,children:n})});function hP(){var t=mo();return ho("showAutoSizeToggle",function(){var e=t.selectedShapes;return 1===e.length&&t.isShapeOfType(e[0],bu)&&!1===e[0].props.autoSize},[t])}var vP=_e.createContext({}),gP=po(function(e){var t,n,r=e.overrides,i=e.children,o=mo(),a=GE(),s=hP(),l=ho("onlyFlippableShape",function(){var e=n.selectedShapes;return 1===e.length&&e.every(function(e){return n.isShapeOfType(e,Hd)||n.isShapeOfType(e,id)||n.isShapeOfType(e,Ff)||n.isShapeOfType(e,Cd)})},[n=mo()]),u=o.selectedIds.length,c=0<u,d=ho("oneEmbedSelected",function(){return 1===o.selectedIds.length&&o.selectedIds.some(function(e){var t=o.getShapeById(e);return t&&o.isShapeOfType(t,ru)&&t.props.url})},[]),f=ho("oneEmbeddableBookmarkSelected",function(){return 1===o.selectedIds.length&&o.selectedIds.some(function(e){var t=o.getShapeById(e);return t&&o.isShapeOfType(t,hd)&&t.props.url&&Gl(t.props.url)})},[]),p=1<u,h=2<u,v=rP(),g=ho("atLeastOneShapeOnPage",function(){return 0<o.currentPageShapeIds.size},[]),m=ho("isTransparentBg",function(){return o.instanceState.exportBackground},[]),y=iP(),b=oP(),w=Boolean(null===(t=window.navigator.clipboard)||void 0===t?void 0:t.write),x=dP(),k=o.onlySelectedShape,S=k&&o.isShapeOrAncestorLocked(k),_=(0,_e.useMemo)(function(){var e=QE([ZE("selection",d&&tP(a["open-embed-link"]),d&&!S&&tP(a["convert-to-bookmark"]),f&&tP(a["convert-to-embed"]),s&&tP(a["toggle-auto-size"]),x&&!S&&tP(a["edit-link"]),c&&!S&&tP(a.duplicate),y&&!S&&tP(a.group),b&&!S&&tP(a.ungroup),c&&tP(a["toggle-lock"])),ZE("modify",(p||l)&&JE("arrange","context-menu.arrange",p&&ZE("align",tP(a["align-left"]),tP(a["align-center-horizontal"]),tP(a["align-right"]),tP(a["align-top"]),tP(a["align-center-vertical"]),tP(a["align-bottom"])),h&&ZE("distribute",tP(a["distribute-horizontal"]),tP(a["distribute-vertical"])),p&&ZE("stretch",tP(a["stretch-horizontal"]),tP(a["stretch-vertical"])),l&&!S&&ZE("flip",tP(a["flip-horizontal"]),tP(a["flip-vertical"])),p&&ZE("order",tP(a.pack,{disabled:!p}),v&&tP(a["stack-vertical"]),v&&tP(a["stack-horizontal"]))),c&&!S&&JE("reorder","context-menu.reorder",ZE("reorder",tP(a["bring-to-front"]),tP(a["bring-forward"]),tP(a["send-backward"]),tP(a["send-to-back"]))),c&&!S&&eP("MOVE_TO_PAGE_MENU",{readonlyOk:!1})),ZE("clipboard-group",c&&!S&&tP(a.cut),c&&tP(a.copy),aP&&tP(a.paste)),g&&ZE("conversions",JE("copy-as","context-menu.copy-as",ZE("copy-as-group",tP(a["copy-as-svg"]),w&&tP(a["copy-as-png"]),tP(a["copy-as-json"])),ZE("export-bg",tP(a["toggle-transparent"],{checked:!m}))),JE("export-as","context-menu.export-as",ZE("export-as-group",tP(a["export-as-svg"]),tP(a["export-as-png"]),tP(a["export-as-json"])),ZE("export-bg,",tP(a["toggle-transparent"],{checked:!m})))),g&&ZE("set-selection-group",tP(a["select-all"]),c&&tP(a["select-none"])),c&&!S&&ZE("delete-group",tP(a.delete))]);return r&&(e=r(o,e,{actions:a,oneSelected:c,twoSelected:p,threeSelected:h,showAutoSizeToggle:s,showUngroup:b,onlyFlippableShapeSelected:l})),e},[o,r,a,c,p,h,s,l,g,v,y,b,w,x,d,f,m,S]);return(0,to.jsx)(vP.Provider,{value:_,children:i})});function mP(){var e=_e.useContext(vP);if(!e)throw new Error("useContextMenuSchema must be used inside of a TLUiContextMenuSchemaProvider.");return e}var yP=_e.createContext({});function bP(e){var n=e.overrides,t=e.children,r=mo(),i=KS(),o=YE().addDialog,a=XE(),s=ho(Ea.highlighterTool),l=_e.useMemo(function(){var e=[{id:"select",label:"tool.select",icon:"tool-pointer",kbd:"v",readonlyOk:!0,onSelect:function(e){r.setSelectedTool("select"),i("select-tool",{source:e,id:"select"})}},{id:"hand",label:"tool.hand",icon:"tool-hand",kbd:"h",readonlyOk:!0,onSelect:function(e){r.setSelectedTool("hand"),i("select-tool",{source:e,id:"hand"})}},{id:"eraser",label:"tool.eraser",icon:"tool-eraser",kbd:"e",readonlyOk:!1,onSelect:function(e){r.setSelectedTool("eraser"),i("select-tool",{source:e,id:"eraser"})}},{id:"draw",label:"tool.draw",readonlyOk:!1,icon:"tool-pencil",kbd:"d,b,x",onSelect:function(e){r.setSelectedTool("draw"),i("select-tool",{source:e,id:"draw"})}}].concat(de(de(Ii.values).map(function(t){return{id:t,label:"tool.".concat(t),readonlyOk:!1,meta:{geo:t},kbd:"rectangle"===t?"r":"ellipse"===t?"o":void 0,icon:"geo-"+t,onSelect:function(e){r.batch(function(){r.updateInstanceState({stylesForNextShape:Pe(Pe({},r.instanceState.stylesForNextShape),{},Ee({},Ii.id,t))},!0),r.setSelectedTool("geo"),i("select-tool",{source:e,id:"geo-".concat(t)})})}}})),[{id:"arrow",label:"tool.arrow",readonlyOk:!1,icon:"tool-arrow",kbd:"a",onSelect:function(e){r.setSelectedTool("arrow"),i("select-tool",{source:e,id:"arrow"})}},{id:"line",label:"tool.line",readonlyOk:!1,icon:"tool-line",kbd:"l",onSelect:function(e){r.setSelectedTool("line"),i("select-tool",{source:e,id:"line"})}},{id:"frame",label:"tool.frame",readonlyOk:!1,icon:"tool-frame",kbd:"f",onSelect:function(e){r.setSelectedTool("frame"),i("select-tool",{source:e,id:"frame"})}},{id:"text",label:"tool.text",readonlyOk:!1,icon:"tool-text",kbd:"t",onSelect:function(e){r.setSelectedTool("text"),i("select-tool",{source:e,id:"text"})}},{id:"asset",label:"tool.asset",readonlyOk:!1,icon:"tool-media",kbd:"$u",onSelect:function(e){a(),i("select-tool",{source:e,id:"media"})}},{id:"note",label:"tool.note",readonlyOk:!1,icon:"tool-note",kbd:"n",onSelect:function(e){r.setSelectedTool("note"),i("select-tool",{source:e,id:"note"})}},{id:"laser",label:"tool.laser",readonlyOk:!0,icon:"tool-laser",kbd:"k",onSelect:function(e){r.setSelectedTool("laser"),i("select-tool",{source:e,id:"laser"})}},{id:"embed",label:"tool.embed",readonlyOk:!1,icon:"tool-embed",onSelect:function(e){o({component:tE}),i("select-tool",{source:e,id:"embed"})}}]);s&&e.push({id:"highlight",label:"tool.highlight",readonlyOk:!0,icon:"tool-highlight",kbd:"!d",onSelect:function(e){r.setSelectedTool("highlight"),i("select-tool",{source:e,id:"highlight"})}});var t=Object.fromEntries(e.map(function(e){return[e.id,e]}));return n?n(r,t,{insertMedia:a}):t},[s,n,r,i,a,o]);return(0,to.jsx)(yP.Provider,{value:l,children:t})}function wP(){var e=_e.useContext(yP);if(!e)throw new Error("useTools must be used within a ToolProvider");return e}var xP=_e.createContext({}),kP=po(function(e){var t=e.overrides,n=e.children,r=mo(),i=wP(),o=GE(),a=(0,_e.useMemo)(function(){var e=U([ZE("shortcuts-dialog.tools",tP(o["toggle-tool-lock"]),tP(i.select),tP(i.draw),tP(i.eraser),tP(i.hand),tP(i.rectangle),tP(i.ellipse),tP(i.arrow),tP(i.line),tP(i.text),tP(i.frame),tP(i.note),tP(i.laser)),ZE("shortcuts-dialog.file",tP(o["insert-media"]),tP(o.print)),ZE("shortcuts-dialog.preferences",tP(o["toggle-dark-mode"]),tP(o["toggle-focus-mode"]),tP(o["toggle-grid"])),ZE("shortcuts-dialog.edit",tP(o.undo),tP(o.redo),tP(o.cut),tP(o.copy),tP(o.paste),tP(o["select-all"]),tP(o.delete),tP(o.duplicate),tP(o["export-as-svg"]),tP(o["export-as-png"])),ZE("shortcuts-dialog.view",tP(o["zoom-in"]),tP(o["zoom-out"]),tP(o["zoom-to-100"]),tP(o["zoom-to-fit"]),tP(o["zoom-to-selection"])),ZE("shortcuts-dialog.transform",tP(o["bring-to-front"]),tP(o["bring-forward"]),tP(o["send-backward"]),tP(o["send-to-back"]),tP(o.group),tP(o.ungroup),tP(o["flip-horizontal"]),tP(o["flip-vertical"]),tP(o["align-top"]),tP(o["align-center-vertical"]),tP(o["align-bottom"]),tP(o["align-left"]),tP(o["align-center-horizontal"]),tP(o["align-right"]))]);return t?t(r,e,{tools:i,actions:o}):e},[r,t,o,i]);return(0,to.jsx)(xP.Provider,{value:a,children:n})});function SP(){var e=mo();return ho("isReadOnlyMode",function(){return e.isReadOnly},[e])}var _P=function(){var s=mb(),l=SP(),e=function(){var e=_e.useContext(xP);if(!e)throw new Error("Shortcuts must be used inside of a ShortcutsProvider.");return e}();return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)(Ib,{className:"tlui-shortcuts-dialog__header",children:[(0,to.jsx)(Tb,{children:s("shortcuts-dialog.title")}),(0,to.jsx)(Mb,{})]}),(0,to.jsx)(Ab,{className:"tlui-shortcuts-dialog__body",children:e.map(function e(t){if(l&&!t.readonlyOk)return null;switch(t.type){case"group":return(0,to.jsxs)("div",{className:"tlui-shortcuts-dialog__group",children:[(0,to.jsx)("h2",{className:"tlui-shortcuts-dialog__group__title",children:s(t.id)}),(0,to.jsx)("div",{className:"tlui-shortcuts-dialog__group__content",children:t.children.filter(function(e){return"item"===e.type&&e.actionItem.kbd}).map(e)})]},t.id);case"item":var n=t.actionItem,r=n.id,i=n.label,o=n.shortcutsLabel,a=n.kbd;return(0,to.jsxs)("div",{className:"tlui-shortcuts-dialog__key-pair",children:[(0,to.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__key",children:s(null!=o?o:i)}),(0,to.jsx)("div",{className:"tlui-shortcuts-dialog__key-pair__value",children:(0,to.jsx)(Eb,{children:a})})]},r)}})}),(0,to.jsx)("div",{className:"tlui-dialog__scrim"})]})};function EP(){var e=mo();return{languages:Zi,currentLanguage:e.locale}}var PP=_e.createContext({}),CP=po(function(e){var t=e.overrides,n=e.children,r=mo(),i=GE(),o=r.selectedIds.length,a=0<o,s=1<o,l=2<o,u=EP(),c=u.languages,d=u.currentLanguage,f=YE().addDialog,p=(0,_e.useMemo)(function(){var e=U([ZE("top",eP("LANGUAGE_MENU",{readonlyOk:!0}),tP({id:"keyboard-shortcuts",label:"help-menu.keyboard-shortcuts",readonlyOk:!0,onSelect:function(){f({component:_P})}}))]);return t?t(r,e,{actions:i,currentLanguage:d,languages:c,oneSelected:a,twoSelected:s,threeSelected:l}):e},[r,t,c,i,a,s,l,d,f]);return(0,to.jsx)(PP.Provider,{value:p,children:n})});function IP(){var e=mo();return ho("useCanRedo",function(){return e.canRedo},[e])}function TP(){var e=mo();return ho("useCanUndo",function(){return e.canUndo},[e])}var MP=_e.createContext({});function AP(e){var t,n=e.overrides,r=e.children,i=mo(),o=GE(),a=cP()<5,s=ho("isDarkMode",function(){return i.isDarkMode},[i]),l=ho("animationSpeed",function(){return i.animationSpeed},[i]),u=ho("isGridMode",function(){return i.isGridMode},[i]),c=ho("isSnapMode",function(){return i.isSnapMode},[i]),d=ho("isToolLock",function(){return i.instanceState.isToolLocked},[i]),f=ho("isFocusMode",function(){return i.instanceState.isFocusMode},[i]),p=ho("isDebugMode",function(){return i.instanceState.isDebugMode},[i]),h=ho("exportBackground",function(){return i.instanceState.exportBackground},[i]),v=ho("emptyPage",function(){return 0===i.currentPageShapeIds.size},[i]),g=ho("selectedCount",function(){return i.selectedIds.length},[i]),m=0===g,y=0<g,b=1<g,w=2<g,x=Boolean(null===(t=window.navigator.clipboard)||void 0===t?void 0:t.write),k=dP(),S=hP(),_=iP(),E=oP(),P=TP(),C=IP(),I=ho("isZoomedTo100",function(){return 1===i.zoomLevel},[i]),T=(0,_e.useMemo)(function(){var e=U([ZE("menu",JE("file","menu.file",ZE("print",tP(o.print,{disabled:v}))),JE("edit","menu.edit",ZE("undo-actions",tP(o.undo,{disabled:!P}),tP(o.redo,{disabled:!C})),ZE("clipboard-actions",tP(o.cut,{disabled:m}),tP(o.copy,{disabled:m}),tP(o.paste,{disabled:!aP})),ZE("conversions",JE("copy-as","menu.copy-as",ZE("copy-as-group",tP(o["copy-as-svg"],{disabled:v}),tP(o["copy-as-png"],{disabled:v||!x}),tP(o["copy-as-json"],{disabled:v})),ZE("export-bg",tP(o["toggle-transparent"],{checked:!h}))),JE("export-as","menu.export-as",ZE("export-as-group",tP(o["export-as-svg"],{disabled:v}),tP(o["export-as-png"],{disabled:v}),tP(o["export-as-json"],{disabled:v})),ZE("export-bg",tP(o["toggle-transparent"],{checked:!h})))),ZE("set-selection-group",tP(o["select-all"],{disabled:v}),tP(o["select-none"],{disabled:!y})),ZE("selection",S&&tP(o["toggle-auto-size"]),k&&tP(o["edit-link"]),tP(o.duplicate,{disabled:!y}),_&&tP(o.group),E&&tP(o.ungroup)),ZE("delete-group",tP(o.delete,{disabled:!y}))),JE("view","menu.view",ZE("view-actions",tP(o["zoom-in"]),tP(o["zoom-out"]),tP(o["zoom-to-100"],{disabled:I}),tP(o["zoom-to-fit"],{disabled:v}),tP(o["zoom-to-selection"],{disabled:v||!y})))),ZE("extras",tP(o["insert-embed"]),tP(o["insert-media"])),ZE("preferences",JE("preferences","menu.preferences",ZE("preferences-actions",tP(o["toggle-snap-mode"],{checked:c}),tP(o["toggle-tool-lock"],{checked:d}),tP(o["toggle-grid"],{checked:u}),tP(o["toggle-dark-mode"],{checked:s}),tP(o["toggle-focus-mode"],{checked:f}),tP(o["toggle-reduce-motion"],{checked:0===l}),tP(o["toggle-debug-mode"],{checked:p}))),a&&eP("LANGUAGE_MENU",{readonlyOk:!0}))]);return n?n(i,e,{actions:o,noneSelected:m,oneSelected:y,twoSelected:b,threeSelected:w}):e},[i,n,o,y,b,w,v,a,_,E,k,x,S,m,P,C,l,s,u,c,d,f,h,p,I]);return(0,to.jsx)(MP.Provider,{value:T,children:r})}function jP(e){return{id:e.id,type:"item",readonlyOk:e.readonlyOk,toolItem:e}}var OP=_e.createContext([]);function LP(e){var t=e.overrides,n=e.children,r=mo(),i=wP(),o=ho(Ea.highlighterTool),a=_e.useMemo(function(){var e=U([jP(i.select),jP(i.hand),jP(i.draw),jP(i.eraser),jP(i.arrow),jP(i.text),jP(i.note),jP(i.asset),jP(i.rectangle),jP(i.ellipse),jP(i.diamond),jP(i.triangle),jP(i.trapezoid),jP(i.rhombus),jP(i.pentagon),jP(i.hexagon),jP(i.star),jP(i.oval),jP(i["x-box"]),jP(i["check-box"]),jP(i["arrow-left"]),jP(i["arrow-up"]),jP(i["arrow-down"]),jP(i["arrow-right"]),jP(i.frame),jP(i.line),o?jP(i.highlight):null,jP(i.laser)]);return t?t(r,e,{tools:i}):e},[r,o,t,i]);return(0,to.jsx)(OP.Provider,{value:a,children:n})}function zP(e){return(0,_e.useMemo)(function(){return e},e)}function RP(e){var t=e.overrides,n=e.assetUrls,r=e.onUiEvent,i=e.children;return(0,to.jsx)(lb,{assetUrls:function(e){return e?{fonts:Object.assign(Pe({},G_.fonts),Pe({},null==e?void 0:e.fonts)),icons:Object.assign(Pe({},G_.icons),Pe({},null==e?void 0:e.icons)),embedIcons:Object.assign(Pe({},G_.embedIcons),Pe({},null==e?void 0:e.embedIcons)),translations:Object.assign(Pe({},G_.translations),Pe({},null==e?void 0:e.translations))}:G_}(n),children:(0,to.jsx)(gb,{overrides:function(e){var c=zP(null==e?[]:Array.isArray(e)?e:[e]);return(0,_e.useMemo)(function(){var e,t={},n=ce(c);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.translations){var i,o=ce(oe(r.translations));try{for(o.s();!(i=o.n()).done;){var a=Ce(i.value,2),s=a[0],l=a[1],u=t[s];u||(u=t[s]={}),Object.assign(u,l)}}catch(e){o.e(e)}finally{o.f()}}}}catch(e){n.e(e)}finally{n.f()}return t},[c])}(t),children:(0,to.jsx)(US,{onEvent:r,children:(0,to.jsx)(zE,{children:(0,to.jsx)(HE,{children:(0,to.jsx)(uP,{children:(0,to.jsx)(NP,{overrides:t,children:i})})})})})})})}function NP(e){var t=e.overrides,n=e.children,r=function(e){var t,n,r,i,o,a,s,l,u,c,d,f=(t=RE(),n=t.addToast,r=t.removeToast,i=t.clearToasts,o=YE(),a=o.addDialog,s=o.clearDialogs,l=o.removeDialog,u=o.updateDialog,c=cP()<5,d=mb(),(0,_e.useMemo)(function(){return{addToast:n,removeToast:r,clearToasts:i,addDialog:a,clearDialogs:s,removeDialog:l,updateDialog:u,msg:d,isMobile:c}},[a,n,s,i,d,l,r,u,c])),p=zP(null==e?[]:Array.isArray(e)?e:[e]);return(0,_e.useMemo)(function(){return function(a,s){var e,t={},n=ce(a);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.translations){var i,o=ce(oe(r.translations));try{for(o.s();!(i=o.n()).done;){var l=Ce(i.value,2),u=l[0],c=l[1],d=t[u];d||(d=t[u]={}),Object.assign(d,c)}}catch(e){o.e(e)}finally{o.f()}}}}catch(e){n.e(e)}finally{n.f()}return{actionsMenu:function(e,t,n){var r,i=ce(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.actionsMenu&&(t=o.actionsMenu(e,t,Pe(Pe({},s),n)))}}catch(e){i.e(e)}finally{i.f()}return t},actions:function(e,t){var n,r=ce(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.actions&&(t=i.actions(e,t,s))}}catch(e){r.e(e)}finally{r.f()}return t},contextMenu:function(e,t,n){var r,i=ce(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.contextMenu&&(t=o.contextMenu(e,t,Pe(Pe({},s),n)))}}catch(e){i.e(e)}finally{i.f()}return t},helpMenu:function(e,t,n){var r,i=ce(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.helpMenu&&(t=o.helpMenu(e,t,Pe(Pe({},s),n)))}}catch(e){i.e(e)}finally{i.f()}return t},menu:function(e,t,n){var r,i=ce(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.menu&&(t=o.menu(e,t,Pe(Pe({},s),n)))}}catch(e){i.e(e)}finally{i.f()}return t},toolbar:function(e,t,n){var r,i=ce(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.toolbar&&(t=o.toolbar(e,t,Pe(Pe({},s),n)))}}catch(e){i.e(e)}finally{i.f()}return t},keyboardShortcutsMenu:function(e,t,n){var r,i=ce(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.keyboardShortcutsMenu&&(t=o.keyboardShortcutsMenu(e,t,Pe(Pe({},s),n)))}}catch(e){i.e(e)}finally{i.f()}return t},tools:function(e,t,n){var r,i=ce(a);try{for(i.s();!(r=i.n()).done;){var o=r.value;o.tools&&(t=o.tools(e,t,Pe(Pe({},s),n)))}}catch(e){i.e(e)}finally{i.f()}return t},translations:t}}(p,f)},[p,f])}(t);return(0,to.jsx)($E,{overrides:r.actions,children:(0,to.jsx)(bP,{overrides:r.tools,children:(0,to.jsx)(LP,{overrides:r.toolbar,children:(0,to.jsx)(pP,{overrides:r.actionsMenu,children:(0,to.jsx)(kP,{overrides:r.keyboardShortcutsMenu,children:(0,to.jsx)(gP,{overrides:r.contextMenu,children:(0,to.jsx)(CP,{overrides:r.helpMenu,children:(0,to.jsx)(AP,{overrides:r.menu,children:n})})})})})})})})}function DP(){var n=mo(),e=GE()["back-to-content"],t=Ce((0,_e.useState)(!1),2),r=t[0],i=t[1];return(0,_e.useEffect)(function(){var t=!1,e=setInterval(function(){var e=0===n.renderingShapes.filter(function(e){return e.isInViewport}).length&&0<n.shapesArray.length;t!==e&&(i(e),t=e)},1e3);return function(){clearInterval(e)}},[n]),r?(0,to.jsx)(Cb,{iconLeft:e.icon,label:e.label,onClick:function(){e.onSelect("helper-buttons"),i(!1)}}):null}var BP=0,FP=_e.memo(function(e){var t=e.renderDebugMenuItems,n=mb();return(0,to.jsxs)("div",{className:"tlui-debug-panel",children:[(0,to.jsx)(UP,{}),(0,to.jsx)(KP,{}),(0,to.jsxs)(XS,{id:"debug",children:[(0,to.jsx)(qS,{children:(0,to.jsx)(Cb,{icon:"dots-horizontal",title:n("debug-panel.more")})}),(0,to.jsx)($S,{side:"top",align:"end",alignOffset:0,children:(0,to.jsx)(VP,{renderDebugMenuItems:t})})]})]})}),UP=po(function(){var e=mo();return(0,to.jsx)("div",{className:"tlui-debug-panel__current-state",children:e.root.path.value})}),KP=function(){var e=mo(),t=ho("rendering shapes count",function(){return e.renderingShapes.length},[e]);return(0,to.jsxs)("div",{children:[t," Shapes"]})},VP=po(function(e){var t=e.renderDebugMenuItems,s=mo(),n=RE().addToast,r=YE().addDialog,i=Ce(_e.useState(!1),2),o=i[0],a=i[1];return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)(JS,{children:[(0,to.jsx)(e_,{onClick:function(){n({id:ac(),title:"Something happened",description:"Hey, attend to this thing over here. It might be important!"})},children:(0,to.jsx)("span",{children:"Show toast"})}),(0,to.jsx)(e_,{onClick:function(){r({component:function(e){var t=e.onClose;return(0,to.jsx)(XP,{displayDontShowAgain:!0,onCancel:function(){t()},onContinue:function(){t()}})},onClose:function(){}})},children:(0,to.jsx)("span",{children:"Show dialog"})}),(0,to.jsx)(e_,{onClick:function(){return function(e,t){for(var n=Array(100),r=Math.floor(Math.sqrt(100)),i=0;i<100;i++)BP++,n[i]={id:Rr("box"+BP),type:"geo",x:i%r*132,y:132*Math.floor(i/r)};e.batch(function(){e.createShapes(n).setSelectedIds(n.map(function(e){return e.id}))})}(s)},children:(0,to.jsx)("span",{children:"Create 100 shapes"})}),(0,to.jsx)(e_,{onClick:function(){function o(e){var t=e.children,n=0;if(!t.length)return 0;for(var r=0,i=de(t);r<i.length;r++)n++,n+=o(i[r]);return n}var e,t=s.selectedShapes,n=0===t.length?s.renderingShapes:t,r=n.map(function(e){return document.getElementById(e.id).parentElement}),i=r.length,a=ce(r);try{for(a.s();!(e=a.n()).done;)i+=o(e.value)}catch(e){a.e(e)}finally{a.f()}window.alert("Shapes ".concat(n.length,", DOM nodes:").concat(i))},children:(0,to.jsx)("span",{children:"Count shapes and nodes"})}),function(){if(o)throw Error("oh no!")}(),(0,to.jsx)(e_,{onClick:function(){a(!0)},children:(0,to.jsx)("span",{children:"Throw error"})}),(0,to.jsx)(e_,{onClick:function(){bo()},children:(0,to.jsx)("span",{children:"Hard reset"})})]}),(0,to.jsxs)(JS,{children:[(0,to.jsx)(WP,{label:"Read-only",value:s.isReadOnly,onChange:function(e){return s.setReadOnly(e)}}),(0,to.jsx)(HP,{flag:Pa.debugSvg}),(0,to.jsx)(HP,{flag:Pa.forceSrgb}),(0,to.jsx)(HP,{flag:Pa.debugCursors,onChange:function(e){if(e){var t=YP.map(function(e,t){return{id:Rr(),type:"geo",x:t%5*175,y:175*Math.floor(t/5),props:{text:e,w:150,h:150,fill:"semi"}}});s.createShapes(t)}}})]}),(0,to.jsx)(JS,{children:Object.values(Ea).map(function(e){return(0,to.jsx)(HP,{flag:e},e.name)})}),null==t?void 0:t()]})});function WP(e){var t=e.label,n=e.value,r=e.onChange;return(0,to.jsx)(t_,{title:t,checked:n,onSelect:function(){return r(!n)},children:t})}var HP=po(function(e){var t=e.flag,n=e.onChange;return(0,to.jsx)(WP,{label:t.name.replace(/([a-z0-9])([A-Z])/g,function(e){return"".concat(e[0]," ").concat(e[1].toLowerCase())}).replace(/^[a-z]/,function(e){return e.toUpperCase()}),value:t.value,onChange:function(e){t.set(e),null==n||n(e)}})}),YP=["none","default","pointer","cross","move","grab","grabbing","text","ew-resize","ns-resize","nesw-resize","nwse-resize","nwse-rotate","nesw-rotate","senw-rotate","swne-rotate","zoom-in","zoom-out"];function XP(e){var t,n=e.title,r=void 0===n?"title":n,i=e.body,o=void 0===i?"hello hello hello":i,a=e.cancel,s=void 0===a?"Cancel":a,l=e.confirm,u=void 0===l?"Continue":l,c=e.displayDontShowAgain,d=void 0!==c&&c,f=e.onCancel,p=e.onContinue,h=Ce(_e.useState(!1),2),v=h[0],g=h[1];return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)(Ib,{children:[(0,to.jsx)(Tb,{children:r}),(0,to.jsx)(Mb,{})]}),(0,to.jsx)(Ab,{style:{maxWidth:350},children:o}),(0,to.jsxs)(jb,{className:"tlui-dialog__footer__actions",children:[d&&(0,to.jsx)(Cb,{onClick:function(){return g(!v)},iconLeft:v?"checkbox-checked":"checkbox-empty",style:{marginRight:"auto"},children:"Don't show again"}),(0,to.jsx)(Cb,{onClick:f,children:s}),(0,to.jsx)(Cb,{type:"primary",onClick:(t=ao(io().mark(function e(){return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p());case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),children:u})]})]})}var qP=function(e){var t=e.id,n=e.component,r=e.onClose,i=YE().removeDialog,o=qa(),a=(0,_e.useCallback)(function(e){if(!e){if(r)try{r()}catch(e){console.warn(e)}i(t)}},[t,r,i]);return(0,to.jsx)(rb,{onOpenChange:a,defaultOpen:!0,children:(0,to.jsx)(ib,{container:o,children:(0,to.jsx)(ob,{dir:"ltr",className:"tlui-dialog__overlay",children:(0,to.jsx)(ab,{dir:"ltr",className:"tlui-dialog__content",children:(0,to.jsx)(n,{onClose:function(){return a(!1)}})})})})})},$P=_e.memo(function(){var e=YE().dialogs;return(0,to.jsx)(to.Fragment,{children:e.map(function(e){return(0,to.jsx)(qP,Pe({},e),e.id)})})});function GP(){var e=mo(),t=ho("follow",function(){return e.instanceState.followingUserId},[e]);return t?(0,to.jsx)(QP,{userId:t}):null}function QP(e){var t=Ul(e.userId);return t?(0,to.jsx)("div",{className:"tlui-following",style:{borderColor:t.color}}):null}function ZP(){var t=mo(),e=EP(),n=e.languages,r=e.currentLanguage,i=(0,_e.useCallback)(function(e){return t.setLocale(e)},[t]);return(0,to.jsxs)(GS,{id:"help menu language",children:[(0,to.jsx)(QS,{label:"menu.language","data-direction":"left"}),(0,to.jsx)(ZS,{sideOffset:-4,children:(0,to.jsx)(JS,{children:n.map(function(e){var t=e.locale,n=e.label;return(0,to.jsx)(n_,{title:t,checked:t===r,onSelect:function(){return i(t)},children:(0,to.jsx)("span",{children:n})},t)})})})]})}var JP=_e.memo(function(){var e=qa(),t=mb(),n=Ce(VS("help menu"),2),r=n[0],i=n[1];return(0,to.jsx)("div",{className:"tlui-help-menu",children:(0,to.jsxs)(IS,{dir:"ltr",open:r,onOpenChange:i,modal:!1,children:[(0,to.jsx)(TS,{className:"tlui-button tlui-help-menu__button",dir:"ltr",title:t("help-menu.title"),children:(0,to.jsx)(wb,{icon:"question-mark"})}),(0,to.jsx)(MS,{container:e,dir:"ltr",children:(0,to.jsx)(AS,{className:"tlui-menu",side:"top",sideOffset:8,align:"end",alignOffset:0,collisionPadding:4,children:(0,to.jsx)(eC,{})})})]})})});function eC(){var e=function(){var e=_e.useContext(PP);if(!e)throw new Error("useHelpMenuSchema must be used inside of a helpTLUiMenuSchemaProvider.");return e}(),l=SP();return(0,to.jsx)(to.Fragment,{children:e.map(function e(t){if(l&&!t.readonlyOk)return null;switch(t.type){case"custom":if("LANGUAGE_MENU"===t.id)return(0,to.jsx)(ZP,{},"item");break;case"group":return(0,to.jsx)(JS,{size:"small",children:t.children.map(e)},t.id);case"submenu":return(0,to.jsxs)(GS,{id:"help menu ".concat(t.id),children:[(0,to.jsx)(QS,{label:t.label}),(0,to.jsx)(ZS,{children:t.children.map(e)})]},t.id);case"item":var n=t.actionItem,r=n.id,i=n.kbd,o=n.label,a=n.onSelect,s=n.icon;return(0,to.jsx)(e_,{kbd:i,label:o,onClick:function(){return a("help-menu")},iconLeft:s},r)}})})}function tC(t,n){var e=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).checkForDefaultPrevented,r=void 0===e||e;return function(e){if(null==t||t(e),!1===r||!e.defaultPrevented)return null==n?void 0:n(e)}}function nC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.forEach(function(e){return n=r,void("function"==typeof(t=e)?t(n):null!=t&&(t.current=n));var t,n})}}function rC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,_e.useCallback)(nC.apply(void 0,t),t)}var iC=["scope","children"];function oC(l){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t=[],n=function(){var n=t.map(function(e){return(0,_e.createContext)(e)});return function(e){var t=(null==e?void 0:e[l])||n;return(0,_e.useMemo)(function(){return Ee({},"__scope".concat(l),Pe(Pe({},e),{},Ee({},l,t)))},[e,t])}};return n.scopeName=l,[function(i,o){var a=(0,_e.createContext)(o),s=t.length;function e(e){var t=e.scope,n=e.children,r=Gt(e,iC),i=(null==t?void 0:t[l][s])||a,o=(0,_e.useMemo)(function(){return r},Object.values(r));return(0,_e.createElement)(i.Provider,{value:o},n)}return t=[].concat(de(t),[o]),e.displayName=i+"Provider",[e,function(e,t){var n=(null==t?void 0:t[l][s])||a,r=(0,_e.useContext)(n);if(r)return r;if(void 0!==o)return o;throw new Error("`".concat(e,"` must be used within `").concat(i,"`"))}]},function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n[0];if(1===n.length)return r;var i=function(){var t=n.map(function(e){return{useScope:e(),scopeName:e.scopeName}});return function(o){var e=t.reduce(function(e,t){var n=t.useScope,r=t.scopeName,i=n(o)["__scope".concat(r)];return Pe(Pe({},e),i)},{});return(0,_e.useMemo)(function(){return Ee({},"__scope".concat(r.scopeName),e)},[e])}};return i.scopeName=r.scopeName,i}.apply(void 0,[n].concat(de(e)))]}var aC=["children"],sC=["children"],lC=(0,_e.forwardRef)(function(e,t){var n=e.children,r=Gt(e,aC),i=_e.Children.toArray(n),o=i.find(dC);if(o){var a=o.props.children,s=i.map(function(e){return e===o?1<_e.Children.count(a)?_e.Children.only(null):(0,_e.isValidElement)(a)?a.props.children:null:e});return(0,_e.createElement)(uC,$g({},r,{ref:t}),(0,_e.isValidElement)(a)?(0,_e.cloneElement)(a,void 0,s):null)}return(0,_e.createElement)(uC,$g({},r,{ref:t}),n)});lC.displayName="Slot";var uC=(0,_e.forwardRef)(function(e,t){var n=e.children,r=Gt(e,sC);return(0,_e.isValidElement)(n)?(0,_e.cloneElement)(n,Pe(Pe({},function(n,r){var i=Pe({},r),e=function(){var e=n[o],t=r[o];/^on[A-Z]/.test(o)?e&&t?i[o]=function(){t.apply(void 0,arguments),e.apply(void 0,arguments)}:e&&(i[o]=e):"style"===o?i[o]=Pe(Pe({},e),t):"className"===o&&(i[o]=[e,t].filter(Boolean).join(" "))};for(var o in r)e();return Pe(Pe({},n),i)}(r,n.props)),{},{ref:nC(t,n.ref)})):1<_e.Children.count(n)?_e.Children.only(null):null});uC.displayName="SlotClone";var cC=function(e){var t=e.children;return(0,_e.createElement)(_e.Fragment,null,t)};function dC(e){return(0,_e.isValidElement)(e)&&e.type===cC}var fC=["asChild"],pC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(function(e,o){var t=(0,_e.forwardRef)(function(e,t){var n=e.asChild,r=Gt(e,fC),i=n?lC:o;return(0,_e.useEffect)(function(){window[Symbol.for("radix-ui")]=!0},[]),(0,_e.createElement)(i,$g({},r,{ref:t}))});return t.displayName="Primitive.".concat(o),Pe(Pe({},e),{},Ee({},o,t))},{});function hC(e){var o=(0,_e.useRef)(e);return(0,_e.useEffect)(function(){o.current=e}),(0,_e.useMemo)(function(){return function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(t=o.current)||void 0===t?void 0:(e=t).call.apply(e,[o].concat(r))}},[])}var vC,gC=["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"],mC="dismissableLayer.update",yC=(0,_e.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bC=(0,_e.forwardRef)(function(e,t){var n,r=e.disableOutsidePointerEvents,i=void 0!==r&&r,o=e.onEscapeKeyDown,s=e.onPointerDownOutside,a=e.onFocusOutside,l=e.onInteractOutside,u=e.onDismiss,c=Gt(e,gC),d=(0,_e.useContext)(yC),f=Ce((0,_e.useState)(null),2),p=f[0],h=f[1],v=null!==(n=null==p?void 0:p.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,g=Ce((0,_e.useState)({}),2)[1],m=rC(t,function(e){return h(e)}),y=Array.from(d.layers),b=Ce(de(d.layersWithOutsidePointerEventsDisabled).slice(-1),1)[0],w=y.indexOf(b),x=p?y.indexOf(p):-1,k=0<d.layersWithOutsidePointerEventsDisabled.size,S=w<=x,_=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,i=hC(function(e){var t=e.target,n=de(d.branches).some(function(e){return e.contains(t)});S&&!n&&(null==s||s(e),null==l||l(e),e.defaultPrevented||null==u||u())}),o=(0,_e.useRef)(!1),a=(0,_e.useRef)(function(){});return(0,_e.useEffect)(function(){var e=function(e){if(e.target&&!o.current){var t=function(){xC("dismissableLayer.pointerDownOutside",i,n,{discrete:!0})},n={originalEvent:e};"touch"===e.pointerType?(r.removeEventListener("click",a.current),a.current=t,r.addEventListener("click",a.current,{once:!0})):t()}o.current=!1},t=window.setTimeout(function(){r.addEventListener("pointerdown",e)},0);return function(){window.clearTimeout(t),r.removeEventListener("pointerdown",e),r.removeEventListener("click",a.current)}},[r,i]),{onPointerDownCapture:function(){return o.current=!0}}}(function(e){var t=e.target,n=de(d.branches).some(function(e){return e.contains(t)});S&&!n&&(null===s||void 0===s||s(e),null===l||void 0===l||l(e),e.defaultPrevented||null===u||void 0===u||u())},v),E=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=hC(function(e){var t=e.target;de(d.branches).some(function(e){return e.contains(t)})||(null==a||a(e),null==l||l(e),e.defaultPrevented||null==u||u())}),r=(0,_e.useRef)(!1);return(0,_e.useEffect)(function(){var e=function(e){e.target&&!r.current&&xC("dismissableLayer.focusOutside",n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),function(){return t.removeEventListener("focusin",e)}},[t,n]),{onFocusCapture:function(){return r.current=!0},onBlurCapture:function(){return r.current=!1}}}(function(e){var t=e.target;de(d.branches).some(function(e){return e.contains(t)})||(null===a||void 0===a||a(e),null===l||void 0===l||l(e),e.defaultPrevented||null===u||void 0===u||u())},v);return function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null===globalThis||void 0===globalThis?void 0:globalThis.document,n=hC(function(e){x===d.layers.size-1&&(null==o||o(e),!e.defaultPrevented&&u&&(e.preventDefault(),u()))});(0,_e.useEffect)(function(){var e=function(e){"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e),function(){return t.removeEventListener("keydown",e)}},[n,t])}(function(e){x===d.layers.size-1&&(null===o||void 0===o||o(e),!e.defaultPrevented&&u&&(e.preventDefault(),u()))},v),(0,_e.useEffect)(function(){if(p)return i&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(vC=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),wC(),function(){i&&1===d.layersWithOutsidePointerEventsDisabled.size&&(v.body.style.pointerEvents=vC)}},[p,v,i,d]),(0,_e.useEffect)(function(){return function(){p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),wC())}},[p,d]),(0,_e.useEffect)(function(){var e=function(){return g({})};return document.addEventListener(mC,e),function(){return document.removeEventListener(mC,e)}},[]),(0,_e.createElement)(pC.div,$g({},c,{ref:m,style:Pe({pointerEvents:k?S?"auto":"none":void 0},e.style),onFocusCapture:tC(e.onFocusCapture,E.onFocusCapture),onBlurCapture:tC(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:tC(e.onPointerDownCapture,_.onPointerDownCapture)}))});function wC(){var e=new CustomEvent(mC);document.dispatchEvent(e)}function xC(e,t,n,r){var i,o,a=r.discrete,s=n.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),a?(o=l,(i=s)&&(0,lm.flushSync)(function(){return i.dispatchEvent(o)})):s.dispatchEvent(l)}var kC=0;function SC(){var e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var _C=["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"],EC="focusScope.autoFocusOnMount",PC="focusScope.autoFocusOnUnmount",CC={bubbles:!1,cancelable:!0},IC=(0,_e.forwardRef)(function(e,t){var n=e.loop,u=void 0!==n&&n,r=e.trapped,c=void 0!==r&&r,i=e.onMountAutoFocus,o=e.onUnmountAutoFocus,a=Gt(e,_C),s=Ce((0,_e.useState)(null),2),l=s[0],d=s[1],f=hC(i),p=hC(o),h=(0,_e.useRef)(null),v=rC(t,function(e){return d(e)}),g=(0,_e.useRef)({paused:!1,pause:function(){this.paused=!0},resume:function(){this.paused=!1}}).current;(0,_e.useEffect)(function(){if(c){var e=function(e){if(!g.paused&&l){var t=e.target;l.contains(t)?h.current=t:jC(h.current,{select:!0})}},t=function(e){!g.paused&&l&&(l.contains(e.relatedTarget)||jC(h.current,{select:!0}))};return document.addEventListener("focusin",e),document.addEventListener("focusout",t),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",t)}}},[c,l,g.paused]),(0,_e.useEffect)(function(){if(l){LC.add(g);var t=document.activeElement;if(!l.contains(t)){var e=new CustomEvent(EC,CC);l.addEventListener(EC,f),l.dispatchEvent(e),e.defaultPrevented||(function(e){var t,n=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).select,r=void 0!==n&&n,i=document.activeElement,o=ce(e);try{for(o.s();!(t=o.n()).done;)if(jC(t.value,{select:r}),document.activeElement!==i)return}catch(e){o.e(e)}finally{o.f()}}(TC(l).filter(function(e){return"A"!==e.tagName}),{select:!0}),document.activeElement===t&&jC(l))}return function(){l.removeEventListener(EC,f),setTimeout(function(){var e=new CustomEvent(PC,CC);l.addEventListener(PC,p),l.dispatchEvent(e),e.defaultPrevented||jC(null!=t?t:document.body,{select:!0}),l.removeEventListener(PC,p),LC.remove(g)},0)}}},[l,f,p,g]);var m=(0,_e.useCallback)(function(e){if((u||c)&&!g.paused){var t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,n=document.activeElement;if(t&&n){var r=e.currentTarget,i=Ce([MC(l=TC(s=r),s),MC(l.reverse(),s)],2),o=i[0],a=i[1];o&&a?e.shiftKey||n!==a?e.shiftKey&&n===o&&(e.preventDefault(),u&&jC(a,{select:!0})):(e.preventDefault(),u&&jC(o,{select:!0})):n===r&&e.preventDefault()}}var s,l},[u,c,g.paused]);return(0,_e.createElement)(pC.div,$g({tabIndex:-1},a,{ref:v,onKeyDown:m}))});function TC(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){var t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:0<=e.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});n.nextNode();)t.push(n.currentNode);return t}function MC(e,t){var n,r=ce(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!AC(i,{upTo:t}))return i}}catch(e){r.e(e)}finally{r.f()}}function AC(e,t){var n=t.upTo;if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==n&&e===n)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function jC(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).select,n=void 0!==t&&t;if(e&&e.focus){var r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&e instanceof HTMLInputElement&&"select"in e&&n&&e.select()}}var OC,LC=(OC=[],{add:function(e){var t=OC[0];e!==t&&(null==t||t.pause()),(OC=zC(OC,e)).unshift(e)},remove:function(e){var t;null===(t=(OC=zC(OC,e))[0])||void 0===t||t.resume()}});function zC(e,t){var n=de(e),r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var RC=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?_e.useLayoutEffect:function(){},NC=e["useId".toString()]||function(){},DC=0;var BC=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],FC=["strategy"],UC=["mainAxis","crossAxis","limiter"],KC=["apply"];function VC(e){return e.split("-")[0]}function WC(e){return e.split("-")[1]}function HC(e){return["top","bottom"].includes(VC(e))?"x":"y"}function YC(e){return"y"===e?"height":"width"}function XC(e,t,n){var r,i=e.reference,o=e.floating,a=i.x+i.width/2-o.width/2,s=i.y+i.height/2-o.height/2,l=HC(t),u=YC(l),c=i[u]/2-o[u]/2,d="x"===l;switch(VC(t)){case"top":r={x:a,y:i.y-o.height};break;case"bottom":r={x:a,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:s};break;case"left":r={x:i.x-o.width,y:s};break;default:r={x:i.x,y:i.y}}switch(WC(t)){case"start":r[l]-=c*(n&&d?-1:1);break;case"end":r[l]+=c*(n&&d?-1:1)}return r}var qC,$C=(qC=ao(io().mark(function e(t,n,r){var i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,a=r.strategy,s=void 0===a?"absolute":a,l=r.middleware,u=void 0===l?[]:l,c=r.platform,e.next=9,null==c.isRTL?void 0:c.isRTL(n);case 9:return d=e.sent,e.next=12,c.getElementRects({reference:t,floating:n,strategy:s});case 12:f=e.sent,p=XC(f,o,d),h=p.x,v=p.y,g=o,m={},b=y=0;case 20:if(b<u.length)return x=u[b],k=x.name,S=x.fn,e.next=26,S({x:h,y:v,initialPlacement:o,placement:g,strategy:s,middlewareData:m,rects:f,platform:c,elements:{reference:t,floating:n}});e.next=55;break;case 26:if(_=e.sent,E=_.x,P=_.y,C=_.data,I=_.reset,h=null!=E?E:h,v=null!=P?P:v,m=Pe(Pe({},m),{},Ee({},k,Pe(Pe({},m[k]),C))),e.t0=I&&y<=50,!e.t0){e.next=52;break}if(y++,e.t1="object"==typeof I,!e.t1){e.next=51;break}if(I.placement&&(g=I.placement),e.t2=I.rects,!e.t2){e.next=50;break}if(!0===I.rects)return e.next=45,c.getElementRects({reference:t,floating:n,strategy:s});e.next=48;break;case 45:e.t3=e.sent,e.next=49;break;case 48:e.t3=I.rects;case 49:f=e.t3;case 50:w=XC(f,g,d),h=w.x,v=w.y;case 51:b=-1;case 52:b++,e.next=20;break;case 55:return e.abrupt("return",{x:h,y:v,placement:g,strategy:s,middlewareData:m});case 56:case"end":return e.stop()}},e)})),function(e,t,n){return qC.apply(this,arguments)});function GC(e){return"number"!=typeof e?Pe({top:0,right:0,bottom:0,left:0},e):{top:e,right:e,bottom:e,left:e}}function QC(e){return Pe(Pe({},e),{},{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height})}function ZC(e,t){return JC.apply(this,arguments)}function JC(){return(JC=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,a=t.platform,s=t.rects,l=t.elements,u=t.strategy,d=(c=n).boundary,f=void 0===d?"clippingAncestors":d,p=c.rootBoundary,h=void 0===p?"viewport":p,v=c.elementContext,g=void 0===v?"floating":v,m=c.altBoundary,y=void 0!==m&&m,b=c.padding,w=GC(void 0===b?0:b),x=l[y?"floating"===g?"reference":"floating":g],e.t0=QC,e.t1=a,e.next=24,null==a.isElement?void 0:a.isElement(x);case 24:if(e.t3=r=e.sent,e.t2=null==e.t3,e.t2){e.next=28;break}e.t2=r;case 28:if(!e.t2){e.next=32;break}e.t4=x,e.next=38;break;case 32:if(e.t5=x.contextElement,e.t5){e.next=37;break}return e.next=36,null==a.getDocumentElement?void 0:a.getDocumentElement(l.floating);case 36:e.t5=e.sent;case 37:e.t4=e.t5;case 38:return e.t6=e.t4,e.t7=f,e.t8=h,e.t9=u,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=45,e.t1.getClippingRect.call(e.t1,e.t10);case 45:if(e.t11=e.sent,k=(0,e.t0)(e.t11),e.t12=QC,a.convertOffsetParentRelativeRectToViewportRelativeRect)return e.t14=a,e.t15="floating"===g?Pe(Pe({},s.floating),{},{x:i,y:o}):s.reference,e.next=53,null==a.getOffsetParent?void 0:a.getOffsetParent(l.floating);e.next=61;break;case 53:return e.t16=e.sent,e.t17=u,e.t18={rect:e.t15,offsetParent:e.t16,strategy:e.t17},e.next=58,e.t14.convertOffsetParentRelativeRectToViewportRelativeRect.call(e.t14,e.t18);case 58:e.t13=e.sent,e.next=62;break;case 61:e.t13=s[g];case 62:return e.t19=e.t13,S=(0,e.t12)(e.t19),e.abrupt("return",{top:k.top-S.top+w.top,bottom:S.bottom-k.bottom+w.bottom,left:k.left-S.left+w.left,right:S.right-k.right+w.right});case 65:case"end":return e.stop()}},e)}))).apply(this,arguments)}var eI=Math.min,tI=Math.max;function nI(e,t,n){return tI(e,eI(t,n))}var rI=function(A){return{name:"arrow",options:A,fn:function(M){return ao(io().mark(function e(){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=null!=A?A:{}).element,o=r.padding,a=void 0===o?0:o,s=M.x,l=M.y,u=M.placement,c=M.rects,d=M.platform,null==i)return e.abrupt("return",{});e.next=3;break;case 3:return f=GC(a),p={x:s,y:l},h=HC(u),v=WC(u),g=YC(h),e.next=10,d.getDimensions(i);case 10:return m=e.sent,y="y"===h?"top":"left",b="y"===h?"bottom":"right",w=c.reference[g]+c.reference[h]-p[h]-c.floating[g],x=p[h]-c.reference[h],e.next=17,null==d.getOffsetParent?void 0:d.getOffsetParent(i);case 17:return k=e.sent,0===(S=k?"y"===h?k.clientHeight||0:k.clientWidth||0:0)&&(S=c.floating[g]),_=w/2-x/2,E=f[y],P=S-m[g]-f[b],C=S/2-m[g]/2+_,I=nI(E,C,P),T=0<("start"===v?f[y]:f[b])&&C!==I&&c.reference[g]<=c.floating[g],e.abrupt("return",(Ee(n={},h,p[h]-(T?C<E?E-C:P-C:0)),Ee(n,"data",(Ee(t={},h,I),Ee(t,"centerOffset",C-I),t)),n));case 22:case"end":return e.stop()}},e)}))()}}},iI={left:"right",right:"left",bottom:"top",top:"bottom"};function oI(e){return e.replace(/left|right|bottom|top/g,function(e){return iI[e]})}function aI(e,t,n){void 0===n&&(n=!1);var r=WC(e),i=HC(e),o=YC(i),a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=oI(a)),{main:a,cross:oI(a)}}var sI={start:"end",end:"start"};function lI(e){return e.replace(/start|end/g,function(e){return sI[e]})}var uI=["top","right","bottom","left"],cI=(uI.reduce(function(e,t){return e.concat(t,t+"-start",t+"-end")},[]),function(D){return void 0===D&&(D={}),{name:"flip",options:D,fn:function(N){return ao(io().mark(function e(){var r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x,k,S,_,E,P,C,I,T,M,A,j,O,L,z,R;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=N.placement,o=N.middlewareData,a=N.rects,s=N.initialPlacement,l=N.platform,u=N.elements,d=(c=D).mainAxis,f=void 0===d||d,p=c.crossAxis,h=void 0===p||p,v=c.fallbackPlacements,g=c.fallbackStrategy,m=void 0===g?"bestFit":g,y=c.flipAlignment,b=void 0===y||y,w=Gt(c,BC),x=VC(i),k=v||(x!==s&&b?(void 0,n=oI(t=s),[lI(t),n,lI(n)]):[oI(s)]),S=[s].concat(de(k)),e.next=22,ZC(N,w);case 22:if(_=e.sent,E=[],P=(null==(r=o.flip)?void 0:r.overflows)||[],f&&E.push(_[x]),h)return e.t0=aI,e.t1=i,e.t2=a,e.next=31,null==l.isRTL?void 0:l.isRTL(u.floating);e.next=36;break;case 31:e.t3=e.sent,C=(0,e.t0)(e.t1,e.t2,e.t3),I=C.main,T=C.cross,E.push(_[I],_[T]);case 36:if(P=[].concat(de(P),[{placement:i,overflows:E}]),E.every(function(e){return e<=0})){e.next=50;break}if(j=(null!=(M=null==(A=o.flip)?void 0:A.index)?M:0)+1,O=S[j])return e.abrupt("return",{data:{index:j,overflows:P},reset:{placement:O}});e.next=40;break;case 40:L="bottom",e.t4=m,e.next="bestFit"===e.t4?44:"initialPlacement"===e.t4?47:48;break;case 44:return(R=null==(z=P.map(function(e){return[e,e.overflows.filter(function(e){return 0<e}).reduce(function(e,t){return e+t},0)]}).sort(function(e,t){return e[1]-t[1]})[0])?void 0:z[0].placement)&&(L=R),e.abrupt("break",48);case 47:L=s;case 48:if(i!==L)return e.abrupt("return",{reset:{placement:L}});e.next=50;break;case 50:return e.abrupt("return",{});case 51:case"end":return e.stop()}var t,n},e)}))()}}});function dI(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function fI(t){return uI.some(function(e){return 0<=t[e]})}function pI(e){return"x"===e?"y":"x"}function hI(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function vI(e){if(null==e)return window;if(hI(e))return e;var t=e.ownerDocument;return t&&t.defaultView||window}function gI(e){return vI(e).getComputedStyle(e)}function mI(e){return hI(e)?"":e?(e.nodeName||"").toLowerCase():""}function yI(){var e=navigator.userAgentData;return null!=e&&e.brands?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function bI(e){return e instanceof vI(e).HTMLElement}function wI(e){return e instanceof vI(e).Element}function xI(e){return"undefined"!=typeof ShadowRoot&&(e instanceof vI(e).ShadowRoot||e instanceof ShadowRoot)}function kI(e){var t=gI(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function SI(e){var t=/firefox/i.test(yI()),n=gI(e);return"none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||["transform","perspective"].includes(n.willChange)||t&&"filter"===n.willChange||t&&!!n.filter&&"none"!==n.filter}function _I(){return!/^((?!chrome|android).)*safari/i.test(yI())}var EI=Math.min,PI=Math.max,CI=Math.round;function II(e,t,n){var r,i,o,a;void 0===t&&(t=!1),void 0===n&&(n=!1);var s=e.getBoundingClientRect(),l=1,u=1;t&&bI(e)&&(l=0<e.offsetWidth&&CI(s.width)/e.offsetWidth||1,u=0<e.offsetHeight&&CI(s.height)/e.offsetHeight||1);var c=wI(e)?vI(e):window,d=!_I()&&n,f=(s.left+(d&&null!=(r=null==(i=c.visualViewport)?void 0:i.offsetLeft)?r:0))/l,p=(s.top+(d&&null!=(o=null==(a=c.visualViewport)?void 0:a.offsetTop)?o:0))/u,h=s.width/l,v=s.height/u;return{width:h,height:v,top:p,right:f+h,bottom:p+v,left:f,x:f,y:p}}function TI(e){return(((t=e)instanceof vI(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function MI(e){return wI(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function AI(e){return II(TI(e)).left+MI(e).scrollLeft}function jI(e){return"html"===mI(e)?e:e.assignedSlot||e.parentNode||(xI(e)?e.host:null)||TI(e)}function OI(e){return bI(e)&&"fixed"!==getComputedStyle(e).position?e.offsetParent:null}function LI(n){for(var e=vI(n),t=OI(n);t&&["table","td","th"].includes(mI(t))&&"static"===getComputedStyle(t).position;)t=OI(t);return t&&("html"===mI(t)||"body"===mI(t)&&"static"===getComputedStyle(t).position&&!SI(t))?e:t||function(e){var t=jI(n);for(xI(t)&&(t=t.host);bI(t)&&!["html","body"].includes(mI(t));){if(SI(t))return t;t=t.parentNode}return null}()||e}function zI(e){if(bI(e))return{width:e.offsetWidth,height:e.offsetHeight};var t=II(e);return{width:t.width,height:t.height}}function RI(e,t){var n;void 0===t&&(t=[]);var r=function e(t){var n=jI(t);return["html","body","#document"].includes(mI(n))?t.ownerDocument.body:bI(n)&&kI(n)?n:e(n)}(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=vI(r),a=i?[o].concat(o.visualViewport||[],kI(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(RI(a))}function NI(e,t,n){return"viewport"===t?QC(function(e,t){var n=vI(e),r=TI(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var u=_I();(u||!u&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s,y:l}}(e,n)):wI(t)?(p=II(f=t,!1,"fixed"===n),h=p.top+f.clientTop,v=p.left+f.clientLeft,{top:h,left:v,x:v,y:h,right:v+f.clientWidth,bottom:h+f.clientHeight,width:f.clientWidth,height:f.clientHeight}):QC((r=TI(e),o=TI(r),a=MI(r),s=null==(i=r.ownerDocument)?void 0:i.body,l=PI(o.scrollWidth,o.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),u=PI(o.scrollHeight,o.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-a.scrollLeft+AI(r),d=-a.scrollTop,"rtl"===gI(s||o).direction&&(c+=PI(o.clientWidth,s?s.clientWidth:0)-l),{width:l,height:u,x:c,y:d}));var r,i,o,a,s,l,u,c,d,f,p,h,v}var DI={getClippingRect:function(e){var t,n,r,i=e.element,o=e.boundary,a=e.rootBoundary,s=e.strategy,l=[].concat(de("clippingAncestors"===o?(n=RI(t=i),wI(r=["absolute","fixed"].includes(gI(t).position)&&bI(t)?LI(t):t)?n.filter(function(e){return wI(e)&&function(e,t){var n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&xI(n)){var r=t;do{if(r&&e===r)return!0;r=r.parentNode||r.host}while(r)}return!1}(e,r)&&"body"!==mI(e)}):[]):[].concat(o)),[a]),u=l[0],c=l.reduce(function(e,t){var n=NI(i,t,s);return e.top=PI(n.top,e.top),e.right=EI(n.right,e.right),e.bottom=EI(n.bottom,e.bottom),e.left=PI(n.left,e.left),e},NI(i,u,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=bI(n),o=TI(n);if(n===o)return t;var a={scrollLeft:0,scrollTop:0},s={x:0,y:0};if((i||!i&&"fixed"!==r)&&(("body"!==mI(n)||kI(o))&&(a=MI(n)),bI(n))){var l=II(n,!0);s.x=l.x+n.clientLeft,s.y=l.y+n.clientTop}return Pe(Pe({},t),{},{x:t.x-a.scrollLeft+s.x,y:t.y-a.scrollTop+s.y})},isElement:wI,getDimensions:zI,getOffsetParent:LI,getDocumentElement:TI,getElementRects:function(e){var t=e.reference,n=e.floating,r=e.strategy;return{reference:function(e,t,n){var r,i,o=bI(t),a=TI(t),s=II(e,o&&(i=II(r=t),CI(i.width)!==r.offsetWidth||CI(i.height)!==r.offsetHeight),"fixed"===n),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};if(o||!o&&"fixed"!==n)if(("body"!==mI(t)||kI(a))&&(l=MI(t)),bI(t)){var c=II(t,!0);u.x=c.x+t.clientLeft,u.y=c.y+t.clientTop}else a&&(u.x=AI(a));return{x:s.left+l.scrollLeft-u.x,y:s.top+l.scrollTop-u.y,width:s.width,height:s.height}}(t,LI(n),r),floating:Pe(Pe({},zI(n)),{},{x:0,y:0})}},getClientRects:function(e){return Array.from(e.getClientRects())},isRTL:function(e){return"rtl"===gI(e).direction}};function BI(n,e,r,t){void 0===t&&(t={});var i=t,o=i.ancestorScroll,a=void 0===o||o,s=i.ancestorResize,l=void 0===s||s,u=i.elementResize,c=void 0===u||u,d=i.animationFrame,f=void 0!==d&&d,p=a&&!f,h=l&&!f,v=p||h?[].concat(de(wI(n)?RI(n):[]),de(RI(e))):[];v.forEach(function(e){p&&e.addEventListener("scroll",r,{passive:!0}),h&&e.addEventListener("resize",r)});var g,m=null;if(c){var y=!0;m=new ResizeObserver(function(){y||r(),y=!1}),wI(n)&&!f&&m.observe(n),m.observe(e)}var b=f?II(n):null;return f&&function e(){var t=II(n);!b||t.x===b.x&&t.y===b.y&&t.width===b.width&&t.height===b.height||r(),b=t,g=requestAnimationFrame(e)}(),r(),function(){var e;v.forEach(function(e){p&&e.removeEventListener("scroll",r),h&&e.removeEventListener("resize",r)}),null==(e=m)||e.disconnect(),m=null,f&&cancelAnimationFrame(g)}}var FI="undefined"!=typeof document?_e.useLayoutEffect:_e.useEffect;function UI(e){var t,n,r=void 0===e?{}:e,i=r.middleware,o=r.placement,a=void 0===o?"bottom":o,s=r.strategy,l=void 0===s?"absolute":s,u=r.whileElementsMounted,c=_e.useRef(null),d=_e.useRef(null),f=(t=u,n=_e.useRef(t),FI(function(){n.current=t}),n),p=_e.useRef(null),h=Ce(_e.useState({x:null,y:null,strategy:l,placement:a,middlewareData:{}}),2),v=h[0],g=h[1],m=Ce(_e.useState(i),2),y=m[0],b=m[1];(function e(t,n){if(t===n)return!0;if(typeof t!=typeof n)return!1;if("function"==typeof t&&t.toString()===n.toString())return!0;var r,i,o;if(t&&n&&"object"==typeof t){if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!("_owner"===a&&t.$$typeof||e(t[a],n[a])))return!1}return!0}return t!=t&&n!=n})(null==y?void 0:y.map(function(e){return e.options}),null==i?void 0:i.map(function(e){return e.options}))||b(i);var w=_e.useCallback(function(){var e,t;c.current&&d.current&&(e=c.current,t=d.current,$C(e,t,Pe({platform:DI},{middleware:y,placement:a,strategy:l}))).then(function(e){x.current&&lm.flushSync(function(){g(e)})})},[y,a,l]);FI(function(){x.current&&w()},[w]);var x=_e.useRef(!1);FI(function(){return x.current=!0,function(){x.current=!1}},[]);var k=_e.useCallback(function(){if("function"==typeof p.current&&(p.current(),p.current=null),c.current&&d.current)if(f.current){var e=f.current(c.current,d.current,w);p.current=e}else w()},[w,f]),S=_e.useCallback(function(e){c.current=e,k()},[k]),_=_e.useCallback(function(e){d.current=e,k()},[k]),E=_e.useMemo(function(){return{reference:c,floating:d}},[]);return _e.useMemo(function(){return Pe(Pe({},v),{},{update:w,refs:E,reference:S,floating:_})},[v,w,E,S,_])}var KI=["__scopePopper","virtualRef"],VI=["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions","onPlaced"],WI=Ce(oC("Popper"),2),HI=WI[0],YI=WI[1],XI=Ce(HI("Popper"),2),qI=XI[0],$I=XI[1],GI=(0,_e.forwardRef)(function(e,t){var n=e.__scopePopper,r=e.virtualRef,i=Gt(e,KI),o=$I("PopperAnchor",n),a=(0,_e.useRef)(null),s=rC(t,a);return(0,_e.useEffect)(function(){o.onAnchorChange((null==r?void 0:r.current)||a.current)}),r?null:(0,_e.createElement)(pC.div,$g({},i,{ref:s}))}),QI="PopperContent",ZI=Ce(HI(QI),2),JI=ZI[0],eT=(ZI[1],Ce(HI(QI,{hasParent:!1,positionUpdateFns:new Set}),2)),tT=eT[0],nT=eT[1],rT=(0,_e.forwardRef)(function(e,t){var n,r,i,o,a,s,l,u,c,d,f,p,h=e.__scopePopper,v=e.side,g=void 0===v?"bottom":v,m=e.sideOffset,y=void 0===m?0:m,b=e.align,w=void 0===b?"center":b,x=e.alignOffset,k=void 0===x?0:x,S=e.arrowPadding,_=void 0===S?0:S,E=e.collisionBoundary,P=void 0===E?[]:E,C=e.collisionPadding,I=void 0===C?0:C,T=e.sticky,M=void 0===T?"partial":T,A=e.hideWhenDetached,j=void 0!==A&&A,O=e.avoidCollisions,L=void 0===O||O,z=e.onPlaced,R=Gt(e,VI),N=$I(QI,h),D=Ce((0,_e.useState)(null),2),B=D[0],F=D[1],U=rC(t,function(e){return F(e)}),K=Ce((0,_e.useState)(null),2),V=K[0],W=K[1],H=(c=V,d=Ce((0,_e.useState)(void 0),2),f=d[0],p=d[1],RC(function(){if(c){p({width:c.offsetWidth,height:c.offsetHeight});var e=new ResizeObserver(function(e){if(Array.isArray(e)&&e.length){var t,n,r=e[0];if("borderBoxSize"in r){var i=r.borderBoxSize,o=Array.isArray(i)?i[0]:i;t=o.inlineSize,n=o.blockSize}else t=c.offsetWidth,n=c.offsetHeight;p({width:t,height:n})}});return e.observe(c,{box:"border-box"}),function(){return e.unobserve(c)}}p(void 0)},[c]),f),Y=null!==(n=null==H?void 0:H.width)&&void 0!==n?n:0,X=null!==(r=null==H?void 0:H.height)&&void 0!==r?r:0,q=g+("center"!==w?"-"+w:""),$="number"==typeof I?I:Pe({top:0,right:0,bottom:0,left:0},I),G=Array.isArray(P)?P:[P],Q=0<G.length,Z={padding:$,boundary:G.filter(oT),altBoundary:Q},J=UI({strategy:"fixed",placement:q,whileElementsMounted:BI,middleware:[function(o){return void 0===o&&(o=0),{name:"offset",options:o,fn:function(i){return ao(io().mark(function e(){var t,n,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.x,n=i.y,e.next=4,function(){var n=ao(io().mark(function e(t,n){var r,i,o,a,s,l,u,c,d,f,p,h,v,g;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=5,null==i.isRTL?void 0:i.isRTL(o.floating);case 5:return a=e.sent,s=VC(r),l=WC(r),u="x"===HC(r),c=["left","top"].includes(s)?-1:1,d=a&&u?-1:1,f="function"==typeof n?n(t):n,p="number"==typeof f?{mainAxis:f,crossAxis:0,alignmentAxis:null}:Pe({mainAxis:0,crossAxis:0,alignmentAxis:null},f),h=p.mainAxis,v=p.crossAxis,g=p.alignmentAxis,e.abrupt("return",(l&&"number"==typeof g&&(v="end"===l?-1*g:g),u?{x:v*d,y:h*c}:{x:h*c,y:v*d}));case 14:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}()(i,o);case 4:return r=e.sent,e.abrupt("return",{x:t+r.x,y:n+r.y,data:r});case 6:case"end":return e.stop()}},e)}))()}}}({mainAxis:y+X,alignmentAxis:k}),L?function(S){return void 0===S&&(S={}),{name:"shift",options:S,fn:function(k){return ao(io().mark(function e(){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b,w,x;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.x,r=k.y,i=k.placement,a=(o=S).mainAxis,s=void 0===a||a,l=o.crossAxis,u=void 0!==l&&l,c=o.limiter,d=void 0===c?{fn:function(e){return{x:e.x,y:e.y}}}:c,f=Gt(o,UC),p={x:n,y:r},e.next=14,ZC(k,f);case 14:return h=e.sent,v=HC(VC(i)),g=pI(v),m=p[v],y=p[g],s&&(b="y"===v?"bottom":"right",m=nI(m+h["y"===v?"top":"left"],m,m-h[b])),u&&(w="y"===g?"bottom":"right",y=nI(y+h["y"===g?"top":"left"],y,y-h[w])),x=d.fn(Pe(Pe({},k),{},(Ee(t={},v,m),Ee(t,g,y),t))),e.abrupt("return",Pe(Pe({},x),{},{data:{x:x.x-n,y:x.y-r}}));case 22:case"end":return e.stop()}},e)}))()}}}(Pe({mainAxis:!0,crossAxis:!1,limiter:"partial"===M?function(j){return void 0===j&&(j={}),{options:j,fn:function(e){var t,n=e.x,r=e.y,i=e.placement,o=e.rects,a=e.middlewareData,s=j,l=s.offset,u=void 0===l?0:l,c=s.mainAxis,d=void 0===c||c,f=s.crossAxis,p=void 0===f||f,h={x:n,y:r},v=HC(i),g=pI(v),m=h[v],y=h[g],b="function"==typeof u?u(Pe(Pe({},o),{},{placement:i})):u,w="number"==typeof b?{mainAxis:b,crossAxis:0}:Pe({mainAxis:0,crossAxis:0},b);if(d){var x="y"===v?"height":"width",k=o.reference[v]-o.floating[x]+w.mainAxis,S=o.reference[v]+o.reference[x]-w.mainAxis;m<k?m=k:S<m&&(m=S)}if(p){var _,E,P,C,I="y"===v?"width":"height",T=["top","left"].includes(VC(i)),M=o.reference[g]-o.floating[I]+(T&&null!=(_=null==(E=a.offset)?void 0:E[g])?_:0)+(T?0:w.crossAxis),A=o.reference[g]+o.reference[I]+(T?0:null!=(P=null==(C=a.offset)?void 0:C[g])?P:0)-(T?w.crossAxis:0);y<M?y=M:A<y&&(y=A)}return Ee(t={},v,m),Ee(t,g,y),t}}}():void 0},Z)):void 0,L?cI(Pe({},Z)):void 0,function(x){return void 0===x&&(x={}),{name:"size",options:x,fn:function(w){return ao(io().mark(function e(){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,v,g,m,y,b;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.placement,n=w.rects,r=w.platform,i=w.elements,a=(o=x).apply,s=Gt(o,KC),e.next=9,ZC(w,s);case 9:if(l=e.sent,u=VC(t),c=WC(t),"top"===u||"bottom"===u)return d=u,e.t0=c,e.next=17,null==r.isRTL?void 0:r.isRTL(i.floating);e.next=31;break;case 17:if(!e.sent){e.next=21;break}e.t1="start",e.next=22;break;case 21:e.t1="end";case 22:if(e.t2=e.t1,e.t0!==e.t2){e.next=27;break}e.t3="left",e.next=28;break;case 27:e.t3="right";case 28:f=e.t3,e.next=32;break;case 31:f=u,d="end"===c?"top":"bottom";case 32:return p=tI(l.left,0),h=tI(l.right,0),v=tI(l.top,0),g=tI(l.bottom,0),m={availableHeight:n.floating.height-(["left","right"].includes(t)?2*(0!==v||0!==g?v+g:tI(l.top,l.bottom)):l[d]),availableWidth:n.floating.width-(["top","bottom"].includes(t)?2*(0!==p||0!==h?p+h:tI(l.left,l.right)):l[f])},e.next=39,r.getDimensions(i.floating);case 39:return y=e.sent,null==a||a(Pe(Pe({},w),m)),e.next=43,r.getDimensions(i.floating);case 43:return b=e.sent,e.abrupt("return",y.width!==b.width||y.height!==b.height?{reset:{rects:!0}}:{});case 45:case"end":return e.stop()}},e)}))()}}}(Pe(Pe({},Z),{},{apply:function(e){var t=e.elements,n=e.rects,r=e.availableWidth,i=e.availableHeight,o=n.reference,a=o.width,s=o.height,l=t.floating.style;l.setProperty("--radix-popper-available-width","".concat(r,"px")),l.setProperty("--radix-popper-available-height","".concat(i,"px")),l.setProperty("--radix-popper-anchor-width","".concat(a,"px")),l.setProperty("--radix-popper-anchor-height","".concat(s,"px"))}})),V?function(e){var n=e.element,r=e.padding;return{name:"arrow",options:e,fn:function(e){return t=n,Object.prototype.hasOwnProperty.call(t,"current")?null!=n.current?rI({element:n.current,padding:r}).fn(e):{}:n?rI({element:n,padding:r}).fn(e):{};var t}}}({element:V,padding:_}):void 0,aT({arrowWidth:Y,arrowHeight:X}),j?function(e){var t=void 0===e?{}:e,n=t.strategy,o=void 0===n?"referenceHidden":n,a=Gt(t,FC);return{name:"hide",fn:function(i){return ao(io().mark(function e(){var t,n,r;return io().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=i.rects,e.t0=o,e.next="referenceHidden"===e.t0?4:"escaped"===e.t0?11:18;break;case 4:return e.t1=dI,e.next=7,ZC(i,Pe(Pe({},a),{},{elementContext:"reference"}));case 7:return e.t2=e.sent,e.t3=t.reference,n=(0,e.t1)(e.t2,e.t3),e.abrupt("return",{data:{referenceHiddenOffsets:n,referenceHidden:fI(n)}});case 11:return e.t4=dI,e.next=14,ZC(i,Pe(Pe({},a),{},{altBoundary:!0}));case 14:return e.t5=e.sent,e.t6=t.floating,r=(0,e.t4)(e.t5,e.t6),e.abrupt("return",{data:{escapedOffsets:r,escaped:fI(r)}});case 18:return e.abrupt("return",{});case 19:case"end":return e.stop()}},e)}))()}}}({strategy:"referenceHidden"}):void 0].filter(iT)}),ee=J.reference,te=J.floating,ne=J.strategy,re=J.x,ie=J.y,oe=J.placement,ae=J.middlewareData,se=J.update;RC(function(){ee(N.anchor)},[ee,N.anchor]);var le=null!==re&&null!==ie,ue=Ce(sT(oe),2),ce=ue[0],de=ue[1],fe=hC(z);RC(function(){le&&(null==fe||fe())},[le,fe]);var pe=null===(i=ae.arrow)||void 0===i?void 0:i.x,he=null===(o=ae.arrow)||void 0===o?void 0:o.y,ve=0!==(null===(a=ae.arrow)||void 0===a?void 0:a.centerOffset),ge=Ce((0,_e.useState)(),2),me=ge[0],ye=ge[1];RC(function(){B&&ye(window.getComputedStyle(B).zIndex)},[B]);var be=nT(QI,h),we=be.hasParent,xe=be.positionUpdateFns,ke=!we;(0,_e.useLayoutEffect)(function(){if(!ke)return xe.add(se),function(){xe.delete(se)}},[ke,xe,se]),RC(function(){ke&&le&&Array.from(xe).reverse().forEach(function(e){return requestAnimationFrame(e)})},[ke,le,xe]);var Se=Pe(Pe({"data-side":ce,"data-align":de},R),{},{ref:U,style:Pe(Pe({},R.style),{},{animation:le?void 0:"none",opacity:null!==(s=ae.hide)&&void 0!==s&&s.referenceHidden?0:void 0})});return(0,_e.createElement)("div",{ref:te,"data-radix-popper-content-wrapper":"",style:Ee({position:ne,left:0,top:0,transform:le?"translate3d(".concat(Math.round(re),"px, ").concat(Math.round(ie),"px, 0)"):"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:me},"--radix-popper-transform-origin",[null===(l=ae.transformOrigin)||void 0===l?void 0:l.x,null===(u=ae.transformOrigin)||void 0===u?void 0:u.y].join(" ")),dir:e.dir},(0,_e.createElement)(JI,{scope:h,placedSide:ce,onArrowChange:W,arrowX:pe,arrowY:he,shouldHideArrow:ve},ke?(0,_e.createElement)(tT,{scope:h,hasParent:!0,positionUpdateFns:xe},(0,_e.createElement)(pC.div,Se)):(0,_e.createElement)(pC.div,Se)))});function iT(e){return void 0!==e}function oT(e){return null!==e}var aT=function(b){return{name:"transformOrigin",options:b,fn:function(e){var t,n,r,i,o,a=e.placement,s=e.rects,l=e.middlewareData,u=0!==(null===(t=l.arrow)||void 0===t?void 0:t.centerOffset),c=u?0:b.arrowWidth,d=u?0:b.arrowHeight,f=Ce(sT(a),2),p=f[0],h={start:"0%",center:"50%",end:"100%"}[f[1]],v=(null!==(n=null===(r=l.arrow)||void 0===r?void 0:r.x)&&void 0!==n?n:0)+c/2,g=(null!==(i=null===(o=l.arrow)||void 0===o?void 0:o.y)&&void 0!==i?i:0)+d/2,m="",y="";return"bottom"===p?(m=u?h:"".concat(v,"px"),y="".concat(-d,"px")):"top"===p?(m=u?h:"".concat(v,"px"),y="".concat(s.floating.height+d,"px")):"right"===p?(m="".concat(-d,"px"),y=u?h:"".concat(g,"px")):"left"===p&&(m="".concat(s.floating.width+d,"px"),y=u?h:"".concat(g,"px")),{data:{x:m,y:y}}}}};function sT(e){var t=Ce(e.split("-"),2),n=t[0],r=t[1];return[n,void 0===r?"center":r]}var lT=function(e){var t=e.__scopePopper,n=e.children,r=Ce((0,_e.useState)(null),2),i=r[0],o=r[1];return(0,_e.createElement)(qI,{scope:t,anchor:i,onAnchorChange:o},n)},uT=GI,cT=rT,dT=["container"],fT=(0,_e.forwardRef)(function(e,t){var n,r=e.container,i=void 0===r?null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body:r,o=Gt(e,dT);return i?lm.createPortal((0,_e.createElement)(pC.div,$g({},o,{ref:t})),i):null}),pT=function(e){var i,t,r,n,o,a,s,l,u,c,d,f,p=e.present,h=e.children,v=(i=p,n=Ce((0,_e.useState)(),2),o=n[0],a=n[1],s=(0,_e.useRef)({}),l=(0,_e.useRef)(i),u=(0,_e.useRef)("none"),c=Ce((t=i?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},(0,_e.useReducer)(function(e,t){var n=r[e][t];return null!=n?n:e},t)),2),d=c[0],f=c[1],(0,_e.useEffect)(function(){var e=hT(s.current);u.current="mounted"===d?e:"none"},[d]),RC(function(){var e=s.current,t=l.current;if(t!==i){var n=u.current,r=hT(e);i?f("MOUNT"):"none"===r||"none"===(null==e?void 0:e.display)?f("UNMOUNT"):f(t&&n!==r?"ANIMATION_OUT":"UNMOUNT"),l.current=i}},[i,f]),RC(function(){if(o){var e=function(e){var t=hT(s.current).includes(e.animationName);e.target===o&&t&&(0,lm.flushSync)(function(){return f("ANIMATION_END")})},t=function(e){e.target===o&&(u.current=hT(s.current))};return o.addEventListener("animationstart",t),o.addEventListener("animationcancel",e),o.addEventListener("animationend",e),function(){o.removeEventListener("animationstart",t),o.removeEventListener("animationcancel",e),o.removeEventListener("animationend",e)}}f("ANIMATION_END")},[o,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:(0,_e.useCallback)(function(e){e&&(s.current=getComputedStyle(e)),a(e)},[])}),g="function"==typeof h?h({present:v.isPresent}):_e.Children.only(h),m=rC(v.ref,g.ref);return"function"==typeof h||v.isPresent?(0,_e.cloneElement)(g,{ref:m}):null};function hT(e){return(null==e?void 0:e.animationName)||"none"}pT.displayName="Presence";var vT=["__scopePopover"],gT=["forceMount"],mT=["__scopePopover","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside"],yT=Ce(oC("Popover",[YI]),2),bT=yT[0],wT=(yT[1],YI()),xT=Ce(bT("Popover"),2),kT=xT[0],ST=xT[1],_T=(0,_e.forwardRef)(function(e,t){var n=e.__scopePopover,r=Gt(e,vT),i=ST("PopoverTrigger",n),o=wT(n),a=rC(t,i.triggerRef),s=(0,_e.createElement)(pC.button,$g({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":LT(i.open)},r,{ref:a,onClick:tC(e.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?s:(0,_e.createElement)(uT,$g({asChild:!0},o),s)}),ET="PopoverPortal",PT=Ce(bT(ET,{forceMount:void 0}),2),CT=PT[0],IT=PT[1],TT="PopoverContent",MT=(0,_e.forwardRef)(function(e,t){var n=IT(TT,e.__scopePopover),r=e.forceMount,i=void 0===r?n.forceMount:r,o=Gt(e,gT),a=ST(TT,e.__scopePopover);return(0,_e.createElement)(pT,{present:i||a.open},a.modal?(0,_e.createElement)(AT,$g({},o,{ref:t})):(0,_e.createElement)(jT,$g({},o,{ref:t})))}),AT=(0,_e.forwardRef)(function(e,t){var n=ST(TT,e.__scopePopover),r=(0,_e.useRef)(null),i=rC(t,r),o=(0,_e.useRef)(!1);return(0,_e.useEffect)(function(){var e=r.current;if(e)return Iy(e)},[]),(0,_e.createElement)(Sy,{as:lC,allowPinchZoom:!0},(0,_e.createElement)(OT,$g({},e,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:tC(e.onCloseAutoFocus,function(e){var t;e.preventDefault(),o.current||null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:tC(e.onPointerDownOutside,function(e){var t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;o.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:tC(e.onFocusOutside,function(e){return e.preventDefault()},{checkForDefaultPrevented:!1})})))}),jT=(0,_e.forwardRef)(function(i,e){var o=ST(TT,i.__scopePopover),a=(0,_e.useRef)(!1),s=(0,_e.useRef)(!1);return(0,_e.createElement)(OT,$g({},i,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:function(e){var t,n;null===(t=i.onCloseAutoFocus)||void 0===t||t.call(i,e),e.defaultPrevented||(a.current||null===(n=o.triggerRef.current)||void 0===n||n.focus(),e.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:function(e){var t,n;null===(t=i.onInteractOutside)||void 0===t||t.call(i,e),e.defaultPrevented||(a.current=!0,"pointerdown"===e.detail.originalEvent.type&&(s.current=!0));var r=e.target;(null===(n=o.triggerRef.current)||void 0===n?void 0:n.contains(r))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&s.current&&e.preventDefault()}}))}),OT=(0,_e.forwardRef)(function(e,t){var n=e.__scopePopover,r=e.trapFocus,i=e.onOpenAutoFocus,o=e.onCloseAutoFocus,a=e.disableOutsidePointerEvents,s=e.onEscapeKeyDown,l=e.onPointerDownOutside,u=e.onFocusOutside,c=e.onInteractOutside,d=Gt(e,mT),f=ST(TT,n),p=wT(n);return(0,_e.useEffect)(function(){var e,t,n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:SC()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:SC()),kC++,function(){1===kC&&document.querySelectorAll("[data-radix-focus-guard]").forEach(function(e){return e.remove()}),kC--}},[]),(0,_e.createElement)(IC,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o},(0,_e.createElement)(bC,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:c,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onDismiss:function(){return f.onOpenChange(!1)}},(0,_e.createElement)(cT,$g({"data-state":LT(f.open),role:"dialog",id:f.contentId},p,d,{ref:t,style:Pe(Pe({},d.style),{},{"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"})}))))});function LT(e){return e?"open":"closed"}var zT=function(e){var t=e.__scopePopover,n=e.children,r=e.open,i=e.defaultOpen,o=e.onOpenChange,a=e.modal,s=void 0!==a&&a,l=wT(t),u=(0,_e.useRef)(null),c=Ce((0,_e.useState)(!1),2),d=c[0],f=c[1],p=Ce(function(e){var t,n,r,i,o,a,s,l=e.prop,u=e.defaultProp,c=e.onChange,d=void 0===c?function(){}:c,f=Ce((n=(t={defaultProp:u,onChange:d}).defaultProp,r=t.onChange,i=(0,_e.useState)(n),o=Ce(i,1)[0],a=(0,_e.useRef)(o),s=hC(r),(0,_e.useEffect)(function(){a.current!==o&&(s(o),a.current=o)},[o,a,s]),i),2),p=f[0],h=f[1],v=void 0!==l,g=v?l:p,m=hC(d);return[g,(0,_e.useCallback)(function(e){if(v){var t="function"==typeof e?e(l):e;t!==l&&m(t)}else h(e)},[v,l,h,m])]}({prop:r,defaultProp:i,onChange:o}),2),h=p[0],v=void 0!==h&&h,g=p[1];return(0,_e.createElement)(lT,l,(0,_e.createElement)(kT,{scope:t,contentId:function(e){var t=Ce(_e.useState(NC()),2),n=t[0],r=t[1];return RC(function(){e||r(function(e){return null!=e?e:String(DC++)})},[e]),e||(n?"radix-".concat(n):"")}(),triggerRef:u,open:v,onOpenChange:g,onOpenToggle:(0,_e.useCallback)(function(){return g(function(e){return!e})},[g]),hasCustomAnchor:d,onCustomAnchorAdd:(0,_e.useCallback)(function(){return f(!0)},[]),onCustomAnchorRemove:(0,_e.useCallback)(function(){return f(!1)},[]),modal:s},n))},RT=_T,NT=function(e){var t=e.__scopePopover,n=e.forceMount,r=e.children,i=e.container,o=ST(ET,t);return(0,_e.createElement)(CT,{scope:t,forceMount:n},(0,_e.createElement)(pT,{present:n||o.open},(0,_e.createElement)(fT,{asChild:!0,container:i},r)))},DT=MT,BT=function(e){var t=e.id,n=e.children,r=Ce(VS(t,e.onOpenChange),2),i=r[0],o=r[1];return(0,to.jsx)(zT,{onOpenChange:o,open:i,children:(0,to.jsx)("div",{className:"tlui-popover",children:n})})},FT=function(e){var t=e.children,n=e.disabled,r=e["data-testid"];return(0,to.jsx)(RT,{"data-testid":r,disabled:n,asChild:!0,dir:"ltr",children:t})},UT=function(e){var t=e.side,n=e.children,r=e.align,i=void 0===r?"center":r,o=e.sideOffset,a=void 0===o?8:o,s=e.alignOffset,l=void 0===s?0:s,u=qa();return(0,to.jsx)(NT,{dir:"ltr",container:u,children:(0,to.jsx)(DT,{className:"tlui-popover__content",side:t,sideOffset:a,align:i,alignOffset:l,dir:"ltr",children:n})})},KT=(0,_e.memo)(function(){var s=mb(),e=qa(),t=function(){var e=_e.useContext(fP);if(!e)throw new Error("useActionsMenuSchema must be used inside of a ActionsMenuSchemaProvider.");return e}(),l=SP();return(0,to.jsxs)(BT,{id:"actions menu",children:[(0,to.jsx)(FT,{children:(0,to.jsx)(Cb,{className:"tlui-menu__trigger","data-testid":"main.action-menu",icon:"dots-vertical",title:s("actions-menu.title"),smallIcon:!0})}),(0,to.jsx)(NT,{dir:"ltr",container:e,children:(0,to.jsx)(DT,{className:"tlui-popover__content",side:"bottom",dir:"ltr",sideOffset:6,children:(0,to.jsx)("div",{className:"tlui-actions-menu tlui-button-grid__four",children:t.map(function(e){if(l&&!e.readonlyOk)return null;if("item"===e.type){var t=e.actionItem,n=t.id,r=t.icon,i=t.label,o=t.kbd,a=t.onSelect;return(0,to.jsx)(Cb,{className:"tlui-button-grid__button","data-testid":"menu-item.".concat(e.id),icon:r,title:i?o?"".concat(s(i)," ").concat(_b(o)):"".concat(s(i)):o?"".concat(_b(o)):"",onClick:function(){return a("actions-menu")},disabled:e.disabled},n)}})})})})]})}),VT=po(function(){var e=mo(),t=GE(),n=mb(),r=t.duplicate,i=e.selectedIds.length<=0;return(0,to.jsx)(Cb,{icon:r.icon,onClick:function(){return r.onSelect("quick-actions")},disabled:i,title:"".concat(n(r.label)," ").concat(_b(r.kbd)),smallIcon:!0})}),WT=_e.memo(function(){var e=mb();return(0,to.jsxs)(XS,{id:"main menu",children:[(0,to.jsx)(qS,{children:(0,to.jsx)(Cb,{className:"tlui-menu__trigger","data-testid":"main.menu",title:e("menu.title"),icon:"menu"})}),(0,to.jsx)($S,{alignOffset:0,sideOffset:6,children:(0,to.jsx)(HT,{})})]})});function HT(){var t=mo(),h=mb(),e=function(){var e=_e.useContext(MP);if(!e)throw new Error("useMenuSchema must be used inside of a TLUiMenuSchemaProvider.");return e}(),v=cP(),g=SP();return(0,to.jsx)(to.Fragment,{children:e.map(function(e){return function t(n,r,e,i){switch(r.type){case"custom":return g&&!r.readonlyOk?null:"LANGUAGE_MENU"===r.id?(0,to.jsx)(ZP,{},"item"):null;case"group":return g&&!r.readonlyOk?null:(0,to.jsx)(JS,{size:i<=1?"medium":v<3||"submenu"===(null==e?void 0:e.type)&&2<i?"tiny":"medium",children:r.children.map(function(e){return t(n,e,r,i+1)})},r.id);case"submenu":return g&&!r.readonlyOk?null:(0,to.jsxs)(GS,{id:"main menu ".concat(e?e.id+" ":"").concat(r.id),children:[(0,to.jsx)(QS,{label:r.label,"data-testid":"menu-item.".concat(r.id)}),(0,to.jsx)(ZS,{sideOffset:-4,alignOffset:-1,children:r.children.map(function(e){return t(n,e,r,i+1)})})]},r.id);case"item":if(g&&!r.readonlyOk)return null;var o=r.actionItem,a=o.id,s=o.checkbox,l=o.menuLabel,u=o.label,c=o.onSelect,d=o.kbd,f=null!=l?l:u,p=f?h(f):void 0;return s?(0,to.jsxs)(t_,{onSelect:function(){return c("menu")},title:p||"",checked:r.checked,disabled:r.disabled,children:[p&&(0,to.jsx)("span",{children:p}),d&&(0,to.jsx)(Eb,{children:d})]},a):(0,to.jsx)(e_,{"data-testid":"menu-item.".concat(r.id),kbd:d,label:f,onClick:function(){return c("menu")},disabled:r.disabled},a)}}(t,e,null,0)})})}var YT=function(e){var t=e.name,n=e.id,r=e.isCurrentPage,i=mo(),o=(0,_e.useRef)(null),a=(0,_e.useCallback)(function(e){i.renamePage(n,e||"New Page",!0)},[i,n]),s=(0,_e.useCallback)(function(e){i.mark("rename page"),i.renamePage(n,e||"New Page",!1)},[i,n]);return(0,to.jsx)(Q_,{className:"tlui-page-menu__item__input",ref:function(e){return o.current=e},defaultValue:t,onValueChange:a,onComplete:s,onCancel:s,shouldManuallyMaintainScrollPositionWhenFocused:!0,autofocus:r,autoselect:!0})},XT=function(e,t,n,r){var i,o=e.pages,a=r<n?o[r-1]:o[r],s=r<n?o[r]:o[r+1];(i=a&&!s?ee(a.index):!a&&s?f(void 0,o[0].index,1)[0]:L(a.index,s.index))!==o[n].index&&(e.mark("moving page"),e.updatePage({id:t,index:i}))},qT=po(function(e){var t=e.index,n=e.listSize,r=e.item,i=e.onRename,o=mo(),a=mb(),s=o.pages,l=(0,_e.useCallback)(function(){o.mark("creating page");var e=mn.createId();o.duplicatePage(r.id,e)},[o,r]),u=(0,_e.useCallback)(function(){XT(o,r.id,t,t-1)},[o,r,t]),c=(0,_e.useCallback)(function(){XT(o,r.id,t,t+1)},[o,r,t]),d=(0,_e.useCallback)(function(){o.mark("deleting page"),o.deletePage(r.id)},[o,r]);return(0,to.jsxs)(XS,{id:"page item submenu ".concat(t),children:[(0,to.jsx)(qS,{children:(0,to.jsx)(Cb,{title:a("page-menu.submenu.title"),icon:"dots-vertical"})}),(0,to.jsxs)($S,{alignOffset:0,children:[(0,to.jsxs)(JS,{children:[i&&(0,to.jsx)(OS,{dir:"ltr",onSelect:i,asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button",label:"page-menu.submenu.rename"})}),(0,to.jsx)(OS,{dir:"ltr",onSelect:l,disabled:40<=s.length,asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button",label:"page-menu.submenu.duplicate-page"})}),0<t&&(0,to.jsx)(OS,{dir:"ltr",onSelect:u,asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button",label:"page-menu.submenu.move-up"})}),t<n-1&&(0,to.jsx)(OS,{dir:"ltr",onSelect:c,asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button",label:"page-menu.submenu.move-down"})})]}),1<n&&(0,to.jsx)(JS,{children:(0,to.jsx)(OS,{dir:"ltr",onSelect:d,asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button",label:"page-menu.submenu.delete"})})})]})]})}),$T=function(){var o=mo(),i=mb(),a=cP(),e=Ce(VS("page-menu",(0,_e.useCallback)(function(){return v(!1)},[])),2),t=e[0],n=e[1],p=a<5?36:40,s=(0,_e.useRef)(null),h=ho("pages",function(){return o.pages},[o]),l=ho("currentPage",function(){return o.currentPage},[o]),u=ho("isReadonlyMode",function(){return o.isReadOnly},[o]),r=ho("maxPageCountReached",function(){return 40<=o.pages.length},[o]),c=ho("isCoarsePointer",function(){return o.isCoarsePointer},[o]),d=Ce((0,_e.useState)(!1),2),f=d[0],v=d[1],g=(0,_e.useCallback)(function(){u||v(function(e){return!e})},[u]),m=(0,_e.useRef)({isPointing:!1,status:"idle",pointing:null,startY:0,startIndex:0,dragIndex:0}),y=Ce((0,_e.useState)(Object.fromEntries(h.map(function(e,t){return[e.id,{y:t*p,offsetY:0,isSelected:!1}]}))),2),b=y[0],w=y[1];(0,_e.useLayoutEffect)(function(){w(Object.fromEntries(h.map(function(e,t){return[e.id,{y:t*p,offsetY:0,isSelected:!1}]})))},[p,h]),(0,_e.useEffect)(function(){t&&requestAnimationFrame(function(){var e=document.querySelector('[data-testid="page-menu-item-'.concat(l.id,'"]'));if(e){var t=s.current;if(!t)return;var n=e.offsetTop;n<t.scrollTop&&t.scrollTo({top:n});var r=n+p;r>t.scrollTop+t.offsetHeight&&t.scrollTo({top:r-t.offsetHeight})}})},[p,l,t]);var x=(0,_e.useCallback)(function(e){var t=e.clientY,n=e.currentTarget.dataset,r=n.id,i=n.index;if(r&&i){var o=m.current;e.currentTarget.setPointerCapture(e.pointerId),o.status="pointing",o.pointing={id:r,index:+i};var a=b[r].y;o.startY=t,o.startIndex=Math.max(0,Math.min(Math.round(a/p),h.length-1))}},[p,h.length,b]),k=(0,_e.useCallback)(function(e){var t=m.current;if("pointing"===t.status){var n=e.clientY-t.startY;5<Math.abs(n)&&(t.status="dragging")}if("dragging"===t.status){var r=e.clientY-t.startY,i=b[t.pointing.id],o=t.startIndex,a=t.pointing,s=i.y+r,l=Math.max(0,Math.min(Math.round(s/p),h.length-1)),u=Pe({},b);if(u[a.id]={y:i.y,offsetY:r,isSelected:!0},l!==t.dragIndex){t.dragIndex=l;for(var c=0;c<h.length;c++){var d=h[c];if(d.id!==t.pointing.id){var f=u[d.id].y;l===o?f=c*p:l<o?f=l<=c&&c<o?(c+1)*p:c*p:o<l&&(f=c<=l&&o<c?(c-1)*p:c*p),f!==u[d.id].y&&(u[d.id]={y:f,offsetY:0,isSelected:!0})}}}w(u)}},[p,h,b]),S=(0,_e.useCallback)(function(e){var t=m.current;if("dragging"===t.status){var n=t.pointing,r=n.id,i=n.index;XT(o,r,i,t.dragIndex)}e.currentTarget.releasePointerCapture(e.pointerId),t.status="idle"},[o]),_=(0,_e.useCallback)(function(e){var t=m.current;"Escape"===e.key&&("dragging"===t.status&&w(Object.fromEntries(h.map(function(e,t){return[e.id,{y:t*p,offsetY:0,isSelected:!1}]}))),t.status="idle")},[p,h]),E=(0,_e.useCallback)(function(){if(!u){o.mark("creating page");var e=mn.createId();o.createPage(i("page-menu.new-page-initial-name"),e),v(!0)}},[o,i,u]);return(0,to.jsxs)(BT,{id:"page menu",onOpenChange:n,open:t,children:[(0,to.jsx)(FT,{children:(0,to.jsx)(Cb,{className:"tlui-page-menu__trigger tlui-menu__trigger","data-testid":"main.page-menu",icon:"chevron-down",title:l.name,children:(0,to.jsx)("div",{className:"tlui-page-menu__name",children:l.name})})}),(0,to.jsx)(UT,{side:"bottom",align:"start",sideOffset:6,children:(0,to.jsxs)("div",{className:"tlui-page-menu__wrapper",children:[(0,to.jsxs)("div",{className:"tlui-page-menu__header",children:[(0,to.jsx)("div",{className:"tlui-page-menu__header__title",children:i("page-menu.title")}),!u&&(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(Cb,{"data-testid":"page-menu.edit",title:i(f?"page-menu.edit-done":"page-menu.edit-start"),icon:f?"check":"edit",onClick:g}),(0,to.jsx)(Cb,{"data-testid":"page-menu.create",icon:"plus",title:i(r?"page-menu.max-page-count-reached":"page-menu.create-new-page"),disabled:r,onClick:E})]})]}),(0,to.jsx)("div",{className:"tlui-page-menu__list tlui-menu__group",style:{height:p*h.length+4},ref:s,children:h.map(function(t,e){var n,r=null!==(n=b[t.id])&&void 0!==n?n:{position:40*e,offsetY:0};return f?(0,to.jsxs)("div",{"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page_menu__item__sortable",style:{zIndex:t.id===l.id?888:e,transform:"translate(0px, ".concat(r.y+r.offsetY,"px)")},children:[(0,to.jsx)(Cb,{tabIndex:-1,className:"tlui-page_menu__item__sortable__handle",icon:"drag-handle-dots",onPointerDown:x,onPointerUp:S,onPointerMove:k,onKeyDown:_,"data-id":t.id,"data-index":e}),a<5&&c?(0,to.jsx)(Cb,{className:"tlui-page-menu__item__button",onClick:function(){var e=window.prompt("Rename page",t.name);e&&e!==t.name&&o.renamePage(t.id,e)},onDoubleClick:g,isChecked:t.id===l.id,children:(0,to.jsx)("span",{children:t.name})}):(0,to.jsx)("div",{id:"page-menu-item-".concat(t.id),"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page_menu__item__sortable__title",style:{height:p},children:(0,to.jsx)(YT,{id:t.id,name:t.name,isCurrentPage:t.id===l.id})}),!u&&(0,to.jsx)("div",{className:"tlui-page_menu__item__submenu","data-isediting":f,children:(0,to.jsx)(qT,{index:e,item:t,listSize:h.length})})]},t.id+"_editing"):(0,to.jsxs)("div",{"data-testid":"page-menu-item-".concat(t.id),className:"tlui-page-menu__item",children:[(0,to.jsxs)(Cb,{className:"tlui-page-menu__item__button tlui-page-menu__item__button__checkbox",onClick:function(){return o.setCurrentPageId(t.id)},onDoubleClick:g,isChecked:t.id===l.id,title:i("page-menu.go-to-page"),children:[(0,to.jsx)("div",{className:"tlui-page-menu__item__button__check",children:t.id===l.id&&(0,to.jsx)(wb,{icon:"check"})}),(0,to.jsx)("span",{children:t.name})]}),!u&&(0,to.jsx)("div",{className:"tlui-page_menu__item__submenu",children:(0,to.jsx)(qT,{index:e,item:t,listSize:h.length,onRename:function(){if(o.isIos){var e=window.prompt("Rename page",t.name);e&&e!==t.name&&o.renamePage(t.id,e)}else v(!0),o.setCurrentPageId(t.id)}})})]},t.id)})})]})})]})},GT=(0,_e.memo)(function(){var e=mb(),t=IP(),n=GE().redo;return(0,to.jsx)(Cb,{"data-testid":"main.redo",icon:n.icon,title:"".concat(e(n.label)," ").concat(_b(n.kbd)),disabled:!t,onClick:function(){return n.onSelect("quick-actions")},smallIcon:!0})}),QT=po(function(){var e=mo(),t=GE(),n=mb(),r=t.delete;if(SP())return null;var i=e.selectedIds.length<=0;return(0,to.jsx)(Cb,{icon:r.icon,onClick:function(){return r.onSelect("quick-actions")},disabled:i,title:"".concat(n(r.label)," ").concat(_b(r.kbd)),smallIcon:!0})}),ZT=(0,_e.memo)(function(){var e=mb(),t=TP(),n=GE().undo;return(0,to.jsx)(Cb,{"data-testid":"main.undo",icon:n.icon,title:"".concat(e(n.label)," ").concat(_b(n.kbd)),disabled:!t,onClick:function(){return n.onSelect("quick-actions")},smallIcon:!0})}),JT=po(function(){var e=mo(),t=cP(),n=!SP()&&!e.isInAny("hand","zoom","eraser");return(0,to.jsx)("div",{className:"tlui-menu-zone",children:(0,to.jsxs)("div",{className:"tlui-menu-zone__controls",children:[(0,to.jsx)(WT,{}),(0,to.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,to.jsx)($T,{}),6<=t&&n&&(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("div",{className:"tlui-menu-zone__divider"}),(0,to.jsx)(ZT,{}),(0,to.jsx)(GT,{}),(0,to.jsx)(QT,{}),(0,to.jsx)(VT,{}),(0,to.jsx)(KT,{})]})]})})}),eM=function(){function oe(e,t){var ie=this;z(this,oe),Ee(this,"colors",{shapeFill:"rgba(144, 144, 144, .1)",selectFill:"#2f80ed",viewportFill:"rgba(144, 144, 144, .1)"}),Ee(this,"id",ac()),Ee(this,"cvs",null),Ee(this,"pageBounds",[]),Ee(this,"collaborators",[]),Ee(this,"canvasScreenBounds",new $o),Ee(this,"canvasPageBounds",new $o),Ee(this,"contentPageBounds",new $o),Ee(this,"contentScreenBounds",new $o),Ee(this,"originPagePoint",new xo),Ee(this,"originPageCenter",new xo),Ee(this,"isInViewport",!1),Ee(this,"debug",!1),Ee(this,"updateContentScreenBounds",function(){var e=ie.contentScreenBounds,t=ie.contentPageBounds,n=ie.canvasScreenBounds,r=e.x,i=e.y,o=e.w,a=e.h;if(t.w>t.h){var s=n.w/(t.w/t.h);a=s>n.h?(r=(n.w-n.w*(n.h/s))/2,i=0,o=n.w*(n.h/s),n.h):(r=0,i=(n.h-s)/2,o=n.w,s)}else if(t.w<t.h){var l=n.h/(t.h/t.w);r=(n.w-l)/2,i=0,o=l,a=n.h}else r=n.h/2,i=0,o=n.h,a=n.h;e.set(r,i,o,a)}),Ee(this,"updateCanvasPageBounds",function(){var e=ie.canvasPageBounds,t=ie.canvasScreenBounds,n=ie.contentPageBounds,r=ie.contentScreenBounds;e.set(0,0,n.width/(r.width/t.width),n.height/(r.height/t.height)),e.center=n.center}),Ee(this,"getScreenPoint",function(e,t){var n=ie.canvasScreenBounds;return{x:(e-n.minX)*ie.dpr,y:(t-n.minY)*ie.dpr}}),Ee(this,"getPagePoint",function(e,t){var n=ie.contentPageBounds,r=ie.contentScreenBounds,i=ie.canvasPageBounds,o=ie.getScreenPoint(e,t),a=o.x,s=o.y;return{x:i.minX+a*n.width/r.width,y:i.minY+s*n.height/r.height,z:1}}),Ee(this,"minimapScreenPointToPagePoint",function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=ie.editor.viewportPageBounds,o=ie.getPagePoint(e,t),a=o.x,s=o.y;if(r){var l,u,c,d,f=ie.editor.allShapesCommonBounds,p=i,h=(null!==(l=null==f?void 0:f.minX)&&void 0!==l?l:0)-p.width/2,v=(null!==(u=null==f?void 0:f.maxX)&&void 0!==u?u:0)+p.width/2,g=(null!==(c=null==f?void 0:f.minY)&&void 0!==c?c:0)-p.height/2,m=(null!==(d=null==f?void 0:f.maxY)&&void 0!==d?d:0)+p.height/2,y=Math.max(0,h+p.width-a),b=Math.max(0,-(v-p.width-a)),w=Math.max(0,g+p.height-s),x=Math.max(0,-(m-p.height-s)),k=Math.max(0,y-b),S=Math.max(0,b-y),_=Math.max(0,w-x),E=Math.max(0,x-w);k&&S<k?a+=k/2:S&&(a-=S/2),_&&E<_?s+=_/2:E&&(s-=E/2),a=Io(a,h,v),s=Io(s,g,m)}if(n){var P=ie.originPagePoint;Math.abs(a-P.x)>Math.abs(s-P.y)?s=P.y:a=P.x}return{x:a,y:s}}),Ee(this,"render",function(){var e=ie.cvs,t=ie.pageBounds;ie.updateCanvasPageBounds();var n=ie.editor,r=ie.canvasScreenBounds,i=ie.canvasPageBounds,o=ie.contentPageBounds,a=ie.contentScreenBounds,s=r.width,l=r.height,u=n.viewportPageBounds,c=n.selectedIds;if(e&&t){var d=e.getContext("2d");if(!d)throw new Error("Minimap (shapes): Could not get context");d.resetTransform(),d.globalAlpha=1,d.clearRect(0,0,s,l);var f=a.width/o.width,p=a.height/o.height;d.translate((s-a.width)/2,(l-a.height)/2),d.scale(f,p),d.translate(-o.minX,-o.minY);for(var h,v=8/f,g=8/f,m=1/f,y=1/f,b=v/4,w=g/4,x=new Path2D,k=new Path2D,S=ie.colors,_=S.shapeFill,E=S.selectFill,P=S.viewportFill,C=0,I=t.length;C<I;C++)h=t[C],oe.roundedRect(c.includes(h.id)?k:x,h.minX,h.minY,h.width,h.height,Io(v,m,h.width/b),Io(g,y,h.height/w));if(d.fillStyle=_,d.fill(x),d.fillStyle=E,d.fill(k),ie.debug){var T=$o.Common(t),M=T.minX,A=T.minY,j=T.width,O=T.height;d.strokeStyle="green",d.lineWidth=2/f,d.strokeRect(M+1/f,A+1/p,j-2/f,O-2/p)}var L=n.brush;if(L){var z=L.x,R=L.y,N=L.w,D=L.h;d.beginPath(),oe.sharpRect(d,z,R,N,D),d.closePath(),d.fillStyle=P,d.fill()}var B=u.minX,F=u.minY,U=u.width,K=u.height;d.beginPath();var V=12/f,W=12/f;oe.roundedRect(d,B,F,U,K,Math.min(U/4,V),Math.min(K/4,W)),d.closePath(),d.fillStyle=P,d.fill(),ie.debug&&(d.strokeStyle="orange",d.strokeRect(B+1/f,F+1/p,U-2/f,K-2/p));for(var H,Y=2.5/f,X=2.5/p,q=n.currentPageId,$=0;$<ie.collaborators.length;$++)(H=ie.collaborators[$]).currentPageId===q&&(d.beginPath(),d.ellipse(Io(H.cursor.x,i.minX+Y,i.maxX-Y),Io(H.cursor.y,i.minY+X,i.maxY-X),5/f,5/p,0,0,Eo),d.fillStyle=H.color,d.fill());if(ie.debug){d.lineWidth=2/f;var G=o.minX,Q=o.minY,Z=o.width,J=o.height;d.strokeStyle="red",d.strokeRect(G+1/f,Q+1/p,Z-2/f,J-2/p);var ee=i.minX,te=i.minY,ne=i.width,re=i.height;d.strokeStyle="blue",d.strokeRect(ee+1/f,te+1/p,ne-2/f,re-2/p)}}}),this.editor=e,this.dpr=t}return P(oe,[{key:"setDpr",value:function(e){this.dpr=+e.toFixed(2)}}],[{key:"roundedRect",value:function(e,t,n,r,i,o,a){o<1&&a<1?e.rect(t,n,r,i):(e.moveTo(t+o,n),e.lineTo(t+r-o,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+i-a),e.quadraticCurveTo(t+r,n+i,t+r-o,n+i),e.lineTo(t+o,n+i),e.quadraticCurveTo(t,n+i,t,n+i-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+o,n))}},{key:"sharpRect",value:function(e,t,n,r,i,o,a){e.rect(t,n,r,i)}}]),oe}(),tM=po(function(e){var t=e.shapeFill,n=e.selectFill,r=e.viewportFill,c=mo(),o=_e.useRef(null),i=qa(),d=_e.useRef(!1),f=_e.useMemo(function(){return new eM(c,c.devicePixelRatio)},[c]),a=c.isDarkMode;_e.useEffect(function(){var e=requestAnimationFrame(function(){var e=getComputedStyle(i);f.colors={shapeFill:e.getPropertyValue(t).trim(),selectFill:e.getPropertyValue(n).trim(),viewportFill:e.getPropertyValue(r).trim()},f.render()});return function(){cancelAnimationFrame(e)}},[i,n,t,r,f,a]);var s=_e.useCallback(function(e){if(c.currentPageShapeIds.size){var t=f.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),n=t.x,r=t.y,i=f.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0);f.originPagePoint.setTo(i),f.originPageCenter.setTo(c.viewportPageBounds.center),c.centerOnPoint(n,r,{duration:rs})}},[c,f]),l=_e.useCallback(function(e){if(e.currentTarget.setPointerCapture(e.pointerId),c.currentPageShapeIds.size){d.current=!0,f.isInViewport=!1;var t=f.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!1),n=t.x,r=t.y,i=f.minimapScreenPointToPagePoint(e.clientX,e.clientY,!1,!0),o=c.viewportPageBounds;f.originPagePoint.setTo(i),f.originPageCenter.setTo(o.center),f.isInViewport=o.containsPoint(i),f.isInViewport||c.centerOnPoint(n,r,{duration:rs})}},[c,f]),u=_e.useCallback(function(e){if(d.current){var t=f.minimapScreenPointToPagePoint(e.clientX,e.clientY,e.shiftKey,!0),n=t.x,r=t.y;if(f.isInViewport){var i=xo.Sub({x:n,y:r},f.originPagePoint),o=xo.Add(f.originPageCenter,i);return void c.centerOnPoint(o.x,o.y)}c.centerOnPoint(n,r)}var a,s=f.getPagePoint(e.clientX,e.clientY),l=c.pageToScreen(s.x,s.y),u=Pe(Pe({type:"pointer",target:"canvas",name:"pointer_move"},((a=e).isKilled=!0,{point:{x:a.clientX,y:a.clientY,z:a.pressure},shiftKey:a.shiftKey,altKey:a.altKey,ctrlKey:a.metaKey||a.ctrlKey,pointerId:a.pointerId,button:a.button,isPen:"pen"===a.pointerType})),{},{point:l,isPen:c.isPenMode});c.dispatch(u)},[c,f]),p=_e.useCallback(function(e){d.current=!1},[]),h=_e.useCallback(function(e){var t=jl(e);c.dispatch({type:"wheel",name:"wheel",delta:t,shiftKey:e.shiftKey,altKey:e.altKey,ctrlKey:e.metaKey||e.ctrlKey})},[c]);Bl("update dpr",function(){var e=c.devicePixelRatio;f.setDpr(e);var t=o.current,n=t.getBoundingClientRect(),r=n.width*e,i=n.height*e;t.width=r,t.height=i,f.canvasScreenBounds.set(n.x,n.y,r,i),f.cvs=o.current},[c,f]);var v=_e.useMemo(function(){return c.store.query.records("instance_presence")},[c]);return Bl("minimap render when pagebounds or collaborators changes",function(){c.devicePixelRatio;var e=c.viewportPageBounds,t=c.allShapesCommonBounds;f.contentPageBounds=t?$o.Expand(t,e):e,f.updateContentScreenBounds();var i=[];c.currentPageShapeIds.forEach(function(e){var t=c.getPageBoundsById(e),n=c.getPageMaskById(e);if(n){var r=ba(n,t.corners);if(!r)return;t=$o.FromPoints(r)}t&&(t.id=e,i.push(t))}),f.pageBounds=i,f.collaborators=v.value,f.render()},[c,f]),(0,to.jsx)("div",{className:"tlui-minimap",children:(0,to.jsx)("canvas",{ref:o,className:"tlui-minimap__canvas",onDoubleClick:s,onPointerMove:u,onPointerDown:l,onPointerUp:p,onWheel:h})})}),nM=po(function(){var e=mo(),t=mb(),n=cP(),r=e.zoomLevel,i=0<e.currentPageShapeIds.size,o=0<e.selectedIds.length,a=1===e.zoomLevel,s=_e.useCallback(function(){e.resetZoom(e.viewportScreenCenter,{duration:rs})},[e]);return(0,to.jsxs)(XS,{id:"zoom",children:[(0,to.jsx)(qS,{children:(0,to.jsx)(Cb,{title:"".concat(t("navigation-zone.zoom")),"data-testid":"minimap.zoom-menu",className:n<5?"tlui-zoom-menu__button":"tlui-zoom-menu__button__pct",onDoubleClick:s,icon:n<4?"zoom-in":void 0,children:n<4?null:(0,to.jsxs)("span",{style:{flexGrow:0,textAlign:"center"},children:[Math.floor(100*r),"%"]})})}),(0,to.jsx)($S,{side:"top",align:"start",alignOffset:0,children:(0,to.jsxs)(JS,{children:[(0,to.jsx)(rM,{action:"zoom-in","data-testid":"minimap.zoom-menu.zoom-in",noClose:!0}),(0,to.jsx)(rM,{action:"zoom-out","data-testid":"minimap.zoom-menu.zoom-out",noClose:!0}),(0,to.jsx)(rM,{action:"zoom-to-100","data-testid":"minimap.zoom-menu.zoom-to-100",noClose:!0,disabled:a}),(0,to.jsx)(rM,{action:"zoom-to-fit",disabled:!i,"data-testid":"minimap.zoom-menu.zoom-to-fit",noClose:!0}),(0,to.jsx)(rM,{action:"zoom-to-selection",disabled:!o,"data-testid":"minimap.zoom-menu.zoom-to-selection",noClose:!0})]})})]})});function rM(e){var t=e.action,n=e.disabled,r=void 0!==n&&n,i=e.noClose,o=void 0!==i&&i,a=GE();return(0,to.jsx)(e_,{label:a[t].label,kbd:a[t].kbd,"data-testid":e["data-testid"],onClick:function(){return a[t].onSelect("zoom-menu")},noClose:o,disabled:r})}var iM=(0,_e.memo)(function(){var r,e,t,i,n=GE(),o=mb(),a=cP(),s=Ce((r="minimap",e=Ce(_e.useState(!0),2),t=e[0],i=e[1],_e.useLayoutEffect(function(){var e=localStorage.getItem(r);if(e)try{i(JSON.parse(e))}catch(e){console.error("Could not restore value ".concat(r," from local storage."))}},[r]),[t,_e.useCallback(function(n){i(function(e){var t="function"==typeof n?n(e):n;return localStorage.setItem(r,JSON.stringify(t)),t})},[r])]),2),l=s[0],u=s[1],c=(0,_e.useCallback)(function(){u(function(e){return!e})},[u]);return a<4?null:(0,to.jsxs)("div",{className:"tlui-navigation-zone",children:[(0,to.jsx)("div",{className:"tlui-navigation-zone__controls",children:a<6?(0,to.jsx)(nM,{}):l?(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(nM,{}),(0,to.jsx)(Cb,{title:o("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle","data-testid":"minimap.toggle",onClick:c,icon:l?"chevrons-ne":"chevrons-sw"})]}):(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(Cb,{icon:"minus","data-testid":"minimap.zoom-out",title:"".concat(o(n["zoom-out"].label)," ").concat(_b(n["zoom-out"].kbd)),onClick:function(){return n["zoom-out"].onSelect("navigation-zone")}}),(0,to.jsx)(nM,{}),(0,to.jsx)(Cb,{icon:"plus","data-testid":"minimap.zoom-in",title:"".concat(o(n["zoom-in"].label)," ").concat(_b(n["zoom-in"].kbd)),onClick:function(){return n["zoom-in"].onSelect("navigation-zone")}}),(0,to.jsx)(Cb,{title:o("navigation-zone.toggle-minimap"),className:"tlui-navigation-zone__toggle",onClick:c,icon:l?"chevrons-ne":"chevrons-sw"})]})}),6<=a&&!l&&(0,to.jsx)(tM,{viewportFill:"--color-muted-1",selectFill:"--color-selected",shapeFill:"--color-text-3"})]})}),oM=po(function(){var e=mo().isPenMode,t=GE();if(!e)return null;var n=t["exit-pen-mode"];return(0,to.jsx)(Cb,{label:n.label,iconLeft:n.icon,onClick:function(){return n.onSelect("helper-buttons")}})}),aM=po(function(){var e=mo(),t=GE();if(!e.instanceState.followingUserId)return null;var n=t["stop-following"];return(0,to.jsx)(Cb,{label:n.label,iconLeft:n.icon,onClick:function(){return n.onSelect("people-menu")}})}),sM=_e.memo(function(e){var t=e.uiType,n=e.items,r=e.title,i=e.style,o=e.value,a=e.columns,s=void 0===a?Io(n.length,2,4):a,l=e.onValueChange,u=mo(),c=mb(),d=(0,_e.useRef)(!1),f=_e.useMemo(function(){var n=function e(){d.current=!1,window.removeEventListener("pointerup",e)};return{handleButtonClick:function(e){var t=e.currentTarget.dataset.id;"shared"===o.type&&o.value===t||(u.mark("point picker item"),l(i,t,!1))},handleButtonPointerDown:function(e){var t=e.currentTarget.dataset.id;u.mark("point picker item"),l(i,t,!0),d.current=!0,window.addEventListener("pointerup",n)},handleButtonPointerEnter:function(e){if(d.current){var t=e.currentTarget.dataset.id;l(i,t,!0)}},handleButtonPointerUp:function(e){var t=e.currentTarget.dataset.id;l(i,t,!1)}}},[o,u,l,i]),p=f.handleButtonClick,h=f.handleButtonPointerDown,v=f.handleButtonPointerEnter,g=f.handleButtonPointerUp;return(0,to.jsx)("div",{className:so("tlui-button-grid",{"tlui-button-grid__two":2===s,"tlui-button-grid__three":3===s,"tlui-button-grid__four":4===s}),children:n.map(function(e){return(0,to.jsx)(Cb,{"data-id":e.value,"data-testid":"style.".concat(t,".").concat(e.value),"aria-label":e.value,"data-state":"shared"===o.type&&o.value===e.value?"hinted":void 0,title:r+" — "+c("".concat(t,"-style.").concat(e.value)),className:so("tlui-button-grid__button"),style:i===Hr?{color:"var(--palette-".concat(e.value,")")}:void 0,onPointerEnter:v,onPointerDown:h,onPointerUp:g,onClick:p,icon:e.icon},e.value)})})});function lM(e,t){var n=Ce(t,2),r=n[0],i=n[1];return Math.min(i,Math.max(r,e))}var uM=["name","min","max","step","orientation","disabled","minStepsBetweenThumbs","defaultValue","value","onValueChange","onValueCommit","inverted"],cM=["min","max","dir","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],dM=["min","max","inverted","onSlideStart","onSlideMove","onSlideEnd","onStepKeyDown"],fM=["__scopeSlider","onSlideStart","onSlideMove","onSlideEnd","onHomeKeyDown","onEndKeyDown","onStepKeyDown"],pM=["__scopeSlider"],hM=["__scopeSlider"],vM=["__scopeSlider","index"],gM=["value"],mM=["PageUp","PageDown"],yM=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],bM={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},wM="Slider",xM=Ce(Lb(wM),3),kM=xM[0],SM=xM[1],_M=xM[2],EM=Ce(tm(wM,[_M]),2),PM=EM[0],CM=(EM[1],Ce(PM(wM),2)),IM=CM[0],TM=CM[1],MM=(0,_e.forwardRef)(function(e,t){var n=e.name,r=e.min,l=void 0===r?0:r,i=e.max,u=void 0===i?100:i,o=e.step,c=void 0===o?1:o,a=e.orientation,s=void 0===a?"horizontal":a,d=e.disabled,f=void 0!==d&&d,p=e.minStepsBetweenThumbs,h=void 0===p?0:p,v=e.defaultValue,g=void 0===v?[l]:v,m=e.value,y=e.onValueChange,b=void 0===y?function(){}:y,w=e.onValueCommit,x=void 0===w?function(){}:w,k=e.inverted,S=void 0!==k&&k,_=Gt(e,uM),E=Ce((0,_e.useState)(null),2),P=E[0],C=E[1],I=Zg(t,function(e){return C(e)}),T=(0,_e.useRef)(new Set),M=(0,_e.useRef)(0),A="horizontal"===s,j=!P||Boolean(P.closest("form")),O=A?LM:zM,L=Ce(sm({prop:m,defaultProp:g,onChange:function(e){var t;null===(t=de(T.current)[M.current])||void 0===t||t.focus(),b(e)}}),2),z=L[0],R=void 0===z?[]:z,N=L[1],D=(0,_e.useRef)(R);function B(e,n){var t,r,i,o=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{commit:!1}).commit,a=(String(c).split(".")[1]||"").length,s=lM((t=Math.round((e-l)/c)*c+l,r=a,i=Math.pow(10,r),Math.round(t*i)/i),[l,u]);N(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,r=de(e);return r[n]=t,r.sort(function(e,t){return e-t})}(e,s,n);if(function(e,t){if(0<t){var n=(r=i).slice(0,-1).map(function(e,t){return r[t+1]-e});return Math.min.apply(Math,de(n))>=t}var r;return!0}(0,h*c)){M.current=i.indexOf(s);var t=String(i)!==String(e);return t&&o&&x(i),t?i:e}return e})}return(0,_e.createElement)(IM,{scope:e.__scopeSlider,disabled:f,min:l,max:u,valueIndexToChangeRef:M,thumbs:T.current,values:R,orientation:s},(0,_e.createElement)(kM.Provider,{scope:e.__scopeSlider},(0,_e.createElement)(kM.Slot,{scope:e.__scopeSlider},(0,_e.createElement)(O,$g({"aria-disabled":f,"data-disabled":f?"":void 0},_,{ref:I,onPointerDown:Gg(_.onPointerDown,function(){f||(D.current=R)}),min:l,max:u,inverted:S,onSlideStart:f?void 0:function(e){B(e,function(e,t){if(1===e.length)return 0;var n=e.map(function(e){return Math.abs(e-t)}),r=Math.min.apply(Math,de(n));return n.indexOf(r)}(R,e))},onSlideMove:f?void 0:function(e){B(e,M.current)},onSlideEnd:f?void 0:function(){var e=D.current[M.current];R[M.current]!==e&&x(R)},onHomeKeyDown:function(){return!f&&B(l,0,{commit:!0})},onEndKeyDown:function(){return!f&&B(u,R.length-1,{commit:!0})},onStepKeyDown:function(e){var t=e.event,n=e.direction;if(!f){var r=mM.includes(t.key)||t.shiftKey&&yM.includes(t.key)?10:1,i=M.current;B(R[i]+c*r*n,i,{commit:!0})}}})))),j&&R.map(function(e,t){return(0,_e.createElement)(VM,{key:t,name:n?n+(1<R.length?"[]":""):void 0,value:e})}))}),AM=Ce(PM(wM,{startEdge:"left",endEdge:"right",size:"width",direction:1}),2),jM=AM[0],OM=AM[1],LM=(0,_e.forwardRef)(function(e,t){var n=e.min,r=e.max,i=e.dir,o=e.inverted,a=e.onSlideStart,s=e.onSlideMove,l=e.onSlideEnd,u=e.onStepKeyDown,c=Gt(e,cM),d=Ce((0,_e.useState)(null),2),f=d[0],p=d[1],h=Zg(t,function(e){return p(e)}),v=(0,_e.useRef)(),g=Rb(i),m="ltr"===g,y=m&&!o||!m&&o;function b(e){var t=v.current||f.getBoundingClientRect();return HM([0,t.width],y?[n,r]:[r,n])(e-(v.current=t).left)}return(0,_e.createElement)(jM,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width"},(0,_e.createElement)(RM,$g({dir:g,"data-orientation":"horizontal"},c,{ref:h,style:Pe(Pe({},c.style),{},Ee({},"--radix-slider-thumb-transform","translateX(-50%)")),onSlideStart:function(e){var t=b(e.clientX);null==a||a(t)},onSlideMove:function(e){var t=b(e.clientX);null==s||s(t)},onSlideEnd:function(){v.current=void 0,null==l||l()},onStepKeyDown:function(e){var t=bM[y?"from-left":"from-right"].includes(e.key);null==u||u({event:e,direction:t?-1:1})}})))}),zM=(0,_e.forwardRef)(function(e,t){var n=e.min,r=e.max,i=e.inverted,o=e.onSlideStart,a=e.onSlideMove,s=e.onSlideEnd,l=e.onStepKeyDown,u=Gt(e,dM),c=(0,_e.useRef)(null),d=Zg(t,c),f=(0,_e.useRef)(),p=!i;function h(e){var t=f.current||c.current.getBoundingClientRect();return HM([0,t.height],p?[r,n]:[n,r])(e-(f.current=t).top)}return(0,_e.createElement)(jM,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1},(0,_e.createElement)(RM,$g({"data-orientation":"vertical"},u,{ref:d,style:Pe(Pe({},u.style),{},Ee({},"--radix-slider-thumb-transform","translateY(50%)")),onSlideStart:function(e){var t=h(e.clientY);null==o||o(t)},onSlideMove:function(e){var t=h(e.clientY);null==a||a(t)},onSlideEnd:function(){f.current=void 0,null==s||s()},onStepKeyDown:function(e){var t=bM[p?"from-bottom":"from-top"].includes(e.key);null==l||l({event:e,direction:t?-1:1})}})))}),RM=(0,_e.forwardRef)(function(e,t){var n=e.__scopeSlider,r=e.onSlideStart,i=e.onSlideMove,o=e.onSlideEnd,a=e.onHomeKeyDown,s=e.onEndKeyDown,l=e.onStepKeyDown,u=Gt(e,fM),c=TM(wM,n);return(0,_e.createElement)(gm.span,$g({},u,{ref:t,onKeyDown:Gg(e.onKeyDown,function(e){"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(s(e),e.preventDefault()):mM.concat(yM).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:Gg(e.onPointerDown,function(e){var t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),c.thumbs.has(t)?t.focus():r(e)}),onPointerMove:Gg(e.onPointerMove,function(e){e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:Gg(e.onPointerUp,function(e){var t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),o(e))})}))}),NM=(0,_e.forwardRef)(function(e,t){var n=e.__scopeSlider,r=Gt(e,pM),i=TM("SliderTrack",n);return(0,_e.createElement)(gm.span,$g({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},r,{ref:t}))}),DM="SliderRange",BM=(0,_e.forwardRef)(function(e,t){var n,r=e.__scopeSlider,i=Gt(e,hM),o=TM(DM,r),a=OM(DM,r),s=Zg(t,(0,_e.useRef)(null)),l=o.values.length,u=o.values.map(function(e){return WM(e,o.min,o.max)}),c=1<l?Math.min.apply(Math,de(u)):0,d=100-Math.max.apply(Math,de(u));return(0,_e.createElement)(gm.span,$g({"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0},i,{ref:s,style:Pe(Pe({},e.style),{},(n={},Ee(n,a.startEdge,c+"%"),Ee(n,a.endEdge,d+"%"),n))}))}),FM="SliderThumb",UM=(0,_e.forwardRef)(function(e,t){var n=SM(e.__scopeSlider),r=Ce((0,_e.useState)(null),2),i=r[0],o=r[1],a=Zg(t,function(e){return o(e)}),s=(0,_e.useMemo)(function(){return i?n().findIndex(function(e){return e.ref.current===i}):-1},[n,i]);return(0,_e.createElement)(KM,$g({},e,{ref:a,index:s}))}),KM=(0,_e.forwardRef)(function(e,t){var n,r,i,o,a,s,l=e.__scopeSlider,u=e.index,c=Gt(e,vM),d=TM(FM,l),f=OM(FM,l),p=Ce((0,_e.useState)(null),2),h=p[0],v=p[1],g=Zg(t,function(e){return v(e)}),m=Gw(h),y=d.values[u],b=void 0===y?0:WM(y,d.min,d.max),w=(a=u,2<(s=d.values.length)?"Value ".concat(a+1," of ").concat(s):2===s?["Minimum","Maximum"][a]:void 0),x=null==m?void 0:m[f.size],k=x?(n=x,r=b,i=f.direction,((o=n/2)-HM([0,50],[0,o])(r)*i)*i):0;return(0,_e.useEffect)(function(){if(h)return d.thumbs.add(h),function(){d.thumbs.delete(h)}},[h,d.thumbs]),(0,_e.createElement)("span",{style:Ee({transform:"var(--radix-slider-thumb-transform)",position:"absolute"},f.startEdge,"calc(".concat(b,"% + ").concat(k,"px)"))},(0,_e.createElement)(kM.ItemSlot,{scope:e.__scopeSlider},(0,_e.createElement)(gm.span,$g({role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":d.min,"aria-valuenow":y,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0},c,{ref:g,style:void 0===y?{display:"none"}:e.style,onFocus:Gg(e.onFocus,function(){d.valueIndexToChangeRef.current=u})}))))}),VM=function(e){var t,n,i=e.value,r=Gt(e,gM),o=(0,_e.useRef)(null),a=(t=i,n=(0,_e.useRef)({value:t,previous:t}),(0,_e.useMemo)(function(){return n.current.value!==t&&(n.current.previous=n.current.value,n.current.value=t),n.current.previous},[t]));return(0,_e.useEffect)(function(){var e=o.current,t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value").set;if(a!==i&&n){var r=new Event("input",{bubbles:!0});n.call(e,i),e.dispatchEvent(r)}},[a,i]),(0,_e.createElement)("input",$g({style:{display:"none"}},r,{ref:o,defaultValue:i}))};function WM(e,t,n){return lM(100/(n-t)*(e-t),[0,100])}function HM(n,r){return function(e){if(n[0]===n[1]||r[0]===r[1])return r[0];var t=(r[1]-r[0])/(n[1]-n[0]);return r[0]+t*(e-n[0])}}var YM=MM,XM=NM,qM=BM,$M=UM;function GM(e){var t=e.title,n=e.steps,r=e.value,i=e.label,o=e.onValueChange,a=mo(),s=mb(),l=(0,_e.useCallback)(function(e){o(e[0],!0)},[o]),u=(0,_e.useCallback)(function(){a.mark("click slider")},[a]),c=(0,_e.useCallback)(function(){r&&o(r,!1)},[r,o]);return(0,to.jsx)("div",{className:"tlui-slider__container",children:(0,to.jsxs)(YM,{"data-testid":e["data-testid"],className:"tlui-slider","area-label":"Opacity",dir:"ltr",min:0,max:n,step:1,value:r?[r]:void 0,onPointerDown:u,onValueChange:l,onPointerUp:c,title:t+" — "+s(i),children:[(0,to.jsx)(XM,{className:"tlui-slider__track",dir:"ltr",children:null!==r&&(0,to.jsx)(qM,{className:"tlui-slider__range",dir:"ltr"})}),null!==r&&(0,to.jsx)($M,{className:"tlui-slider__thumb",dir:"ltr"})]})})}var QM=_e.memo(function(e){var t=e.label,n=e.uiTypeA,r=e.uiTypeB,i=e.labelA,o=e.labelB,a=e.itemsA,s=e.itemsB,l=e.styleA,u=e.styleB,c=e.valueA,d=e.valueB,f=e.onValueChange,p=mb(),h=_e.useMemo(function(){var e,t;return null!==(e=null===(t=a.find(function(e){return"shared"===c.type&&c.value===e.value}))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"},[a,c]),v=_e.useMemo(function(){var e,t;return null!==(e=null===(t=s.find(function(e){return"shared"===d.type&&d.value===e.value}))||void 0===t?void 0:t.icon)&&void 0!==e?e:"mixed"},[s,d]);return void 0===c&&void 0===d?null:(0,to.jsxs)("div",{className:"tlui-style-panel__double-select-picker",children:[(0,to.jsx)("div",{title:p(t),className:"tlui-style-panel__double-select-picker-label",children:p(t)}),(0,to.jsxs)(XS,{id:"style panel ".concat(n," A"),children:[(0,to.jsx)(TS,{asChild:!0,children:(0,to.jsx)(Cb,{"data-testid":"style.".concat(n),title:p(i)+" — "+p(null===c?"style-panel.mixed":"".concat(n,"-style.").concat(c)),icon:h,invertIcon:!0,smallIcon:!0})}),(0,to.jsx)($S,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,to.jsx)("div",{className:so("tlui-button-grid",{"tlui-button-grid__two":a.length<4,"tlui-button-grid__four":4<=a.length}),children:a.map(function(e){return(0,to.jsx)(e_,{className:"tlui-button-grid__button",title:p(i)+" — "+p("".concat(n,"-style.").concat(e.value)),"data-testid":"style.".concat(n,".").concat(e.value),icon:e.icon,onClick:function(){return f(l,e.value,!1)},invertIcon:!0},e.value)})})})]}),(0,to.jsxs)(XS,{id:"style panel ".concat(r),children:[(0,to.jsx)(TS,{asChild:!0,children:(0,to.jsx)(Cb,{"data-testid":"style.".concat(r),title:p(o)+" — "+p(null===d?"style-panel.mixed":"".concat(r,"-style.").concat(d)),icon:v,smallIcon:!0})}),(0,to.jsx)($S,{side:"bottom",align:"end",sideOffset:0,alignOffset:-2,children:(0,to.jsx)("div",{className:so("tlui-button-grid",{"tlui-button-grid__two":a.length<4,"tlui-button-grid__four":4<=a.length}),children:s.map(function(e){return(0,to.jsx)(e_,{className:"tlui-button-grid__button",title:p(o)+" — "+p("".concat(r,"-style.").concat(e.value)),"data-testid":"style.".concat(r,".").concat(e.value),icon:e.icon,onClick:function(){return f(u,e.value,!1)}},e.value)})})})]})]})}),ZM=_e.memo(function(e){var t=e.id,n=e.label,r=e.uiType,i=e.style,o=e.items,a=e.value,s=e.onValueChange,l=mb(),u=_e.useMemo(function(){var e;return null===(e=o.find(function(e){return"shared"===a.type&&e.value===a.value}))||void 0===e?void 0:e.icon},[o,a]);return(0,to.jsxs)(XS,{id:"style panel ".concat(t),children:[(0,to.jsx)(TS,{asChild:!0,children:(0,to.jsx)(Cb,{"data-testid":"style.".concat(r),title:"mixed"===a.type?l("style-panel.mixed"):l("".concat(r,"-style.").concat(a.value)),label:n,icon:null!=u?u:"mixed"})}),(0,to.jsx)($S,{side:"left",align:"center",alignOffset:0,children:(0,to.jsx)("div",{className:so("tlui-button-grid",{"tlui-button-grid__two":o.length<3,"tlui-button-grid__three":3==o.length,"tlui-button-grid__four":4<=o.length}),children:o.map(function(e){return(0,to.jsx)(e_,{className:"tlui-button-grid__button","data-testid":"style.".concat(r,".").concat(e.value),title:l("".concat(r,"-style.").concat(e.value)),icon:e.icon,onClick:function(){return s(i,e.value,!1)}},e.value)})})})]})}),JM={color:[{value:"black",icon:"color"},{value:"grey",icon:"color"},{value:"light-violet",icon:"color"},{value:"violet",icon:"color"},{value:"blue",icon:"color"},{value:"light-blue",icon:"color"},{value:"yellow",icon:"color"},{value:"orange",icon:"color"},{value:"green",icon:"color"},{value:"light-green",icon:"color"},{value:"light-red",icon:"color"},{value:"red",icon:"color"}],fill:[{value:"none",icon:"fill-none"},{value:"semi",icon:"fill-semi"},{value:"solid",icon:"fill-solid"},{value:"pattern",icon:"fill-pattern"}],dash:[{value:"draw",icon:"dash-draw"},{value:"dashed",icon:"dash-dashed"},{value:"dotted",icon:"dash-dotted"},{value:"solid",icon:"dash-solid"}],size:[{value:"s",icon:"size-small"},{value:"m",icon:"size-medium"},{value:"l",icon:"size-large"},{value:"xl",icon:"size-extra-large"}],font:[{value:"draw",icon:"font-draw"},{value:"sans",icon:"font-sans"},{value:"serif",icon:"font-serif"},{value:"mono",icon:"font-mono"}],horizontalAlign:[{value:"start",icon:"text-align-left"},{value:"middle",icon:"text-align-center"},{value:"end",icon:"text-align-right"}],verticalAlign:[{value:"start",icon:"vertical-align-start"},{value:"middle",icon:"vertical-align-center"},{value:"end",icon:"vertical-align-end"}],geo:[{value:"rectangle",icon:"geo-rectangle"},{value:"ellipse",icon:"geo-ellipse"},{value:"triangle",icon:"geo-triangle"},{value:"diamond",icon:"geo-diamond"},{value:"pentagon",icon:"geo-pentagon"},{value:"hexagon",icon:"geo-hexagon"},{value:"octagon",icon:"geo-octagon"},{value:"star",icon:"geo-star"},{value:"rhombus",icon:"geo-rhombus"},{value:"rhombus-2",icon:"geo-rhombus-2"},{value:"oval",icon:"geo-oval"},{value:"trapezoid",icon:"geo-trapezoid"},{value:"arrow-right",icon:"geo-arrow-right"},{value:"arrow-left",icon:"geo-arrow-left"},{value:"arrow-up",icon:"geo-arrow-up"},{value:"arrow-down",icon:"geo-arrow-down"},{value:"x-box",icon:"geo-x-box"},{value:"check-box",icon:"geo-check-box"}],arrowheadStart:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],arrowheadEnd:[{value:"none",icon:"arrowhead-none"},{value:"arrow",icon:"arrowhead-arrow"},{value:"triangle",icon:"arrowhead-triangle"},{value:"square",icon:"arrowhead-square"},{value:"dot",icon:"arrowhead-dot"},{value:"diamond",icon:"arrowhead-diamond"},{value:"inverted",icon:"arrowhead-triangle-inverted"},{value:"bar",icon:"arrowhead-bar"}],spline:[{value:"line",icon:"spline-line"},{value:"cubic",icon:"spline-cubic"}]},eA=[Hr,Xr,qr,Gr],tA=function(e){var t=e.isMobile,n=mo(),r=ho("getRelevantStyles",function(){return function(e){var t,n=new fp(e.sharedStyles),r=0<e.selectedIds.length||!(null===(t=e.root.current.value)||void 0===t||!t.shapeType);if(0===n.size&&e.isIn("select")&&0===e.selectedIds.length)for(var i=0,o=eA;i<o.length;i++){var a=o[i];n.applyValue(a,e.getStyleForNextShape(a))}return 0!==n.size||r?{styles:n,opacity:e.sharedOpacity}:null}(n)},[n]),i=(0,_e.useCallback)(function(){t||(n.isChangingStyle=!1)},[n,t]);if(!r)return null;var o=r.styles,a=r.opacity,s=o.get(Ii),l=o.get(ei),u=o.get(Jr),c=void 0===s,d=void 0===l&&void 0===u,f=void 0===o.get(Fi),p=void 0===o.get($r);return(0,to.jsxs)("div",{className:"tlui-style-panel","data-ismobile":t,onPointerLeave:i,children:[(0,to.jsx)(iA,{styles:o,opacity:a}),!p&&(0,to.jsx)(oA,{styles:o}),!(c&&d&&f)&&(0,to.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[(0,to.jsx)(aA,{styles:o}),(0,to.jsx)(lA,{styles:o}),(0,to.jsx)(sA,{styles:o})]})]})};function nA(){var r=mo();return _e.useMemo(function(){return function(e,t,n){r.setStyle(e,t,n),r.isChangingStyle=!0}},[r])}var rA=[.1,.25,.5,.75,1];function iA(e){var t=e.styles,n=e.opacity,r=mo(),i=mb(),o=nA(),a=_e.useCallback(function(e,t){var n=rA[e];r.setOpacity(n,t),r.isChangingStyle=!0},[r]),s=t.get(Hr),l=t.get(qr),u=t.get(Xr),c=t.get(Gr),d=void 0!==l||void 0!==u||void 0!==c,f="mixed"===n.type?-1:rA.indexOf(F(rA,function(e){return Math.abs(e-n.value)}));return(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)("div",{className:"tlui-style-panel__section__common","aria-label":"style panel styles",children:[void 0===s?null:(0,to.jsx)(sM,{title:i("style-panel.color"),uiType:"color",style:Hr,items:JM.color,value:s,onValueChange:o}),void 0===n?null:(0,to.jsx)(GM,{"data-testid":"style.opacity",value:0<=f?f:rA.length-1,label:"mixed"===n.type?"style-panel.mixed":"opacity-style.".concat(n),onValueChange:a,steps:rA.length-1,title:i("style-panel.opacity")})]}),d&&(0,to.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel styles",children:[void 0===l?null:(0,to.jsx)(sM,{title:i("style-panel.fill"),uiType:"fill",style:qr,items:JM.fill,value:l,onValueChange:o}),void 0===u?null:(0,to.jsx)(sM,{title:i("style-panel.dash"),uiType:"dash",style:Xr,items:JM.dash,value:u,onValueChange:o}),void 0===c?null:(0,to.jsx)(sM,{title:i("style-panel.size"),uiType:"size",style:Gr,items:JM.size,value:c,onValueChange:o})]})]})}function oA(e){var t=e.styles,n=mb(),r=nA(),i=t.get($r),o=t.get(Si),a=t.get(_i);return void 0===i&&void 0===o?null:(0,to.jsxs)("div",{className:"tlui-style-panel__section","aria-label":"style panel text",children:[void 0===i?null:(0,to.jsx)(sM,{title:n("style-panel.font"),uiType:"font",style:$r,items:JM.font,value:i,onValueChange:r}),void 0===o?null:(0,to.jsxs)("div",{className:"tlui-style-panel__row",children:[(0,to.jsx)(sM,{title:n("style-panel.align"),uiType:"align",style:Si,items:JM.horizontalAlign,value:o,onValueChange:r}),void 0===a?(0,to.jsx)(Cb,{title:n("style-panel.vertical-align"),"data-testid":"vertical-align",icon:"vertical-align-center",disabled:!0}):(0,to.jsx)(ZM,{id:"geo-vertical-alignment",uiType:"verticalAlign",style:_i,items:JM.verticalAlign,value:a,onValueChange:r})]})]})}function aA(e){var t=e.styles,n=nA(),r=t.get(Ii);return void 0===r?null:(0,to.jsx)(ZM,{id:"geo",label:"style-panel.geo",uiType:"geo",style:Ii,items:JM.geo,value:r,onValueChange:n})}function sA(e){var t=e.styles,n=nA(),r=t.get(Fi);return void 0===r?null:(0,to.jsx)(ZM,{id:"spline",label:"style-panel.spline",uiType:"spline",style:Fi,items:JM.spline,value:r,onValueChange:n})}function lA(e){var t=e.styles,n=nA(),r=t.get(ei),i=t.get(Jr);return r&&i?(0,to.jsx)(QM,{label:"style-panel.arrowheads",uiTypeA:"arrowheadStart",styleA:Jr,itemsA:JM.arrowheadStart,valueA:i,uiTypeB:"arrowheadEnd",styleB:ei,itemsB:JM.arrowheadEnd,valueB:r,onValueChange:n,labelA:"style-panel.arrowhead-start",labelB:"style-panel.arrowhead-end"}):null}function uA(e){var t,n,r=e.toast,i=RE().removeToast,o=mb(),a=r.actions&&0<r.actions.length;return(0,to.jsxs)(W_,{onOpenChange:function(e){e||i(r.id)},className:"tlui-toast__container",duration:r.keepOpen?1/0:5e3,children:[r.icon&&(0,to.jsx)("div",{className:"tlui-toast__icon",children:(0,to.jsx)(wb,{icon:r.icon})}),(0,to.jsxs)("div",{className:"tlui-toast__main",children:[(0,to.jsxs)("div",{className:"tlui-toast__content",children:[(0,to.jsx)(H_,{className:"tlui-toast__title",children:r.title}),(0,to.jsx)(Y_,{className:"tlui-toast__description",children:r.description})]}),r.actions&&(0,to.jsxs)("div",{className:"tlui-toast__actions",children:[r.actions.map(function(e,t){return(0,to.jsx)(X_,{altText:e.label,asChild:!0,onClick:e.onClick,children:(0,to.jsx)(Cb,{className:"warn"===e.type?"tlui-button__warning":"tlui-button__primary",children:e.label})},t)}),a&&(0,to.jsx)(q_,{asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-toast__close",style:{marginLeft:"auto"},children:null!==(t=r.closeLabel)&&void 0!==t?t:o("toast.close")})})]})]}),!a&&(0,to.jsx)(q_,{asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-toast__close",children:null!==(n=r.closeLabel)&&void 0!==n?n:o("toast.close")})})]})}var cA=_e.memo(function(){var e=RE().toasts;return(0,to.jsx)(to.Fragment,{children:e.map(function(e){return(0,to.jsx)(uA,{toast:e},e.id)})})});function dA(){var t=RE().toasts,e=Ce(_e.useState(!1),2),n=e[0],r=e[1];return _e.useEffect(function(){var e=!1;return t.length?r(!0):setTimeout(function(){e||r(!1)},1e3),function(){e=!0}},[t.length,r]),n?(0,to.jsx)(C_,{className:"tlui-toast__viewport"}):null}function fA(){var t=mo(),e=mb(),n=ho("current color",function(){var e=t.sharedStyles.get(Hr);return e?"mixed"===e.type?null:"var(--palette-".concat(e,")"):"var(--color-muted-1)"},[t]),r=ho("isHandOrEraserToolActive",function(){return t.isInAny("hand","zoom","eraser")},[t]),i=(0,_e.useCallback)(function(e){e||(t.isChangingStyle=!1)},[t]);return(0,to.jsxs)(BT,{id:"style menu",onOpenChange:i,children:[(0,to.jsx)(FT,{disabled:r,children:(0,to.jsx)(Cb,{className:"tlui-toolbar__tools__button tlui-toolbar__styles__button","data-testid":"mobile.styles",style:{color:null!=n?n:"var(--color-text)"},title:e("style-panel.title"),children:(0,to.jsx)(wb,{icon:n?"blob":"mixed"})})}),(0,to.jsx)(UT,{side:"top",align:"end",children:(0,to.jsx)(tA,{isMobile:!0})})]})}var pA=["select","hand","draw","eraser","text","zoom","laser"];function hA(e){var t=e.activeToolId,n=mo(),r=cP(),i=mb(),o=ho("is tool locked",function(){return n.instanceState.isToolLocked},[n]);return!t||pA.includes(t)?null:(0,to.jsx)(Cb,{title:i("action.toggle-tool-lock"),className:so("tlui-toolbar__lock-button",{"tlui-toolbar__lock-button__mobile":r<5}),icon:o?"lock":"unlock",onClick:function(){return n.updateInstanceState({isToolLocked:!o})},smallIcon:!0})}var vA=function(){var e=mo(),t=mb(),a=cP(),s=_e.useRef(void 0),n=SP(),l=function(){var e=_e.useContext(OP);if(!e)throw new Error("useToolbarSchema must be used within a ToolbarSchemaProvider");return e}(),r=l.find(function(e){return"laser"===e.toolItem.id}),i=ho("current tool id",function(){return e.currentToolId},[e]),o="hand"===i,u=ho("geo",function(){return e.sharedStyles.getAsKnownValue(Ii)},[e]),c=!n,d=!(n||o),f=function(e){return e.label?"".concat(t(e.label)," ").concat(e.kbd?_b(e.kbd):""):""},p=l.find(function(e){return yA(e.toolItem,i,u)}),h=_e.useMemo(function(){for(var e,t=[],n=[],r=Math.min(8,5+a),i=4;i<l.length;i++){var o=l[i];i<r?t.push(o):(o===p&&(e=o),n.push(o))}return e||(s.current||(s.current=n[0]),e=s.current,n.includes(e)||(e=n[0])),s.current=e,n.length<=2&&(t.push.apply(t,n),n.length=0),{itemsInPanel:t,itemsInDropdown:n,dropdownFirstItem:e}},[l,p,a]),v=h.itemsInPanel,g=h.itemsInDropdown,m=h.dropdownFirstItem;return(0,to.jsx)("div",{className:"tlui-toolbar",children:(0,to.jsxs)("div",{className:"tlui-toolbar__inner",children:[(0,to.jsxs)("div",{className:"tlui-toolbar__left",children:[!n&&(0,to.jsxs)("div",{className:so("tlui-toolbar__extras",{"tlui-toolbar__extras__hidden":!d}),children:[a<6&&(0,to.jsxs)("div",{className:"tlui-toolbar__extras__controls",children:[(0,to.jsx)(ZT,{}),(0,to.jsx)(GT,{}),(0,to.jsx)(QT,{}),(0,to.jsx)(VT,{}),(0,to.jsx)(KT,{})]}),(0,to.jsx)(hA,{activeToolId:i})]}),(0,to.jsxs)("div",{className:so("tlui-toolbar__tools",{"tlui-toolbar__tools__mobile":a<5}),children:[l.slice(0,2).map(function(e){var t=e.toolItem;return(0,to.jsx)(mA,{item:t,title:f(t),isSelected:yA(t,i,u)},t.id)}),n&&r&&(0,to.jsx)(mA,{item:r.toolItem,title:f(r.toolItem),isSelected:yA(r.toolItem,i,u)},r.toolItem.id),c&&(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)("div",{className:"tlui-toolbar__divider"}),l.slice(2,4).map(function(e){var t=e.toolItem;return(0,to.jsx)(mA,{item:t,title:f(t),isSelected:yA(t,i,u)},t.id)}),(0,to.jsx)("div",{className:"tlui-toolbar__divider"}),v.map(function(e){var t=e.toolItem;return(0,to.jsx)(mA,{item:t,title:f(t),isSelected:yA(t,i,u)},t.id)}),g.length?(0,to.jsxs)(to.Fragment,{children:[(0,to.jsx)(mA,{item:m.toolItem,title:f(m.toolItem),isSelected:yA(m.toolItem,i,u)},m.toolItem.id),(0,to.jsxs)(XS,{id:"toolbar overflow",modal:!1,children:[(0,to.jsx)(qS,{children:(0,to.jsx)(Cb,{className:"tlui-toolbar__tools__button tlui-toolbar__overflow",icon:"chevron-up","data-testid":"tools.more",title:t("tool-panel.more")})}),(0,to.jsx)($S,{side:"top",align:"center",children:(0,to.jsx)(gA,{toolbarItems:g})})]})]}):null]})]})]}),a<5&&!n&&(0,to.jsx)("div",{className:"tlui-toolbar__tools",children:(0,to.jsx)(fA,{})})]})})},gA=po(function(e){var t=e.toolbarItems,u=mb();return(0,to.jsx)("div",{className:"tlui-button-grid__four tlui-button-grid__reverse",children:t.map(function(e){var t,n=e.toolItem,r=n.id,i=n.meta,o=n.kbd,a=n.label,s=n.onSelect,l=n.icon;return(0,to.jsx)(e_,{className:"tlui-button-grid__button","data-testid":"tools.".concat(r),"data-tool":r,"data-geo":null!==(t=null==i?void 0:i.geo)&&void 0!==t?t:"","aria-label":a,onClick:function(){return s("toolbar")},title:a?"".concat(u(a)," ").concat(o?_b(o):""):"",icon:l},r)})})});function mA(e){var t,n,r=e.item,i=e.title,o=e.isSelected;return(0,to.jsx)(Cb,{className:"tlui-toolbar__tools__button","data-testid":"tools.".concat(r.id),"data-tool":r.id,"data-geo":null!==(t=null===(n=r.meta)||void 0===n?void 0:n.geo)&&void 0!==t?t:"","aria-label":r.label,title:i,icon:r.icon,"data-state":o?"selected":void 0,onClick:function(){return r.onSelect("toolbar")},onTouchStart:function(e){Oa(e),r.onSelect("toolbar")}})}var yA=function(e,t,n){var r,i;return null!==(r=e.meta)&&void 0!==r&&r.geo?"geo"===t&&n===(null===(i=e.meta)||void 0===i?void 0:i.geo):t===e.id},bA="undefined"!=typeof navigator&&0<navigator.userAgent.toLowerCase().indexOf("firefox");function wA(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),function(){n(window.event)})}function xA(e,t){for(var n=t.slice(0,t.length-1),r=0;r<n.length;r++)n[r]=e[n[r].toLowerCase()];return n}function kA(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");0<=n;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var SA={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":bA?173:189,"=":bA?61:187,";":bA?59:186,"'":222,"[":219,"]":221,"\\":220},_A={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},EA={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},PA={16:!1,18:!1,17:!1,91:!1},CA={},IA=1;IA<20;IA++)SA["f".concat(IA)]=111+IA;var TA=[],MA=!1,AA="all",jA=[],OA=function(e){return SA[e.toLowerCase()]||_A[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function LA(e){AA=e||"all"}function zA(){return AA||"all"}var RA=function(e){var t=e.key,a=e.scope,s=e.method,n=e.splitKey,l=void 0===n?"+":n;kA(t).forEach(function(e){var t=e.split(l),n=t.length,r=t[n-1],i="*"===r?"*":OA(r);if(CA[i]){a||(a=zA());var o=1<n?xA(_A,t):[];CA[i]=CA[i].filter(function(e){return!((!s||e.method===s)&&e.scope===a&&function(e,t){for(var n=e.length>=t.length?e:t,r=e.length>=t.length?t:e,i=!0,o=0;o<n.length;o++)-1===r.indexOf(n[o])&&(i=!1);return i}(e.mods,o))})}})};function NA(e,t,n,r){var i;if(t.element===r&&(t.scope===n||"all"===t.scope)){for(var o in i=0<t.mods.length,PA)Object.prototype.hasOwnProperty.call(PA,o)&&(!PA[o]&&-1<t.mods.indexOf(+o)||PA[o]&&-1===t.mods.indexOf(+o))&&(i=!1);(0!==t.mods.length||PA[16]||PA[18]||PA[17]||PA[91])&&!i&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function DA(n,e){var t=CA["*"],r=n.keyCode||n.which||n.charCode;if(BA.filter.call(this,n)){if(93!==r&&224!==r||(r=91),-1===TA.indexOf(r)&&229!==r&&TA.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(e){var t=EA[e];n[e]&&-1===TA.indexOf(t)?TA.push(t):!n[e]&&-1<TA.indexOf(t)?TA.splice(TA.indexOf(t),1):"metaKey"===e&&n[e]&&3===TA.length&&(n.ctrlKey||n.shiftKey||n.altKey||(TA=TA.slice(TA.indexOf(t))))}),r in PA){for(var i in PA[r]=!0,_A)_A[i]===r&&(BA[i]=!0);if(!t)return}for(var o in PA)Object.prototype.hasOwnProperty.call(PA,o)&&(PA[o]=n[EA[o]]);n.getModifierState&&(!n.altKey||n.ctrlKey)&&n.getModifierState("AltGraph")&&(-1===TA.indexOf(17)&&TA.push(17),-1===TA.indexOf(18)&&TA.push(18),PA[17]=!0,PA[18]=!0);var a=zA();if(t)for(var s=0;s<t.length;s++)t[s].scope===a&&("keydown"===n.type&&t[s].keydown||"keyup"===n.type&&t[s].keyup)&&NA(n,t[s],a,e);if(r in CA)for(var l=0;l<CA[r].length;l++)if(("keydown"===n.type&&CA[r][l].keydown||"keyup"===n.type&&CA[r][l].keyup)&&CA[r][l].key){for(var u=CA[r][l],c=u.splitKey,d=u.key.split(c),f=[],p=0;p<d.length;p++)f.push(OA(d[p]));f.sort().join("")===TA.sort().join("")&&NA(n,u,a,e)}}}function BA(e,t,n){TA=[];var r,i=kA(e),o=[],a="all",s=document,l=0,u=!1,c=!0,d="+",f=!1;for(void 0===n&&"function"==typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(a=t.scope),t.element&&(s=t.element),t.keyup&&(u=t.keyup),void 0!==t.keydown&&(c=t.keydown),void 0!==t.capture&&(f=t.capture),"string"==typeof t.splitKey&&(d=t.splitKey)),"string"==typeof t&&(a=t);l<i.length;l++)o=[],1<(e=i[l].split(d)).length&&(o=xA(_A,e)),(e="*"===(e=e[e.length-1])?"*":OA(e))in CA||(CA[e]=[]),CA[e].push({keyup:u,keydown:c,scope:a,mods:o,shortcut:i[l],method:n,key:i[l],splitKey:d,element:s});void 0!==s&&(r=s,!(-1<jA.indexOf(r)))&&window&&(jA.push(s),wA(s,"keydown",function(e){DA(e,s)},f),MA||(MA=!0,wA(window,"focus",function(){TA=[]},f)),wA(s,"keyup",function(e){DA(e,s),function(e){var t=e.keyCode||e.which||e.charCode,n=TA.indexOf(t);if(0<=n&&TA.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&TA.splice(0,TA.length),93!==t&&224!==t||(t=91),t in PA)for(var r in PA[t]=!1,_A)_A[r]===t&&(BA[r]=!1)}(e)},f))}var FA={getPressedKeyString:function(){return TA.map(function(e){return n=e,Object.keys(SA).find(function(e){return SA[e]===n})||(t=e,Object.keys(_A).find(function(e){return _A[e]===t}))||String.fromCharCode(e);var t,n})},setScope:LA,getScope:zA,deleteScope:function(e,t){var n,r;for(var i in e||(e=zA()),CA)if(Object.prototype.hasOwnProperty.call(CA,i))for(n=CA[i],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++;zA()===e&&LA(t||"all")},getPressedKeyCodes:function(){return TA.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=OA(e)),-1!==TA.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,r=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(r=!1),r},trigger:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(CA).forEach(function(e){CA[e].filter(function(e){return e.scope===n&&e.shortcut===t}).forEach(function(e){e&&e.method&&e.method()})})},unbind:function(e){if(void 0===e)Object.keys(CA).forEach(function(e){return delete CA[e]});else if(Array.isArray(e))e.forEach(function(e){e.key&&RA(e)});else if("object"==typeof e)e.key&&RA(e);else if("string"==typeof e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],o=n[1];"function"==typeof i&&(o=i,i=""),RA({key:e,scope:i,method:o,splitKey:"+"})}},keyMap:SA,modifier:_A,modifierMap:EA};for(var UA in FA)Object.prototype.hasOwnProperty.call(FA,UA)&&(BA[UA]=FA[UA]);if("undefined"!=typeof window){var KA=window.hotkeys;BA.noConflict=function(e){return e&&window.hotkeys===BA&&(window.hotkeys=KA),BA},window.hotkeys=BA}var VA=["copy","cut","paste","asset"];function WA(e){return function(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");0<=n;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}(e).map(function(e){var t=e.split("");return 1===t.length?t[0]:"!"===t[0]?"shift+".concat(t[1]):"?"===t[0]?"alt+".concat(t[1]):"$"===t[0]?"!"===t[1]?"cmd+shift+".concat(t[2],",ctrl+shift+").concat(t[2]):"?"===t[1]?"cmd+⌥+".concat(t[2],",ctrl+alt+").concat(t[2]):"cmd+".concat(t[1],",ctrl+").concat(t[1]):e}).join(",")}var HA=["shareZone","topZone","renderDebugMenuItems","children","hideUi"],YA=["children","hideUi"],XA=_e.memo(function(e){var t=e.shareZone,n=e.topZone,r=e.renderDebugMenuItems,i=e.children,o=e.hideUi,a=Gt(e,HA);return(0,to.jsx)(RP,Pe(Pe({},a),{},{children:(0,to.jsx)(qA,{hideUi:o,shareZone:t,topZone:n,renderDebugMenuItems:r,children:i})}))}),qA=_e.memo(function(e){var t=e.children,n=e.hideUi,r=Gt(e,YA);return(0,to.jsxs)(to.Fragment,{children:[t,n?null:(0,to.jsx)($A,Pe({},r))]})}),$A=_e.memo(function(e){var t,r,o,a,s,u,c,d,f,p,n=e.shareZone,i=e.topZone,l=e.renderDebugMenuItems,h=mo(),v=mb(),g=cP(),m=ho("isReadOnlyMode",function(){return h.isReadOnly},[h]),y=ho("focus",function(){return h.instanceState.isFocusMode},[h]),b=ho("debug",function(){return h.instanceState.isDebugMode},[h]);u=mo(),c=xE(),d=SP(),f=GE(),p=wP(),(0,_e.useEffect)(function(){if(c){for(var n=u.getContainer(),e=function(e,t){BA(e,{element:n,scope:u.store.id},t)},r=function(){return u.isMenuOpen||null!==u.editingId||u.crashingError},t=function(){var t=o[i];return t.kbd?d&&!t.readonlyOk||VA.includes(t.id)?"continue":void e(WA(t.kbd),function(e){r()||(Oa(e),t.onSelect("kbd"))}):"continue"},i=0,o=Object.values(f);i<o.length;i++)t();for(var a=function(){var t=l[s];return!t.kbd||!t.readonlyOk&&u.isReadOnly||VA.includes(t.id)?"continue":void e(WA(t.kbd),function(e){r()||(Oa(e),t.onSelect("kbd"))})},s=0,l=Object.values(p);s<l.length;s++)a();return BA.setScope(u.store.id),function(){BA.deleteScope(u.store.id)}}},[f,p,d,u,c]),o=mo(),a=KS(),s=xE(),(0,_e.useEffect)(function(){if(s){var e=function(){0===o.selectedIds.length||null!==o.editingId||SE(o)||(OE(o),a("copy",{source:"kbd"}))},t=!1,n=function(e){1===e.button&&(t=!0,requestAnimationFrame(function(){t=!1}))},r=function(e){t?e.stopPropagation():null!==o.editingId||SE(o)||(e.clipboardData&&!o.inputs.shiftKey?TE(o,e.clipboardData):navigator.clipboard.read().then(function(e){Array.isArray(e)&&e[0]instanceof ClipboardItem&&ME(o,e,o.inputs.currentPagePoint)}),a("paste",{source:"kbd"}))};return document.addEventListener("copy",e),document.addEventListener("cut",i),document.addEventListener("paste",r),document.addEventListener("pointerup",n),function(){document.removeEventListener("copy",e),document.removeEventListener("cut",i),document.removeEventListener("paste",r),document.removeEventListener("pointerup",n)}}function i(){0===o.selectedIds.length||null!==o.editingId||SE(o)||(OE(o),o.deleteShapes(),a("cut",{source:"kbd"}))}},[o,a,s]),t=mo(),r=RE().addToast,(0,_e.useEffect)(function(){function e(e){var t=e.name,n=e.count;r({title:"Maximum Shapes Reached",description:"You've reached the maximum number of shapes allowed on ".concat(t," (").concat(n,"). Please delete some shapes or move to a different page to continue.")})}return t.addListener("max-shapes",e),function(){t.removeListener("max-shapes",e)}},[t,r]);var w=GE()["toggle-focus-mode"];return(0,to.jsx)(S_,{children:(0,to.jsxs)("main",{"data-tldraw-area":"active-drawing",className:so("tlui-layout",{"tlui-layout__mobile":g<5}),children:[y?(0,to.jsx)("div",{className:"tlui-layout__top",children:(0,to.jsx)(Cb,{className:"tlui-focus-button",title:"".concat(v("focus-mode.toggle-focus-mode")),icon:"dot",onClick:function(){return w.onSelect("menu")}})}):(0,to.jsxs)(to.Fragment,{children:[(0,to.jsxs)("div",{className:"tlui-layout__top",children:[(0,to.jsxs)("div",{className:"tlui-layout__top__left",children:[(0,to.jsx)(JT,{}),(0,to.jsxs)("div",{className:"tlui-helper-buttons",children:[(0,to.jsx)(oM,{}),(0,to.jsx)(DP,{}),(0,to.jsx)(aM,{})]})]}),(0,to.jsx)("div",{className:"tlui-layout__top__center",children:i}),(0,to.jsxs)("div",{className:"tlui-layout__top__right",children:[n,5<=g&&!m&&(0,to.jsx)("div",{className:"tlui-style-panel__wrapper",children:(0,to.jsx)(tA,{})})]})]}),(0,to.jsxs)("div",{className:"tlui-layout__bottom",children:[(0,to.jsxs)("div",{className:"tlui-layout__bottom__main",children:[(0,to.jsx)(iM,{}),(0,to.jsx)(vA,{}),4<=g&&(0,to.jsx)(JP,{})]}),b&&(0,to.jsx)(FP,{renderDebugMenuItems:null!=l?l:null})]})]}),(0,to.jsx)(cA,{}),(0,to.jsx)($P,{}),(0,to.jsx)(dA,{}),(0,to.jsx)(GP,{})]})})}),GA=["__scopeContextMenu","disabled"],QA=["__scopeContextMenu"],ZA=["__scopeContextMenu"],JA=["__scopeContextMenu"],ej=["__scopeContextMenu"],tj=["__scopeContextMenu"],nj=["__scopeContextMenu"],rj=["__scopeContextMenu"],ij="ContextMenu",oj=Ce(tm(ij,[rk]),2),aj=oj[0],sj=(oj[1],rk()),lj=Ce(aj(ij),2),uj=lj[0],cj=lj[1],dj=(0,_e.forwardRef)(function(e,t){var n=e.__scopeContextMenu,r=e.disabled,i=void 0!==r&&r,o=Gt(e,GA),a=cj("ContextMenuTrigger",n),s=sj(n),l=(0,_e.useRef)({x:0,y:0}),u=(0,_e.useRef)({getBoundingClientRect:function(){return DOMRect.fromRect(Pe({width:0,height:0},l.current))}}),c=(0,_e.useRef)(0),d=(0,_e.useCallback)(function(){return window.clearTimeout(c.current)},[]),f=function(e){l.current={x:e.clientX,y:e.clientY},a.onOpenChange(!0)};return(0,_e.useEffect)(function(){return d},[d]),(0,_e.useEffect)(function(){i&&d()},[i,d]),(0,_e.createElement)(_e.Fragment,null,(0,_e.createElement)(qk,$g({},s,{virtualRef:u})),(0,_e.createElement)(gm.span,$g({"data-state":a.open?"open":"closed","data-disabled":i?"":void 0},o,{ref:t,style:Pe({WebkitTouchCallout:"none"},e.style),onContextMenu:i?e.onContextMenu:Gg(e.onContextMenu,function(e){d(),f(e),e.preventDefault()}),onPointerDown:i?e.onPointerDown:Gg(e.onPointerDown,yj(function(e){d(),c.current=window.setTimeout(function(){return f(e)},700)})),onPointerMove:i?e.onPointerMove:Gg(e.onPointerMove,yj(d)),onPointerCancel:i?e.onPointerCancel:Gg(e.onPointerCancel,yj(d)),onPointerUp:i?e.onPointerUp:Gg(e.onPointerUp,yj(d))})))}),fj=(0,_e.forwardRef)(function(n,e){var t=n.__scopeContextMenu,r=Gt(n,ZA),i=cj("ContextMenuContent",t),o=sj(t),a=(0,_e.useRef)(!1);return(0,_e.createElement)(Gk,$g({},o,r,{ref:e,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:function(e){var t;null===(t=n.onCloseAutoFocus)||void 0===t||t.call(n,e),!e.defaultPrevented&&a.current&&e.preventDefault(),a.current=!1},onInteractOutside:function(e){var t;null===(t=n.onInteractOutside)||void 0===t||t.call(n,e),e.defaultPrevented||i.modal||(a.current=!0)},style:Pe(Pe({},n.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))}),pj=(0,_e.forwardRef)(function(e,t){var n=e.__scopeContextMenu,r=Gt(e,JA),i=sj(n);return(0,_e.createElement)(Qk,$g({},i,r,{ref:t}))}),hj=(0,_e.forwardRef)(function(e,t){var n=e.__scopeContextMenu,r=Gt(e,ej),i=sj(n);return(0,_e.createElement)(Zk,$g({},i,r,{ref:t}))}),vj=(0,_e.forwardRef)(function(e,t){var n=e.__scopeContextMenu,r=Gt(e,tj),i=sj(n);return(0,_e.createElement)(Jk,$g({},i,r,{ref:t}))}),gj=(0,_e.forwardRef)(function(e,t){var n=e.__scopeContextMenu,r=Gt(e,nj),i=sj(n);return(0,_e.createElement)(nS,$g({},i,r,{ref:t}))}),mj=(0,_e.forwardRef)(function(e,t){var n=e.__scopeContextMenu,r=Gt(e,rj),i=sj(n);return(0,_e.createElement)(rS,$g({},i,r,{ref:t,style:Pe(Pe({},e.style),{},{"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});function yj(t){return function(e){return"mouse"!==e.pointerType?t(e):void 0}}var bj=function(e){var t=e.__scopeContextMenu,n=e.children,r=e.onOpenChange,i=e.dir,o=e.modal,a=void 0===o||o,s=Ce((0,_e.useState)(!1),2),l=s[0],u=s[1],c=sj(t),d=am(r),f=(0,_e.useCallback)(function(e){u(e),d(e)},[d]);return(0,_e.createElement)(uj,{scope:t,open:l,onOpenChange:f,modal:a},(0,_e.createElement)(Xk,$g({},c,{dir:i,open:l,onOpenChange:f,modal:a}),n))},wj=dj,xj=function(e){var t=e.__scopeContextMenu,n=Gt(e,QA),r=sj(t);return(0,_e.createElement)($k,$g({},r,n))},kj=fj,Sj=pj,_j=hj,Ej=vj,Pj=function(e){var t=e.__scopeContextMenu,n=e.children,r=e.onOpenChange,i=e.open,o=e.defaultOpen,a=sj(t),s=Ce(sm({prop:i,defaultProp:o,onChange:r}),2),l=s[0],u=s[1];return(0,_e.createElement)(tS,$g({},a,{open:l,onOpenChange:u}),n)},Cj=gj,Ij=mj,Tj=po(function(){var r=mo(),e=qa(),t=r.pages,n=r.currentPageId,i=mb(),o=RE().addToast;return(0,to.jsxs)(Pj,{children:[(0,to.jsx)(Cj,{dir:"ltr",asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button",label:"context-menu.move-to-page","data-testid":"menu-item.move-to-page",icon:"chevron-right"})}),(0,to.jsx)(xj,{container:e,dir:"ltr",children:(0,to.jsxs)(Ij,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:[(0,to.jsx)(Sj,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.pages",children:t.map(function(t){return(0,to.jsx)(_j,{disabled:n===t.id,onSelect:function(){r.mark("move_shapes_to_page"),r.moveShapesToPage(r.selectedIds,t.id);var e=r.getPageById(t.id);e&&o({title:"Changed Page",description:"Moved to ".concat(e.name,"."),actions:[{label:"Go Back",type:"primary",onClick:function(){r.mark("change-page"),r.setCurrentPageId(n)}}]})},asChild:!0,children:(0,to.jsx)(Cb,{title:t.name,className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:(0,to.jsx)("span",{children:t.name})})},t.id)})},"pages"),(0,to.jsx)(Sj,{dir:"ltr",className:"tlui-menu__group","data-testid":"menu-item.new-page",children:(0,to.jsx)(_j,{onSelect:function(){r.mark("move_shapes_to_page");var e=mn.createId(),t=r.selectedIds,n=r.currentPageId;r.batch(function(){r.createPage("Page 1",e),r.setCurrentPageId(n),r.moveShapesToPage(t,e)})},asChild:!0,children:(0,to.jsx)(Cb,{title:i("context.pages.new-page"),className:"tlui-menu__button tlui-context-menu__move-to-page__name",children:i("context.pages.new-page")})},"new-page")},"new-page")]})})]})}),Mj=function(e){var t=e.children,a=mo(),n=mP(),r=Ce(VS("context menu",(0,_e.useCallback)(function(e){if(e){if(a.isCoarsePointer){var t=a.selectedShapes,n=a.inputs.currentPagePoint,r=a.getShapesAtPoint(n);if(!a.selectedShapes.length||!r.some(function(e){return t.includes(e)})){var i=r.filter(function(e){return a.isShapeOrAncestorLocked(e)});i.length&&a.select.apply(a,de(i.map(function(e){return e.id})))}}}else{var o=a.onlySelectedShape;o&&a.isShapeOrAncestorLocked(o)&&a.setSelectedIds([])}},[a])),2),i=(r[0],r[1]),o=SP(),s=0===n.length||o&&n.every(function(e){return!e.readonlyOk}),l=!ho("isSelectToolActive",function(){return"select"===a.currentToolId},[a])||s;return(0,to.jsxs)(bj,{dir:"ltr",onOpenChange:i,children:[(0,to.jsx)(wj,{onContextMenu:l?Oa:void 0,dir:"ltr",disabled:l,children:t}),(0,to.jsx)(Aj,{})]})};function Aj(){var t=mo(),v=mb(),e=mP(),n=Ce(VS("context menu sub"),2),g=(n[0],n[1]),m=SP(),y=cP(),b=qa(),r=Ce((0,_e.useState)(!1),2),w=r[0],x=r[1];return(0,to.jsx)(xj,{dir:"ltr",container:b,children:(0,to.jsx)(kj,{className:"tlui-menu scrollable",alignOffset:-4,collisionPadding:4,onContextMenu:Oa,children:e.map(function(e){return function t(n,r,e,i){if(m&&!r.readonlyOk)return null;switch(r.type){case"custom":if("MOVE_TO_PAGE_MENU"===r.id)return(0,to.jsx)(Tj,{},r.id);break;case"group":return(0,to.jsx)(Sj,{dir:"ltr",className:so("tlui-menu__group",{"tlui-menu__group__small":"submenu"===(null==e?void 0:e.type)}),"data-testid":"menu-item.".concat(r.id),children:r.children.map(function(e){return t(n,e,r,i+1)})},r.id);case"submenu":return(0,to.jsxs)(Pj,{onOpenChange:g,children:[(0,to.jsx)(Cj,{dir:"ltr",disabled:r.disabled,asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button",label:r.label,"data-testid":"menu-item.".concat(r.id),icon:"chevron-right"})}),(0,to.jsx)(xj,{container:b,dir:"ltr",children:(0,to.jsx)(Ij,{className:"tlui-menu",sideOffset:-4,collisionPadding:4,children:r.children.map(function(e){return t(n,e,r,i+1)})})})]},r.id);case"item":if(m&&!r.readonlyOk)return null;var o=r.actionItem,a=o.id,s=o.checkbox,l=o.contextMenuLabel,u=o.label,c=o.onSelect,d=o.kbd,f=o.icon,p=null!=l?l:u,h=p?v(p):void 0;return s?(0,to.jsxs)(Ej,{className:"tlui-button tlui-menu__button tlui-menu__checkbox-item",dir:"ltr",disabled:r.disabled,onSelect:function(e){c("context-menu"),Oa(e)},title:h||void 0,checked:r.checked,children:[(0,to.jsx)("div",{className:"tlui-menu__checkbox-item__check",style:{transformOrigin:"75% center",transform:"scale(".concat(r.checked?1:.5,")"),opacity:r.checked?1:.5},children:(0,to.jsx)(wb,{small:!0,icon:r.checked?"check":"checkbox-empty"})}),h&&(0,to.jsx)("span",{children:h}),d&&(0,to.jsx)(Eb,{children:d})]},a):(0,to.jsx)(_j,{dir:"ltr",asChild:!0,children:(0,to.jsx)(Cb,{className:"tlui-menu__button","data-testid":"menu-item.".concat(a),kbd:d,label:p,disabled:r.disabled,iconLeft:y<3&&2<i?f:void 0,onClick:function(){w?x(!1):c("context-menu")}})},a)}}(t,e,null,0)})})})}var jj=["children"];function Oj(e){var t=e.children,n=Gt(e,jj),r=Pe(Pe({},n),{},{shapes:(0,_e.useMemo)(function(){var e;return[].concat(de(lp),de(null!==(e=n.shapes)&&void 0!==e?e:[]))},[n.shapes]),tools:(0,_e.useMemo)(function(){var e;return[].concat(de(Sg),de(null!==(e=n.tools)&&void 0!==e?e:[]))},[n.tools])});return(0,to.jsx)(ig,Pe(Pe({},r),{},{children:(0,to.jsxs)(XA,Pe(Pe({},r),{},{children:[(0,to.jsx)(Mj,{children:(0,to.jsx)(Fu,{})}),t]}))}))}function Lj(){return(0,to.jsx)("div",{className:"tldraw__editor",children:(0,to.jsx)(Oj,{})})}var zj;t.createRoot(document.getElementById("root")).render((0,to.jsx)(_e.StrictMode,{children:(0,to.jsx)(function(){return(0,to.jsx)("div",{className:"tldraw__editor",children:(0,to.jsx)(Lj,{})})},{})})),zj&&zj instanceof Function&&Rj.e(27).then(Rj.bind(Rj,4027)).then(function(e){var t=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;t(zj),n(zj),r(zj),i(zj),o(zj)})}()}()</script>